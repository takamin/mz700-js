!function(){return function e(n,t,r){function c(i,s){if(!t[i]){if(!n[i]){var m="function"==typeof require&&require;if(!s&&m)return m(i,!0);if(o)return o(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=t[i]={exports:{}};n[i][0].call(u.exports,function(e){return c(n[i][1][e]||e)},u,u.exports,e,n,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)c(r[i]);return c}}()({1:[function(e,n,t){var r=function(e){this._m_on=!1,this._play=!1,this._rec=!1,this._motor=!1,this._wdata=null,this._twdata=null,this._rbit=null,this._trdata=null,this._cmt=null,this._pos=0,this._motorCallback=e,this._readTopBlank=0};r.RDATA_TOP_BLANK_LEN=1,r.RDATA_CYCLE_HI_LONG=1500,r.RDATA_CYCLE_HI_SHORT=700,r.RDATA_CYCLE_LO=700,r.prototype.isCmtSet=function(){return null!=this._cmt},r.prototype.getCmt=function(){return this._cmt},r.prototype.setCmt=function(e){this.motor()&&this.stop(),this._cmt=e,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0},r.prototype.play=function(){var e=this.motor();null!=this._cmt&&(this._play=!0),!e&&this.motor()&&this._motorCallback(!0)},r.prototype.rec=function(){var e=this.motor();null!=this._cmt&&(this._play=!0,this._rec=!0),!e&&this.motor()&&this._motorCallback(!0)},r.prototype.stop=function(){var e=this.motor();this._play=!1,this._rec=!1,e&&!this.motor()&&this._motorCallback(!1)},r.prototype.ejectCmt=function(){this.stop();var e=this._cmt;return this._cmt=null,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0,e},r.prototype.m_on=function(e){var n=this.motor();!this._m_on&&e&&(this._motor=!this._motor),this._m_on=e,!n&&this.motor()&&this._motorCallback(!0),n&&!this.motor()&&this._motorCallback(!1)},r.prototype.motor=function(){return null!=this._cmt&&this._play&&this._motor},r.prototype.wdata=function(e,n){if(this.motor()&&this._rec&&this._wdata!=e)if(this._wdata=e,e)this._twdata=n;else{null==this._twdata&&(this._twdata=n);var t=n-this._twdata>1400;this._pos<this._cmt.length?(this._cmt[this._pos]=t,this._pos++):(this._cmt.push(t),this._pos=this._cmt.length)}},r.prototype.rdata=function(e){if(this.motor()&&this._pos<this._cmt.length){if(0==this._pos&&this._readTopBlank<r.RDATA_TOP_BLANK_LEN)return++this._readTopBlank,!1;if(this._pos>=this._cmt.length)return console.log("MZ_DataRecorder stopped at the end of CMT."),this.stop(),!1;null==this._rbit&&(this._rbit=this._cmt[this._pos],this._pos++,this._trdata=e);var n=this._rbit?r.RDATA_CYCLE_HI_LONG:r.RDATA_CYCLE_HI_SHORT,t=e-this._trdata;return t>=n+r.RDATA_CYCLE_LO&&(this._rbit=null),t<n}return null},n.exports=r},{}],2:[function(e,n,t){var r=function(e,n){var t=function(e,n){return(255&e[n])+256*(255&e[n+1])};this.attr=function(e,n){return 255&e[n]}(e,n+0);var r=function(e,n,t){for(var r="",c=n;c<t&&13!=e[c];c++)0!=e[c]&&(r+=String.fromCharCode(e[c]));return r}(e,n+1,n+18);this.filename=r,this.file_size=t(e,n+18),this.addr_load=t(e,n+20),this.addr_exec=t(e,n+22);for(var c=[],o=0;o<128;o++)c.push(e[n+o]);this.buffer=c};r.get1stFilename=function(e){return e&&Array.isArray(e)&&e.length>0?e[0].header.filename:null},r.createNew=function(){for(var e=new Array(128),n=0;n<128;n++)e[n]=0;return e[0]=1,new r(e,0)},r.prototype.setFilename=function(e){var n;for(e.length>16&&(e=e.substr(0,16)),this.filename=e,n=0;n<=16;n++)this.buffer[1+n]=0;for(e+="\r",n=0;n<e.length;n++)this.buffer[1+n]=255&e.charCodeAt(n)},r.prototype.setFilesize=function(e){this.file_size=e,this.buffer[18]=e>>0&255,this.buffer[19]=e>>8&255},r.prototype.setAddrLoad=function(e){this.addr_load=e,this.buffer[20]=e>>0&255,this.buffer[21]=e>>8&255},r.prototype.setAddrExec=function(e){this.addr_exec=e,this.buffer[22]=e>>0&255,this.buffer[23]=e>>8&255},r.prototype.getHeadline=function(){return[";======================================================","; attribute :   "+this.attr.HEX(2)+"H","; filename  :   '"+this.filename+"'","; filesize  :   "+this.file_size+" bytes","; load addr :   "+this.addr_load.HEX(4)+"H","; start addr:   "+this.addr_exec.HEX(4)+"H",";======================================================"].join("\n")},n.exports=r},{}],3:[function(e,n,t){var r=e("./mz-tape-header"),c=function(e){this._index=0,this._tapeData=e};c.prototype.isThereSignal=function(e,n){for(var t=0;t<n;t++)if(this._tapeData[this._index+t]!=e)return!1;return this._index+=n,!0},c.prototype.recognizeStartingMark=function(){return!!this.isThereSignal(!1,11e3)&&(!!this.isThereSignal(!0,40)&&(!!this.isThereSignal(!1,40)&&!!this.isThereSignal(!0,1)))},c.prototype.recognizeStarting2Mark=function(){return!!this.isThereSignal(!1,2750)&&(!!this.isThereSignal(!0,20)&&(!!this.isThereSignal(!1,20)&&!!this.isThereSignal(!0,1)))},c.prototype.readSignal=function(){return this._index<this._tapeData.length?this._tapeData[this._index++]:null},c.prototype.writeSignal=function(e){this._tapeData.push(e)},c.prototype.writeByte=function(e){this.writeSignal(!0);for(var n=0;n<8;n++)0!=(e&1<<7-n)?this.writeSignal(!0):this.writeSignal(!1)},c.prototype.writeBlock=function(e){e.forEach(function(e){this.writeByte(e)},this);var n=this.countOnBit(e);this.writeByte(n>>8&255),this.writeByte(n>>0&255),this.writeSignal(!0)},c.prototype.writeDuplexBlock=function(e){this.writeBlock(e);for(var n=0;n<256;n++)this.writeSignal(!1);this.writeBlock(e)},c.prototype.readByte=function(){var e=null;do{if(null==(e=this.readSignal()))return null;if(!e)throw"NO START BIT"}while(!e);for(var n=0,t=0;t<8;t++){var r=this.readSignal();if(null==r)return null;r&&(n|=1<<7-t)}return n},c.prototype.readBytes=function(e){for(var n=[],t=0;t<e;t++){var r=this.readByte();if(null==r)break;n.push(r)}return n},c.prototype.countOnBit=function(e){var n=0,t=[0,1,2,3,4,5,6,7];return e.forEach(function(e){t.forEach(function(t){0!=(e&1<<t)&&n++})}),n&=65535},c.prototype.readBlock=function(e){var n=this.readBytes(e),t=this.readBytes(2);if(2!=t.length)throw"NO BLOCK CHECKSUM";var r=256*t[0]+t[1];if(!this.isThereSignal(!0,1))throw"NO BLOCK END BIT";if(this.countOnBit(n)!=r)throw"CHECKSUM ERROR";return n},c.prototype.readDuplexBlocks=function(e){var n=this.readBlock(e);if(null==n)throw"FAIL TO READ BLOCK[1]";if(!this.isThereSignal(!1,256))throw"NO DELIMITOR: Short x 256.";var t=this.readBlock(e);if(null==t)throw"FAIL TO READ BLOCK[2]";for(var r=0;r<n.length;r++)if(n[r]!=t[r])throw"FAIL TO VERIFY BLOCK 1 and 2";return n},c.prototype.readHeader=function(){if(!this.recognizeStartingMark())throw"NO STARTING MARK recognized";var e=this.readDuplexBlocks(128);if(null==e)throw"CANNOT READ MZT HEADER";return new r(e,0)},c.prototype.readDataBlock=function(e){if(!this.recognizeStarting2Mark())throw"NO STARTING MARK 2 recognized";return this.readDuplexBlocks(e)},c.toBytes=function(e){try{var n=new c(e),t=n.readHeader();if(null==t)throw"FAIL TO READ HEADER";var r=n.readDataBlock(t.file_size);if(null==r)throw"FAIL TO READ DATA";for(var o,i=[],s=!0;s;)(s=!!(o=n.readByte()))&&(console.warn("MZ_Tape.toBytes rest bytes["+o.length+"] =",o.HEX(2)),i.push(o));return t.buffer.concat(r)}catch(e){console.log("MZ_Tape.toBytes:Error "+e)}return[]},c.fromBytes=function(e){if(e.length<128)throw"FAIL TO WRITE HEADER";var n=new r(e.slice(0,128),0),t=new c([]);return t.writeHeader(n.buffer),t.writeDataBlock(e.slice(128)),t._tapeData},c.prototype.outputStartingMark=function(){var e;for(e=0;e<11e3;e++)this.writeSignal(!1);for(e=0;e<40;e++)this.writeSignal(!0);for(e=0;e<40;e++)this.writeSignal(!1);this.writeSignal(!0)},c.prototype.writeHeader=function(e){this.outputStartingMark(),this.writeDuplexBlock(e)},c.prototype.writeStarting2Mark=function(){var e;for(e=0;e<2750;e++)this.writeSignal(!1);for(e=0;e<20;e++)this.writeSignal(!0);for(e=0;e<20;e++)this.writeSignal(!1);this.writeSignal(!0)},c.prototype.writeDataBlock=function(e){this.writeStarting2Mark(),this.writeDuplexBlock(e)},n.exports=c},{"./mz-tape-header":2}],4:[function(e,n,t){!function(){function e(){this.keymap=new Array(10);for(var e=0;e<this.keymap.length;e++)this.keymap[e]=255}e.prototype.getKeyData=function(e){var n=255;return(e&=15)<this.keymap.length&&(n=this.keymap[e]),n},e.prototype.setKeyMatrixState=function(e,n,t){t?this.keymap[e]&=255&~(1<<n):this.keymap[e]|=1<<n&255},e.KeyCodes={Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Numlock:44,ScrollLock:145,Pause:19,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Subtract:109,Caret:107,Atmark:192,Yen:106,Colon:186,SemiColon:187,Comma:188,Decimal:190,Divide:111,Backslash:226,OpenBrackets:219,CloseBrackets:221,Shift:16,Control:17,Alternate:18,Enter:13,Tab:9,Space:32,Backspace:8,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Left:37,Up:38,Right:39,Down:40,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadDivide:191,NumPadMultiply:220,NumPadSubtract:189,NumPadPlus:222,NumPadDecimal:110,Hankaku:243,Zenkaku:244};var t,r,c,o=function(e,n,t,r,c){this.strobe=e,this.bit=n,this.face=t||"&nbsp;",this.code=r||[],this.strcode=c||t};e.Keys=[new o(0,0,"CR",[e.KeyCodes.Enter]),new o(0,1,":",[e.KeyCodes.Colon]),new o(0,2,";",[e.KeyCodes.SemiColon]),new o(0,3),new o(0,4,"英数",[e.KeyCodes.F10,e.KeyCodes.End],"ALNUM"),new o(0,5,"=",[e.KeyCodes.Backspace]),new o(0,6,"GRAPH",[e.KeyCodes.F12,e.KeyCodes.PageDown,e.KeyCodes.Altername],"GRAPH"),new o(0,7,"カナ",[e.KeyCodes.F11,e.KeyCodes.PageUp],"KANA"),new o(1,0),new o(1,1),new o(1,2),new o(1,3,")",[e.KeyCodes.CloseBrackets]),new o(1,4,"(",[e.KeyCodes.OpenBrackets]),new o(1,5,"@",[e.KeyCodes.Atmark]),new o(1,6,"Z",[e.KeyCodes.Z]),new o(1,7,"Y",[e.KeyCodes.Y]),new o(2,0,"X",[e.KeyCodes.X]),new o(2,1,"W",[e.KeyCodes.W]),new o(2,2,"V",[e.KeyCodes.V]),new o(2,3,"U",[e.KeyCodes.U]),new o(2,4,"T",[e.KeyCodes.T]),new o(2,5,"S",[e.KeyCodes.S]),new o(2,6,"R",[e.KeyCodes.R]),new o(2,7,"Q",[e.KeyCodes.Q]),new o(3,0,"P",[e.KeyCodes.P]),new o(3,1,"O",[e.KeyCodes.O]),new o(3,2,"N",[e.KeyCodes.N]),new o(3,3,"M",[e.KeyCodes.M]),new o(3,4,"L",[e.KeyCodes.L]),new o(3,5,"K",[e.KeyCodes.K]),new o(3,6,"J",[e.KeyCodes.J]),new o(3,7,"I",[e.KeyCodes.I]),new o(4,0,"H",[e.KeyCodes.H]),new o(4,1,"G",[e.KeyCodes.G]),new o(4,2,"F",[e.KeyCodes.F]),new o(4,3,"E",[e.KeyCodes.E]),new o(4,4,"D",[e.KeyCodes.D]),new o(4,5,"C",[e.KeyCodes.C]),new o(4,6,"B",[e.KeyCodes.B]),new o(4,7,"A",[e.KeyCodes.A]),new o(5,0,"8",[e.KeyCodes.D8,e.KeyCodes.NumPad8]),new o(5,1,"7",[e.KeyCodes.D7,e.KeyCodes.NumPad7]),new o(5,2,"6",[e.KeyCodes.D6,e.KeyCodes.NumPad6]),new o(5,3,"5",[e.KeyCodes.D5,e.KeyCodes.NumPad5]),new o(5,4,"4",[e.KeyCodes.D4,e.KeyCodes.NumPad4]),new o(5,5,"3",[e.KeyCodes.D3,e.KeyCodes.NumPad3]),new o(5,6,"2",[e.KeyCodes.D2,e.KeyCodes.NumPad2]),new o(5,7,"1",[e.KeyCodes.D1,e.KeyCodes.NumPad1]),new o(6,0,".",[e.KeyCodes.Decimal,110]),new o(6,1,",",[e.KeyCodes.Comma]),new o(6,2,"9",[e.KeyCodes.D9,e.KeyCodes.NumPad9]),new o(6,3,"0",[e.KeyCodes.D0,e.KeyCodes.NumPad0]),new o(6,4,"SPC",[e.KeyCodes.Space]," "),new o(6,5,"-",[e.KeyCodes.Subtract,e.KeyCodes.NumPadSubtract]),new o(6,6,"+",[e.KeyCodes.Caret,e.KeyCodes.NumPadPlus]),new o(6,7,"*",[e.KeyCodes.Yen,e.KeyCodes.NumPadMultiply]),new o(7,0,"/",[e.KeyCodes.Divide,e.KeyCodes.NumPadDivide]),new o(7,1,"?",[e.KeyCodes.Backslash]),new o(7,2,"←",[e.KeyCodes.Left],"LEFT"),new o(7,3,"→",[e.KeyCodes.Right],"RIGHT"),new o(7,4,"↓",[e.KeyCodes.Down],"DOWN"),new o(7,5,"↑",[e.KeyCodes.Up],"UP"),new o(7,6,"DEL",[e.KeyCodes.Delete]),new o(7,7,"INS",[e.KeyCodes.Insert]),new o(8,0,"SHIFT",[e.KeyCodes.Shift]),new o(8,1,"(BS)"),new o(8,2),new o(8,3,"(→)",[e.KeyCodes.Tab]),new o(8,4,"(CR)"),new o(8,5,"(SHIFT)"),new o(8,6,"CTRL",[e.KeyCodes.Control]),new o(8,7,"BREAK",[e.KeyCodes.Escape,e.KeyCodes.Pause]),new o(9,0,"HOME",[e.KeyCodes.Home]),new o(9,1,"(SPC)"),new o(9,2,"(↓)"),new o(9,3,"F5",[e.KeyCodes.F5]),new o(9,4,"F4",[e.KeyCodes.F4]),new o(9,5,"F3",[e.KeyCodes.F3]),new o(9,6,"F2",[e.KeyCodes.F2]),new o(9,7,"F1",[e.KeyCodes.F1])],e.KeyNames=(t={},Object.keys(e.KeyCodes).forEach(function(n){var r=e.KeyCodes[n];t[r]=n}),t),e.Code2Key=(r=new Array(256),e.Keys.forEach(function(e){e.code.forEach(function(n){r[n]=e})}),r),e.Str2Key=(c={},e.Keys.forEach(function(e){c[e.strcode]=e}),c),n.exports=e}()},{}],5:[function(e,n,t){var r=e("./mz700-new-monitor.js"),c=e("../Z80/memory-block.js"),o=e("../Z80/memory-bank.js");function i(e){this.create(e)}i.prototype=new o,i.prototype.create=function(e){var n;o.prototype.create.call(this,e);var t=function(){},i=function(){};if(e.onVramUpdate){var s=e.onVramUpdate,m=new Array(65536),a=new Array(65536),u=new Array(65536);for(n=0;n<1e3;n++)m[53248+n]=[n,0,113],m[55296+n]=[n,0,113],a[53248+n]=function(e,n){return function(t){n[1]=t,s(e[0],t,e[2])}}(m[53248+n],m[55296+n]),u[55296+n]=function(e,n){return function(t){e[2]=t,s(n[0],n[1],t)}}(m[53248+n],m[55296+n]);t=function(e,n){53248<=e&&e<54248&&a[e](n)},i=function(e,n){55296<=e&&e<56296&&u[e](n)}}for(this.memblks={IPL_AREA_ROM:new r,IPL_AREA_RAM:new c({startAddr:0,size:4096}),FREE_RAM:new c({startAddr:4096,size:49152}),TEXT_VRAM:new c({startAddr:53248,size:2048,onPoke:t}),ATTR_VRAM:new c({startAddr:55296,size:2048,onPoke:i}),MMAPED_IO:new c({startAddr:57344,size:2048,onPeek:e.onMappedIoRead||function(){},onPoke:e.onMappedIoUpdate||function(){}}),EXTND_ROM:new c({startAddr:59392,size:6144}),DRAM:new c({startAddr:55296,size:12288})},this._block1VRAM=!0,this._disabledBlock1=!1,this.changeBlock0_MONITOR(),this.setMemoryBlock("FREE_RAM",this.memblks.FREE_RAM),this.changeBlock1_VRAM(),n=0;n<2048;n++)this.memblks.ATTR_VRAM.pokeByte(55296+n,113)},i.prototype.clear=function(){for(var e in o.prototype.clear.call(this),this.memblks)this.memblks[e].clear()},i.prototype.getTextVram=function(){return this.memblks.TEXT_VRAM},i.prototype.getAttrVram=function(){return this.memblks.ATTR_VRAM},i.prototype.changeBlock0_MONITOR=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_ROM)},i.prototype.changeBlock0_DRAM=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_RAM)},i.prototype.changeBlock1_DRAM=function(){this._block1VRAM=!1,this._disabledBlock1=!1,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",this.memblks.DRAM)},i.prototype.changeBlock1_VRAM=function(){this._block1VRAM=!0,this._disabledBlock1=!1,this.setMemoryBlock("DRAM",null),this.setMemoryBlock("TEXT_VRAM",this.memblks.TEXT_VRAM),this.setMemoryBlock("ATTR_VRAM",this.memblks.ATTR_VRAM),this.setMemoryBlock("MMAPED_IO",this.memblks.MMAPED_IO),this.setMemoryBlock("EXTND_ROM",this.memblks.EXTND_ROM)},i.prototype.disableBlock1=function(){this._disabledBlock1||(this._disabledBlock1=!0,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",null))},i.prototype.enableBlock1=function(){this._disabledBlock1&&(this._block1VRAM?this.changeBlock1_VRAM():this.changeBlock1_DRAM(),this._disabledBlock1=!1)},n.exports=i},{"../Z80/memory-bank.js":12,"../Z80/memory-block.js":13,"./mz700-new-monitor.js":6}],6:[function(e,n,t){var r=e("../Z80/memory-block.js");function c(){this.create()}c.prototype=new r,c.prototype.create=function(){r.prototype.create.call(this,{startAddr:0,size:4096});for(var e=0;e<this.size;e++){var n=this.startAddr+e;r.prototype.pokeByte.call(this,n,c.Binary[n])}},c.prototype.pokeByte=function(e){r.prototype.pokeByte.call(this,e,c.Binary[e])},n.exports=c,c.Binary=[195,74,0,195,230,7,195,14,9,195,24,9,195,32,9,195,127,0,195,53,9,195,129,9,195,153,9,195,189,8,195,50,10,195,54,4,195,117,4,195,216,4,195,248,4,195,136,5,195,199,1,195,8,3,0,0,195,56,16,195,88,3,195,229,2,195,250,2,195,171,2,195,190,2,49,240,16,237,86,205,201,15,62,22,215,6,60,33,112,17,205,216,15,33,146,3,62,195,50,56,16,34,57,16,33,4,5,34,158,17,205,190,2,17,65,1,223,205,192,10,24,8,17,241,16,24,150,195,38,9,49,240,16,17,130,0,213,205,9,0,62,42,215,17,163,17,205,3,0,26,254,42,194,84,12,19,26,254,71,202,89,1,254,35,202,18,2,254,77,202,15,12,254,83,202,130,12,254,38,202,14,14,254,76,40,31,0,0,0,0,254,82,202,170,1,254,80,202,18,2,195,155,10,205,232,0,205,45,0,56,10,17,196,1,207,223,201,205,232,0,239,218,103,1,42,6,17,124,254,18,216,233,205,39,0,56,149,207,17,56,1,223,24,134,17,0,208,14,25,6,40,26,205,206,11,205,15,1,19,16,246,62,13,205,15,1,13,32,236,201,213,245,219,254,230,13,183,40,7,205,30,0,40,119,24,242,241,211,255,62,128,211,254,219,254,230,13,254,1,32,248,175,211,254,201,70,79,85,78,68,32,13,76,79,46,32,13,195,73,1,0,32,77,90,144,55,48,48,13,211,225,17,240,255,213,33,46,7,1,5,0,237,176,201,0,19,26,254,79,32,4,19,19,19,19,205,192,12,233,254,2,200,207,17,181,1,223,201,62,255,50,157,17,201,175,24,249,33,0,240,126,183,192,233,197,213,229,26,190,32,11,5,40,8,254,13,40,4,19,35,24,241,225,209,193,201,245,195,173,13,62,255,211,224,201,17,49,1,223,17,241,16,223,195,227,15,205,232,0,205,227,15,239,195,209,0,0,67,69,13,54,255,58,112,17,183,32,2,54,239,175,201,79,75,13,197,213,229,62,2,50,160,17,6,1,26,254,13,40,2,254,200,40,46,254,207,40,30,254,215,40,34,254,35,33,113,2,32,3,46,137,19,205,28,2,56,224,205,200,2,56,21,205,171,2,65,24,213,62,3,50,160,17,19,24,205,62,1,24,246,205,200,2,245,205,190,2,241,24,128,19,205,31,4,216,205,15,1,24,246,197,6,8,26,190,40,9,35,35,35,16,248,55,19,193,201,35,213,94,35,86,235,124,183,40,9,58,160,17,61,40,3,41,24,250,34,161,17,62,2,50,160,17,209,19,26,71,230,240,254,48,40,5,58,159,17,24,7,19,120,230,15,50,159,17,79,6,0,33,161,2,9,78,58,158,17,71,175,129,16,253,193,79,175,201,67,119,7,68,167,6,69,237,5,70,152,5,71,252,4,65,113,4,66,245,3,82,0,0,67,12,7,68,71,6,69,152,5,70,72,5,71,180,4,65,49,4,66,187,3,82,0,0,1,2,3,4,6,8,12,16,24,32,42,161,17,124,183,40,12,213,235,33,4,224,115,114,62,1,209,24,6,62,54,50,7,224,175,50,8,224,201,33,0,224,54,248,35,126,230,128,32,2,55,201,58,8,224,15,56,250,58,8,224,15,48,250,16,242,175,201,197,229,33,113,4,205,174,2,6,50,175,205,91,7,16,250,225,193,195,190,2,245,197,230,15,71,62,8,144,50,158,17,193,241,201,243,197,213,229,50,155,17,62,240,50,156,17,33,192,168,175,237,82,229,35,235,62,116,50,7,224,62,176,50,7,224,33,6,224,115,114,43,54,10,54,0,62,128,50,7,224,35,78,126,186,32,251,121,187,32,247,43,0,0,0,54,18,54,122,35,209,78,126,186,32,251,121,187,32,247,225,209,193,251,201,229,62,128,50,7,224,33,6,224,243,94,86,251,123,178,202,121,3,175,33,192,168,237,82,218,131,3,235,58,155,17,225,201,17,192,168,58,155,17,238,1,225,201,243,33,6,224,126,47,95,126,47,87,251,19,195,124,3,245,197,213,229,58,155,17,238,1,50,155,17,62,128,50,7,224,33,6,224,94,86,33,192,168,25,43,43,235,33,6,224,115,114,225,209,193,241,251,201,124,205,195,3,125,205,195,3,201,245,230,240,15,15,15,15,205,218,3,205,18,0,241,230,15,205,218,3,215,62,32,201,213,229,33,233,3,230,15,95,22,0,25,126,225,209,201,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,197,229,1,0,16,33,233,3,190,32,3,121,24,6,35,12,5,32,245,55,225,193,201,213,205,31,4,56,7,103,205,31,4,56,1,111,209,201,197,26,19,195,241,6,56,13,7,7,7,7,79,26,19,205,249,3,56,1,177,193,201,243,213,197,229,22,215,30,204,33,240,16,1,128,0,205,51,7,205,178,6,218,99,5,123,254,204,32,17,205,9,0,213,17,108,4,205,21,0,17,241,16,205,21,0,209,205,184,7,205,141,4,195,99,5,87,82,73,84,73,78,71,32,13,243,213,197,229,22,215,30,83,42,2,17,229,193,42,4,17,120,177,202,212,4,195,68,4,213,197,229,58,55,16,87,62,248,50,0,224,126,205,165,7,58,1,224,230,8,32,3,55,24,45,35,11,120,177,194,153,4,42,151,17,124,205,165,7,125,205,165,7,205,128,7,21,194,196,4,183,195,212,4,6,0,205,103,7,5,194,198,4,225,193,197,229,195,153,4,225,193,209,201,243,213,197,229,22,210,30,204,1,128,0,33,240,16,205,178,6,218,130,5,205,94,6,218,130,5,205,16,5,195,99,5,243,213,197,229,22,210,30,83,42,2,17,229,193,42,4,17,120,177,202,99,5,195,230,4,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,97,205,85,6,26,230,32,40,243,84,33,0,0,34,151,17,225,193,197,229,205,36,6,56,73,119,35,11,120,177,32,244,42,151,17,205,36,6,56,58,95,205,36,6,56,52,189,32,35,123,188,32,31,24,11,62,1,50,55,16,201,62,2,24,248,0,175,225,193,209,205,0,7,245,58,156,17,254,240,32,1,251,241,201,21,202,124,5,98,195,22,5,62,1,55,195,99,5,62,2,55,195,99,5,243,213,197,229,42,2,17,229,193,42,4,17,22,210,30,83,120,177,202,99,5,205,51,7,205,178,6,218,130,5,205,94,6,218,130,5,205,178,5,195,99,5,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,191,205,85,6,26,230,32,40,243,84,225,193,197,229,205,36,6,56,173,190,32,164,35,11,120,177,32,242,42,153,17,205,36,6,188,32,149,205,36,6,189,32,143,21,202,98,5,98,195,184,5,120,6,192,128,48,2,214,64,71,195,58,8,62,249,50,0,224,0,10,230,4,194,15,6,55,201,26,230,32,194,7,6,10,230,8,194,29,6,55,201,26,230,32,202,21,6,201,197,213,229,33,0,8,1,1,224,17,2,224,205,1,6,56,28,205,85,6,26,230,32,40,10,229,42,151,17,35,34,151,17,225,55,125,23,111,37,32,227,205,1,6,125,225,209,193,201,58,53,16,61,32,253,32,0,201,197,213,229,33,40,40,123,254,204,40,3,33,20,20,34,149,17,1,1,224,17,2,224,42,149,17,205,1,6,56,30,205,85,6,26,230,32,40,240,37,32,240,205,1,6,56,14,205,85,6,26,230,32,32,224,45,32,240,205,1,6,225,209,193,201,194,245,5,62,40,42,113,17,149,71,205,177,15,205,216,15,195,238,7,197,213,229,14,10,58,2,224,230,16,40,5,175,225,209,193,201,62,6,33,3,224,119,60,119,13,32,233,207,122,254,215,40,6,17,34,7,223,24,8,17,41,7,223,17,36,7,223,58,2,224,230,16,32,213,205,68,10,32,244,55,24,206,254,47,40,6,205,249,3,195,37,4,26,19,195,52,4,245,197,213,6,10,58,2,224,230,16,32,4,209,193,241,201,62,6,50,3,224,62,7,50,3,224,5,194,5,7,209,193,241,201,127,32,80,76,65,89,13,127,82,69,67,13,211,224,195,0,0,197,213,229,17,0,0,120,177,32,11,235,34,151,17,34,153,17,225,209,193,201,126,229,38,8,7,48,1,19,37,32,249,225,35,11,24,225,58,54,16,61,32,253,201,58,55,0,24,244,0,0,0,245,62,3,50,3,224,205,95,7,62,2,50,3,224,205,95,7,241,201,8,195,228,9,0,0,245,62,3,50,3,224,205,95,7,205,95,7,62,2,50,3,224,205,95,7,205,98,7,241,201,62,0,50,52,16,33,68,46,34,53,16,201,197,6,8,205,128,7,7,220,128,7,212,103,7,5,194,171,7,193,201,197,213,123,1,248,42,17,40,40,254,204,202,204,7,1,190,10,17,20,20,205,103,7,11,120,177,32,248,205,128,7,21,32,250,205,103,7,29,32,250,205,128,7,209,193,201,245,197,229,213,175,50,147,17,205,179,9,71,58,157,17,183,204,109,12,120,230,240,254,192,32,55,120,254,205,40,86,254,201,40,29,254,202,40,20,254,203,202,179,8,254,200,40,11,254,199,40,7,58,147,17,183,32,28,120,205,220,13,24,200,33,112,17,175,190,32,1,60,119,214,6,47,50,3,224,24,183,205,68,10,40,106,120,205,166,13,205,181,13,254,98,32,167,33,147,17,126,47,119,24,159,254,16,202,66,15,254,213,254,5,195,159,6,42,113,17,92,22,0,33,115,17,25,235,26,183,1,40,0,42,113,17,194,122,8,19,26,183,202,125,8,195,123,8,37,14,80,46,0,205,180,15,209,213,197,205,166,13,237,176,193,225,229,65,126,205,206,11,119,35,16,248,54,13,43,126,254,32,40,248,205,6,0,209,225,193,241,201,120,254,18,202,246,13,254,73,202,41,14,24,156,225,229,54,27,35,54,13,24,226,0,205,202,8,254,240,32,2,175,201,205,206,11,201,197,213,229,205,80,10,120,7,56,6,62,240,225,209,193,201,7,210,236,8,6,0,33,8,0,9,17,201,10,25,126,195,214,8,58,112,17,183,194,253,8,6,0,33,201,10,9,126,195,214,8,121,230,240,15,71,121,230,15,128,198,160,111,38,0,195,228,8,175,50,148,17,62,205,205,220,13,201,58,148,17,183,200,195,6,0,62,32,205,53,9,201,205,12,0,58,148,17,183,200,214,10,56,244,32,250,201,254,13,202,14,9,197,79,71,205,150,1,205,70,9,121,193,201,121,205,185,11,79,230,240,254,240,200,254,192,121,194,112,9,254,199,210,112,9,205,220,13,254,195,202,115,9,254,197,202,107,9,254,198,192,175,50,148,17,201,205,181,13,58,148,17,60,254,80,56,2,214,80,50,148,17,201,245,197,213,6,5,205,150,1,26,254,13,202,223,15,79,205,70,9,19,16,243,195,132,9,245,197,213,6,5,205,150,1,26,254,13,202,223,15,205,185,11,205,112,9,19,16,241,195,156,9,197,213,229,205,177,15,205,166,13,126,50,142,17,34,143,17,33,146,17,205,184,1,50,0,224,50,145,17,47,50,0,224,22,20,205,255,9,205,80,10,120,7,218,230,11,21,194,213,9,205,255,9,205,202,8,254,240,202,122,7,245,205,166,13,58,142,17,42,143,17,119,241,225,209,193,201,245,229,58,2,224,7,7,218,37,10,58,145,17,15,218,34,10,58,146,17,42,143,17,205,166,13,119,58,145,17,238,1,50,145,17,225,241,201,58,145,17,15,210,34,10,58,142,17,195,19,10,62,248,50,0,224,0,58,1,224,47,230,33,194,68,10,198,1,201,62,248,50,0,224,0,58,1,224,230,128,201,213,229,6,250,22,0,5,120,50,0,224,254,239,32,4,66,225,209,201,254,248,40,31,58,1,224,47,183,40,232,95,203,250,120,230,15,7,7,7,7,79,62,8,61,40,4,203,3,48,249,129,79,24,208,58,1,224,47,95,230,33,40,2,203,242,123,230,222,40,192,24,214,205,62,0,254,86,202,203,0,254,67,192,19,26,254,65,202,158,7,254,49,202,87,5,254,50,202,93,5,254,66,194,184,12,33,34,21,34,53,16,201,205,153,7,205,93,5,195,118,1,205,79,44,240,201,43,240,202,205,27,57,240,201,62,240,202,240,240,240,105,104,85,26,25,240,240,240,74,54,109,90,61,24,23,22,21,20,19,18,17,83,115,70,112,113,93,51,114,16,15,14,13,12,11,10,9,118,119,67,86,120,94,30,60,8,7,6,5,4,3,2,1,95,31,29,50,28,68,65,92,40,39,38,37,36,35,34,33,82,103,102,101,100,99,98,97,46,47,41,32,0,42,106,107,87,81,84,96,0,221,222,89,45,73,196,195,193,194,199,200,69,64,196,195,193,194,197,198,240,199,240,195,205,240,240,240,240,200,240,196,205,240,240,203,197,0,193,203,240,60,62,220,198,0,194,240,240,124,126,216,205,188,141,240,201,153,240,202,240,240,240,184,180,160,145,134,129,135,151,150,130,132,156,148,170,171,143,140,173,176,142,162,138,131,144,136,146,154,147,152,161,137,149,166,165,164,133,163,172,174,175,139,0,167,168,169,155,191,196,195,193,194,199,200,240,199,240,195,205,240,189,191,197,0,193,240,240,188,190,219,197,229,254,23,56,28,33,198,12,1,224,0,237,177,32,26,62,223,145,24,10,197,229,33,198,12,79,6,0,9,126,225,193,201,254,17,56,4,198,176,24,245,175,24,242,58,52,16,183,194,211,9,121,8,185,202,224,9,6,4,205,202,8,230,63,87,205,255,9,205,202,8,230,63,186,194,231,9,11,120,177,202,228,9,24,236,19,205,16,4,6,16,205,48,12,205,202,8,183,40,5,254,203,200,16,242,205,179,9,254,205,40,233,183,192,6,1,24,229,197,205,186,3,6,8,197,229,175,215,126,205,195,3,35,175,215,16,247,215,225,193,126,205,185,11,205,181,13,35,16,246,193,195,6,0,205,192,12,30,168,205,31,4,56,5,119,19,35,24,246,62,169,187,208,205,186,3,195,142,0,197,229,42,54,16,125,254,16,56,3,46,80,36,205,174,2,6,7,195,239,2,19,26,254,83,202,112,1,254,71,202,118,1,205,192,12,34,4,17,229,30,170,205,16,4,209,237,82,35,34,2,17,17,175,17,205,192,12,34,6,17,17,241,16,33,180,17,1,16,0,237,176,62,13,18,205,159,1,231,210,36,0,201,205,16,4,208,209,201,32,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,251,205,221,203,209,48,49,50,51,52,53,54,55,56,57,45,61,59,47,46,44,229,244,236,218,227,226,215,212,230,232,194,193,196,199,207,202,32,225,254,200,250,95,248,241,247,63,204,219,220,233,245,58,94,60,91,243,93,64,201,62,252,92,198,223,208,206,211,210,255,33,34,35,36,37,38,39,40,41,43,42,222,246,235,234,195,197,239,240,228,231,238,237,224,253,216,213,242,249,217,214,32,161,154,159,156,146,170,151,152,166,175,169,184,179,176,183,158,160,157,164,150,165,171,163,155,189,162,187,153,130,135,140,188,167,172,145,147,148,149,180,181,182,174,173,186,178,185,168,177,131,136,141,134,132,137,142,191,133,138,143,190,129,139,144,127,17,18,19,20,21,22,96,97,98,99,100,101,102,103,104,112,113,17,115,116,117,118,119,120,121,122,123,124,125,126,105,245,58,2,224,7,48,250,58,2,224,7,56,250,241,201,245,197,213,229,71,205,177,15,112,42,113,17,125,254,39,194,144,14,92,22,0,33,115,17,25,126,183,194,144,14,35,54,1,35,54,0,195,144,14,245,197,213,229,71,230,240,254,192,32,127,168,254,13,202,139,15,254,11,48,117,38,14,111,110,233,33,52,16,126,47,119,195,238,7,0,50,116,132,144,174,191,197,248,11,225,242,195,73,15,17,163,17,213,33,27,14,1,12,0,237,176,201,33,2,224,203,158,203,198,203,134,195,128,9,223,0,33,157,17,24,203,0,195,125,8,205,150,1,175,50,3,224,1,192,3,17,0,208,33,40,208,237,176,235,6,40,205,216,15,1,26,0,17,115,17,33,116,17,237,176,54,0,58,115,17,183,194,106,14,205,150,1,62,1,50,3,224,195,222,15,0,42,113,17,37,34,113,17,195,57,14,42,113,17,124,254,24,202,50,14,36,34,113,17,195,222,15,42,113,17,124,183,202,222,15,37,195,126,14,42,113,17,125,254,39,210,157,14,44,195,126,14,46,0,36,124,254,25,218,126,14,38,24,34,113,17,195,50,14,42,113,17,125,183,40,4,45,195,126,14,46,39,37,242,126,14,33,0,0,195,126,14,205,166,13,14,25,33,0,208,6,40,205,216,15,13,194,205,14,33,115,17,6,27,205,216,15,195,191,14,33,112,17,175,190,24,1,60,119,214,6,47,50,3,224,24,143,33,112,17,175,24,240,42,113,17,124,181,202,222,15,125,183,32,22,92,22,0,33,115,17,25,126,183,32,11,205,177,15,205,166,13,43,54,0,24,148,42,113,17,92,28,22,0,33,115,17,25,126,71,183,62,40,40,2,62,80,42,113,17,149,79,6,0,205,177,15,229,209,27,205,166,13,237,176,24,211,205,244,0,195,238,7,0,42,113,17,92,28,22,0,33,115,17,25,126,183,14,0,42,113,17,46,39,40,2,36,12,205,180,15,126,183,194,222,15,229,42,113,17,62,39,149,71,121,183,40,4,62,40,128,71,209,213,225,43,205,166,13,126,18,54,0,43,27,16,248,195,222,15,42,113,17,92,28,22,0,33,115,17,25,126,183,42,113,17,202,157,14,46,0,124,254,23,40,5,36,36,195,126,14,36,34,113,17,195,50,14,42,113,17,197,213,229,193,17,40,0,33,216,207,25,5,242,190,15,6,0,9,209,193,201,33,3,224,54,138,54,7,54,5,62,1,50,3,224,201,175,119,35,16,252,201,225,209,193,241,201,62,58,215,42,4,17,205,186,3,235,42,2,17,25,43,205,248,15,42,6,17,62,45,215,205,186,3,175,201]},{"../Z80/memory-block.js":13}],7:[function(e,n,t){!function(n){"use strict";if(e("../lib/context.js"),!n.context.webWorker)throw new Error("This script must run on WebWorker context.");var t=e("transworker"),r=e("./mz700.js"),c=new t;c.create(new r({onExecutionParameterUpdate:function(e){try{c.postNotify("onExecutionParameterUpdate",e)}catch(e){console.error(e)}},started:function(){c.postNotify("start")},stopped:function(){c.postNotify("stop")},notifyClockFreq:function(e){c.postNotify("onNotifyClockFreq",[e])},onBreak:function(){c.postNotify("onBreak")},onUpdateScreen:function(e){c.postNotify("onUpdateScreen",e)},onMmioRead:function(e,n){c.postNotify("onMmioRead",{address:e,value:n})},onMmioWrite:function(e,n){c.postNotify("onMmioWrite",{address:e,value:n})},onPortRead:function(e,n){c.postNotify("onPortRead",{port:e,value:n})},onPortWrite:function(e,n){c.postNotify("onPortWrite",{port:e,value:n})},startSound:function(e){c.postNotify("startSound",[e])},stopSound:function(){c.postNotify("stopSound")},onStartDataRecorder:function(){c.postNotify("onStartDataRecorder")},onStopDataRecorder:function(){c.postNotify("onStopDataRecorder")}}))}(Function("return this;")())},{"../lib/context.js":16,"./mz700.js":8,transworker:25}],8:[function(e,n,t){e("../lib/ex_number.js");var r=e("fractional-timer"),c=e("./mz-tape-header"),o=e("./mz-tape"),i=e("./mz-data-recorder"),s=e("../lib/intel-8253"),m=e("../lib/flip-flop-counter"),a=e("../lib/ic556"),u=e("./mz700-key-matrix"),p=e("./mz700-memory.js"),f=e("../Z80/Z80.js"),d=e("../Z80/z80-line-assembler"),l=function(e){"use strict";this._screenUpdateData={},this._vramTxTid=null,this.keymatrix=new u,this.intel8253=new s,this.intel8253.counter[1].counter=15700,this.intel8253.counter[1].value=15700,this.intel8253.counter[1].addEventListener("timeup",()=>{this.intel8253.counter[2].count(1)}),this.intel8253.counter[2].counter=43200,this.intel8253.counter[2].value=43200,this.intel8253.counter[2].addEventListener("timeup",()=>{this.INTMSK&&this.z80.interrupt()}),this.hblank=new m(15700),this.hblank.addEventListener("change",()=>{this.intel8253.counter[1].count(4)}),this.vblank=new m(50),this.VBLK=!1,this.vblank.addEventListener("change",()=>{this.VBLK=!this.VBLK}),this.ic556=new a(3),this.ic556_OUT=!1,this.ic556.addEventListener("change",()=>{this.ic556_OUT=!this.ic556_OUT}),this.INTMSK=!1,this.MLDST=!1;var n=null;this.dataRecorder=new i(e=>{e?(null!=n&&(clearTimeout(n),n=null),this.opt.onStartDataRecorder()):n=setTimeout(()=>{n=null,this.opt.onStopDataRecorder()},100)}),this.opt={onExecutionParameterUpdate:()=>{},started:()=>{},stopped:()=>{},notifyClockFreq:()=>{},onBreak:()=>{},onUpdateScreen:()=>{},onVramUpdate:(e,n,t)=>{this._screenUpdateData[e]={dispcode:n,attr:t},null==this._vramTxTid&&(this._vramTxTid=setTimeout(()=>{this.opt.onUpdateScreen(this._screenUpdateData),this._screenUpdateData={},this._vramTxTid=null},100))},onMmioRead:()=>{},onMmioWrite:()=>{},onPortRead:()=>{},onPortWrite:()=>{},startSound:()=>{},stopSound:()=>{},onStartDataRecorder:()=>{},onStopDataRecorder:()=>{}},e=e||{},Object.keys(this.opt).forEach(n=>{n in e&&(this.opt[n]=e[n])}),this.tid=null,this.timerInterval=l.DEFAULT_TIMER_INTERVAL,this.tidMeasClock=null,this.mmioMap=[];for(var t=57344;t<59392;t++)this.mmioMap.push({r:!1,w:!1});this.memory=new p({onVramUpdate:this.opt.onVramUpdate,onMappedIoRead:(e,n)=>{switch(this.mmioIsMappedToRead(e)&&this.opt.onMmioRead(e,n),e){case 57345:break;case 57346:n&=15,this.dataRecorder.motor()?n|=16:n&=239,this.dataRecorder_readBit()?n|=32:n&=223,this.ic556_OUT?n|=64:n&=191,this.VBLK?n|=128:n&=127;break;case 57348:n=this.intel8253.counter[0].read();break;case 57349:n=this.intel8253.counter[1].read();break;case 57350:n=this.intel8253.counter[2].read();break;case 57351:break;case 57352:n&=254,this.hblank.readOutput()?n|=1:n&=254}return n},onMappedIoUpdate:(e,n)=>{switch(this.mmioIsMappedToWrite(e)&&this.opt.onMmioWrite(e,n),e){case 57344:this.memory.poke(57345,this.keymatrix.getKeyData(n)),this.ic556.loadReset(128&n);break;case 57346:break;case 57347:if(0==(128&n)){var t=0!=(1&n);switch((14&n)>>1){case 0:break;case 1:this.dataRecorder_writeBit(t);break;case 2:this.INTMSK=t;break;case 3:this.dataRecorder_motorOn(t)}}break;case 57348:this.intel8253.counter[0].load(n)&&this.MLDST&&this.opt.startSound(895e3/this.intel8253.counter[0].value);break;case 57349:this.intel8253.counter[1].load(n);break;case 57350:this.intel8253.counter[2].load(n);break;case 57351:this.intel8253.setCtrlWord(n);break;case 57352:1==(this.MLDST=0!=(1&n))?this.opt.startSound(895e3/this.intel8253.counter[0].value):this.opt.stopSound()}return n}}),this.z80=new f({memory:this.memory,onReadIoPort:(e,n)=>{this.opt.onPortRead(e,n)},onWriteIoPort:(e,n)=>{switch(e){case 224:this.memory.changeBlock0_DRAM();break;case 225:this.memory.changeBlock1_DRAM();break;case 226:this.memory.changeBlock0_MONITOR();break;case 227:this.memory.changeBlock1_VRAM();break;case 228:this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();break;case 229:this.memory.disableBlock1();break;case 230:this.memory.enableBlock1()}this.opt.onPortWrite(e,n)}})};l.AVG_CYCLE=40,l.Z80_CLOCK=3579545,l.DEFAULT_TIMER_INTERVAL=l.AVG_CYCLE*(1e3/l.Z80_CLOCK),l.prototype.mmioMapToRead=function(e){e.forEach(function(e){this.mmioMap[e-57344].r=!0},this)},l.prototype.mmioMapToWrite=function(e){e.forEach(function(e){this.mmioMap[e-57344].w=!0},this)},l.prototype.mmioIsMappedToRead=function(e){return this.mmioMap[e-57344].r},l.prototype.mmioIsMappedToWrite=function(e){return this.mmioMap[e-57344].w},l.prototype.writeAsmCode=function(e){for(var n=0;n<e.buffer.length;n++)this.memory.poke(e.min_addr+n,e.buffer[n]);return e.min_addr},l.prototype.exec=function(e){e=e||1;try{for(var n=0;n<e;n++)this.z80.exec(),this.clock()}catch(e){return-1}return 0},l.prototype.clock=function(){this.hblank.count(),this.vblank.count(),this.ic556.count()},l.prototype.setCassetteTape=function(e){if(e.length>0){if(e.length<=128)return this.dataRecorder_setCmt([]),console.error("error buf.length <= 128"),null;if(this.mzt_array=l.parseMZT(e),null==this.mzt_array||this.mzt_array.length<1)return console.error("setCassetteTape fail to parse"),null}return this.dataRecorder_setCmt(e),this.mzt_array},l.prototype.getCassetteTape=function(){var e=this.dataRecorder.getCmt();return null==e?null:o.toBytes(e)},l.prototype.loadCassetteTape=function(){for(var e=0;e<this.mzt_array.length;e++)for(var n=this.mzt_array[e],t=0;t<n.header.file_size;t++)this.memory.poke(n.header.addr_load+t,n.body.buffer[t])},l.prototype.reset=function(){this.memory.enableBlock1(),this.memory.enableBlock1(),this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();for(var e=0;e<1e3;e++)this.memory.poke(53248+e,0),this.memory.poke(55296+e,113);return this.z80.reset()},l.prototype.getRegister=function(){return this.z80.reg.cloneRaw()},l.prototype.getRegisterB=function(){return this.z80.regB.cloneRaw()},l.prototype.setPC=function(e){this.z80.reg.PC=e},l.prototype.getIFF1=function(){return this.z80.IFF1},l.prototype.getIFF2=function(){return this.z80.IFF2},l.prototype.getIM=function(){return this.z80.IM},l.prototype.getHALT=function(){return this.z80.HALT},l.prototype.readMemory=function(e){return this.memory.peek(e)},l.prototype.setKeyState=function(e,n,t){this.keymatrix.setKeyMatrixState(e,n,t)},l.prototype.clearBreakPoints=function(){this.z80.clearBreakPoints()},l.prototype.getBreakPoints=function(){return this.z80.getBreakPoints()},l.prototype.removeBreak=function(e,n){this.z80.removeBreak(e,n)},l.prototype.addBreak=function(e,n){this.z80.setBreak(e,n)},l.parseMZT=function(e){for(var n=[],t=0;t+128<=e.length;){var r=new c(e,t);t+=128;for(var o=[],i=0;i<r.file_size;i++)o.push(e[t+i]);t+=r.file_size,n.push({header:r,body:{buffer:o}})}return n},l.prototype.start=function(){if("tid"in this&&null!=this.tid)return console.warn("MZ700.start(): already started, caller is ",l.prototype.start.caller),!1;this.tid=r.setInterval(this.run.bind(this),this.timerInterval),this.opt.started();var e=0;return this.tidMeasClock=setInterval(()=>{this.opt.notifyClockFreq(this.z80.tick-e),e=this.z80.tick},1e3),!0},l.prototype.stop=function(){null!=this.tid&&(r.clearInterval(this.tid),this.tid=null,this.opt.stopped()),null!=this.tidMeasClock&&(clearInterval(this.tidMeasClock),this.tidMeasClock=null)},l.prototype.run=function(){try{this.z80.exec(),this.clock()}catch(e){console.log("Error:",e),console.log(e.stack),this.stop(),this.opt.onBreak()}},l.disassemble=function(e){let n=[];e.forEach(e=>{console.assert(e.header.constructor===c,"No MZT-header");let t=e.header.getHeadline().split("\n");Array.prototype.push.apply(n,t.map(e=>{var n=new d;return n.setComment(e),n})),Array.prototype.push.apply(n,f.dasm(e.body.buffer,0,e.header.file_size,e.header.addr_load))});let t=f.dasmlines(n);return{outbuf:t.join("\n")+"\n",dasmlines:t,asmlist:n}},l.prototype.dataRecorder_setCmt=function(e){var n=null;return n=0==e.length?[]:o.fromBytes(e),this.dataRecorder.setCmt(n),n},l.prototype.dataRecorder_ejectCmt=function(){if(this.dataRecorder.isCmtSet()){var e=this.dataRecorder.ejectCmt();if(null!=e)return o.toBytes(e)}return[]},l.prototype.dataRecorder_pushPlay=function(){this.dataRecorder.play()},l.prototype.dataRecorder_pushRec=function(){this.dataRecorder.isCmtSet()&&this.dataRecorder.ejectCmt(),this.dataRecorder.setCmt([]),this.dataRecorder.rec()},l.prototype.dataRecorder_pushStop=function(){this.dataRecorder.stop()},l.prototype.dataRecorder_motorOn=function(e){this.dataRecorder.m_on(e)},l.prototype.dataRecorder_readBit=function(){return this.dataRecorder.rdata(this.z80.tick)},l.prototype.dataRecorder_writeBit=function(e){this.dataRecorder.wdata(e,this.z80.tick)},l.prototype.getExecutionParameter=function(){return this.timerInterval},l.prototype.setExecutionParameter=function(e){var n=null!=this.tid;n&&this.stop(),this.timerInterval=e,this.opt.onExecutionParameterUpdate(e),n&&this.start()},n.exports=l},{"../Z80/Z80.js":9,"../Z80/z80-line-assembler":15,"../lib/ex_number.js":17,"../lib/flip-flop-counter":18,"../lib/ic556":19,"../lib/intel-8253":20,"./mz-data-recorder":1,"./mz-tape":3,"./mz-tape-header":2,"./mz700-key-matrix":4,"./mz700-memory.js":5,"fractional-timer":24}],9:[function(e,n,t){"use strict";var r=e("../lib/oct"),c=e("./memory-block.js"),o=e("./register.js"),i=e("./bin-util.js"),s=e("./z80-line-assembler"),m=function(e){e=e||{memory:null},this.memory=e.memory,this.createOpecodeTable(),null==e.memory&&(this.memory=new c,this.memory.create()),this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.ioPort=new Array(256);for(var n=0;n<256;n++)this.ioPort[n]=0;this.reg=new o,this.regB=new o,this.onReadIoPort=function(){},this.onReadIoPort=e.onReadIoPort||function(){},this.onWriteIoPort=e.onWriteIoPort||function(){},this.bpmap=new Array(65536),this.tick=0};m.prototype.readIoPort=function(e){var n=this.ioPort[e];return this.reg.onReadIoPort(n),this.onReadIoPort(e,n),n},m.prototype.writeIoPort=function(e,n){this.ioPort[e]=n,this.onWriteIoPort(e,n)},m.prototype.reset=function(){this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.reg.clear(),this.regB.clear(),this.exec=m.prototype.exec,this.tick=0},m.prototype.interrupt=function(){this.IFF1&&(this.pushPair(this.reg.PC),this.reg.PC=56)},m.prototype.exec=function(){this.reg.R=this.reg.R+1&255;var e=this.opecodeTable[this.fetch()],n=e.proc()||e.cycle||4;if(this.tick+=n,null!=this.bpmap[this.reg.PC])throw console.log("*** BREAK AT $"+this.reg.PC.HEX(4)),"break"},m.prototype.clearBreakPoints=function(){this.bpmap=new Array(65536);for(var e=0;e<65536;e++)this.bpmap[e]=null},m.prototype.getBreakPoints=function(){return this.bpmap},m.prototype.removeBreak=function(e,n){for(var t=0;t<n;t++)this.bpmap[e+t]=null},m.prototype.setBreak=function(e,n){for(var t=0;t<n;t++)this.bpmap[e+t]=!0},m.prototype.fetch=function(){var e=this.memory.peek(this.reg.PC);return this.reg.PC++,this.reg.PC>65535&&(this.reg.PC=0),e},m.prototype.fetchPair=function(){var e=this.memory.peekPair(this.reg.PC);return this.reg.PC+=2,this.reg.PC>65535&&(this.reg.PC-=65535),e},m.prototype.pushPair=function(e){this.memory.poke(--this.reg.SP,i.hibyte(e)),this.memory.poke(--this.reg.SP,i.lobyte(e))},m.prototype.popPair=function(){var e=this.memory.peek(this.reg.SP++),n=this.memory.peek(this.reg.SP++);return i.pair(n,e)},m.prototype.incrementAt=function(e){var n=this.memory.peek(e),t=this.reg.getINCValue(n);this.memory.poke(e,t)},m.prototype.decrementAt=function(e){var n=this.memory.peek(e),t=this.reg.getDECValue(n);this.memory.poke(e,t)},m.dasm=function(e,n,t,r){if(n=n||0,t=t||e.length-n,(r=r||0)-n<0)console.error("Z80.dasm: parameter error : (addr - offset) - out of range");else{if(!(t<0||n+t>e.length)){var o=[],i=new c;i.create({startAddr:r-n,size:t}),i.mem=e;var a=new m({memory:i});a.reg.PC=i.startAddr;var u=s.create("ORG",i.startAddr.HEX(4)+"H");for(u.setAddress(i.startAddr),o.push(u);a.reg.PC<i.startAddr+i.size;){var p=a.disassemble(a.reg.PC,r-n+t);p.setAddress(a.reg.PC),p.bytecode.length>0&&p.setComment("; "+p.address.HEX(4)+"H "+p.bytecode.map(function(e){return e.HEX(2)}).join(" ")),o.push(p),a.reg.PC+=p.bytecode.length}return m.processAddressReference(o)}console.error("Z80.dasm: parameter error : size - out of range")}},m.prototype.disassemble=function(e,n){var t=null,r="",c=this.memory.peek(e);try{var o=this.opecodeTable[c];if(null==o)r="UNKNOWN OPECODE";else if(null==o.disasm)r="NO DISASSEMBLER";else{var i=o.disasm(this.memory,e);null==i?r="NULL RETURNED":e+i.code.length>n?t=null:(t=s.create(i.mnemonic[0],i.mnemonic.slice(1).join(","),i.code),"ref_addr_to"in i&&t.setRefAddrTo(i.ref_addr_to))}}catch(e){r="EXCEPTION THROWN"}return null==t&&(t=s.create("DEFB",c.HEX(2)+"H",[c])).setComment(";*** DISASSEMBLE FAIL: "+r),t},m.processAddressReference=function(e){var n={};return e.forEach(function(e,t){n[e.address]=t}),e.forEach(function(e,t,r){null!=e.ref_addr_to&&e.ref_addr_to in n&&r[n[e.ref_addr_to]].referenced_count++}),e.forEach(function(e,n,t){e.referenced_count>0&&t[n].setLabel("$"+e.address.HEX(4)+"H")}),e},m.dasmlines=function(e){return e.map(function(e){var n;n=e.referenced_count>0?"$"+e.address.HEX(4)+"H:":"       ",n+="   ";var t=e.mnemonic||"";let r=e.operand||"";if(t&&r)for(;t.length<8;)t+=" ";var c=n+"      "+t+r;if(t||r)for(;c.length<40;)c+=" ";return""!=e.comment&&(0!=e.referenced_count||t||r?c+=e.comment:c=e.comment),c.replace(/\s*$/,"")})},m.prototype.createOpecodeTable=function(){var e=this;this.opecodeTable=new Array(256);for(var n,t,c,s,m,a=new Array(256),u=new Array(256),p=new Array(256),f=new Array(256),d=new Array(256),l=new Array(256),g=0;g<256;g++)this.opecodeTable[g]={mnemonic:null,proc:function(){throw"ILLEGAL OPCODE"},disasm:function(e){return function(){return{code:[e],mnemonic:["DEFB",e.HEX(2)+"H; *** UNKNOWN OPCODE"]}}}(g)},a[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE DD "+e.HEX(2)+" for IX command subset"}}(g),disasm:function(e){return function(){return{code:[221],mnemonic:["DEFB","DDh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)},u[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE FD "+e.HEX(2)+" for IY command subset"}}(g),disasm:function(e){return function(){return{code:[253],mnemonic:["DEFB","FDh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)},p[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE CB "+e.HEX(2)+" for Rotate command subset"}}(g),disasm:function(e){return function(){return{code:[203],mnemonic:["DEFB","CBh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)},f[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE DD CB "+e.HEX(2)+" for Rotate IX command subset"}}(g),disasm:function(e){return function(){return{code:[221,203],mnemonic:["DEFW","CBDDh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)},d[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE FD CB "+e.HEX(2)+" for Rotate IY command subset"}}(g),disasm:function(e){return function(){return{code:[253,203],mnemonic:["DEFW","CBFDh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)},l[g]={mnemonic:null,proc:function(e){return function(){throw"ILLEGAL OPCODE ED "+e.HEX(2)+" for Misc command subset"}}(g),disasm:function(e){return function(){return{code:[237],mnemonic:["DEFB","EDh; *** UNKNOWN OPCODE "+e.HEX(2)+"H"]}}}(g)};for(n in this.opecodeTable[221]={mnemonic:function(){return a},proc:function(){a[e.fetch()].proc()},disasm:function(e,n){return a[e.peek(n+1)].disasm(e,n)}},this.opecodeTable[253]={mnemonic:function(){return u},proc:function(){u[e.fetch()].proc()},disasm:function(e,n){return u[e.peek(n+1)].disasm(e,n)}},this.opecodeTable[203]={mnemonic:function(){return p},proc:function(){p[e.fetch()].proc()},disasm:function(e,n){return p[e.peek(n+1)].disasm(e,n)}},this.opecodeTable[237]={mnemonic:function(){return l},proc:function(){l[e.fetch()].proc()},disasm:function(e,n){return l[e.peek(n+1)].disasm(e,n)}},o.REG_r_ID2NAME)for(t in c=o.REG_r_ID2NAME[n],o.REG_r_ID2NAME)s=o.REG_r_ID2NAME[t],m=64|n<<3|t,this.opecodeTable[m]={mnemonic:"LD "+c+","+s,proc:function(n,t,r){return function(){e.reg["set"+t](e.reg["get"+r]())}}(0,c,s),cycle:4,disasm:function(e,n,t){return function(){return{code:[e],mnemonic:["LD",n,t]}}}(m,c,s)};var h=function(e,n){var t,r=e.peek(n),c=[r],i=0!=(64&r)?1:0,s=r>>3&7,m=r>>0&7,a=["???","???"];switch(a[0]=6==s?"(HL)":o.REG_r_ID2NAME[s],i){case 0:t=e.peek(n+1),c.push(t),a[1]=t.HEX(2)+"H";break;case 1:a[1]=6==m?"(HL)":o.REG_r_ID2NAME[m]}return{code:c,mnemonic:["LD",a[0],a[1]]}};this.opecodeTable[r("0006")]={mnemonic:"LD B,n",proc:function(){e.reg.setB(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0016")]={mnemonic:"LD C,n",proc:function(){e.reg.setC(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0026")]={mnemonic:"LD D,n",proc:function(){e.reg.setD(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0036")]={mnemonic:"LD E,n",proc:function(){e.reg.setE(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0046")]={mnemonic:"LD H,n",proc:function(){e.reg.setH(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0056")]={mnemonic:"LD L,n",proc:function(){e.reg.setL(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0076")]={mnemonic:"LD A,n",proc:function(){e.reg.setA(e.fetch())},cycle:7,disasm:h},this.opecodeTable[r("0106")]={mnemonic:"LD B,(HL)",proc:function(){e.reg.setB(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0116")]={mnemonic:"LD C,(HL)",proc:function(){e.reg.setC(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0126")]={mnemonic:"LD D,(HL)",proc:function(){e.reg.setD(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0136")]={mnemonic:"LD E,(HL)",proc:function(){e.reg.setE(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0146")]={mnemonic:"LD H,(HL)",proc:function(){e.reg.setH(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0156")]={mnemonic:"LD L,(HL)",proc:function(){e.reg.setL(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0176")]={mnemonic:"LD A,(HL)",proc:function(){e.reg.setA(e.memory.peek(e.reg.getHL()))},cycle:7,disasm:h},this.opecodeTable[r("0160")]={mnemonic:"LD (HL),B",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getB())},cycle:10,disasm:h},this.opecodeTable[r("0161")]={mnemonic:"LD (HL),C",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getC())},cycle:10,disasm:h},this.opecodeTable[r("0162")]={mnemonic:"LD (HL),D",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getD())},cycle:10,disasm:h},this.opecodeTable[r("0163")]={mnemonic:"LD (HL),E",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getE())},cycle:10,disasm:h},this.opecodeTable[r("0164")]={mnemonic:"LD (HL),H",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getH())},cycle:10,disasm:h},this.opecodeTable[r("0165")]={mnemonic:"LD (HL),L",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getL())},cycle:10,disasm:h},this.opecodeTable[r("0167")]={mnemonic:"LD (HL),A",proc:function(){e.memory.poke(e.reg.getHL(),e.reg.getA())},cycle:10,disasm:h},this.opecodeTable[r("0066")]={mnemonic:"LD (HL),n",proc:function(){e.memory.poke(e.reg.getHL(),e.fetch())},cycle:10,disasm:h},this.opecodeTable[r("0012")]={mnemonic:"LD A,(BC)",proc:function(){e.reg.setA(e.memory.peek(e.reg.getBC()))},cycle:7,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["LD","A","(BC)"]}}},this.opecodeTable[r("0032")]={mnemonic:"LD A,(DE)",proc:function(){e.reg.setA(e.memory.peek(e.reg.getDE()))},cycle:7,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["LD","A","(DE)"]}}},this.opecodeTable[r("0072")]={mnemonic:"LD A,(nn)",proc:function(){e.reg.setA(e.memory.peek(e.fetchPair()))},cycle:13,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2)],mnemonic:["LD","A","("+e.peekPair(n+1).HEX(4)+"H)"]}}},this.opecodeTable[r("0002")]={mnemonic:"LD (BC),A",proc:function(){e.memory.poke(e.reg.getBC(),e.reg.getA())},cycle:7,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["LD","(BC)","A"]}}},this.opecodeTable[r("0022")]={mnemonic:"LD (DE),A",proc:function(){e.memory.poke(e.reg.getDE(),e.reg.getA())},cycle:7,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["LD","(DE)","A"]}}},this.opecodeTable[r("0062")]={mnemonic:"LD (nn),A",proc:function(){e.memory.poke(e.fetchPair(),e.reg.getA())},cycle:13,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2)],mnemonic:["LD","("+e.peekPair(n+1).HEX(4)+"H)","A"]}}},l[r("0127")]={mnemonic:"LD A,I",proc:function(){e.reg.LD_A_I(e.IFF2)},cycle:9,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","A","I"]}}},l[r("0137")]={mnemonic:"LD A,R",proc:function(){e.reg.LD_A_R(e.IFF2,e.regB.R)},cycle:9,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","A","R"]}}},l[r("0107")]={mnemonic:"LD I,A",proc:function(){e.reg.I=e.reg.getA()},cycle:9,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","I","A"]}}},l[r("0117")]={mnemonic:"LD R,A",proc:function(){e.reg.R=e.regB.R=e.reg.getA()},cycle:9,disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","R","A"]}}};var y=function(e,n,t,r){var c=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),c],mnemonic:["LD",t,"("+r+"+"+c.HEX(2)+"H)"]}},k=function(e,n,t,r){var c=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),c],mnemonic:["LD","("+t+"+"+c.HEX(2)+"H)",r]}};a[r("0106")]={mnemonic:"LD B,(IX+d)",proc:function(){e.reg.setB(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"B","IX")}},a[r("0116")]={mnemonic:"LD C,(IX+d)",proc:function(){e.reg.setC(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"C","IX")}},a[r("0126")]={mnemonic:"LD D,(IX+d)",proc:function(){e.reg.setD(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"D","IX")}},a[r("0136")]={mnemonic:"LD E,(IX+d)",proc:function(){e.reg.setE(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"E","IX")}},a[r("0146")]={mnemonic:"LD H,(IX+d)",proc:function(){e.reg.setH(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"H","IX")}},a[r("0156")]={mnemonic:"LD L,(IX+d)",proc:function(){e.reg.setL(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"L","IX")}},a[r("0176")]={mnemonic:"LD A,(IX+d)",proc:function(){e.reg.setA(e.memory.peek(e.reg.IX+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"A","IX")}},a[r("0160")]={mnemonic:"LD (IX+d),B",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getB())},cycle:19,disasm:function(e,n){return k(e,n,"IX","B")}},a[r("0161")]={mnemonic:"LD (IX+d),C",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getC())},cycle:19,disasm:function(e,n){return k(e,n,"IX","C")}},a[r("0162")]={mnemonic:"LD (IX+d),D",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getD())},cycle:19,disasm:function(e,n){return k(e,n,"IX","D")}},a[r("0163")]={mnemonic:"LD (IX+d),E",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getE())},cycle:19,disasm:function(e,n){return k(e,n,"IX","E")}},a[r("0164")]={mnemonic:"LD (IX+d),H",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getH())},cycle:19,disasm:function(e,n){return k(e,n,"IX","H")}},a[r("0165")]={mnemonic:"LD (IX+d),L",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getL())},cycle:19,disasm:function(e,n){return k(e,n,"IX","L")}},a[r("0167")]={mnemonic:"LD (IX+d),A",proc:function(){e.memory.poke(e.reg.IX+e.fetch(),e.reg.getA())},cycle:19,disasm:function(e,n){return k(e,n,"IX","A")}},u[r("0106")]={mnemonic:"LD B,(IY+d)",proc:function(){e.reg.setB(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"B","IY")}},u[r("0116")]={mnemonic:"LD C,(IY+d)",proc:function(){e.reg.setC(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"C","IY")}},u[r("0126")]={mnemonic:"LD D,(IY+d)",proc:function(){e.reg.setD(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"D","IY")}},u[r("0136")]={mnemonic:"LD E,(IY+d)",proc:function(){e.reg.setE(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"E","IY")}},u[r("0146")]={mnemonic:"LD H,(IY+d)",proc:function(){e.reg.setH(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"H","IY")}},u[r("0156")]={mnemonic:"LD L,(IY+d)",proc:function(){e.reg.setL(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"L","IY")}},u[r("0176")]={mnemonic:"LD A,(IY+d)",proc:function(){e.reg.setA(e.memory.peek(e.reg.IY+e.fetch()))},cycle:19,disasm:function(e,n){return y(e,n,"A","IY")}},u[r("0160")]={mnemonic:"LD (IY+d),B",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getB())},cycle:19,disasm:function(e,n){return k(e,n,"IY","B")}},u[r("0161")]={mnemonic:"LD (IY+d),C",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getC())},cycle:19,disasm:function(e,n){return k(e,n,"IY","C")}},u[r("0162")]={mnemonic:"LD (IY+d),D",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getD())},cycle:19,disasm:function(e,n){return k(e,n,"IY","D")}},u[r("0163")]={mnemonic:"LD (IY+d),E",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getE())},cycle:19,disasm:function(e,n){return k(e,n,"IY","E")}},u[r("0164")]={mnemonic:"LD (IY+d),H",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getH())},cycle:19,disasm:function(e,n){return k(e,n,"IY","H")}},u[r("0165")]={mnemonic:"LD (IY+d),L",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getL())},cycle:19,disasm:function(e,n){return k(e,n,"IY","L")}},u[r("0167")]={mnemonic:"LD (IY+d),A",proc:function(){e.memory.poke(e.reg.IY+e.fetch(),e.reg.getA())},cycle:19,disasm:function(e,n){return k(e,n,"IY","A")}};var C=function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=i.pair(c,r),s=t>>4&3;switch(s){case 0:s="BC";break;case 1:s="DE";break;case 2:s="HL";break;case 3:s="SP";break;default:throw"*** LD dd,nn; but unknown dd."}return{code:[t,r,c],mnemonic:["LD",s,o.HEX(4)+"H"]}};this.opecodeTable[r("0001")]={mnemonic:"LD BC,nn",cycle:10,proc:function(){e.reg.setC(e.fetch()),e.reg.setB(e.fetch())},disasm:C},this.opecodeTable[r("0021")]={mnemonic:"LD DE,nn",cycle:10,proc:function(){e.reg.setE(e.fetch()),e.reg.setD(e.fetch())},disasm:C},this.opecodeTable[r("0041")]={mnemonic:"LD HL,nn",cycle:10,proc:function(){e.reg.setL(e.fetch()),e.reg.setH(e.fetch())},disasm:C},this.opecodeTable[r("0061")]={mnemonic:"LD SP,nn",cycle:10,proc:function(){e.reg.SP=e.fetchPair()},disasm:C},this.opecodeTable[r("0052")]={mnemonic:"LD HL,(nn)",cycle:16,proc:function(){var n=e.fetchPair();e.reg.setL(e.memory.peek(n+0)),e.reg.setH(e.memory.peek(n+1))},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2);return{code:[t,r,c],mnemonic:["LD","HL","("+i.pair(c,r).HEX(4)+"H)"]}}},l[r("0113")]={mnemonic:"LD BC,(nn)",cycle:20,proc:function(){var n=e.fetchPair();e.reg.setC(e.memory.peek(n+0)),e.reg.setB(e.memory.peek(n+1))},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","BC","("+i.pair(o,c).HEX(4)+"H)"]}}},l[r("0133")]={mnemonic:"LD DE,(nn)",cycle:20,proc:function(){var n=e.fetchPair();e.reg.setE(e.memory.peek(n+0)),e.reg.setD(e.memory.peek(n+1))},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","DE","("+i.pair(o,c).HEX(4)+"H)"]}}},l[r("0153")]={mnemonic:"LD HL,(nn)",cycle:20,proc:function(){var n=e.fetchPair();e.reg.setL(e.memory.peek(n+0)),e.reg.setH(e.memory.peek(n+1))},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","HL","("+i.pair(o,c).HEX(4)+"H)"]}}},l[r("0173")]={mnemonic:"LD SP,(nn)",cycle:20,proc:function(){e.reg.SP=e.memory.peekPair(e.fetchPair())},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","SP","("+i.pair(o,c).HEX(4)+"H)"]}}},this.opecodeTable[r("0042")]={mnemonic:"LD (nn), HL",cycle:16,proc:function(){var n=e.fetchPair();e.memory.poke(n+0,e.reg.getL()),e.memory.poke(n+1,e.reg.getH())},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2);return{code:[t,r,c],mnemonic:["LD","("+i.pair(c,r).HEX(4)+"H)","HL"]}}},l[r("0103")]={mnemonic:"LD (nn),BC",cycle:20,proc:function(){var n=e.fetchPair();e.memory.poke(n+0,e.reg.getC()),e.memory.poke(n+1,e.reg.getB())},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","("+i.pair(o,c).HEX(4)+"H)","BC"]}}},l[r("0123")]={mnemonic:"LD (nn),DE",cycle:20,proc:function(){var n=e.fetchPair();e.memory.poke(n+0,e.reg.getE()),e.memory.poke(n+1,e.reg.getD())},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","("+i.pair(o,c).HEX(4)+"H)","DE"]}}},l[r("0143")]={mnemonic:"LD (nn),HL",cycle:20,proc:function(){var n=e.fetchPair();e.memory.poke(n+0,e.reg.getL()),e.memory.poke(n+1,e.reg.getH())},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","("+i.pair(o,c).HEX(4)+"H)","HL"]}}},l[r("0163")]={mnemonic:"LD (nn),SP",cycle:20,proc:function(){var n=e.fetchPair();e.memory.poke(n+0,e.reg.SP>>0&255),e.memory.poke(n+1,e.reg.SP>>8&255)},disasm:function(e,n){var t=e.peek(n),r=e.peek(n+1),c=e.peek(n+2),o=e.peek(n+3);return{code:[t,r,c,o],mnemonic:["LD","("+i.pair(o,c).HEX(4)+"H)","SP"]}}},this.opecodeTable[r("0371")]={mnemonic:"LD SP,HL",cycle:6,proc:function(){e.reg.SP=e.reg.getHL()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["LD","SP","HL"]}}},this.opecodeTable[197]={mnemonic:"PUSH BC",cycle:11,proc:function(){e.memory.poke(--e.reg.SP,e.reg.getB()),e.memory.poke(--e.reg.SP,e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["PUSH","BC"]}}},this.opecodeTable[213]={mnemonic:"PUSH DE",cycle:11,proc:function(){e.memory.poke(--e.reg.SP,e.reg.getD()),e.memory.poke(--e.reg.SP,e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["PUSH","DE"]}}},this.opecodeTable[229]={mnemonic:"PUSH HL",cycle:11,proc:function(){e.memory.poke(--e.reg.SP,e.reg.getH()),e.memory.poke(--e.reg.SP,e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["PUSH","HL"]}}},this.opecodeTable[245]={mnemonic:"PUSH AF",cycle:11,proc:function(){e.memory.poke(--e.reg.SP,e.reg.getA()),e.memory.poke(--e.reg.SP,e.reg.getF())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["PUSH","AF"]}}},this.opecodeTable[193]={mnemonic:"POP BC",cycle:10,proc:function(){e.reg.setC(e.memory.peek(e.reg.SP++)),e.reg.setB(e.memory.peek(e.reg.SP++))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["POP","BC"]}}},this.opecodeTable[209]={mnemonic:"POP DE",cycle:10,proc:function(){e.reg.setE(e.memory.peek(e.reg.SP++)),e.reg.setD(e.memory.peek(e.reg.SP++))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["POP","DE"]}}},this.opecodeTable[225]={mnemonic:"POP HL",cycle:10,proc:function(){e.reg.setL(e.memory.peek(e.reg.SP++)),e.reg.setH(e.memory.peek(e.reg.SP++))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["POP","HL"]}}},this.opecodeTable[241]={mnemonic:"POP AF",cycle:10,proc:function(){e.reg.setF(e.memory.peek(e.reg.SP++)),e.reg.setA(e.memory.peek(e.reg.SP++))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["POP","AF"]}}},a[33]={mnemonic:"LD IX,nn",cycle:14,proc:function(){e.reg.IX=e.fetchPair()},disasm:function(e,n){return{code:[221,33,e.peek(n+2),e.peek(n+3)],mnemonic:["LD","IX",e.peekPair(n+2).HEX(4)+"H"]}}},a[42]={mnemonic:"LD IX,(nn)",cycle:20,proc:function(){e.reg.IX=e.memory.peekPair(e.fetchPair())},disasm:function(e,n){return{code:[221,42,e.peek(n+2),e.peek(n+3)],mnemonic:["LD","IX","("+e.peekPair(n+2).HEX(4)+"H)"]}}},a[54]={mnemonic:"LD (IX+d),n",cycle:19,proc:function(){var n=e.fetch(),t=e.fetch();e.memory.poke(e.reg.IX+n,t)},disasm:function(e,n){var t=e.peek(n+2),r=e.peek(n+3);return{code:[221,54,t,r],mnemonic:["LD","(IX + "+t.HEX(2)+"H)",r.HEX(2)+"H"]}}},a[249]={mnemonic:"LD SP,IX",cycle:10,proc:function(){e.reg.SP=e.reg.IX},disasm:function(){return{code:[221,249],mnemonic:["LD","SP","IX"]}}},a[229]={mnemonic:"PUSH IX",cycle:15,proc:function(){e.memory.poke(--e.reg.SP,i.hibyte(e.reg.IX)),e.memory.poke(--e.reg.SP,i.lobyte(e.reg.IX))},disasm:function(){return{code:[221,229],mnemonic:["PUSH","IX"]}}},a[225]={mnemonic:"POP IX",cycle:14,proc:function(){e.reg.IX=e.memory.peekPair(e.reg.SP),e.reg.SP+=2},disasm:function(){return{code:[221,225],mnemonic:["POP","IX"]}}},a[227]={mnemonic:"EX (SP),IX",cycle:23,proc:function(){var n=e.memory.peek(e.reg.SP+1);e.memory.poke(e.reg.SP+1,i.hibyte(e.reg.IX));var t=e.memory.peek(e.reg.SP);e.memory.poke(e.reg.SP,i.lobyte(e.reg.IX)),e.reg.IX=i.pair(n,t)},disasm:function(){return{code:[221,227],mnemonic:["EX","(SP)","IX"]}}},u[33]={mnemonic:"LD IY,nn",cycle:14,proc:function(){e.reg.IY=e.fetchPair()},disasm:function(e,n){return{code:[253,33,e.peek(n+2),e.peek(n+3)],mnemonic:["LD","IY",e.peekPair(n+2).HEX(4)+"H"]}}},u[42]={mnemonic:"LD IY,(nn)",cycle:20,proc:function(){e.reg.IY=e.memory.peekPair(e.fetchPair())},disasm:function(e,n){return{code:[253,42,e.peek(n+2),e.peek(n+3)],mnemonic:["LD","IY","("+e.peekPair(n+2).HEX(4)+"H)"]}}},u[54]={mnemonic:"LD (IY+d),n",cycle:19,proc:function(){var n=e.fetch(),t=e.fetch();e.memory.poke(e.reg.IY+n,t)},disasm:function(e,n){var t=e.peek(n+2),r=e.peek(n+3);return{code:[253,54,t,r],mnemonic:["LD","(IY + "+t.HEX(2)+"H)",r.HEX(2)+"H"]}}},u[249]={mnemonic:"LD SP,IY",cycle:10,proc:function(){e.reg.SP=e.reg.IY},disasm:function(){return{code:[253,249],mnemonic:["LD","SP","IY"]}}},u[229]={mnemonic:"PUSH IY",cycle:15,proc:function(){e.memory.poke(--e.reg.SP,i.hibyte(e.reg.IY)),e.memory.poke(--e.reg.SP,i.lobyte(e.reg.IY))},disasm:function(){return{code:[253,229],mnemonic:["PUSH","IY"]}}},u[225]={mnemonic:"POP IY",cycle:14,proc:function(){e.reg.IY=e.memory.peekPair(e.reg.SP),e.reg.SP+=2},disasm:function(){return{code:[253,225],mnemonic:["POP","IY"]}}},u[227]={mnemonic:"EX (SP),IY",cycle:23,proc:function(){var n=e.memory.peek(e.reg.SP+1);e.memory.poke(e.reg.SP+1,e.reg.IY>>8&255);var t=e.memory.peek(e.reg.SP);e.memory.poke(e.reg.SP,e.reg.IY>>0&255),e.reg.IY=(n<<8)+t},disasm:function(){return{code:[253,227],mnemonic:["EX","(SP)","IY"]}}},this.opecodeTable[235]={mnemonic:"EX DE,HL ",cycle:4,proc:function(){var n=e.reg.getD();e.reg.setD(e.reg.getH()),e.reg.setH(n),n=e.reg.getE(),e.reg.setE(e.reg.getL()),e.reg.setL(n)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["EX","DE","HL"]}}},this.opecodeTable[8]={mnemonic:"EX AF,AF'",cycle:4,proc:function(){var n=e.reg.getA();e.reg.setA(e.regB.getA()),e.regB.setA(n),n=e.reg.getF(),e.reg.setF(e.regB.getF()),e.regB.setF(n)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["EX","AF","AF'"]}}},this.opecodeTable[217]={mnemonic:"EXX",cycle:4,proc:function(){var n=e.reg.getB();e.reg.setB(e.regB.getB()),e.regB.setB(n),n=e.reg.getC(),e.reg.setC(e.regB.getC()),e.regB.setC(n),n=e.reg.getD(),e.reg.setD(e.regB.getD()),e.regB.setD(n),n=e.reg.getE(),e.reg.setE(e.regB.getE()),e.regB.setE(n),n=e.reg.getH(),e.reg.setH(e.regB.getH()),e.regB.setH(n),n=e.reg.getL(),e.reg.setL(e.regB.getL()),e.regB.setL(n)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["EXX"]}}},this.opecodeTable[227]={mnemonic:"EX (SP),HL",cycle:19,proc:function(){var n=e.memory.peek(e.reg.SP+1);e.memory.poke(e.reg.SP+1,e.reg.getH()),e.reg.setH(n),n=e.memory.peek(e.reg.SP),e.memory.poke(e.reg.SP,e.reg.getL()),e.reg.setL(n)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["EX","(SP)","HL"]}}},l[r("0240")]={mnemonic:"LDI",cycle:16,proc:function(){e.memory.poke(e.reg.getDE(),e.memory.peek(e.reg.getHL())),e.reg.onLDI()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LDI"]}}},l[r("0260")]={mnemonic:"LDIR",cycle:"BC≠0→21, BC=0→16",proc:function(){return e.memory.poke(e.reg.getDE(),e.memory.peek(e.reg.getHL())),e.reg.onLDI(),0!=e.reg.getBC()?(e.reg.PC-=2,21):16},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LDIR"]}}},l[r("0250")]={mnemonic:"LDD",cycle:16,proc:function(){e.memory.poke(e.reg.getDE(),e.memory.peek(e.reg.getHL())),e.reg.onLDD()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LDD"]}}},l[r("0270")]={mnemonic:"LDDR",cycle:"BC≠0→21, BC=0→16",proc:function(){return e.memory.poke(e.reg.getDE(),e.memory.peek(e.reg.getHL())),e.reg.onLDD(),0!=e.reg.getBC()?(e.reg.PC-=2,21):16},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LDDR"]}}},l[r("0241")]={mnemonic:"CPI",cycle:16,proc:function(){e.reg.CPI(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["CPI"]}}},l[r("0261")]={mnemonic:"CPIR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return e.reg.CPI(e.memory.peek(e.reg.getHL())),0==e.reg.getBC()||e.reg.flagZ()?16:(e.reg.PC-=2,21)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["CPIR"]}}},l[r("0251")]={mnemonic:"CPD",cycle:16,proc:function(){e.reg.CPD(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["CPD"]}}},l[r("0271")]={mnemonic:"CPDR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return e.reg.CPD(e.memory.peek(e.reg.getHL())),0==e.reg.getBC()||e.reg.flagZ()?16:(e.reg.PC-=2,21)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["CPDR"]}}},this.opecodeTable[r("0200")]={mnemonic:"ADD A,B",cycle:4,proc:function(){e.reg.addAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","B"]}}},this.opecodeTable[r("0201")]={mnemonic:"ADD A,C",cycle:4,proc:function(){e.reg.addAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","C"]}}},this.opecodeTable[r("0202")]={mnemonic:"ADD A,D",cycle:4,proc:function(){e.reg.addAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","D"]}}},this.opecodeTable[r("0203")]={mnemonic:"ADD A,E",cycle:4,proc:function(){e.reg.addAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","E"]}}},this.opecodeTable[r("0204")]={mnemonic:"ADD A,H",cycle:4,proc:function(){e.reg.addAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","H"]}}},this.opecodeTable[r("0205")]={mnemonic:"ADD A,L",cycle:4,proc:function(){e.reg.addAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","L"]}}},this.opecodeTable[r("0207")]={mnemonic:"ADD A,A",cycle:4,proc:function(){e.reg.addAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","A"]}}},this.opecodeTable[r("0306")]={mnemonic:"ADD A,n",cycle:7,proc:function(){e.reg.addAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["ADD","A",t.HEX(2)+"H"]}}},this.opecodeTable[r("0206")]={mnemonic:"ADD A,(HL)",cycle:7,proc:function(){e.reg.addAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","A","(HL)"]}}},a[r("0206")]={mnemonic:"ADD A,(IX+d)",cycle:19,proc:function(){e.reg.addAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["ADD","A","(IX+"+t.HEX(2)+"H)"]}}},u[r("0206")]={mnemonic:"ADD A,(IY+d)",cycle:19,proc:function(){e.reg.addAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["ADD","A","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0210")]={mnemonic:"ADC A,B",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","B"]}}},this.opecodeTable[r("0211")]={mnemonic:"ADC A,C",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","C"]}}},this.opecodeTable[r("0212")]={mnemonic:"ADC A,D",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","D"]}}},this.opecodeTable[r("0213")]={mnemonic:"ADC A,E",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","E"]}}},this.opecodeTable[r("0214")]={mnemonic:"ADC A,H",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","H"]}}},this.opecodeTable[r("0215")]={mnemonic:"ADC A,L",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","L"]}}},this.opecodeTable[r("0217")]={mnemonic:"ADC A,A",cycle:4,proc:function(){e.reg.addAccWithCarry(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","A"]}}},this.opecodeTable[r("0316")]={mnemonic:"ADC A,n",cycle:7,proc:function(){e.reg.addAccWithCarry(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["ADC","A",t.HEX(2)+"H"]}}},this.opecodeTable[r("0216")]={mnemonic:"ADC A,(HL)",cycle:7,proc:function(){e.reg.addAccWithCarry(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADC","A","(HL)"]}}},a[r("0216")]={mnemonic:"ADC A,(IX+d)",cycle:19,proc:function(){e.reg.addAccWithCarry(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["ADC","A","(IX+"+t.HEX(2)+"H)"]}}},u[r("0216")]={mnemonic:"ADC A,(IY+d)",cycle:19,proc:function(){e.reg.addAccWithCarry(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["ADC","A","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0220")]={mnemonic:"SUB A,B",cycle:4,proc:function(){e.reg.subAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","B"]}}},this.opecodeTable[r("0221")]={mnemonic:"SUB A,C",cycle:4,proc:function(){e.reg.subAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","C"]}}},this.opecodeTable[r("0222")]={mnemonic:"SUB A,D",cycle:4,proc:function(){e.reg.subAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","D"]}}},this.opecodeTable[r("0223")]={mnemonic:"SUB A,E",cycle:4,proc:function(){e.reg.subAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","E"]}}},this.opecodeTable[r("0224")]={mnemonic:"SUB A,H",cycle:4,proc:function(){e.reg.subAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","H"]}}},this.opecodeTable[r("0225")]={mnemonic:"SUB A,L",cycle:4,proc:function(){e.reg.subAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","L"]}}},this.opecodeTable[r("0227")]={mnemonic:"SUB A,A",cycle:4,proc:function(){e.reg.subAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","A"]}}},this.opecodeTable[r("0326")]={mnemonic:"SUB A,n",cycle:7,proc:function(){e.reg.subAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["SUB","A",t.HEX(2)+"H"]}}},this.opecodeTable[r("0226")]={mnemonic:"SUB A,(HL)",cycle:7,proc:function(){e.reg.subAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SUB","A","(HL)"]}}},a[r("0226")]={mnemonic:"SUB A,(IX+d)",cycle:19,proc:function(){e.reg.subAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["SUB","A","(IX+"+t.HEX(2)+"H)"]}}},u[r("0226")]={mnemonic:"SUB A,(IY+d)",cycle:19,proc:function(){e.reg.subAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["SUB","A","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0230")]={mnemonic:"SBC A,B",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","B"]}}},this.opecodeTable[r("0231")]={mnemonic:"SBC A,C",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","C"]}}},this.opecodeTable[r("0232")]={mnemonic:"SBC A,D",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","D"]}}},this.opecodeTable[r("0233")]={mnemonic:"SBC A,E",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","E"]}}},this.opecodeTable[r("0234")]={mnemonic:"SBC A,H",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","H"]}}},this.opecodeTable[r("0235")]={mnemonic:"SBC A,L",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","L"]}}},this.opecodeTable[r("0237")]={mnemonic:"SBC A,A",cycle:4,proc:function(){e.reg.subAccWithCarry(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","A"]}}},this.opecodeTable[r("0336")]={mnemonic:"SBC A,n",cycle:7,proc:function(){e.reg.subAccWithCarry(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["SBC","A,"+t.HEX(2)+"H"]}}},this.opecodeTable[r("0236")]={mnemonic:"SBC A,(HL)",cycle:7,proc:function(){e.reg.subAccWithCarry(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SBC","A","(HL)"]}}},a[r("0236")]={mnemonic:"SBC A,(IX+d)",cycle:19,proc:function(){e.reg.subAccWithCarry(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["SBC","A","(IX+"+t.HEX(2)+"H)"]}}},u[r("0236")]={mnemonic:"SBC A,(IY+d)",cycle:19,proc:function(){e.reg.subAccWithCarry(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["SBC","A","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0240")]={mnemonic:"AND B",cycle:4,proc:function(){e.reg.andAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","B"]}}},this.opecodeTable[r("0241")]={mnemonic:"AND C",cycle:4,proc:function(){e.reg.andAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","C"]}}},this.opecodeTable[r("0242")]={mnemonic:"AND D",cycle:4,proc:function(){e.reg.andAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","D"]}}},this.opecodeTable[r("0243")]={mnemonic:"AND E",cycle:4,proc:function(){e.reg.andAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","E"]}}},this.opecodeTable[r("0244")]={mnemonic:"AND H",cycle:4,proc:function(){e.reg.andAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","H"]}}},this.opecodeTable[r("0245")]={mnemonic:"AND L",cycle:4,proc:function(){e.reg.andAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","L"]}}},this.opecodeTable[r("0247")]={mnemonic:"AND A",cycle:4,proc:function(){e.reg.andAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","A"]}}},this.opecodeTable[r("0346")]={mnemonic:"AND n",cycle:7,proc:function(){e.reg.andAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["AND",t.HEX(2)+"H"]}}},this.opecodeTable[r("0246")]={mnemonic:"AND (HL)",cycle:7,proc:function(){e.reg.andAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["AND","(HL)"]}}},a[r("0246")]={mnemonic:"AND (IX+d)",cycle:19,proc:function(){e.reg.andAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["AND","(IX+"+t.HEX(2)+"H)"]}}},u[r("0246")]={mnemonic:"AND (IY+d)",cycle:19,proc:function(){e.reg.andAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["AND","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0260")]={mnemonic:"OR B",cycle:4,proc:function(){e.reg.orAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","B"]}}},this.opecodeTable[r("0261")]={mnemonic:"OR C",cycle:4,proc:function(){e.reg.orAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","C"]}}},this.opecodeTable[r("0262")]={mnemonic:"OR D",cycle:4,proc:function(){e.reg.orAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","D"]}}},this.opecodeTable[r("0263")]={mnemonic:"OR E",cycle:4,proc:function(){e.reg.orAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","E"]}}},this.opecodeTable[r("0264")]={mnemonic:"OR H",cycle:4,proc:function(){e.reg.orAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","H"]}}},this.opecodeTable[r("0265")]={mnemonic:"OR L",cycle:4,proc:function(){e.reg.orAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","L"]}}},this.opecodeTable[r("0267")]={mnemonic:"OR A",cycle:4,proc:function(){e.reg.orAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","A"]}}},this.opecodeTable[r("0366")]={mnemonic:"OR n",cycle:7,proc:function(){e.reg.orAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["OR",t.HEX(2)+"H"]}}},this.opecodeTable[r("0266")]={mnemonic:"OR (HL)",cycle:7,proc:function(){e.reg.orAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["OR","(HL)"]}}},a[r("0266")]={mnemonic:"OR (IX+d)",cycle:19,proc:function(){e.reg.orAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["OR","(IX+"+t.HEX(2)+"H)"]}}},u[r("0266")]={mnemonic:"OR (IY+d)",cycle:19,proc:function(){e.reg.orAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["OR","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0250")]={mnemonic:"XOR B",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","B"]}}},this.opecodeTable[r("0251")]={mnemonic:"XOR C",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","C"]}}},this.opecodeTable[r("0252")]={mnemonic:"XOR D",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","D"]}}},this.opecodeTable[r("0253")]={mnemonic:"XOR E",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","E"]}}},this.opecodeTable[r("0254")]={mnemonic:"XOR H",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","H"]}}},this.opecodeTable[r("0255")]={mnemonic:"XOR L",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","L"]}}},this.opecodeTable[r("0257")]={mnemonic:"XOR A",cycle:4,proc:function(){e.reg.xorAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","A"]}}},this.opecodeTable[r("0356")]={mnemonic:"XOR n",cycle:7,proc:function(){e.reg.xorAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["XOR",t.HEX(2)+"H"]}}},this.opecodeTable[r("0256")]={mnemonic:"XOR (HL)",cycle:7,proc:function(){e.reg.xorAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["XOR","(HL)"]}}},a[r("0256")]={mnemonic:"XOR (IX+d)",cycle:19,proc:function(){e.reg.xorAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["XOR","(IX+"+t.HEX(2)+"H)"]}}},u[r("0256")]={mnemonic:"XOR (IY+d)",cycle:19,proc:function(){e.reg.xorAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["XOR","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0270")]={mnemonic:"CP B",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","B"]}}},this.opecodeTable[r("0271")]={mnemonic:"CP C",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","C"]}}},this.opecodeTable[r("0272")]={mnemonic:"CP D",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","D"]}}},this.opecodeTable[r("0273")]={mnemonic:"CP E",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","E"]}}},this.opecodeTable[r("0274")]={mnemonic:"CP H",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","H"]}}},this.opecodeTable[r("0275")]={mnemonic:"CP L",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","L"]}}},this.opecodeTable[r("0277")]={mnemonic:"CP A",cycle:4,proc:function(){e.reg.compareAcc(e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","A"]}}},this.opecodeTable[r("0376")]={mnemonic:"CP n",cycle:7,proc:function(){e.reg.compareAcc(e.fetch())},disasm:function(e,n){var t=e.peek(n+1);return{code:[e.peek(n),t],mnemonic:["CP",t.HEX(2)+"H"]}}},this.opecodeTable[r("0276")]={mnemonic:"CP (HL)",cycle:7,proc:function(){e.reg.compareAcc(e.memory.peek(e.reg.getHL()))},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CP","(HL)"]}}},a[r("0276")]={mnemonic:"CP (IX+d)",cycle:19,proc:function(){e.reg.compareAcc(e.memory.peek(e.reg.IX+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["CP","(IX+"+t.HEX(2)+"H)"]}}},u[r("0276")]={mnemonic:"CP (IY+d)",cycle:19,proc:function(){e.reg.compareAcc(e.memory.peek(e.reg.IY+e.fetch()))},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["CP","(IY+"+t.HEX(2)+"H)"]}}},this.opecodeTable[r("0004")]={mnemonic:"INC B",cycle:4,proc:function(){e.reg.increment("B")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","B"]}}},this.opecodeTable[r("0014")]={mnemonic:"INC C",cycle:4,proc:function(){e.reg.increment("C")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","C"]}}},this.opecodeTable[r("0024")]={mnemonic:"INC D",cycle:4,proc:function(){e.reg.increment("D")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","D"]}}},this.opecodeTable[r("0034")]={mnemonic:"INC E",cycle:4,proc:function(){e.reg.increment("E")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","E"]}}},this.opecodeTable[r("0044")]={mnemonic:"INC H",cycle:4,proc:function(){e.reg.increment("H")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","H"]}}},this.opecodeTable[r("0054")]={mnemonic:"INC L",cycle:4,proc:function(){e.reg.increment("L")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","L"]}}},this.opecodeTable[r("0074")]={mnemonic:"INC A",cycle:4,proc:function(){e.reg.increment("A")},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","A"]}}},this.opecodeTable[r("0064")]={mnemonic:"INC (HL)",cycle:11,proc:function(){e.incrementAt(e.reg.getHL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","(HL)"]}}},a[r("0064")]={mnemonic:"INC (IX+d)",cycle:23,proc:function(){e.incrementAt(e.reg.IX+e.fetch())},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["INC","(IX+ "+t+")"]}}},u[r("0064")]={mnemonic:"INC (IY+d)",cycle:23,proc:function(){e.incrementAt(e.reg.IY+e.fetch())},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["INC","(IY+ "+t+")"]}}},this.opecodeTable[r("0005")]={mnemonic:"DEC B",proc:function(){e.reg.decrement("B")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","B"]}}},this.opecodeTable[r("0015")]={mnemonic:"DEC C",proc:function(){e.reg.decrement("C")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","C"]}}},this.opecodeTable[r("0025")]={mnemonic:"DEC D",proc:function(){e.reg.decrement("D")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","D"]}}},this.opecodeTable[r("0035")]={mnemonic:"DEC E",proc:function(){e.reg.decrement("E")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","E"]}}},this.opecodeTable[r("0045")]={mnemonic:"DEC H",proc:function(){e.reg.decrement("H")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","H"]}}},this.opecodeTable[r("0055")]={mnemonic:"DEC L",proc:function(){e.reg.decrement("L")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","L"]}}},this.opecodeTable[r("0075")]={mnemonic:"DEC A",proc:function(){e.reg.decrement("A")},cycle:4,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","A"]}}},this.opecodeTable[r("0065")]={mnemonic:"DEC (HL)",proc:function(){e.decrementAt(e.reg.getHL())},cycle:11,disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","(HL)"]}}},a[r("0065")]={mnemonic:"DEC (IX+d)",cycle:23,proc:function(){e.decrementAt(e.reg.IX+e.fetch())},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["DEC","(IX+ "+t+")"]}}},u[r("0065")]={mnemonic:"DEC (IY+d)",cycle:23,proc:function(){e.decrementAt(e.reg.IY+e.fetch())},disasm:function(e,n){var t=e.peek(n+2);return{code:[e.peek(n),e.peek(n+1),t],mnemonic:["DEC","(IY+ "+t+")"]}}},this.opecodeTable[r("0047")]={mnemonic:"DAA",cycle:4,proc:function(){e.reg.DAA()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DAA"]}}},this.opecodeTable[r("0057")]={mnemonic:"CPL",cycle:4,proc:function(){e.reg.CPL()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CPL"]}}},this.opecodeTable[r("0077")]={mnemonic:"CCF",cycle:4,proc:function(){e.reg.flagC()?e.reg.clearFlagC():e.reg.setFlagC()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["CCF"]}}},this.opecodeTable[r("0067")]={mnemonic:"SCF",cycle:4,proc:function(){e.reg.setFlagC()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["SCF"]}}},this.opecodeTable[r("0000")]={mnemonic:"NOP",cycle:4,proc:function(){},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["NOP"]}}},this.opecodeTable[r("0166")]={mnemonic:"HALT",cycle:4,proc:function(){throw e.HALT=1,e.reg.PC-=1,e.exec=function(){throw e.reg.R=e.reg.R+1&255,"halt"},"halt"},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["HALT"]}}},this.opecodeTable[r("0363")]={mnemonic:"DI",cycle:4,proc:function(){e.IFF1=e.IFF2=0},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DI"]}}},this.opecodeTable[r("0373")]={mnemonic:"EI",cycle:4,proc:function(){e.IFF1?e.IFF2=1:(e.IFF1=this.IFF2=1,e.reg.R=e.reg.R+1&255,e.exec())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["EI"]}}},l[r("0104")]={mnemonic:"NEG",cycle:8,proc:function(){e.reg.NEG()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["NEG"]}}},l[r("0106")]={mnemonic:"IM0",cycle:8,proc:function(){e.IM=0},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IM0"]}}},l[r("0126")]={mnemonic:"IM1",cycle:8,proc:function(){e.IM=1},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IM1"]}}},l[r("0136")]={mnemonic:"IM2",cycle:8,proc:function(){e.IM=2},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IM2"]}}},this.opecodeTable[r("0011")]={mnemonic:"ADD HL,BC",cycle:11,proc:function(){e.reg.ADD_HL(e.reg.getBC())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","HL","BC"]}}},this.opecodeTable[r("0031")]={mnemonic:"ADD HL,DE",cycle:11,proc:function(){e.reg.ADD_HL(e.reg.getDE())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","HL","DE"]}}},this.opecodeTable[r("0051")]={mnemonic:"ADD HL,HL",cycle:11,proc:function(){e.reg.ADD_HL(e.reg.getHL())},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","HL","HL"]}}},this.opecodeTable[r("0071")]={mnemonic:"ADD HL,SP",cycle:11,proc:function(){e.reg.ADD_HL(e.reg.SP)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["ADD","HL","SP"]}}},l[r("0112")]={mnemonic:"ADC HL,BC",cycle:15,proc:function(){e.reg.ADC_HL(e.reg.getBC())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADC","HL","BC"]}}},l[r("0132")]={mnemonic:"ADC HL,DE",cycle:15,proc:function(){e.reg.ADC_HL(e.reg.getDE())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADC","HL","DE"]}}},l[r("0152")]={mnemonic:"ADC HL,HL",cycle:15,proc:function(){e.reg.ADC_HL(e.reg.getHL())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADC","HL","HL"]}}},l[r("0172")]={mnemonic:"ADC HL,SP",cycle:15,proc:function(){e.reg.ADC_HL(e.reg.SP)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADC","HL","SP"]}}},l[r("0102")]={mnemonic:"SBC HL,BC",cycle:15,proc:function(){e.reg.SBC_HL(e.reg.getBC())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SBC","HL","BC"]}}},l[r("0122")]={mnemonic:"SBC HL,DE",cycle:15,proc:function(){e.reg.SBC_HL(e.reg.getDE())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SBC","HL","DE"]}}},l[r("0142")]={mnemonic:"SBC HL,HL",cycle:15,proc:function(){e.reg.SBC_HL(e.reg.getHL())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SBC","HL","HL"]}}},l[r("0162")]={mnemonic:"SBC HL,SP",cycle:15,proc:function(){e.reg.SBC_HL(e.reg.SP)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SBC","HL","SP"]}}},a[r("0011")]={mnemonic:"ADD IX,BC",cycle:15,proc:function(){e.reg.ADD_IX(e.reg.getBC())},disasm:function(){return{code:[221,9],mnemonic:["ADD","IX","BC"]}}},a[r("0031")]={mnemonic:"ADD IX,DE",cycle:15,proc:function(){e.reg.ADD_IX(e.reg.getDE())},disasm:function(){return{code:[221,25],mnemonic:["ADD","IX","DE"]}}},a[r("0051")]={mnemonic:"ADD IX,IX",cycle:15,proc:function(){e.reg.ADD_IX(e.reg.IX)},disasm:function(){return{code:[221,41],mnemonic:["ADD","IX","IX"]}}},a[r("0071")]={mnemonic:"ADD IX,SP",cycle:15,proc:function(){e.reg.ADD_IX(e.reg.SP)},disasm:function(){return{code:[221,57],mnemonic:["ADD","IX","SP"]}}},u[r("0011")]={mnemonic:"ADD IY,BC",cycle:15,proc:function(){e.reg.ADD_IY(e.reg.getBC())},disasm:function(){return{code:[253,9],mnemonic:["ADD","IY","BC"]}}},u[r("0031")]={mnemonic:"ADD IY,DE",cycle:15,proc:function(){e.reg.ADD_IY(e.reg.getDE())},disasm:function(){return{code:[253,25],mnemonic:["ADD","IY","DE"]}}},u[r("0051")]={mnemonic:"ADD IY,IY",cycle:15,proc:function(){e.reg.ADD_IY(e.reg.IY)},disasm:function(){return{code:[253,41],mnemonic:["ADD","IY","IY"]}}},u[r("0071")]={mnemonic:"ADD IY,SP",cycle:15,proc:function(){e.reg.ADD_IY(e.reg.SP)},disasm:function(){return{code:[253,57],mnemonic:["ADD","IY","SP"]}}},this.opecodeTable[r("0003")]={mnemonic:"INC BC",cycle:6,proc:function(){e.reg.incBC()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","BC"]}}},this.opecodeTable[r("0023")]={mnemonic:"INC DE",cycle:6,proc:function(){e.reg.incDE()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","DE"]}}},this.opecodeTable[r("0043")]={mnemonic:"INC HL",cycle:6,proc:function(){e.reg.incHL()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","HL"]}}},this.opecodeTable[r("0063")]={mnemonic:"INC SP",cycle:6,proc:function(){e.reg.SP=e.reg.SP+1&65535},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["INC","SP"]}}},a[r("0043")]={mnemonic:"INC IX",cycle:10,proc:function(){e.reg.IX=e.reg.IX+1&65535},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["INC","IX"]}}},u[r("0043")]={mnemonic:"INC IY",cycle:10,proc:function(){e.reg.IY=e.reg.IY+1&65535},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["INC","IY"]}}},this.opecodeTable[r("0013")]={mnemonic:"DEC BC",cycle:6,proc:function(){e.reg.decBC()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","BC"]}}},this.opecodeTable[r("0033")]={mnemonic:"DEC DE",cycle:6,proc:function(){e.reg.decDE()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","DE"]}}},this.opecodeTable[r("0053")]={mnemonic:"DEC HL",cycle:6,proc:function(){e.reg.decHL()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","HL"]}}},this.opecodeTable[r("0073")]={mnemonic:"DEC SP",cycle:6,proc:function(){e.reg.SP=e.reg.SP-1&65535},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["DEC","SP"]}}},a[r("0053")]={mnemonic:"DEC IX",cycle:10,proc:function(){e.reg.IX=e.reg.IX-1&65535},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["DEC","IX"]}}},u[r("0053")]={mnemonic:"DEC IY",cycle:10,proc:function(){e.reg.IY=e.reg.IY-1&65535},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["DEC","IY"]}}},this.opecodeTable[r("0007")]={mnemonic:"RLCA",cycle:4,proc:function(){e.reg.RLCA()},disasm:function(){return{code:[r("0007")],mnemonic:["RLCA"]}}},this.opecodeTable[r("0027")]={mnemonic:"RLA",cycle:4,proc:function(){e.reg.RLA()},disasm:function(){return{code:[r("0027")],mnemonic:["RLA"]}}},this.opecodeTable[r("0017")]={mnemonic:"RRCA",cycle:4,proc:function(){e.reg.RRCA()},disasm:function(){return{code:[r("0017")],mnemonic:["RRCA"]}}},this.opecodeTable[r("0037")]={mnemonic:"RRA",cycle:4,proc:function(){e.reg.RRA()},disasm:function(){return{code:[r("0037")],mnemonic:["RRA"]}}},a[r("0313")]={mnemonic:function(){return f},proc:function(){var n=e.fetch(),t=e.fetch();f[t].proc(n)},disasm:function(e,n){var t=e.peek(n+3);return f[t].disasm(e,n)}},u[r("0313")]={mnemonic:function(){return d},proc:function(){var n=e.fetch(),t=e.fetch();d[t].proc(n)},disasm:function(e,n){var t=e.peek(n+3);return d[t].disasm(e,n)}},p[r("0000")]={mnemonic:"RLC B",cycle:4,proc:function(){e.reg.setB(e.reg.RLC(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","B"]}}},p[r("0001")]={mnemonic:"RLC C",cycle:4,proc:function(){e.reg.setC(e.reg.RLC(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","C"]}}},p[r("0002")]={mnemonic:"RLC D",cycle:4,proc:function(){e.reg.setD(e.reg.RLC(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","D"]}}},p[r("0003")]={mnemonic:"RLC E",cycle:4,proc:function(){e.reg.setE(e.reg.RLC(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","E"]}}},p[r("0004")]={mnemonic:"RLC H",cycle:4,proc:function(){e.reg.setH(e.reg.RLC(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","H"]}}},p[r("0005")]={mnemonic:"RLC L",cycle:4,proc:function(){e.reg.setL(e.reg.RLC(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","L"]}}},p[r("0007")]={mnemonic:"RLC A",cycle:4,proc:function(){e.reg.setA(e.reg.RLC(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","A"]}}},p[r("0006")]={mnemonic:"RLC (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.RLC(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLC","(HL)"]}}},f[r("0006")]={mnemonic:"RLC (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.RLC(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RLC","(IX+"+e.peek(n+2)+")"]}}},d[r("0006")]={mnemonic:"RLC (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.RLC(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RLC","(IY+"+e.peek(n+2)+")"]}}},p[r("0020")]={mnemonic:"RL B",cycle:8,proc:function(){e.reg.setB(e.reg.RL(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","B"]}}},p[r("0021")]={mnemonic:"RL C",cycle:8,proc:function(){e.reg.setC(e.reg.RL(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","C"]}}},p[r("0022")]={mnemonic:"RL D",cycle:8,proc:function(){e.reg.setD(e.reg.RL(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","D"]}}},p[r("0023")]={mnemonic:"RL E",cycle:8,proc:function(){e.reg.setE(e.reg.RL(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","E"]}}},p[r("0024")]={mnemonic:"RL H",cycle:8,proc:function(){e.reg.setH(e.reg.RL(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","H"]}}},p[r("0025")]={mnemonic:"RL L",cycle:8,proc:function(){e.reg.setL(e.reg.RL(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","L"]}}},p[r("0026")]={mnemonic:"RL (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.RL(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","(HL)"]}}},p[r("0027")]={mnemonic:"RL A",cycle:8,proc:function(){e.reg.setA(e.reg.RL(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RL","A"]}}},f[r("0026")]={mnemonic:"RL (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.RL(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RL","(IX+"+e.peek(n+2)+")"]}}},d[r("0026")]={mnemonic:"RL (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.RL(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RL","(IY+"+e.peek(n+2)+")"]}}},p[r("0010")]={mnemonic:"RRC B",cycle:4,proc:function(){e.reg.setB(e.reg.RRC(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","B"]}}},p[r("0011")]={mnemonic:"RRC C",cycle:4,proc:function(){e.reg.setC(e.reg.RRC(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","C"]}}},p[r("0012")]={mnemonic:"RRC D",cycle:4,proc:function(){e.reg.setD(e.reg.RRC(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","D"]}}},p[r("0013")]={mnemonic:"RRC E",cycle:4,proc:function(){e.reg.setE(e.reg.RRC(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","E"]}}},p[r("0014")]={mnemonic:"RRC H",cycle:4,proc:function(){e.reg.setH(e.reg.RRC(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","H"]}}},p[r("0015")]={mnemonic:"RRC L",cycle:4,proc:function(){e.reg.setL(e.reg.RRC(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","L"]}}},p[r("0017")]={mnemonic:"RRC A",cycle:4,proc:function(){e.reg.setA(e.reg.RRC(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","A"]}}},p[r("0016")]={mnemonic:"RRC (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.RRC(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRC","(HL)"]}}},f[r("0016")]={mnemonic:"RRC (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.RRC(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RRC","(IX+"+e.peek(n+2)+")"]}}},d[r("0016")]={mnemonic:"RRC (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.RRC(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RRC","(IY+"+e.peek(n+2)+")"]}}},p[r("0030")]={mnemonic:"RR B",cycle:8,proc:function(){e.reg.setB(e.reg.RR(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","B"]}}},p[r("0031")]={mnemonic:"RR C",cycle:8,proc:function(){e.reg.setC(e.reg.RR(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","C"]}}},p[r("0032")]={mnemonic:"RR D",cycle:8,proc:function(){e.reg.setD(e.reg.RR(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","D"]}}},p[r("0033")]={mnemonic:"RR E",cycle:8,proc:function(){e.reg.setE(e.reg.RR(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","E"]}}},p[r("0034")]={mnemonic:"RR H",cycle:8,proc:function(){e.reg.setH(e.reg.RR(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","H"]}}},p[r("0035")]={mnemonic:"RR L",cycle:8,proc:function(){e.reg.setL(e.reg.RR(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","L"]}}},p[r("0036")]={mnemonic:"RR (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.RR(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","(HL)"]}}},p[r("0037")]={mnemonic:"RR A",cycle:8,proc:function(){e.reg.setA(e.reg.RR(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RR","A"]}}},f[r("0036")]={mnemonic:"RR (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.RR(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RR","(IX+"+e.peek(n+2)+")"]}}},d[r("0036")]={mnemonic:"RR (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.RR(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["RR","(IY+"+e.peek(n+2)+")"]}}},p[r("0040")]={mnemonic:"SLA B",cycle:8,proc:function(){e.reg.setB(e.reg.SLA(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","B"]}}},p[r("0041")]={mnemonic:"SLA C",cycle:8,proc:function(){e.reg.setC(e.reg.SLA(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","C"]}}},p[r("0042")]={mnemonic:"SLA D",cycle:8,proc:function(){e.reg.setD(e.reg.SLA(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","D"]}}},p[r("0043")]={mnemonic:"SLA E",cycle:8,proc:function(){e.reg.setE(e.reg.SLA(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","E"]}}},p[r("0044")]={mnemonic:"SLA H",cycle:8,proc:function(){e.reg.setH(e.reg.SLA(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","H"]}}},p[r("0045")]={mnemonic:"SLA L",cycle:8,proc:function(){e.reg.setL(e.reg.SLA(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","L"]}}},p[r("0047")]={mnemonic:"SLA A",cycle:8,proc:function(){e.reg.setA(e.reg.SLA(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","A"]}}},p[r("0046")]={mnemonic:"SLA (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.SLA(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SLA","(HL)"]}}},f[r("0046")]={mnemonic:"SLA (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.SLA(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SLA","(IX+"+e.peek(n+2)+")"]}}},d[r("0046")]={mnemonic:"SLA (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.SLA(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SLA","(IY+"+e.peek(n+2)+")"]}}},p[r("0050")]={mnemonic:"SRA B",cycle:8,proc:function(){e.reg.setB(e.reg.SRA(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","B"]}}},p[r("0051")]={mnemonic:"SRA C",cycle:8,proc:function(){e.reg.setC(e.reg.SRA(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","C"]}}},p[r("0052")]={mnemonic:"SRA D",cycle:8,proc:function(){e.reg.setD(e.reg.SRA(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","D"]}}},p[r("0053")]={mnemonic:"SRA E",cycle:8,proc:function(){e.reg.setE(e.reg.SRA(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","E"]}}},p[r("0054")]={mnemonic:"SRA H",cycle:8,proc:function(){e.reg.setH(e.reg.SRA(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","H"]}}},p[r("0055")]={mnemonic:"SRA L",cycle:8,proc:function(){e.reg.setL(e.reg.SRA(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","L"]}}},p[r("0057")]={mnemonic:"SRA A",cycle:8,proc:function(){e.reg.setA(e.reg.SRA(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","A"]}}},p[r("0056")]={mnemonic:"SRA (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.SRA(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRA","(HL)"]}}},f[r("0056")]={mnemonic:"SRA (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.SRA(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SRA","(IX+"+e.peek(n+2)+")"]}}},d[r("0056")]={mnemonic:"SRA (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.SRA(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SRA","(IY+"+e.peek(n+2)+")"]}}},p[r("0070")]={mnemonic:"SRL B",cycle:8,proc:function(){e.reg.setB(e.reg.SRL(e.reg.getB()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","B"]}}},p[r("0071")]={mnemonic:"SRL C",cycle:8,proc:function(){e.reg.setC(e.reg.SRL(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","C"]}}},p[r("0072")]={mnemonic:"SRL D",cycle:8,proc:function(){e.reg.setD(e.reg.SRL(e.reg.getD()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","D"]}}},p[r("0073")]={mnemonic:"SRL E",cycle:8,proc:function(){e.reg.setE(e.reg.SRL(e.reg.getE()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","E"]}}},p[r("0074")]={mnemonic:"SRL H",cycle:8,proc:function(){e.reg.setH(e.reg.SRL(e.reg.getH()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","H"]}}},p[r("0075")]={mnemonic:"SRL L",cycle:8,proc:function(){e.reg.setL(e.reg.SRL(e.reg.getL()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","L"]}}},p[r("0077")]={mnemonic:"SRL A",cycle:8,proc:function(){e.reg.setA(e.reg.SRL(e.reg.getA()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","A"]}}},p[r("0076")]={mnemonic:"SRL (HL)",cycle:15,proc:function(){var n=e.reg.getHL();e.memory.poke(n,e.reg.SRL(e.memory.peek(n)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["SRL","(HL)"]}}},f[r("0076")]={mnemonic:"SRL (IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,e.reg.SRL(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SRL","(IX+"+e.peek(n+2)+")"]}}},d[r("0076")]={mnemonic:"SRL (IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,e.reg.SRL(e.memory.peek(t)))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1),e.peek(n+2),e.peek(n+3)],mnemonic:["SRL","(IY+"+e.peek(n+2)+")"]}}},l[r("0157")]={mnemonic:"RLD",cycle:18,proc:function(){var n=e.reg.getHL(),t=e.memory.peek(n),r=240&e.reg.getA(),c=15&e.reg.getA(),o=t>>4&15,i=t>>0&15;e.reg.setA(r|o),t=i<<4|c,e.memory.poke(n,t)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RLD"]}}},l[r("0147")]={mnemonic:"RRD",cycle:18,proc:function(){var n=e.reg.getHL(),t=e.memory.peek(n),r=240&e.reg.getA(),c=15&e.reg.getA(),o=t>>4&15,i=t>>0&15;e.reg.setA(r|i),t=c<<4|o,e.memory.poke(n,t)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RRD"]}}};var A,L,D=["B","C","D","E","H","L","(HL)","A"];for(A=0;A<D.length;A++)for(L=0;L<8;L++)p[r("0100")|L<<3|A]={mnemonic:"BIT "+L+","+D[A],cycle:6!=A?8:12,proc:function(n,t){return 6!=t?function(){0!=(e.reg["get"+D[t]]()&1<<n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()}:function(){var t=e.reg.getHL();0!=(e.memory.peek(t)&1<<n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()}}(L,A),disasm:function(e,n){return function(t,r){return{code:[t.peek(r),t.peek(r+1)],mnemonic:["BIT",e,n]}}}(L,D[A])};var I=function(n,t,r,c){var o=e.memory.peek(t+2);return{code:[e.memory.peek(t),e.memory.peek(t+1),o,e.memory.peek(t+3)],mnemonic:["BIT",""+r,"("+c+"+"+o.HEX(2)+"H)"]}};for(f[r("0106")]={mnemonic:"BIT 0,(IX+d)",cycle:20,proc:function(n){1&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,0,"IX")}},f[r("0116")]={mnemonic:"BIT 1,(IX+d)",cycle:20,proc:function(n){2&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,1,"IX")}},f[r("0126")]={mnemonic:"BIT 2,(IX+d)",cycle:20,proc:function(n){4&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,2,"IX")}},f[r("0136")]={mnemonic:"BIT 3,(IX+d)",cycle:20,proc:function(n){8&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,3,"IX")}},f[r("0146")]={mnemonic:"BIT 4,(IX+d)",cycle:20,proc:function(n){16&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,4,"IX")}},f[r("0156")]={mnemonic:"BIT 5,(IX+d)",cycle:20,proc:function(n){32&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,5,"IX")}},f[r("0166")]={mnemonic:"BIT 6,(IX+d)",cycle:20,proc:function(n){64&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,6,"IX")}},f[r("0176")]={mnemonic:"BIT 7,(IX+d)",cycle:20,proc:function(n){128&e.memory.peek(e.reg.IX+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,7,"IX")}},d[r("0106")]={mnemonic:"BIT 0,(IY+d)",cycle:20,proc:function(n){1&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,0,"IY")}},d[r("0116")]={mnemonic:"BIT 1,(IY+d)",cycle:20,proc:function(n){2&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,1,"IY")}},d[r("0126")]={mnemonic:"BIT 2,(IY+d)",cycle:20,proc:function(n){4&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,2,"IY")}},d[r("0136")]={mnemonic:"BIT 3,(IY+d)",cycle:20,proc:function(n){8&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,3,"IY")}},d[r("0146")]={mnemonic:"BIT 4,(IY+d)",cycle:20,proc:function(n){16&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,4,"IY")}},d[r("0156")]={mnemonic:"BIT 5,(IY+d)",cycle:20,proc:function(n){32&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,5,"IY")}},d[r("0166")]={mnemonic:"BIT 6,(IY+d)",cycle:20,proc:function(n){64&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,6,"IY")}},d[r("0176")]={mnemonic:"BIT 7,(IY+d)",cycle:20,proc:function(n){128&e.memory.peek(e.reg.IY+n)?e.reg.clearFlagZ():e.reg.setFlagZ(),e.reg.setFlagH(),e.reg.clearFlagN()},disasm:function(e,n){return I(0,n,7,"IY")}},A=0;A<D.length;A++)for(L=0;L<8;L++)p[r("0300")|L<<3|A]={mnemonic:"SET "+L+","+D[A],cycle:6!=A?4:15,proc:function(n,t){return 6!=t?function(){e.reg["set"+D[t]](e.reg["get"+D[t]]()|1<<n)}:function(){var t=e.reg.getHL();e.memory.poke(t,e.memory.peek(t)|1<<n)}}(L,A),disasm:function(e,n){return function(t,r){return{code:[t.peek(r),t.peek(r+1)],mnemonic:["SET",e,n]}}}(L,D[A])};var R=function(n,t,r,c){var o=e.memory.peek(t+2);return{code:[e.memory.peek(t+0),e.memory.peek(t+1),o,e.memory.peek(t+3)],mnemonic:["SET",""+r,"("+c+"+"+o.HEX(2)+"H)"]}};f[r("0306")]={mnemonic:"SET 0,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,1|e.memory.peek(t))},disasm:function(e,n){return R(0,n,0,"IX")}},f[r("0316")]={mnemonic:"SET 1,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,2|e.memory.peek(t))},disasm:function(e,n){return R(0,n,1,"IX")}},f[r("0326")]={mnemonic:"SET 2,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,4|e.memory.peek(t))},disasm:function(e,n){return R(0,n,2,"IX")}},f[r("0336")]={mnemonic:"SET 3,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,8|e.memory.peek(t))},disasm:function(e,n){return R(0,n,3,"IX")}},f[r("0346")]={mnemonic:"SET 4,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,16|e.memory.peek(t))},disasm:function(e,n){return R(0,n,4,"IX")}},f[r("0356")]={mnemonic:"SET 5,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,32|e.memory.peek(t))},disasm:function(e,n){return R(0,n,5,"IX")}},f[r("0366")]={mnemonic:"SET 6,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,64|e.memory.peek(t))},disasm:function(e,n){return R(0,n,6,"IX")}},f[r("0376")]={mnemonic:"SET 7,(IX+d)",cycle:23,proc:function(n){var t=e.reg.IX+n;e.memory.poke(t,128|e.memory.peek(t))},disasm:function(e,n){return R(0,n,7,"IX")}},d[r("0306")]={mnemonic:"SET 0,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,1|e.memory.peek(t))},disasm:function(e,n){return R(0,n,0,"IY")}},d[r("0316")]={mnemonic:"SET 1,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,2|e.memory.peek(t))},disasm:function(e,n){return R(0,n,1,"IY")}},d[r("0326")]={mnemonic:"SET 2,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,4|e.memory.peek(t))},disasm:function(e,n){return R(0,n,2,"IY")}},d[r("0336")]={mnemonic:"SET 3,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,8|e.memory.peek(t))},disasm:function(e,n){return R(0,n,3,"IY")}},d[r("0346")]={mnemonic:"SET 4,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,16|e.memory.peek(t))},disasm:function(e,n){return R(0,n,4,"IY")}},d[r("0356")]={mnemonic:"SET 5,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,32|e.memory.peek(t))},disasm:function(e,n){return R(0,n,5,"IY")}},d[r("0366")]={mnemonic:"SET 6,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,64|e.memory.peek(t))},disasm:function(e,n){return R(0,n,6,"IY")}},d[r("0376")]={mnemonic:"SET 7,(IY+d)",cycle:23,proc:function(n){var t=e.reg.IY+n;e.memory.poke(t,128|e.memory.peek(t))},disasm:function(e,n){return R(0,n,7,"IY")}};var E=function(n,t){var r=~(1<<n);return function(){e.reg["set"+t](e.reg["get"+t]()&r)}},H=function(e,n){var t="BCDEHL A".indexOf(n),c=e<<3;return function(){return{code:[203,r("0200")|c|t],mnemonic:["RES",e,n]}}},P=function(n){return function(n){return function(){var t=e.reg.getHL(),r=e.memory.peek(t)&n;e.memory.poke(t,r)}}(255&~(1<<n))},S=function(e){return function(n){return function(){return{code:[203,r("0200")|n|6],mnemonic:["RES",e,"(HL)"]}}}(e<<3)},b=function(n,t){return function(n){return function(r){var c=e.reg[t]+r,o=e.memory.peek(c)&n;e.memory.poke(c,o)}}(255&~(1<<n))},B=function(e,n){return function(t,r){return function(t,c){var o=t.peek(c+2),i=t.peek(c+3);return{code:[r,203,o,i],mnemonic:["RES",e,"("+n+"+"+o.HEX(2)+"H)"]}}}(0,{IX:221,IY:253}[n])};p[r("0200")]={mnemonic:"RES 0,B",cycle:8,proc:E(0,"B"),disasm:H(0,"B")},p[r("0210")]={mnemonic:"RES 1,B",cycle:8,proc:E(1,"B"),disasm:H(1,"B")},p[r("0220")]={mnemonic:"RES 2,B",cycle:8,proc:E(2,"B"),disasm:H(2,"B")},p[r("0230")]={mnemonic:"RES 3,B",cycle:8,proc:E(3,"B"),disasm:H(3,"B")},p[r("0240")]={mnemonic:"RES 4,B",cycle:8,proc:E(4,"B"),disasm:H(4,"B")},p[r("0250")]={mnemonic:"RES 5,B",cycle:8,proc:E(5,"B"),disasm:H(5,"B")},p[r("0260")]={mnemonic:"RES 6,B",cycle:8,proc:E(6,"B"),disasm:H(6,"B")},p[r("0270")]={mnemonic:"RES 7,B",cycle:8,proc:E(7,"B"),disasm:H(7,"B")},p[r("0201")]={mnemonic:"RES 0,C",cycle:8,proc:E(0,"C"),disasm:H(0,"C")},p[r("0211")]={mnemonic:"RES 1,C",cycle:8,proc:E(1,"C"),disasm:H(1,"C")},p[r("0221")]={mnemonic:"RES 2,C",cycle:8,proc:E(2,"C"),disasm:H(2,"C")},p[r("0231")]={mnemonic:"RES 3,C",cycle:8,proc:E(3,"C"),disasm:H(3,"C")},p[r("0241")]={mnemonic:"RES 4,C",cycle:8,proc:E(4,"C"),disasm:H(4,"C")},p[r("0251")]={mnemonic:"RES 5,C",cycle:8,proc:E(5,"C"),disasm:H(5,"C")},p[r("0261")]={mnemonic:"RES 6,C",cycle:8,proc:E(6,"C"),disasm:H(6,"C")},p[r("0271")]={mnemonic:"RES 7,C",cycle:8,proc:E(7,"C"),disasm:H(7,"C")},p[r("0202")]={mnemonic:"RES 0,D",cycle:8,proc:E(0,"D"),disasm:H(0,"D")},p[r("0212")]={mnemonic:"RES 1,D",cycle:8,proc:E(1,"D"),disasm:H(1,"D")},p[r("0222")]={mnemonic:"RES 2,D",cycle:8,proc:E(2,"D"),disasm:H(2,"D")},p[r("0232")]={mnemonic:"RES 3,D",cycle:8,proc:E(3,"D"),disasm:H(3,"D")},p[r("0242")]={mnemonic:"RES 4,D",cycle:8,proc:E(4,"D"),disasm:H(4,"D")},p[r("0252")]={mnemonic:"RES 5,D",cycle:8,proc:E(5,"D"),disasm:H(5,"D")},p[r("0262")]={mnemonic:"RES 6,D",cycle:8,proc:E(6,"D"),disasm:H(6,"D")},p[r("0272")]={mnemonic:"RES 7,D",cycle:8,proc:E(7,"D"),disasm:H(7,"D")},p[r("0203")]={mnemonic:"RES 0,E",cycle:8,proc:E(0,"E"),disasm:H(0,"E")},p[r("0213")]={mnemonic:"RES 1,E",cycle:8,proc:E(1,"E"),disasm:H(1,"E")},p[r("0223")]={mnemonic:"RES 2,E",cycle:8,proc:E(2,"E"),disasm:H(2,"E")},p[r("0233")]={mnemonic:"RES 3,E",cycle:8,proc:E(3,"E"),disasm:H(3,"E")},p[r("0243")]={mnemonic:"RES 4,E",cycle:8,proc:E(4,"E"),disasm:H(4,"E")},p[r("0253")]={mnemonic:"RES 5,E",cycle:8,proc:E(5,"E"),disasm:H(5,"E")},p[r("0263")]={mnemonic:"RES 6,E",cycle:8,proc:E(6,"E"),disasm:H(6,"E")},p[r("0273")]={mnemonic:"RES 7,E",cycle:8,proc:E(7,"E"),disasm:H(7,"E")},p[r("0204")]={mnemonic:"RES 0,H",cycle:8,proc:E(0,"H"),disasm:H(0,"H")},p[r("0214")]={mnemonic:"RES 1,H",cycle:8,proc:E(1,"H"),disasm:H(1,"H")},p[r("0224")]={mnemonic:"RES 2,H",cycle:8,proc:E(2,"H"),disasm:H(2,"H")},p[r("0234")]={mnemonic:"RES 3,H",cycle:8,proc:E(3,"H"),disasm:H(3,"H")},p[r("0244")]={mnemonic:"RES 4,H",cycle:8,proc:E(4,"H"),disasm:H(4,"H")},p[r("0254")]={mnemonic:"RES 5,H",cycle:8,proc:E(5,"H"),disasm:H(5,"H")},p[r("0264")]={mnemonic:"RES 6,H",cycle:8,proc:E(6,"H"),disasm:H(6,"H")},p[r("0274")]={mnemonic:"RES 7,H",cycle:8,proc:E(7,"H"),disasm:H(7,"H")},p[r("0205")]={mnemonic:"RES 0,L",cycle:8,proc:E(0,"L"),disasm:H(0,"L")},p[r("0215")]={mnemonic:"RES 1,L",cycle:8,proc:E(1,"L"),disasm:H(1,"L")},p[r("0225")]={mnemonic:"RES 2,L",cycle:8,proc:E(2,"L"),disasm:H(2,"L")},p[r("0235")]={mnemonic:"RES 3,L",cycle:8,proc:E(3,"L"),disasm:H(3,"L")},p[r("0245")]={mnemonic:"RES 4,L",cycle:8,proc:E(4,"L"),disasm:H(4,"L")},p[r("0255")]={mnemonic:"RES 5,L",cycle:8,proc:E(5,"L"),disasm:H(5,"L")},p[r("0265")]={mnemonic:"RES 6,L",cycle:8,proc:E(6,"L"),disasm:H(6,"L")},p[r("0275")]={mnemonic:"RES 7,L",cycle:8,proc:E(7,"L"),disasm:H(7,"L")},p[r("0207")]={mnemonic:"RES 0,A",cycle:8,proc:E(0,"A"),disasm:H(0,"A")},p[r("0217")]={mnemonic:"RES 1,A",cycle:8,proc:E(1,"A"),disasm:H(1,"A")},p[r("0227")]={mnemonic:"RES 2,A",cycle:8,proc:E(2,"A"),disasm:H(2,"A")},p[r("0237")]={mnemonic:"RES 3,A",cycle:8,proc:E(3,"A"),disasm:H(3,"A")},p[r("0247")]={mnemonic:"RES 4,A",cycle:8,proc:E(4,"A"),disasm:H(4,"A")},p[r("0257")]={mnemonic:"RES 5,A",cycle:8,proc:E(5,"A"),disasm:H(5,"A")},p[r("0267")]={mnemonic:"RES 6,A",cycle:8,proc:E(6,"A"),disasm:H(6,"A")},p[r("0277")]={mnemonic:"RES 7,A",cycle:8,proc:E(7,"A"),disasm:H(7,"A")},p[r("0206")]={mnemonic:"RES 0,(HL)",cycle:15,proc:P(0),disasm:S(0)},p[r("0216")]={mnemonic:"RES 1,(HL)",cycle:15,proc:P(1),disasm:S(1)},p[r("0226")]={mnemonic:"RES 2,(HL)",cycle:15,proc:P(2),disasm:S(2)},p[r("0236")]={mnemonic:"RES 3,(HL)",cycle:15,proc:P(3),disasm:S(3)},p[r("0246")]={mnemonic:"RES 4,(HL)",cycle:15,proc:P(4),disasm:S(4)},p[r("0256")]={mnemonic:"RES 5,(HL)",cycle:15,proc:P(5),disasm:S(5)},p[r("0266")]={mnemonic:"RES 6,(HL)",cycle:15,proc:P(6),disasm:S(6)},p[r("0276")]={mnemonic:"RES 7,(HL)",cycle:15,proc:P(7),disasm:S(7)},f[r("0206")]={mnemonic:"RES 0,(IX+d)",cycle:23,proc:b(0,"IX"),disasm:B(0,"IX")},f[r("0216")]={mnemonic:"RES 1,(IX+d)",cycle:23,proc:b(1,"IX"),disasm:B(1,"IX")},f[r("0226")]={mnemonic:"RES 2,(IX+d)",cycle:23,proc:b(2,"IX"),disasm:B(2,"IX")},f[r("0236")]={mnemonic:"RES 3,(IX+d)",cycle:23,proc:b(3,"IX"),disasm:B(3,"IX")},f[r("0246")]={mnemonic:"RES 4,(IX+d)",cycle:23,proc:b(4,"IX"),disasm:B(4,"IX")},f[r("0256")]={mnemonic:"RES 5,(IX+d)",cycle:23,proc:b(5,"IX"),disasm:B(5,"IX")},f[r("0266")]={mnemonic:"RES 6,(IX+d)",cycle:23,proc:b(6,"IX"),disasm:B(6,"IX")},f[r("0276")]={mnemonic:"RES 7,(IX+d)",cycle:23,proc:b(7,"IX"),disasm:B(7,"IX")},d[r("0206")]={mnemonic:"RES 0,(IY+d)",cycle:23,proc:b(0,"IY"),disasm:B(0,"IY")},d[r("0216")]={mnemonic:"RES 1,(IY+d)",cycle:23,proc:b(1,"IY"),disasm:B(1,"IY")},d[r("0226")]={mnemonic:"RES 2,(IY+d)",cycle:23,proc:b(2,"IY"),disasm:B(2,"IY")},d[r("0236")]={mnemonic:"RES 3,(IY+d)",cycle:23,proc:b(3,"IY"),disasm:B(3,"IY")},d[r("0246")]={mnemonic:"RES 4,(IY+d)",cycle:23,proc:b(4,"IY"),disasm:B(4,"IY")},d[r("0256")]={mnemonic:"RES 5,(IY+d)",cycle:23,proc:b(5,"IY"),disasm:B(5,"IY")},d[r("0266")]={mnemonic:"RES 6,(IY+d)",cycle:23,proc:b(6,"IY"),disasm:B(6,"IY")},d[r("0276")]={mnemonic:"RES 7,(IY+d)",cycle:23,proc:b(7,"IY"),disasm:B(7,"IY")};var _=function(e,n){var t,c,o,s=e.peek(n),m=[s],a=[],u=null;switch(s&r("0300")){case r("0000"):switch(a.push("JR"),u=n+(t=i.getSignedByte(e.peek(n+1)))+2,m.push(255&t),t=t+2>=0?"+"+(t+2):""+(t+2),s&r("0070")){case r("0030"):break;case r("0070"):a.push("C");break;case r("0050"):a.push("Z");break;case r("0060"):a.push("NC");break;case r("0040"):a.push("NZ");break;default:throw"UNKNOWN OPCODE"}a.push(u.HEX(4)+"H;("+t+")");break;case r("0300"):switch(a.push("JP"),s&r("0003")){case 1:a.push("(HL)");break;case 2:switch(c=e.peek(n+1),o=e.peek(n+2),u=i.pair(o,c),m.push(c),m.push(o),s&r("0070")){case r("0000"):a.push("NZ");break;case r("0010"):a.push("Z");break;case r("0020"):a.push("NC");break;case r("0030"):a.push("C");break;case r("0040"):a.push("PO");break;case r("0050"):a.push("PE");break;case r("0060"):a.push("P");break;case r("0070"):a.push("M")}a.push(o.HEX(2)+c.HEX(2)+"H");break;case 3:c=e.peek(n+1),o=e.peek(n+2),u=i.pair(o,c),m.push(c),m.push(o),a.push(o.HEX(2)+c.HEX(2)+"H")}break;default:throw"UNKNOWN OPCODE"}return{code:m,mnemonic:a,ref_addr_to:u}};this.opecodeTable[r("0303")]={mnemonic:"JP nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.PC=n},disasm:_},this.opecodeTable[r("0302")]={mnemonic:"JP NZ,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagZ()||(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0312")]={mnemonic:"JP Z,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagZ()&&(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0322")]={mnemonic:"JP NC,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagC()||(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0332")]={mnemonic:"JP C,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagC()&&(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0342")]={mnemonic:"JP PO,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagP()||(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0352")]={mnemonic:"JP PE,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagP()&&(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0362")]={mnemonic:"JP P,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagS()||(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0372")]={mnemonic:"JP M,nn",cycle:10,proc:function(){var n=e.fetchPair();e.reg.flagS()&&(e.reg.PC=n)},disasm:_},this.opecodeTable[r("0030")]={mnemonic:"JR e",cycle:12,proc:function(){var n=e.fetch();e.reg.jumpRel(n)},disasm:_},this.opecodeTable[r("0070")]={mnemonic:"JR C,e",cycle:12,proc:function(){var n=e.fetch();e.reg.flagC()&&e.reg.jumpRel(n)},disasm:_},this.opecodeTable[r("0050")]={mnemonic:"JR Z,e",cycle:12,proc:function(){var n=e.fetch();e.reg.flagZ()&&e.reg.jumpRel(n)},disasm:_},this.opecodeTable[r("0060")]={mnemonic:"JR NC,e",cycle:12,proc:function(){var n=e.fetch();e.reg.flagC()||e.reg.jumpRel(n)},disasm:_},this.opecodeTable[r("0040")]={mnemonic:"JR NZ,e",proc:function(){var n=e.fetch();e.reg.flagZ()||e.reg.jumpRel(n)},cycle:12,disasm:_},this.opecodeTable[r("0351")]={mnemonic:"JP (HL)",cycle:4,proc:function(){e.reg.PC=e.reg.getHL()},disasm:_},a[r("0351")]={mnemonic:"JP (IX)",cycle:8,proc:function(){e.reg.PC=e.reg.IX},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["JP","(IX)"]}}},u[r("0351")]={mnemonic:"JP (IY)",cycle:8,proc:function(){e.reg.PC=e.reg.IY},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["JP","(IY)"]}}},a[r("0104")]={mnemonic:"LD B,IXH",proc:function(){e.reg.setB(e.reg.IX>>8&255)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","B","IXH"]}}},a[r("0115")]={mnemonic:"LD C,IXL",proc:function(){e.reg.setC(255&e.reg.IX)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","C","IXL"]}}},a[r("0140")]={mnemonic:"LD IXH,B",proc:function(){e.reg.IX=65280&e.reg.getB()<<8|255&e.reg.IX},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","IXH","B"]}}},a[r("0147")]={mnemonic:"LD IXH,A",proc:function(){e.reg.IX=65280&e.reg.getA()<<8|255&e.reg.IX},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","IXH","A"]}}},a[r("0151")]={mnemonic:"LD IXL,C",proc:function(){e.reg.IX=65280&e.reg.IX|255&e.reg.getC()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","IXL","C"]}}},a[r("0157")]={mnemonic:"LD IXL,A",proc:function(){e.reg.IX=65280&e.reg.IX|255&e.reg.getA()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","IXL","A"]}}},a[r("0175")]={mnemonic:"LD A,IXL",proc:function(){e.reg.setA(255&e.reg.IX)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["LD","A","IXL"]}}},a[r("0204")]={mnemonic:"ADD A,IXH",proc:function(){e.reg.addAcc(e.reg.IX>>8&255)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADD","A","IXH"]}}},a[r("0205")]={mnemonic:"ADD A,IXL",proc:function(){e.reg.addAcc(255&e.reg.IX)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["ADD","A","IXL"]}}},a[r("0275")]={mnemonic:"CP IXL",proc:function(){e.reg.compareAcc(255&e.reg.IX)},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["CP","IXL"]}}},this.opecodeTable[r("0020")]={mnemonic:"DJNZ",cycle:13,proc:function(){var n=e.fetch();e.reg.decrement("B"),e.reg.getB()&&e.reg.jumpRel(n)},disasm:function(e,n){var t=i.getSignedByte(e.peek(n+1)),r=n+t+2;return{code:[e.peek(n),e.peek(n+1)],mnemonic:["DJNZ",r.HEX(4)+"H;("+(t+2>=0?"+":"")+(t+2)+")"],ref_addr_to:r}}},this.opecodeTable[r("0315")]={mnemonic:"CALL nn",cycle:17,proc:function(){var n=e.fetchPair();e.pushPair(e.reg.PC),e.reg.PC=n},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0304")]={mnemonic:"CALL NZ,nn",cycle:"NZ→17,Z→10",proc:function(){var n=e.fetchPair();return e.reg.flagZ()?10:(e.pushPair(e.reg.PC),e.reg.PC=n,17)},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","NZ",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0314")]={mnemonic:"CALL Z,nn",cycle:"Z→17,NZ→10",proc:function(){var n=e.fetchPair();return e.reg.flagZ()?(e.pushPair(e.reg.PC),e.reg.PC=n,17):10},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","Z",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0324")]={mnemonic:"CALL NC,nn",cycle:"NC→17, C→10",proc:function(){var n=e.fetchPair();return e.reg.flagC()?10:(e.pushPair(e.reg.PC),e.reg.PC=n,17)},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","NC",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0334")]={mnemonic:"CALL C,nn",cycle:"C→17, NC→10",proc:function(){var n=e.fetchPair();return e.reg.flagC()?(e.pushPair(e.reg.PC),e.reg.PC=n,17):10},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","C",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0344")]={mnemonic:"CALL PO,nn",cycle:"Parity Odd→17, Even→10",proc:function(){var n=e.fetchPair();return e.reg.flagP()?10:(e.pushPair(e.reg.PC),e.reg.PC=n,17)},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","PO",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0354")]={mnemonic:"CALL PE,nn",cycle:"Parity Even→17, Odd→10",proc:function(){var n=e.fetchPair();return e.reg.flagP()?(e.pushPair(e.reg.PC),e.reg.PC=n,17):10},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","PE",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0364")]={mnemonic:"CALL P,nn",cycle:"P→17, M→10",proc:function(){var n=e.fetchPair();return e.reg.flagS()?10:(e.pushPair(e.reg.PC),e.reg.PC=n,17)},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","P",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0374")]={mnemonic:"CALL M,nn",cycle:"M→17, P→10",proc:function(){var n=e.fetchPair();return e.reg.flagS()?(e.pushPair(e.reg.PC),e.reg.PC=n,17):10},disasm:function(e,n){var t=e.peek(n+1),r=e.peek(n+2),c=i.pair(r,t);return{code:[e.peek(n),t,r],mnemonic:["CALL","M",c.HEX(4)+"H"],ref_addr_to:c}}},this.opecodeTable[r("0311")]={mnemonic:"RET",cycle:10,proc:function(){e.reg.PC=e.popPair()},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET"]}}},this.opecodeTable[r("0300")]={mnemonic:"RET NZ",cycle:"NZ→11, Z→5",proc:function(){return e.reg.flagZ()?5:(e.reg.PC=e.popPair(),11)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","NZ"]}}},this.opecodeTable[r("0310")]={mnemonic:"RET Z",cycle:"Z→5, NZ→11",proc:function(){return e.reg.flagZ()?(e.reg.PC=e.popPair(),11):5},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","Z"]}}},this.opecodeTable[r("0320")]={mnemonic:"RET NC",cycle:"NC→11,C→5",proc:function(){return e.reg.flagC()?5:(e.reg.PC=e.popPair(),11)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","NC"]}}},this.opecodeTable[r("0330")]={mnemonic:"RET C",cycle:"C→11,NC→5",proc:function(){return e.reg.flagC()?(e.reg.PC=e.popPair(),11):5},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","C"]}}},this.opecodeTable[r("0340")]={mnemonic:"RET PO",cycle:"Parity Odd→11, Parity Even→5",proc:function(){return e.reg.flagP()?5:(e.reg.PC=e.popPair(),11)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","PO"]}}},this.opecodeTable[r("0350")]={mnemonic:"RET PE",cycle:"Parity Even→11, Parity Odd→5",proc:function(){return e.reg.flagP()?(e.reg.PC=e.popPair(),11):5},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","PE"]}}},this.opecodeTable[r("0360")]={mnemonic:"RET P",cycle:"P→11, M→5",proc:function(){return e.reg.flagS()?5:(e.reg.PC=e.popPair(),11)},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","P"]}}},this.opecodeTable[r("0370")]={mnemonic:"RET M",cycle:"M→11, P→5",proc:function(){return e.reg.flagS()?(e.reg.PC=e.popPair(),11):5},disasm:function(e,n){return{code:[e.peek(n)],mnemonic:["RET","M"]}}},l[r("0115")]={mnemonic:"RETI",cycle:15,proc:function(){e.reg.PC=e.popPair(),e.IFF1=e.IFF2},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RETI"]}}},l[r("0105")]={mnemonic:"RETN",cycle:14,proc:function(){e.reg.PC=e.popPair(),e.IFF1=e.IFF2},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["RETN"]}}};for(var T=[0,8,16,24,32,40,48,56],v=0;v<T.length;v++)this.opecodeTable[r("0307")|v<<3]={mnemonic:"RST "+T[v].HEX(2)+"H",proc:function(n){return function(){e.pushPair(e.reg.PC),e.reg.PC=n}}(T[v]),cycle:12,disasm:function(e){return function(n,t){return{code:[n.peek(t)],mnemonic:["RST",e.HEX(2)+"H"]}}}(T[v])};this.opecodeTable[r("0333")]={mnemonic:"IN A,(n)",cycle:11,proc:function(){e.reg.setA(e.readIoPort(e.fetch()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","A","("+e.peek(n+1)+")"]}}},l[r("0100")]={mnemonic:"IN B,(C)",cycle:12,proc:function(){e.reg.setB(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","B","(C)"]}}},l[r("0110")]={mnemonic:"IN C,(C)",cycle:12,proc:function(){e.reg.setC(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","C","(C)"]}}},l[r("0120")]={mnemonic:"IN D,(C)",cycle:12,proc:function(){e.reg.setD(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","D","(C)"]}}},l[r("0130")]={mnemonic:"IN E,(C)",cycle:12,proc:function(){e.reg.setE(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","E","(C)"]}}},l[r("0140")]={mnemonic:"IN H,(C)",cycle:12,proc:function(){e.reg.setH(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","H","(C)"]}}},l[r("0150")]={mnemonic:"IN L,(C)",cycle:12,proc:function(){e.reg.setL(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","L","(C)"]}}},l[r("0170")]={mnemonic:"IN A,(C)",cycle:12,proc:function(){e.reg.setA(e.readIoPort(e.reg.getC()))},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IN","A","(C)"]}}},l[r("0242")]={mnemonic:"INI",cycle:16,proc:function(){e.reg.setB(e.reg.getB()-1&255),e.memory.poke(e.reg.getHL(),e.readIoPort(e.reg.getC())),e.postINI()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["INI"]}}},l[r("0262")]={mnemonic:"INIR",cycle:"21 x reg B",proc:function(){return e.reg.setB(e.reg.getB()-1&255),e.memory.poke(e.reg.getHL(),e.readIoPort(e.reg.getC())),e.postINI(),0!=e.reg.getB()&&(e.reg.PC-=2),21},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["INIR"]}}},l[r("0252")]={mnemonic:"IND",cycle:16,proc:function(){e.reg.setB(e.reg.getB()-1&255),e.memory.poke(e.reg.getHL(),e.readIoPort(e.reg.getC())),e.postIND()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["IND"]}}},l[r("0272")]={mnemonic:"INDR",cycle:"21 x reg B",proc:function(){return e.reg.setB(e.reg.getB()-1&255),e.memory.poke(e.reg.getHL(),e.readIoPort(e.reg.getC())),e.postIND(),0!=e.reg.getB()&&(e.reg.PC-=2),21},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["INDR"]}}},this.opecodeTable[r("0323")]={mnemonic:"OUT (n),A",cycle:11,proc:function(){e.writeIoPort(e.fetch(),e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","("+e.peek(n+1)+")","A"]}}},l[r("0101")]={mnemonic:"OUT (C),B",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getB())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","B"]}}},l[r("0111")]={mnemonic:"OUT (C),C",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getC())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","C"]}}},l[r("0121")]={mnemonic:"OUT (C),D",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getD())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","D"]}}},l[r("0131")]={mnemonic:"OUT (C),E",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getE())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","E"]}}},l[r("0141")]={mnemonic:"OUT (C),H",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getH())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","H"]}}},l[r("0151")]={mnemonic:"OUT (C),L",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getL())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","L"]}}},l[r("0171")]={mnemonic:"OUT (C),A",cycle:12,proc:function(){e.writeIoPort(e.reg.getC(),e.reg.getA())},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUT","(C)","A"]}}},l[r("0243")]={mnemonic:"OUTI",cycle:16,proc:function(){e.reg.setB(e.reg.getB()-1&255),e.writeIoPort(e.reg.getC(),e.memory.peek(e.reg.getHL())),e.postOUTI()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUTI"]}}},l[r("0263")]={mnemonic:"OTIR",cycle:"21 x reg B",proc:function(){return e.reg.setB(e.reg.getB()-1&255),e.writeIoPort(e.reg.getC(),e.memory.peek(e.reg.getHL())),e.postOUTI(),0!=e.reg.getB()&&(e.reg.PC-=2),21},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OTIR"]}}},l[r("0253")]={mnemonic:"OUTD",cycle:16,proc:function(){e.reg.setB(e.reg.getB()-1&255),e.writeIoPort(e.reg.getC(),e.memory.peek(e.reg.getHL())),e.postOUTD()},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OUTD"]}}},l[r("0273")]={mnemonic:"OTDR",cycle:"21 x reg B",proc:function(){return e.reg.setB(e.reg.getB()-1&255),e.writeIoPort(e.reg.getC(),e.memory.peek(e.reg.getHL())),e.postOUTD(),0!=e.reg.getB()&&(e.reg.PC-=2),21},disasm:function(e,n){return{code:[e.peek(n),e.peek(n+1)],mnemonic:["OTDR"]}}}},n.exports=m},{"../lib/oct":22,"./bin-util.js":10,"./memory-block.js":13,"./register.js":14,"./z80-line-assembler":15}],10:[function(e,n,t){"use strict";n.exports=function(e,n,t){"use asm";function r(e,n){e=e|0;n=n|0;return((0xff&e)<<8)+(0xff&n)|0}function c(e){e=e|0;return e>>8&0xff|0}function o(e){e=e|0;return e&0xff|0}function i(e){e=e|0;e=e&0xff;if(e&0x80){e=(~e&0xff)+1|0;return-e|0}return e|0}return{pair:r,hibyte:c,lobyte:o,getSignedByte:i}}(Function("return this;")())},{}],11:[function(e,n,t){var r,c;r=e("./bin-util.js"),(c=function(){}).prototype.create=function(e){e=e||{},this.onPeek=e.onPeek||function(){},this.onPoke=e.onPoke||function(){},this.size=e.size||65536,this.startAddr=e.startAddr||0},c.prototype.peekByte=function(){var e="Error: peekByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(e),new Error(e)},c.prototype.pokeByte=function(){var e="Error: pokeByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(e),new Error(e)},c.prototype.clear=function(){for(var e=0;e<this.size;e++)this.pokeByte(0)},c.prototype.peek=function(e){var n=this.peekByte(e),t=this.onPeek.call(this,e,n);return null!=t&&void 0!=t&&(n=t),n},c.prototype.poke=function(e,n){this.pokeByte(e,n),this.onPoke.call(this,e,this.peekByte(e))},c.prototype.peekPair=function(e){var n=this.peek(e+1),t=this.peek(e+0);return r.pair(n,t)},n.exports=c},{"./bin-util.js":10}],12:[function(e,n,t){var r=e("./imem"),c=function(e){this.create(e)};(c.prototype=new r).create=function(e){r.prototype.create.call(this,e),this.mem=new Array(this.size),this.memblk={}},c.prototype.setMemoryBlock=function(e,n){var t,r,c;if(null==n){if(e in this.memblk){for(t=this.memblk[e].size,r=this.memblk[e].startAddr,c=0;c<t;c++)this.mem[r+c]=null;delete this.memblk[e]}}else for(this.memblk[e]=n,t=this.memblk[e].size,r=this.memblk[e].startAddr,c=0;c<t;c++)this.mem[r+c]=n},c.prototype.peekByte=function(e){return 255&this.mem[e-this.startAddr&65535].peek(e)},c.prototype.pokeByte=function(e,n){this.mem[e-this.startAddr&65535].poke(e,255&n)},n.exports=c},{"./imem":11}],13:[function(e,n,t){var r=e("./imem"),c=function(e){this.create(e)};(c.prototype=new r).create=function(e){r.prototype.create.call(this,e),this.mem=new Array(this.size)},c.prototype.peekByte=function(e){return 255&this.mem[e-this.startAddr&65535]},c.prototype.pokeByte=function(e,n){this.mem[e-this.startAddr&65535]=255&n},n.exports=c},{"./imem":11}],14:[function(e,n,t){!function(){"use strict";var t=e("./bin-util.js");var r=function(){var e=Function("return this;")(),n=t,r=new ArrayBuffer(65536);this._reg8=function(e,n,t){"use asm";var r=0x80,c=0x40,o=0x10,i=0x04,s=0x02,m=0x01,a=0,u=0,p=0,f=0,d=0,l=0,g=0,h=0,y=new e.Uint8Array(t),k=0,C=512,A=1024;function L(e){e=e|0;return y[k|0+e]|0}function D(e,n){e=e|0;n=n|0;y[k|0+e]=n}function I(e){e=e|0;return y[C|0+e]|0}function R(e,n){e=e|0;n=n|0;y[C|0+e]=n}function E(e){e=e|0;return y[A|0+e]|0}function H(e,n){e=e|0;n=n|0;y[A|0+e]=n}function P(){var e=0;var n=0;var t=0;for(e=0;(e|0)<256;e=(e|0)+1|0){n=0;if((e|0)==0){n=n|c}if(e&0x80){n=n|r}t=0;if((e&1|0)!=0){t=t+1|0}if((e&2|0)!=0){t=t+1|0}if((e&4|0)!=0){t=t+1|0}if((e&8|0)!=0){t=t+1|0}if((e&16|0)!=0){t=t+1|0}if((e&32|0)!=0){t=t+1|0}if((e&64|0)!=0){t=t+1|0}if((e&128|0)!=0){t=t+1|0}D(e,(t&1?0:i)|0);R(e,n|0);H(e,n|(L(e)|0)|0)}for(e=0;(e|0)<256;e=(e|0)+1|0){R(e+256|0,I(e|0)|0|m|0);H(e+256|0,E(e|0)|0|m|0);D(e+256|0,L(e|0)|0|m|0)}}function S(e,n){e=e|0;n=n|0;return((0xff&e)<<8)+(0xff&n)|0}function b(e){e=e|0;return e>>8&0xff|0}function B(e){e=e|0;return e&0xff|0}function _(){a=0;u=0;p=0;f=0;d=0;l=0;g=0;h=0}function T(e){e=e|0;a=e&0xff|0}function v(){return a|0}function X(e){e=e|0;u=e&0xff|0}function N(){return u|0}function w(e){e=e|0;p=e&0xff|0}function F(){return p|0}function O(e){e=e|0;f=e&0xff|0}function Y(){return f|0}function M(e){e=e|0;d=e&0xff|0}function x(){return d|0}function K(e){e=e|0;l=e&0xff|0}function U(){return l|0}function Z(e){e=e|0;g=e&0xff|0}function $(){return g|0}function z(e){e=e|0;h=e&0xff|0}function W(){return h|0}function j(e){e=e|0;a=b(e)|0;u=B(e)|0}function V(){return S(a,u)|0}function G(e){e=e|0;p=b(e)|0;f=B(e)|0}function J(){return S(p,f)|0}function q(e){e=e|0;d=b(e)|0;l=B(e)|0}function Q(){return S(d,l)|0}function ee(e){e=e|0;g=b(e)|0;h=B(e)|0}function ne(){return S(g,h)|0}function te(e){e=e|0;return(h&e?1:0)|0}function re(e){e=e|0;h=h|e}function ce(e){e=e|0;h=h&(~e&0xff)}function oe(){return(h&r?1:0)|0}function ie(){return(h&c?1:0)|0}function se(){return(h&o?1:0)|0}function me(){return(h&i?1:0)|0}function ae(){return(h&s?1:0)|0}function ue(){return(h&m?1:0)|0}function pe(){h=h|r}function fe(){h=h|c}function de(){h=h|o}function le(){h=h|i}function ge(){h=h|s}function he(){h=h|m}function ye(){h=h&(~r&0xff)}function ke(){h=h&(~c&0xff)}function Ce(){h=h&(~o&0xff)}function Ae(){h=h&(~i&0xff)}function Le(){h=h&(~s&0xff)}function De(){h=h&(~m&0xff)}function Ie(e,n){e=e|0;n=n|0;var t=0;t=e+n|0;z((W()|0)&(r|c|i)|((e^t^n)&0x1000)>>8|t>>16&1);return t&0xffff|0}function Re(e){e=e|0;q(Ie(Q()|0,e)|0)}function Ee(e){e=e|0;var n=0;var t=0;n=Q()|0;t=n+e+((W()|0)&m)|0;z(((n^t^e)&0x1000)>>8|t>>16&1|(t&0x8000)>>8|(t&0xffff?0:c)|((e^n^0x8000)&(e^t)&0x8000)>>13);q(t)}function He(e){e=e|0;var n=0;var t=0;n=Q()|0;t=n-e-((W()|0)&1)|0;z(((n^t^e)&0x1000)>>8|t>>16&1|(t&0x8000)>>8|(t&0xffff?0:c)|(e&n&(e^t)&0x8000)>>13|s);q(t)}function Pe(){j((V()|0)+1|0)}function Se(){j((V()|0)-1|0)}function be(){q((Q()|0)+1|0)}function Be(){q((Q()|0)-1|0)}function _e(){G((J()|0)+1|0)}function Te(){G((J()|0)-1|0)}function ve(){var e=0;e=$()|0;Z((e<<1|(e&0x80)>>7)&255|0);z((W()|0)&0xEC|($()|0)&0x01|0)}function Xe(){var e=0;var n=0;e=(W()|0)&m;n=$()|0;z((W()|0)&0xEC|(n&0x80)>>7|0);Z((n<<1|e)&255|0)}function Ne(){var e=0;e=$()|0;z((W()|0)&0xEC|e&0x01|0);Z(e>>1|e<<7&255|0)}function we(){var e=0;var n=0;e=(W()|0)&m;n=$()|0;z((W()|0)&0xEC|n&0x01|0);Z(n>>1|e<<7|0)}function Fe(){Be();z((v()|0?s:s|c)|0)}function Oe(){be();z((v()|0?s:s|c)|0)}function Ye(){Be();z((v()|0?s:s|c)|0)}function Me(){be();z((v()|0?s:s|c)|0)}function xe(){Te();Be();Se();z((W()|0)&0xE9|(V()|0?i:0)|0)}function Ke(){_e();be();Se();z((W()|0)&0xE9|(V()|0?i:0)|0)}function Ue(e){e=e|0;var n=0;n=($()|0)+e|0;z(I(n&255|0)|0|(n&256)>>8|(($()|0)^n^e)&o|((e^($()|0)^0x80)&(e^n)&0x80)>>5|0);Z(n&255|0)}function Ze(e){e=e|0;var n=0;n=($()|0)+e+((W()|0)&m)|0;z(I(n&255|0)|0|(n&256)>>8|(($()|0)^n^e)&o|((e^($()|0)^0x80)&(e^n)&0x80)>>5|0);Z(n&255|0)}function $e(e){e=e|0;var n=0;n=($()|0)-e&0x1ff|0;z(I(n&255|0)|0|(n&256)>>8|s|(($()|0)^n^e)&o|((e^($()|0)^0x80)&(e^n)&0x80)>>5|0);Z(n&255|0)}function ze(e){e=e|0;var n=0;n=($()|0)-e-((W()|0)&m)&0x1ff|0;z(I(n&255|0)|0|(n&256)>>8|s|(($()|0)^n^e)&o|((e^($()|0)^0x80)&(e^n)&0x80)>>5|0);Z(n&255|0)}function We(e){e=e|0;Z(($()|0)&(e&0xff)|0);z(E($()|0)|0|o|0)}function je(e){e=e|0;Z($()|0|e&0xff|0);z(E($()|0)|0)}function Ve(e){e=e|0;Z(($()|0)^e&0xff|0);z(E($()|0)|0)}function Ge(){Z((($()|0)^0xff)&255|0);z(o|s|0)}function Je(){var e=0;e=$()|0;Z(0);$e(e)}function qe(e){e=e|0;e=(e+1|0)&255;z((W()|0)&m|(I(e)|0)|((e|0)==0x80?i:0)|(e&0x0F?0:o)|0);return e|0}function Qe(e){e=e|0;z((W()|0)&m|s|((e|0)==0x80?i:0)|(e&0x0F?0:o)|0);e=(e-1|0)&255;z(W()|0|(I(e)|0));return e|0}function en(e){e=e|0;var n=0;n=($()|0)-e|0;z(I(n&255|0)|0|(n&256)>>8|s|(($()|0)^n^e)&o|((e^($()|0))&(e^n)&0x80)>>5|0)}function nn(e){e=e|0;var n=0;n=($()|0)-e|0;be();Se();z((W()|0)&m|(I(n&255|0)|0)|(($()|0)^e^n)&o|(V()|0?i:0)|s|0)}function tn(e){e=e|0;var n=0;n=($()|0)-e|0;Be();Se();z((W()|0)&m|(I(n&255|0)|0)|(($()|0)^e^n)&o|(V()|0?i:0)|s|0)}function rn(e){e=e|0;var n=0;n=e>>7|0;e=(e<<1|n)&255|0;z(E(e|0)|0|n|0);return e|0}function cn(e){e=e|0;var n=0;n=e>>7|0;e=(e<<1|(W()|0)&1)&255;z(E(e|0)|0|n|0);return e|0}function on(e){e=e|0;var n=0;n=e&1|0;e=e>>1|n<<7&255;z(E(e|0)|0|n|0);return e|0}function sn(e){e=e|0;var n=0;n=e&1|0;e=e>>1|(W()|0)<<7&255;z(E(e|0)|0|n|0);return e|0}function mn(e){e=e|0;var n=0;n=e>>7|0;e=e<<1&255;z(E(e|0)|0|n|0);return e|0}function an(e){e=e|0;var n=0;n=e&1|0;e=e>>1|e&0x80;z(E(e|0)|0|n|0);return e|0}function un(e){e=e|0;var n=0;n=e&1|0;e=e>>1;z(E(e|0)|0|n|0);return e|0}function pn(e){e=e|0;z((W()|0)&m|(E(e|0)|0)|0)}function fn(e,n){e=e|0;n=n|0;Z(n);z((W()|0)&m|(I(n)|0)|e<<2|0)}function dn(e,n,t){e=e|0;n=n|0;t=t|0;Z(t&127|n&128);z((W()|0)&m|(I($()|0)|0)|e<<2|0)}return{getPTable:L,setPTable:D,getZSTable:I,setZSTable:R,getZSPTable:E,setZSPTable:H,initialize:P,clear:_,setB:T,getB:v,setC:X,getC:N,setD:w,getD:F,setE:O,getE:Y,setH:M,getH:x,setL:K,getL:U,setA:Z,getA:$,setF:z,getF:W,setBC:j,getBC:V,setDE:G,getDE:J,setHL:q,getHL:Q,setAF:ee,getAF:ne,testFlag:te,setFlag:re,clearFlag:ce,flagS:oe,flagZ:ie,flagH:se,flagP:me,flagN:ae,flagC:ue,setFlagS:pe,setFlagZ:fe,setFlagH:de,setFlagP:le,setFlagN:ge,setFlagC:he,clearFlagS:ye,clearFlagZ:ke,clearFlagH:Ce,clearFlagP:Ae,clearFlagN:Le,clearFlagC:De,ADDW:Ie,ADD_HL:Re,ADC_HL:Ee,SBC_HL:He,incBC:Pe,decBC:Se,incHL:be,decHL:Be,incDE:_e,decDE:Te,RLCA:ve,RLA:Xe,RRCA:Ne,RRA:we,postIND:Fe,postINI:Oe,postOUTD:Ye,postOUTI:Me,onLDD:xe,onLDI:Ke,addAcc:Ue,addAccWithCarry:Ze,subAcc:$e,subAccWithCarry:ze,andAcc:We,orAcc:je,xorAcc:Ve,CPL:Ge,NEG:Je,getINCValue:qe,getDECValue:Qe,compareAcc:en,CPI:nn,CPD:tn,RLC:rn,RL:cn,RRC:on,RR:sn,SLA:mn,SRA:an,SRL:un,onReadIoPort:pn,LD_A_I:fn,LD_A_R:dn}}(e,n,r),this._reg8.initialize(),this.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0,this.getB=this._reg8.getB,this.getC=this._reg8.getC,this.getD=this._reg8.getD,this.getE=this._reg8.getE,this.getH=this._reg8.getH,this.getL=this._reg8.getL,this.getA=this._reg8.getA,this.getF=this._reg8.getF,this.setB=this._reg8.setB,this.setC=this._reg8.setC,this.setD=this._reg8.setD,this.setE=this._reg8.setE,this.setH=this._reg8.setH,this.setL=this._reg8.setL,this.setA=this._reg8.setA,this.setF=this._reg8.setF,this.testFlag=this._reg8.testFlag,this.flagS=this._reg8.flagS,this.flagZ=this._reg8.flagZ,this.flagH=this._reg8.flagH,this.flagP=this._reg8.flagP,this.flagN=this._reg8.flagN,this.flagC=this._reg8.flagC,this.setFlag=this._reg8.setFlag,this.setFlagS=this._reg8.setFlagS,this.setFlagZ=this._reg8.setFlagZ,this.setFlagH=this._reg8.setFlagH,this.setFlagP=this._reg8.setFlagP,this.setFlagN=this._reg8.setFlagN,this.setFlagC=this._reg8.setFlagC,this.clearFlag=this._reg8.clearFlag,this.clearFlagS=this._reg8.clearFlagS,this.clearFlagZ=this._reg8.clearFlagZ,this.clearFlagH=this._reg8.clearFlagH,this.clearFlagP=this._reg8.clearFlagP,this.clearFlagN=this._reg8.clearFlagN,this.clearFlagC=this._reg8.clearFlagC,this.getHL=this._reg8.getHL,this.getBC=this._reg8.getBC,this.getDE=this._reg8.getDE,this.getAF=this._reg8.getAF,this.setHL=this._reg8.setHL,this.setBC=this._reg8.setBC,this.setDE=this._reg8.setDE,this.setAF=this._reg8.setAF,this.ADD_HL=this._reg8.ADD_HL,this.ADC_HL=this._reg8.ADC_HL,this.SBC_HL=this._reg8.SBC_HL,this.incBC=this._reg8.incBC,this.decBC=this._reg8.decBC,this.incHL=this._reg8.incHL,this.decHL=this._reg8.decHL,this.incDE=this._reg8.incDE,this.decDE=this._reg8.decDE,this.RLCA=this._reg8.RLCA,this.RLA=this._reg8.RLA,this.RRCA=this._reg8.RRCA,this.RRA=this._reg8.RRA,this.postIND=this._reg8.postIND,this.postINI=this._reg8.postINI,this.postOUTD=this._reg8.postOUTD,this.postOUTI=this._reg8.postOUTI,this.onLDD=this._reg8.onLDD,this.onLDI=this._reg8.onLDI,this.addAcc=this._reg8.addAcc,this.addAccWithCarry=this._reg8.addAccWithCarry,this.subAcc=this._reg8.subAcc,this.subAccWithCarry=this._reg8.subAccWithCarry,this.andAcc=this._reg8.andAcc,this.orAcc=this._reg8.orAcc,this.xorAcc=this._reg8.xorAcc,this.CPL=this._reg8.CPL,this.NEG=this._reg8.NEG,this.getINCValue=this._reg8.getINCValue,this.getDECValue=this._reg8.getDECValue,this.compareAcc=this._reg8.compareAcc,this.CPI=this._reg8.CPI,this.CPD=this._reg8.CPD,this.RLC=this._reg8.RLC,this.RL=this._reg8.RL,this.RRC=this._reg8.RRC,this.RR=this._reg8.RR,this.SLA=this._reg8.SLA,this.SRA=this._reg8.SRA,this.SRL=this._reg8.SRL,this.onReadIoPort=this._reg8.onReadIoPort};r.prototype.cloneRaw=function(){return{B:this.getB(),C:this.getC(),D:this.getD(),E:this.getE(),H:this.getH(),L:this.getL(),A:this.getA(),F:this.getF(),PC:this.PC,SP:this.SP,IX:this.IX,IY:this.IY,R:this.R,I:this.I}},r.prototype.clear=function(){this._reg8.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0},r.prototype.setFrom=function(e){this.setB(e.getB()),this.setC(e.getC()),this.setD(e.getD()),this.setE(e.getE()),this.setH(e.getH()),this.setL(e.getL()),this.setA(e.getA()),this.setF(e.getF()),this.PC=e.PC,this.SP=e.SP,this.IX=e.IX,this.IY=e.IY,this.R=e.R,this.I=e.I},r.prototype.setPair=function(e,n){switch(e){case"SP":this.SP=n;break;case"PC":this.PC=n;break;case"IX":this.IX=n;break;case"IY":this.IY=n;break;case"BC":this.setBC(n);break;case"DE":this.setDE(n);break;case"HL":this.setHL(n);break;case"AF":this.setAF(n)}},r.prototype.debugDump=function(){console.info("B:"+this.getB().HEX(2)+"H "+this.getB()+" C:"+this.getC().HEX(2)+"H "+this.getC()+" / "+this.getBC()),console.info("D:"+this.getD().HEX(2)+"H "+this.getD()+" E:"+this.getE().HEX(2)+"H "+this.getE()+" / "+this.getDE()),console.info("H:"+this.getH().HEX(2)+"H "+this.getH()+" L:"+this.getL().HEX(2)+"H "+this.getL()+" / "+this.getHL()),console.info("A:"+this.getA().HEX(2)+"H "+this.getA()),console.info("SZ-HPN-C"),console.info(this.getF().bin(8)),console.info("PC:"+this.PC.HEX(4)+"H "+this.PC.bin(16)+"(2) "+this.PC),console.info("SP:"+this.SP.HEX(4)+"H "+this.SP.bin(16)+"(2) "+this.SP),console.info("I:"+this.I.HEX(2)+"H "+this.I.bin(8)+"(2) "+this.I+" R:"+this.R.HEX(2)+"H "+this.R.bin(8)+"(2) "+this.R)},r.prototype.ADD_IX=function(e){this.IX=this._reg8.ADDW(this.IX,e)},r.prototype.ADD_IY=function(e){this.IY=this._reg8.ADDW(this.IY,e)},r.prototype.jumpRel=function(e){this.PC+=t.getSignedByte(e)},r.prototype.increment=function(e){this["set"+e](this.getINCValue(this["get"+e]()))},r.prototype.decrement=function(e){this["set"+e](this.getDECValue(this["get"+e]()))},r.prototype.LD_A_I=function(e){this._reg8.LD_A_I(e,this.I)},r.prototype.LD_A_R=function(e,n){this._reg8.LD_A_R(e,n,this.R)},r.REG_r_ID2NAME={0:"B",1:"C",2:"D",3:"E",4:"H",5:"L",7:"A"},r.CONDITION_INDEX={NZ:0,Z:1,NC:2,C:3,PO:4,PE:5,P:6,N:7};r.prototype.DAA=function(){var e=this.getA(),n=this.getF();1&n&&(e|=256),16&n&&(e|=512),2&n&&(e|=1024),this.setAF(c[e])};var c=[68,256,512,772,1024,1284,1540,1792,2056,2316,4112,4372,4628,4880,5140,5392,4096,4356,4612,4864,5124,5376,5632,5892,6156,6408,8240,8500,8756,9008,9268,9520,8224,8484,8740,8992,9252,9504,9760,10020,10284,10536,12340,12592,12848,13108,13360,13620,12324,12576,12832,13092,13344,13604,13860,14112,14376,14636,16400,16660,16916,17168,17428,17680,16384,16644,16900,17152,17412,17664,17920,18180,18444,18696,20500,20752,21008,21268,21520,21780,20484,20736,20992,21252,21504,21764,22020,22272,22536,22796,24628,24880,25136,25396,25648,25908,24612,24864,25120,25380,25632,25892,26148,26400,26664,26924,28720,28980,29236,29488,29748,3e4,28704,28964,29220,29472,29732,29984,30240,30500,30764,31016,-32624,-32364,-32108,-31856,-31596,-31344,-32640,-32380,-32124,-31872,-31612,-31360,-31104,-30844,-30580,-30328,-28524,-28272,-28016,-27756,-27504,-27244,-28540,-28288,-28032,-27772,-27520,-27260,-27004,-26752,-26488,-26228,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,24613,24865,25121,25381,25633,25893,26149,26401,26665,26925,28721,28981,29237,29489,29749,30001,28705,28965,29221,29473,29733,29985,30241,30501,30765,31017,-32623,-32363,-32107,-31855,-31595,-31343,-32639,-32379,-32123,-31871,-31611,-31359,-31103,-30843,-30579,-30327,-28523,-28271,-28015,-27755,-27503,-27243,-28539,-28287,-28031,-27771,-27519,-27259,-27003,-26751,-26487,-26227,-24395,-24143,-23887,-23627,-23375,-23115,-24411,-24159,-23903,-23643,-23391,-23131,-22875,-22623,-22359,-22099,-20303,-20043,-19787,-19535,-19275,-19023,-20319,-20059,-19803,-19551,-19291,-19039,-18783,-18523,-18259,-18007,-16235,-15983,-15727,-15467,-15215,-14955,-16251,-15999,-15743,-15483,-15231,-14971,-14715,-14463,-14199,-13939,-12143,-11883,-11627,-11375,-11115,-10863,-12159,-11899,-11643,-11391,-11131,-10879,-10623,-10363,-10099,-9847,-8015,-7755,-7499,-7247,-6987,-6735,-8031,-7771,-7515,-7263,-7003,-6751,-6495,-6235,-5971,-5719,-3915,-3663,-3407,-3147,-2895,-2635,-3931,-3679,-3423,-3163,-2911,-2651,-2395,-2143,-1879,-1619,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,1540,1792,2056,2316,2572,2824,3084,3336,3592,3852,4112,4372,4628,4880,5140,5392,5632,5892,6156,6408,6664,6924,7176,7436,7692,7944,8240,8500,8756,9008,9268,9520,9760,10020,10284,10536,10792,11052,11304,11564,11820,12072,12340,12592,12848,13108,13360,13620,13860,14112,14376,14636,14892,15144,15404,15656,15912,16172,16400,16660,16916,17168,17428,17680,17920,18180,18444,18696,18952,19212,19464,19724,19980,20232,20500,20752,21008,21268,21520,21780,22020,22272,22536,22796,23052,23304,23564,23816,24072,24332,24628,24880,25136,25396,25648,25908,26148,26400,26664,26924,27180,27432,27692,27944,28200,28460,28720,28980,29236,29488,29748,3e4,30240,30500,30764,31016,31272,31532,31784,32044,32300,32552,-32624,-32364,-32108,-31856,-31596,-31344,-31104,-30844,-30580,-30328,-30072,-29812,-29560,-29300,-29044,-28792,-28524,-28272,-28016,-27756,-27504,-27244,-27004,-26752,-26488,-26228,-25972,-25720,-25460,-25208,-24952,-24692,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,26149,26401,26665,26925,27181,27433,27693,27945,28201,28461,28721,28981,29237,29489,29749,30001,30241,30501,30765,31017,31273,31533,31785,32045,32301,32553,-32623,-32363,-32107,-31855,-31595,-31343,-31103,-30843,-30579,-30327,-30071,-29811,-29559,-29299,-29043,-28791,-28523,-28271,-28015,-27755,-27503,-27243,-27003,-26751,-26487,-26227,-25971,-25719,-25459,-25207,-24951,-24691,-24395,-24143,-23887,-23627,-23375,-23115,-22875,-22623,-22359,-22099,-21843,-21591,-21331,-21079,-20823,-20563,-20303,-20043,-19787,-19535,-19275,-19023,-18783,-18523,-18259,-18007,-17751,-17491,-17239,-16979,-16723,-16471,-16235,-15983,-15727,-15467,-15215,-14955,-14715,-14463,-14199,-13939,-13683,-13431,-13171,-12919,-12663,-12403,-12143,-11883,-11627,-11375,-11115,-10863,-10623,-10363,-10099,-9847,-9591,-9331,-9079,-8819,-8563,-8311,-8015,-7755,-7499,-7247,-6987,-6735,-6495,-6235,-5971,-5719,-5463,-5203,-4951,-4691,-4435,-4183,-3915,-3663,-3407,-3147,-2895,-2635,-2395,-2143,-1879,-1619,-1363,-1111,-851,-599,-343,-83,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,70,258,514,774,1026,1286,1542,1794,2058,2318,1026,1286,1542,1794,2058,2318,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,5126,5378,5634,5894,6158,6410,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,9254,9506,9762,10022,10286,10538,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,13346,13606,13862,14114,14378,14638,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,17414,17666,17922,18182,18446,18698,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,21506,21766,22022,22274,22538,22798,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,25634,25894,26150,26402,26666,26926,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,29734,29986,30242,30502,30766,31018,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-31610,-31358,-31102,-30842,-30578,-30326,-28538,-28286,-28030,-27770,-27518,-27258,-27002,-26750,-26486,-26226,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-23389,-23129,-22873,-22621,-22357,-22097,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-19289,-19037,-18781,-18521,-18257,-18005,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-15229,-14969,-14713,-14461,-14197,-13937,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-11129,-10877,-10621,-10361,-10097,-9845,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-7001,-6749,-6493,-6233,-5969,-5717,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-2909,-2649,-2393,-2141,-1877,-1617,71,259,515,775,1027,1287,1543,1795,2059,2319,1027,1287,1543,1795,2059,2319,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,5127,5379,5635,5895,6159,6411,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,9255,9507,9763,10023,10287,10539,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-1346,-1094,-834,-582,-326,-66,70,258,514,774,1026,1286,1542,1794,2058,2318,2590,2842,3102,3354,3610,3870,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,6682,6942,7194,7454,7710,7962,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,10810,11070,11322,11582,11838,12090,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,14910,15162,15422,15674,15930,16190,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,18970,19230,19482,19742,19998,20250,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,23070,23322,23582,23834,24090,24350,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,27198,27450,27710,27962,28218,28478,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,31290,31550,31802,32062,32318,32570,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-30054,-29794,-29542,-29282,-29026,-28774,-28538,-28286,-28030,-27770,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-25953,-25701,-25441,-25189,-24933,-24673,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-21825,-21573,-21313,-21061,-20805,-20545,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-17733,-17473,-17221,-16961,-16705,-16453,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-13665,-13413,-13153,-12901,-12645,-12385,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-9573,-9313,-9061,-8801,-8545,-8293,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-5445,-5185,-4933,-4673,-4417,-4165,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-1345,-1093,-833,-581,-325,-65,71,259,515,775,1027,1287,1543,1795,2059,2319,2591,2843,3103,3355,3611,3871,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,6683,6943,7195,7455,7711,7963,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,10811,11071,11323,11583,11839,12091,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225];n.exports=r}()},{"./bin-util.js":10}],15:[function(e,n,t){"use strict";const r=e("../lib/oct"),c=e("../lib/mz700-charcode.js"),o=e("../lib/parse-addr.js");var i=function(){this.address=null,this.bytecode=[],this.label=null,this.mnemonic=null,this.operand=null,this.comment="",this.ref_addr_to=null,this.referenced_count=0};function s(e){var n=0;switch(e){case"IX":n=r("0335");break;case"IY":n=r("0375")}return n}function m(e){var n=0;switch(e){case"ADD":n=0;break;case"ADC":n=1;break;case"SUB":n=2;break;case"SBC":n=3;break;case"AND":n=4;break;case"OR":n=6;break;case"XOR":n=5;break;case"CP":n=7}return n}function a(e){var n=null;switch(e){case"BC":n=0;break;case"DE":n=1;break;case"HL":n=2;break;case"SP":n=3}return n}function u(e){var n=null;switch(e){case"BC":n=0;break;case"DE":n=1;break;case"HL":n=2;break;case"AF":n=3}return n}function p(e){var n=null;switch(e){case"B":n=0;break;case"C":n=1;break;case"D":n=2;break;case"E":n=3;break;case"H":n=4;break;case"L":n=5;break;case"A":n=7}return n}function f(e,n,t){if(t=t||!1){if(e.length<n.length)return!1}else if(e.length!=n.length)return!1;for(var r=0;r<e.length;r++)if(null!=n[r]){if("string"==typeof n[r]){if(e[r]!=n[r])return!1}else if("object"==typeof n[r]&&"RegExp"==n[r].constructor.name&&!n[r].test(e[r]))return!1}else if(t&&r==n.length-1)break;return!0}i.joinOperand=function(e){let n=[],t=!0;return e.forEach(e=>{","===e?(n.push(e),t=!0):(t||n.push(" "),n.push(e),t=!1)}),n.join("")},i.getBytecodesFromOperandOfDEFB=function(e,n){let t=[];return e.forEach(e=>{if(","!==e)if(e.match(/^[0-9]/)||e.match(/^[1-9A-F][0-9A-F]*H$/i))t.push(o.parseNumLiteral(e));else{let r=null;switch(e.charAt(0)){case"'":case'"':r=i.convertToAsciiCode(e.substring(1,e.length-1),!0);break;case"`":r=i.convertToAsciiCode(e.substring(1,e.length-1),!1);break;default:if(!(e in n))throw new Error("Fatal: Unrecognized operand for DEFB.",e);{let t=n[e];if(t>=256)throw new Error("The character code exceeds the maximum","value of 8 bit with the label",e,"(","0x"+t.HEX(4),")");r=[t]}}Array.prototype.push.apply(t,r)}}),t},i.convertToAsciiCode=function(e,n){let t=[],o=0;for(;o<e.length;){let i=e.charAt(o++);if("\\"===i)switch(i=e.charAt(o++)){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{let n=i+e.substr(o,2);if(n.length<3)throw new Error("Unexpected termination at a octal","character code sequence","at column",o-1,"in",e);if(!n.match(/^[0-7]+$/))throw new Error("No octal character exists at column",o-1,"in",e);{let c=r(n);if(c>=256)throw new Error("The character code exceeds the maximum","value of 8 bit at",o,"in",e);o+=2,t.push(c)}}break;case"x":{let n=e.substr(o).replace(/^([0-9a-fA-F]*).*$/,"$1");if(0===n.length)throw new Error("Unexpected termination at a hex","character code sequence","at column",o-1,"in",e);let r=parseInt(n,16);if(r>=256)throw new Error("The character code exeed 8 bit","length at",o,"in",e);o+=n.length,t.push(r)}break;default:if(n)switch(i){case"r":t.push("\r".charCodeAt(0));break;default:t.push(i.charCodeAt(0))}else t.push(c.ascii2dispcode[i.charCodeAt(0)])}else n?t.push(i.charCodeAt(0)):t.push(c.ascii2dispcode[i.charCodeAt(0)])}return t},i.prototype.setAddress=function(e){this.address=e},i.prototype.setRefAddrTo=function(e){this.ref_addr_to=e},i.prototype.setLabel=function(e){this.label=e},i.prototype.setComment=function(e){this.address=this.address||0,this.comment=e},i.create=function(e,n,t){var r=new i;return r.mnemonic=e,r.operand=n||"",r.bytecode=t||[],r},i.assemble=function(e,n,t){var r=new i;r.address=n;for(var c=i.tokenize(e),o=-1,s=-1,m=0;m<c.length;m++)switch(c[m]){case":":o<0&&s<0&&(o=m);break;case";":s<0&&(s=m)}if(o>=0&&(r.label=c.slice(0,o).join(""),c.splice(0,o+1),s-=o+1),s>=0&&(r.comment=c.slice(s).join(""),c.splice(s)),c.length>0&&(r.mnemonic=c[0],r.operand=i.joinOperand(c.slice(1))),c.length>0)try{r.bytecode=r.assembleMnemonic(c,t)}catch(e){r.comment+="*** ASSEMBLE ERROR - "+e}return r},i.prototype.getNextAddress=function(){return this.address+this.bytecode.length},i.prototype.getLastAddress=function(){return this.address+this.bytecode.length-1},i.prototype.resolveAddress=function(e){for(var n=0;n<this.bytecode.length;n++)"function"==typeof this.bytecode[n]&&(this.bytecode[n]=this.bytecode[n](e))},i.tokenize=function(e){for(var n=0,t=e.length,r=0,c=[],o="";r<t;){var i=e.charAt(r);switch(n){case 0:if(/\s/.test(i))r++;else if("-"==i||"+"==i)o+=i,r++,n=2;else if(/[0-9]/.test(i))n=2;else if(/[A-Z_?.*#!$]/i.test(i))o+=i,r++,n=3;else if("'"===i||'"'===i||"`"===i)o+=i,r++,n=4;else if("("==i||")"==i||","==i||"+"==i||":"==i)c.push(i),r++;else{if(";"!=i)throw"unrecognized char "+i+" at column "+r;c.push(i),r++;var s=e.substr(r);c.push(s),r+=s.length,o=""}break;case 2:/[0-9A-F]/i.test(i)?(o+=i,r++):/H/i.test(i)?(o+=i,r++,c.push(o.toUpperCase()),o="",n=0):(c.push(o.toUpperCase()),o="",n=0);break;case 3:/[A-Z_0-9?.*#!$']/i.test(i)?(o+=i,r++):(c.push(o.toUpperCase()),o="",n=0);break;case 4:"\\"==i?++r<t&&(o+="\\"+(i=e.charAt(r)),r++):i!=o.charAt(0)?(o+=i,r++):(o+=i,r++,c.push(o),o="",n=0);break;default:throw"unrecognized status "}}return""!=o&&c.push(o.toUpperCase()),c},i.prototype.assembleMnemonic=function(e,n){var t,c,d,l,g,h=this.label;if(f(e,["ORG",null]))return this.address=o._parseNumLiteral(e[1]),[];if(f(e,["ENT"]))return n[h]=this.address,[];if(f(e,["EQU",null])){if(null==h||""==h)throw"empty label for EQU";return n[h]=o._parseNumLiteral(e[1]),[]}if(f(e,["DEFB",null],!0))return i.getBytecodesFromOperandOfDEFB(e.slice(1),n);if(f(e,["DEFW",null]))return o.parseNumLiteralPair(e[1]);if(f(e,["DEFS",null])){var y=o._parseNumLiteral(e[1]);if(y<0)throw"negative DEFS number "+e[1];for(var k=[],C=0;C<y;C++)k.push(0);return k}if(f(e,["LD","A",",","I"]))return[r("0355"),r("0127")];if(f(e,["LD","A",",","R"]))return[r("0355"),r("0137")];if(f(e,["LD","I",",","A"]))return[r("0355"),r("0107")];if(f(e,["LD","R",",","A"]))return[r("0355"),r("0117")];if(f(e,["LD","B",",","IXH"]))return[221,68];if(f(e,["LD","C",",","IXL"]))return[221,77];if(f(e,["LD","A",",","IXL"]))return[221,125];if(f(e,["ADD","A",",","IXH"]))return[221,132];if(f(e,["ADD","A",",","IXL"]))return[221,133];if(f(e,["LD",/^[BCDEHLA]$/,",",/^[BCDEHLA]$/])){var A=p(e[1]),L=p(e[3]);return[r("0100")|A<<3|L<<0]}if(f(e,["LD",/^[BCDEHLA]$/,",",null]))return function(){var n=p(e[1]),t=o.parseNumLiteral(e[3]);return[r("0006")|n<<3,t]}();if(f(e,["LD",/^[BCDEHLA]$/,",","(","HL",")"]))return t=p(e[1]),[r("0106")|t<<3];if(f(e,["LD","(","HL",")",",",/^[BCDEHLA]$/]))return function(){var n=p(e[5]);return[r("0160")|n]}();if(f(e,["LD","(","HL",")",",",null]))return function(){var n=o.parseNumLiteral(e[5]);return[r("0066"),n]}();if(f(e,["LD","A",",","(",/^(BC|DE)$/,")"]))return c=a(e[4]),[r("0012")|c<<4];if(f(e,["LD","A",",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[r("0072"),n[0],n[1]]}();if(f(e,["LD","(",/^(BC|DE)$/,")",",","A"]))return function(){var n=a(e[2]);return[r("0002")|n<<4]}();if(f(e,["LD","(",null,")",",","A"]))return function(){var n=o.parseNumLiteralPair(e[2]);return[r("0062"),n[0],n[1]]}();if(f(e,["LD","SP",",","HL"]))return[r("0371")];if(f(e,["LD","SP",",","IX"]))return[221,249];if(f(e,["LD","SP",",","IY"]))return[253,249];if(f(e,["LD",/^(BC|DE|HL|SP)$/,",",null]))return function(){var n=a(e[1]),t=o.parseNumLiteralPair(e[3]);return[r("0001")|n<<4,t[0],t[1]]}();if(f(e,["LD","HL",",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[r("0052"),n[0],n[1]]}();if(f(e,["LD","BC",",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[r("0355"),r("0113"),n[0],n[1]]}();if(f(e,["LD","DE",",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[r("0355"),r("0133"),n[0],n[1]]}();if(f(e,["LD","SP",",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[r("0355"),r("0173"),n[0],n[1]]}();if(f(e,["LD","(",null,")",",","HL"]))return function(){var n=o.parseNumLiteralPair(e[2]);return[r("0042"),n[0],n[1]]}();if(f(e,["LD","(",null,")",",","BC"]))return function(){var n=o.parseNumLiteralPair(e[2]);return[r("0355"),r("0103"),n[0],n[1]]}();if(f(e,["LD","(",null,")",",","DE"]))return function(){var n=o.parseNumLiteralPair(e[2]);return[r("0355"),r("0123"),n[0],n[1]]}();if(f(e,["LD","(",null,")",",","SP"]))return function(){var n=o.parseNumLiteralPair(e[2]);return[r("0355"),r("0163"),n[0],n[1]]}();if(f(e,["PUSH",/^(BC|DE|HL|AF)$/]))return d=u(e[1]),[r("0305")|d<<4];if(f(e,["POP",/^(BC|DE|HL|AF)$/]))return function(){var n=u(e[1]);return[r("0301")|n<<4]}();if(f(e,["LD","IXH",",","B"]))return[221,96];if(f(e,["LD","IXL",",","C"]))return[221,105];if(f(e,["LD","IXH",",","A"]))return[221,103];if(f(e,["LD","IXL",",","A"]))return[221,111];if(f(e,["CP","IXL"]))return[221,189];if(f(e,["EX","DE",",","HL"]))return[235];if(f(e,["EX","AF",",","AF'"]))return[8];if(f(e,["EXX"]))return[217];if(f(e,["EX","(","SP",")",",","HL"]))return[227];if(f(e,["LDI"]))return[r("0355"),r("0240")];if(f(e,["LDIR"]))return[r("0355"),r("0260")];if(f(e,["LDD"]))return[r("0355"),r("0250")];if(f(e,["LDDR"]))return[r("0355"),r("0270")];if(f(e,["CPI"]))return[r("0355"),r("0241")];if(f(e,["CPIR"]))return[r("0355"),r("0261")];if(f(e,["CPD"]))return[r("0355"),r("0251")];if(f(e,["CPDR"]))return[r("0355"),r("0271")];if(f(e,["DAA"]))return[r("0047")];if(f(e,["CPL"]))return[r("0057")];if(f(e,["NEG"]))return[r("0355"),r("0104")];if(f(e,["CCF"]))return[r("0077")];if(f(e,["SCF"]))return[r("0067")];if(f(e,["NOP"]))return[r("0000")];if(f(e,["HALT"]))return[r("0166")];if(f(e,["DI"]))return[r("0363")];if(f(e,["EI"]))return[r("0373")];if(f(e,["IM0"]))return[r("0355"),r("0106")];if(f(e,["IM1"]))return[r("0355"),r("0126")];if(f(e,["IM2"]))return[r("0355"),r("0136")];if(f(e,["IM","0"]))return[r("0355"),r("0106")];if(f(e,["IM","1"]))return[r("0355"),r("0126")];if(f(e,["IM","2"]))return[r("0355"),r("0136")];if(f(e,[/^(ADD|ADC|SBC)$/,"HL",",",/^(BC|DE|HL|SP)$/])){var D=0;switch(e[3]){case"BC":D=0;break;case"DE":D=1;break;case"HL":D=2;break;case"SP":D=3}switch(e[0]){case"ADD":return[r("0011")|D<<4];case"ADC":return[r("0355"),r("0112")|D<<4];case"SBC":return[r("0355"),r("0102")|D<<4]}return[]}if(f(e,["ADD","IX",",",/^(BC|DE|IX|SP)$/])){switch(e[3]){case"BC":return[r("0335"),r("0011")];case"DE":return[r("0335"),r("0031")];case"IX":return[r("0335"),r("0051")];case"SP":return[r("0335"),r("0071")]}return[]}if(f(e,["ADD","IY",",",/^(BC|DE|IY|SP)$/])){switch(e[3]){case"BC":return[r("0375"),r("0011")];case"DE":return[r("0375"),r("0031")];case"IY":return[r("0375"),r("0051")];case"SP":return[r("0375"),r("0071")]}return[]}if(f(e,[/^(INC|DEC)$/,/^(BC|DE|HL|SP|IX|IY)$/])){switch(e[0]){case"INC":switch(e[1]){case"BC":return[r("0003")];case"DE":return[r("0023")];case"HL":return[r("0043")];case"SP":return[r("0063")];case"IX":return[r("0335"),r("0043")];case"IY":return[r("0375"),r("0043")]}break;case"DEC":switch(e[1]){case"BC":return[r("0013")];case"DE":return[r("0033")];case"HL":return[r("0053")];case"SP":return[r("0073")];case"IX":return[r("0335"),r("0053")];case"IY":return[r("0375"),r("0053")]}}return[]}if(f(e,["RLCA"]))return[r("0007")];if(f(e,["RLA"]))return[r("0027")];if(f(e,["RRCA"]))return[r("0017")];if(f(e,["RRA"]))return[r("0037")];if(f(e,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,/^[BCDEHLA]$/])){switch(e[0]){case"RLC":return[r("0313"),r("0000")|p(e[1])];case"RL":return[r("0313"),r("0020")|p(e[1])];case"RRC":return[r("0313"),r("0010")|p(e[1])];case"RR":return[r("0313"),r("0030")|p(e[1])];case"SLA":return[r("0313"),r("0040")|p(e[1])];case"SRA":return[r("0313"),r("0050")|p(e[1])];case"SRL":return[r("0313"),r("0070")|p(e[1])]}return[]}if(f(e,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(","HL",")"])){switch(e[0]){case"RLC":return[r("0313"),r("0006")];case"RL":return[r("0313"),r("0026")];case"RRC":return[r("0313"),r("0016")];case"RR":return[r("0313"),r("0036")];case"SLA":return[r("0313"),r("0046")];case"SRA":return[r("0313"),r("0056")];case"SRL":return[r("0313"),r("0076")]}return[]}if(f(e,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,"+",null,")"])||f(e,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var n="+"==e[3]?4:3,t=0;switch(e[2]){case"IX":t=r("0335");break;case"IY":t=r("0375")}var c=o.parseNumLiteral(e[n]);switch(e[0]){case"RLC":return[t,r("0313"),c,r("0006")];case"RL":return[t,r("0313"),c,r("0026")];case"RRC":return[t,r("0313"),c,r("0016")];case"RR":return[t,r("0313"),c,r("0036")];case"SLA":return[t,r("0313"),c,r("0046")];case"SRA":return[t,r("0313"),c,r("0056")];case"SRL":return[t,r("0313"),c,r("0076")]}return[]}();if(f(e,["RLD"]))return[r("0355"),r("0157")];if(f(e,["RRD"]))return[r("0355"),r("0147")];if(f(e,[/^(BIT|SET|RES)$/,/^[0-7]$/,",",/^[BCDEHLA]$/])){switch(e[0]){case"BIT":return[r("0313"),r("0100")|e[1]<<3|p(e[3])];case"SET":return[r("0313"),r("0300")|e[1]<<3|p(e[3])];case"RES":return[r("0313"),r("0200")|e[1]<<3|p(e[3])]}return[]}if(f(e,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(","HL",")"])){switch(e[0]){case"BIT":return[r("0313"),r("0106")|e[1]<<3];case"SET":return[r("0313"),r("0306")|e[1]<<3];case"RES":return[r("0313"),r("0206")|e[1]<<3]}return[]}if(f(e,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,"+",null,")"])||f(e,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var n="+"==e[5]?6:5,t=0;switch(e[4]){case"IX":t=r("0335");break;case"IY":t=r("0375")}var c=o.parseNumLiteral(e[n]);switch(e[0]){case"BIT":return[t,r("0313"),c,r("0106")|e[1]<<3];case"SET":return[t,r("0313"),c,r("0306")|e[1]<<3];case"RES":return[t,r("0313"),c,r("0206")|e[1]<<3]}return[]}();if(f(e,["JP",null]))return l=o.parseNumLiteralPair(e[1]),[r("0303"),l[0],l[1]];if(f(e,["JP",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var n=o.parseNumLiteralPair(e[3]);switch(e[1]){case"NZ":return[r("0302"),n[0],n[1]];case"Z":return[r("0312"),n[0],n[1]];case"NC":return[r("0322"),n[0],n[1]];case"C":return[r("0332"),n[0],n[1]];case"PO":return[r("0342"),n[0],n[1]];case"PE":return[r("0352"),n[0],n[1]];case"P":return[r("0362"),n[0],n[1]];case"M":return[r("0372"),n[0],n[1]]}return[]}();if(f(e,["JR",null]))return function(){var n=o.parseRelAddr(e[1],this.address+2);return[r("0030"),n]}.bind(this)();if(f(e,["JR",/^(NZ|Z|NC|C)$/,",",null]))return function(){var n=o.parseRelAddr(e[3],this.address+2);switch(e[1]){case"NZ":return[r("0040"),n];case"Z":return[r("0050"),n];case"NC":return[r("0060"),n];case"C":return[r("0070"),n]}return[]}.bind(this)();if(f(e,["JP","(",/^(HL|IX|IY)$/,")"])){switch(e[2]){case"HL":return[r("0351")];case"IX":return[r("0335"),r("0351")];case"IY":return[r("0375"),r("0351")]}return[]}if(f(e,["DJNZ",null]))return function(){var n=o.parseRelAddr(e[1],this.address+2);return[r("0020"),n]}.bind(this)();if(f(e,["CALL",null]))return function(){var n=o.parseNumLiteralPair(e[1]);return[r("0315"),n[0],n[1]]}();if(f(e,["CALL",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var n=o.parseNumLiteralPair(e[3]);switch(e[1]){case"NZ":return[r("0304"),n[0],n[1]];case"Z":return[r("0314"),n[0],n[1]];case"NC":return[r("0324"),n[0],n[1]];case"C":return[r("0334"),n[0],n[1]];case"PO":return[r("0344"),n[0],n[1]];case"PE":return[r("0354"),n[0],n[1]];case"P":return[r("0364"),n[0],n[1]];case"M":return[r("0374"),n[0],n[1]]}return[]}();if(f(e,["RET"]))return[r("0311")];if(f(e,["RET",/^(NZ|Z|NC|C|PO|PE|P|M)$/])){switch(e[1]){case"NZ":return[r("0300")];case"Z":return[r("0310")];case"NC":return[r("0320")];case"C":return[r("0330")];case"PO":return[r("0340")];case"PE":return[r("0350")];case"P":return[r("0360")];case"M":return[r("0370")]}return[]}if(f(e,["RETI"]))return[r("0355"),r("0115")];if(f(e,["RETN"]))return[r("0355"),r("0105")];if(f(e,["RST",/^(00H|08H|10H|18H|20H|28H|30H|38H)$/])){switch(e[1]){case"00H":return[r("0307")];case"08H":return[r("0317")];case"10H":return[r("0327")];case"18H":return[r("0337")];case"20H":return[r("0347")];case"28H":return[r("0357")];case"30H":return[r("0367")];case"38H":return[r("0377")]}return[]}if(f(e,["IN",/^[BCDEHLA]$/,",","(","C",")"]))return function(){var n=p(e[1]);return[r("0355"),r("0100")|n<<3]}();if(f(e,["IN","A",",","(",null,")"]))return function(){var n=o.parseNumLiteral(e[4]);return[r("0333"),n]}();if(f(e,["OUT","(","C",")",",",/^[BCDEHLA]$/]))return function(){var n=p(e[5]);return[r("0355"),r("0101")|n<<3]}();if(f(e,["OUT","(",null,")",",","A"]))return function(){var n=o.parseNumLiteral(e[2]);return[r("0323"),n]}();if(f(e,["INI"]))return[r("0355"),r("0242")];if(f(e,["INIR"]))return[r("0355"),r("0262")];if(f(e,["IND"]))return[r("0355"),r("0252")];if(f(e,["INDR"]))return[r("0355"),r("0272")];if(f(e,["OUTI"]))return[r("0355"),r("0243")];if(f(e,["OTIR"]))return[r("0355"),r("0263")];if(f(e,["OUTD"]))return[r("0355"),r("0253")];if(f(e,["OTDR"]))return[r("0355"),r("0273")];if(f(e,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,"+",null,")"])||f(e,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,null,")"]))return function(){var n="+"==e[5]?6:5,t=p(e[1]),c=o.parseNumLiteral(e[n]);return[s(e[4]),r("0106")|t<<3,c]}();if(f(e,["LD","(",/^(IX|IY)$/,"+",null,")",",",/^[BCDEHLA]$/])||f(e,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",/^[BCDEHLA]$/]))return function(){var n="+"==e[3]?4:3,t="+"==e[3]?7:6,c=o.parseNumLiteral(e[n]),i=p(e[t]);return[s(e[2]),r("0160")|i,c]}();if(f(e,["LD","(",/^(IX|IY)$/,"+",null,")",",",null])||f(e,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",null]))return function(){var n="+"==e[3]?4:3,t="+"==e[3]?7:6,r=o.parseNumLiteral(e[n]),c=o.parseNumLiteral(e[t]);return[s(e[2]),54,r,c]}();if(f(e,["LD",/^(IX|IY)$/,",",null]))return function(){var n=o.parseNumLiteralPair(e[3]);return[s(e[1]),33,n[0],n[1]]}();if(f(e,["LD",/^(IX|IY)$/,",","(",null,")"]))return function(){var n=o.parseNumLiteralPair(e[4]);return[s(e[1]),42,n[0],n[1]]}();if(f(e,["PUSH",/^(IX|IY)$/]))return[s(e[1]),229];if(f(e,["POP",/^(IX|IY)$/]))return[s(e[1]),225];if(f(e,["EX","(","SP",")",",",/^(IX|IY)$/]))return[s(e[5]),227];if(f(e,[/^(ADD|ADC|SUB|SBC)$/,"A",",",/^[BCDEHLA]$/]))return function(){var n=m(e[0]),t=p(e[3]);return[r("0200")|n<<3|t]}();if(f(e,[/^(ADD|ADC|SUB|SBC)$/,"A",",",null]))return function(){var n=m(e[0]),t=o.parseNumLiteral(e[3]);return[r("0306")|n<<3,t]}();if(f(e,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(","HL",")"]))return g=m(e[0]),[r("0206")|g<<3];if(f(e,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,"+",null,")"])||f(e,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var n="+"==e[5]?6:5,t=m(e[0]),c=o.parseNumLiteral(e[n]);return[s(e[4]),r("0206")|t<<3,c]}();if(f(e,[/^(AND|OR|XOR|CP)$/,/^[BCDEHLA]$/]))return function(){var n=m(e[0]),t=p(e[1]);return[r("0200")|n<<3|t]}();if(f(e,[/^(AND|OR|XOR|CP)$/,null]))return function(){var n=m(e[0]),t=o.parseNumLiteral(e[1]);return[r("0306")|n<<3,t]}();if(f(e,[/^(AND|OR|XOR|CP)$/,"(","HL",")"]))return function(){var n=m(e[0]);return[r("0206")|n<<3]}();if(f(e,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,"+",null,")"])||f(e,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var n="+"==e[3]?4:3,t=m(e[0]),c=o.parseNumLiteral(e[n]);return[s(e[2]),r("0206")|t<<3,c]}();if(f(e,[/^(INC|DEC)$/,/^[BCDEHLA]$/]))return function(){var n=p(e[1]);switch(e[0]){case"INC":return[r("0004")|n<<3];case"DEC":return[r("0005")|n<<3]}}();if(f(e,[/^(INC|DEC)$/,"(","HL",")"]))switch(e[0]){case"INC":return[r("0064")];case"DEC":return[r("0065")]}return f(e,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,"+",null,")"])||f(e,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"])?function(){var n=s(e[2]),t="+"==e[3]?4:3,c=o.parseNumLiteral(e[t]);switch(e[0]){case"INC":return[n,r("0064"),c];case"DEC":return[n,r("0065"),c]}}():(console.warn("**** ERROR: CANNOT ASSEMBLE:"+e.join(" / ")),[])},n.exports=i},{"../lib/mz700-charcode.js":21,"../lib/oct":22,"../lib/parse-addr.js":23}],16:[function(e,n,t){!function(t){var r=null;if("context"in t)r=t.context;else{r={webMain:!1,webWorker:!1,nodeJs:!1,ie11:!1,requirable:!1};try{e&&(r.requirable=!0)}catch(e){}}var c=t.constructor.name;c?"window"in t?r.webMain=!0:"DedicatedWorkerGlobalScope"==c||"WorkerGlobalScope"==c?r.webWorker=!0:r.nodeJs=!0:(r.ie11=!0,"[object Window]"==t?r.webMain=!0:"[object WorkerGlobalScope]"==t&&(r.webWorker=!0)),r.nodeJs?n.exports=r:r.webWorker&&(t.module={exports:null},t.require=function(){}),r.exportModule=function(e,n){return r.requirable||(e in t&&n!==t[e]&&(console.log("context.exports: "+e+" is already exported."),console.log("predecessor: "+JSON.stringify(t[e])),console.log("override with: "+JSON.stringify(n))),t[e]=n),n},t.getModule=function(e){if(!("context"in t)||r.nodeJs||r.requirable)return!1;if(!(e in t&&t[e]))throw new Error(["module ",e,"not found"].join(" "));return t[e]},t.context=r}(Function("return this;")())},{}],17:[function(e,n,t){Number.prototype.round=function(e){void 0==e&&(e=0);var n=Math.pow(10,-e);return Math.round(this*n)/n},Number.prototype.bin=function(e){for(var n="",t=this;t>0;)n=(t%2?"1":"0")+n,t=Math.floor(t/2);return e&&(n=(n=new Array(e+1).join("0")+n).substring(n.length-e)),n},Number.prototype.hex=function(e){var n=this.toString(16);return n.length>e?n:(new Array(e).join("0")+n).slice(-e)},Number.prototype.HEX=function(e){var n=this.toString(16).toUpperCase();return n.length>e?n:(new Array(e).join("0")+n).slice(-e)},Number.prototype.BIN=function(e){var n=this.toString(2).toUpperCase();return n.length>e?n:(new Array(e).join("0")+n).slice(-e)}},{}],18:[function(e,n,t){!function(){"use strict";function e(e){this.initialize(),this.setFrequency(e),this._handlers={change:[]}}e.SPEED_FACTOR=1.5,e.CPU_CLOCK=4e6,e.MNEMONIC_AVE_CYCLE=6,e.prototype.initialize=function(){this._out=!1,this._counter=0},e.prototype.setFrequency=function(n){this._counter_max=e.CPU_CLOCK/e.MNEMONIC_AVE_CYCLE/n},e.prototype.readOutput=function(){return this._out},e.prototype.count=function(){return this._counter+=e.SPEED_FACTOR,this._counter>=this._counter_max/2&&(this._out=!this._out,this._counter=0,this.fireEvent("change"),!0)},e.prototype.addEventListener=function(e,n){this._handlers[e].push(n)},e.prototype.fireEvent=function(e){this._handlers[e].forEach(function(e){e()})},n.exports=e}()},{}],19:[function(e,n,t){!function(){"use strict";var t=e("../lib/flip-flop-counter");function r(e){this._reset=!1,this.initialize(),this.setFrequency(e)}r.prototype=new t,r.prototype.count=function(){return!!this._reset&&t.prototype.count.call(this)},r.prototype.loadReset=function(e){e?this._reset||(this._reset=!0):this._reset&&(this._reset=!1,this.initialize())},n.exports=r}()},{"../lib/flip-flop-counter":18}],20:[function(e,n,t){!function(){"use strict";function e(){this.counter=[new t("#0"),new t("#1"),new t("#2")]}function t(e){this._name=e,this.RL=3,this.MODE=3,this.BCD=0,this.value=65535,this.counter=65535,this._written=!0,this._read=!0,this.out=!0,this.gate=!1,this._handlers={timeup:[]}}e.prototype.setCtrlWord=function(e){var n=(192&e)>>6;this.counter[n].setCtrlWord(63&e)},t.prototype.setCtrlWord=function(e){this.RL=(48&e)>>4,this.MODE=(14&e)>>1,this.BCD=0!=(1&e),this.value=0,this.counter=0,this._written=!0,this._read=!0,this.out=!1,this.gate=!1},t.prototype.load=function(e){this.counter=0;var n=!1;switch(this.RL){case 0:break;case 1:this.value=255&e,this.counter=this.value,this.out=!1,n=!0;break;case 2:this.value=(255&e)<<8,this.counter=this.value,n=!0;break;case 3:this._written?(this._written=!1,this.value=65280&this.value|255&e,this.counter=this.value,n=!1):(this._written=!0,this.value=255&this.value|(255&e)<<8,this.counter=this.value,this.out=!1,n=!0)}if(n)switch(this.MODE){case 0:this.out=!1;break;case 1:break;case 2:case 6:this.out=!0;break;case 3:case 7:this.out=!0}return n},t.prototype.read=function(){switch(this.RL){case 0:break;case 1:return 255&this.counter;case 2:return this.counter>>8&255;case 3:return this._read?(this._read=!1,255&this.counter):(this._read=!0,this.counter>>8&255)}return null},t.prototype.setGate=function(e){this.gate=e},t.prototype.count=function(e){var n=this.out;switch(this.MODE){case 0:this.counter>0?(this.counter-=e,this.counter<=0&&(this.counter=0,this.out||(this.out=!0))):this.counter=this.value;break;case 1:break;case 2:case 6:this.counter-=e,this.out&&this.counter<=0?(this.out=!1,this.counter=this.value):this.out||(this.out=!0);break;case 3:case 7:this.counter-=e,this.counter>=this.value/2?this.out=!0:this.counter>0?this.out=!1:(this.out=!0,this.counter=this.value)}!n&&this.out&&this.fireEvent("timeup")},t.prototype.addEventListener=function(e,n){this._handlers[e].push(n)},t.prototype.fireEvent=function(e){this._handlers[e].forEach(function(e){e()})},n.exports=e}()},{}],21:[function(e,n,t){"use strict";n.exports={ascii2dispcode:[240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,193,194,195,196,197,198,240,240,240,240,240,240,240,240,240,0,97,98,99,100,101,102,103,104,105,107,106,47,42,46,45,32,33,34,35,36,37,38,39,40,41,79,44,81,43,87,73,85,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,82,89,84,80,69,199,200,201,202,203,204,205,206,207,223,231,232,233,234,236,237,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,192,128,189,157,177,181,185,180,158,178,182,186,190,159,179,183,187,191,163,133,164,165,166,148,135,136,156,130,152,132,146,144,131,145,129,154,151,147,149,137,161,175,139,134,150,162,171,170,138,142,176,173,141,167,168,169,143,140,174,172,155,160,153,188,184,64,59,58,112,60,113,239,61,67,86,63,30,74,28,93,62,92,31,95,94,55,123,127,54,122,126,51,75,76,29,108,91,120,65,53,52,116,48,56,117,57,77,111,110,50,119,118,114,115,71,124,83,49,78,109,72,70,125,68,27,88,121,66,96]}},{}],22:[function(e,n,t){"use strict";n.exports=function(e){return parseInt(e,8)}},{}],23:[function(e,n,t){!function(){"use strict";const t=e("../Z80/bin-util.js");function r(e,n){var c=r.parseNumLiteralPair(e);if(null==c)return null;if(null!=n)"function"==typeof o&&(o=o(n)),"function"==typeof i&&(i=i(n));else if("function"==typeof o||"function"==typeof i)return null;var o=c[1],i=c[0];return t.pair(o,i)}r.parseNumLiteral=function(e){var n=r._parseNumLiteral(e);if("number"==typeof n){if(n<-128||256<=n)throw"operand "+e+" out of range";return 255&n}return function(n){return r.dereferLowByte(e,n)}},r.parseNumLiteralPair=function(e){var n=r._parseNumLiteral(e);if("number"==typeof n){if(n<-32768||65535<n)throw"operand "+e+" out of range";return[255&n,n>>8&255]}return[function(n){return r.dereferLowByte(e,n)},function(n){return r.dereferHighByte(e,n)}]},r.parseRelAddr=function(e,n){var t=r._parseNumLiteral(e);if("number"==typeof t){var c=e.charAt(0);if("+"!=c&&"-"!=c&&(t=t-n+2),(t-=2)<-128||256<=t)throw"operand "+e+" out of range";return 255&t}return function(t){return r.derefer(e,t)-n&255}},r.dereferLowByte=function(e,n){return 255&r.derefer(e,n)},r.dereferHighByte=function(e,n){return r.derefer(e,n)>>8&255},r.derefer=function(e,n){return e in n?n[e]:0},r._parseNumLiteral=function(e){if(/^[+-]?[0-9]+$/.test(e)||/^[+-]?[0-9A-F]+H$/i.test(e)){var n,t=0,r=/^-/.test(e)?-1:1;return/[hH]$/.test(e)?(n=e.match(/^[+-]?([0-9a-fA-F]+)[hH]$/),t=parseInt(n[1],16)):/^[+-]?0/.test(e)?(n=e.match(/^[+-]?([0-7]+)$/),t=parseInt(n[1],8)):(n=e.match(/^[+-]?([0-9]+)$/),t=parseInt(n[1],10)),r*t}return e},n.exports=r}()},{"../Z80/bin-util.js":10}],24:[function(e,n,t){!function(){"use strict";function e(){this._numOfTimer=1,this._delay=1,this._iteration=1,this._func=null,this._timerIds=null,this._calcFreq=null,this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime()}e.prototype.setNumOfTimer=function(e){this.updateTimer(function(){this._numOfTimer=e})},e.prototype.setTimerInterval=function(e){this.updateTimer(function(){this._delay=e})},e.prototype.setProcCount=function(e){this.updateTimer(function(){this._iteration=e})},e.prototype.setProc=function(e){this.updateTimer(function(){this._func=e})},e.prototype.isRunning=function(){return null!=this._timerIds},e.prototype.start=function(){if(!this.isRunning()){this._timerIds=[],this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime();for(var e=0;e<this._numOfTimer;e++)this._timerIds.push(setInterval(function(){if(null!=this._timerIds)for(var e=0;e<this._iteration;e++)null!=this._timerIds&&(this._count++,this._func())}.bind(this),this._delay))}},e.prototype.stop=function(){this.isRunning()&&(this._tickEnd=(new Date).getTime(),this._timerIds.forEach(function(e){clearInterval(e)}),this._timerIds=null)},e.prototype.getElapse=function(){return this._tickEnd-this._tickStart},e.prototype.getCalculatedFreq=function(){return this._calcFreq},e.prototype.getActualFreq=function(){var e=this.getElapse();return 0==e?null:this._count/(e/1e3)},e.prototype.getStat=function(){var e=this.getCalculatedFreq(),n=this.getElapse(),t=this.getActualFreq();return{parameter:{numOfTimer:this._numOfTimer,interval:this._delay,iteration:this._iteration,calcFreq:e},result:{elapse:n,actualFreq:t,actParCalc:t/e}}},e.prototype.updateTimer=function(e){var n=this.isRunning();n&&this.stop(),e.call(this),0!=this._delay?this._calcFreq=this._iteration*(1e3/this._delay)*this._numOfTimer:this._calcFreq=null,n&&this.start()},e.setInterval=function(n,t,r,c){if(r=r||0,c=c||0,0==r&&0==c){for(;t*++r<20;);for(t=Math.round(t*r);r/++c>500;);r=Math.round(r/c)}var o=new e;return o.setProc(n),o.setNumOfTimer(r),o.setTimerInterval(t),o.setProcCount(c),o.start(),o},e.clearInterval=function(e){e.stop()};try{n.exports={setInterval:e.setInterval,clearInterval:e.clearInterval}}catch(n){Function("return this;")().FractionalTimer=e}}()},{}],25:[function(e,n,t){!function(e){"use strict";var t=e.constructor.name;function r(){}t||("[object Window]"==e?t="Window":"[object WorkerGlobalScope]"==e&&(t="DedicatedWorkerGlobalScope")),r.context=t,"Window"==r.context?(r.create=function(e,n,t,c){var o=new r;return o.create(e,n,t,c),o},r.prototype.create=function(e,n,t,r){var c;this.worker=new Worker(e),this.createWrappers(Object.keys(n.prototype)),this.callbacks={},this.queryId=0,this.onNotify={},this.worker.onmessage=(c=this,function(e){switch(e.data.type){case"response":try{c.callbacks[e.data.queryId].apply(t,e.data.param)}catch(n){console.warn("*** exception: ",n,"in method",e.data.method,"params:",JSON.stringify(e.data.param))}delete c.callbacks[e.data.queryId];break;case"notify":try{c.onNotify[e.data.name](e.data.param)}catch(n){console.warn("*** exception: ",n,"in notify",e.data.name,"params:",JSON.stringify(e.data.param))}}}),r=r||{},Object.keys(r).forEach(function(e){this.onNotify[e]=function(){r[e].apply(t,arguments)}},this)},r.prototype.createWrappers=function(e){e.forEach(function(e){r.prototype[e]=this.wrapper(e)},this)},r.prototype.wrapper=function(e){return function(){var n=function(){},t=[];arguments.length>0&&(n=Array.prototype.slice.call(arguments,-1)[0]||function(){},t=Array.prototype.slice.call(arguments,0,arguments.length-1));var r=this.queryId++;this.callbacks[r]=n,this.worker.postMessage({method:e,param:t,queryId:r})}}):"DedicatedWorkerGlobalScope"!=r.context&&"WorkerGlobalScope"!=r.context||(r.create=function(e){var n=new r;return"function"==typeof e&&(e=new e),n.create(e),n},r.prototype.create=function(n){var t;this.worker=e,this.client=n,this.client._transworker=this,t=this,Object.keys(t.constructor.prototype).forEach(function(e){t.client[e]=function(){t.constructor.prototype[e].apply(t,arguments)}}),t.worker.onmessage=function(e){try{t.worker.postMessage({type:"response",queryId:e.data.queryId,method:e.data.method,param:[t.client[e.data.method].apply(t.client,e.data.param)]})}catch(n){console.warn("*** exception: ",n,"in method",e.data.method,"params:",JSON.stringify(e.data.param))}}},r.prototype.postNotify=function(e,n){this.worker.postMessage({type:"notify",name:e,param:n})});try{n.exports=r}catch(n){e.TransWorker=r}}(Function("return this;")())},{}]},{},[7]);