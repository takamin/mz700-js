!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("../lib/ex_number.js");var d=a("fractional-timer"),e=a("./mz-tape-header"),f=a("./mz-tape"),g=a("./mz-data-recorder"),h=a("../lib/intel-8253"),i=a("../lib/flip-flop-counter"),j=a("../lib/ic556"),k=a("./mz700-key-matrix"),l=a("./memory.js"),m=a("../Z80/emulator"),n=a("../Z80/assembler.js"),o=a("../Z80/z80-line-assembler"),p=function(a){"use strict";var b=this;this._screenUpdateData={},this._vramTxTid=null,this.keymatrix=new k,this.intel8253=new h,this.intel8253.counter[1].counter=15700,this.intel8253.counter[1].value=15700,this.intel8253.counter[1].addEventListener("timeup",function(){this.intel8253.counter[2].count(1)}.bind(this)),this.intel8253.counter[2].counter=43200,this.intel8253.counter[2].value=43200,this.intel8253.counter[2].addEventListener("timeup",function(){this.INTMSK&&this.z80.interrupt()}.bind(this)),this.hblank=new i(15700),this.hblank.addEventListener("change",function(){this.intel8253.counter[1].count(4)}.bind(this)),this.vblank=new i(50),this.VBLK=!1,this.vblank.addEventListener("change",function(){this.VBLK=!this.VBLK}.bind(this)),this.ic556=new j(3),this.ic556_OUT=!1,this.ic556.addEventListener("change",function(){this.ic556_OUT=!this.ic556_OUT}.bind(this)),this.INTMSK=!1,this.MLDST=!1;var c=null;this.dataRecorder=new g(function(a){a?(null!=c&&(clearTimeout(c),c=null),this.opt.onStartDataRecorder()):c=setTimeout(function(){c=null,this.opt.onStopDataRecorder()}.bind(this),100)}.bind(this)),this.opt={onExecutionParameterUpdate:function(){},started:function(){},stopped:function(){},notifyClockFreq:function(){},onBreak:function(){},onUpdateScreen:function(){},onVramUpdate:function(a,c,d){b._screenUpdateData[a]={dispcode:c,attr:d},null==b._vramTxTid&&(b._vramTxTid=setTimeout(function(){b.opt.onUpdateScreen(b._screenUpdateData),b._screenUpdateData={},b._vramTxTid=null},100))},onMmioRead:function(){},onMmioWrite:function(){},onPortRead:function(){},onPortWrite:function(){},startSound:function(){},stopSound:function(){},onStartDataRecorder:function(){},onStopDataRecorder:function(){}},a=a||{},Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this),this.tid=null,this.timerInterval=p.DEFAULT_TIMER_INTERVAL,this.tidMeasClock=null,this.mmioMap=[];for(var d=57344;d<59392;d++)this.mmioMap.push({r:!1,w:!1});this.memory=new l({onVramUpdate:b.opt.onVramUpdate,onMappedIoRead:function(a,c){switch(b.mmioIsMappedToRead(a)&&b.opt.onMmioRead(a,c),a){case 57345:break;case 57346:c&=15,b.dataRecorder.motor()?c|=16:c&=239,b.dataRecorder_readBit()?c|=32:c&=223,b.ic556_OUT?c|=64:c&=191,b.VBLK?c|=128:c&=127;break;case 57348:c=b.intel8253.counter[0].read();break;case 57349:c=b.intel8253.counter[1].read();break;case 57350:c=b.intel8253.counter[2].read();break;case 57351:break;case 57352:c&=254,b.hblank.readOutput()?c|=1:c&=254}return c},onMappedIoUpdate:function(a,c){switch(b.mmioIsMappedToWrite(a)&&b.opt.onMmioWrite(a,c),a){case 57344:this.poke(57345,b.keymatrix.getKeyData(c)),b.ic556.loadReset(128&c);break;case 57346:break;case 57347:if(0==(128&c)){var d=0!=(1&c);switch((14&c)>>1){case 0:break;case 1:b.dataRecorder_writeBit(d);break;case 2:b.INTMSK=d;break;case 3:b.dataRecorder_motorOn(d)}}break;case 57348:b.intel8253.counter[0].load(c)&&b.MLDST&&b.opt.startSound(895e3/b.intel8253.counter[0].value);break;case 57349:b.intel8253.counter[1].load(c);break;case 57350:b.intel8253.counter[2].load(c);break;case 57351:b.intel8253.setCtrlWord(c);break;case 57352:1==(b.MLDST=0!=(1&c))?b.opt.startSound(895e3/b.intel8253.counter[0].value):b.opt.stopSound()}return c}}),this.z80=new m({memory:b.memory,onReadIoPort:function(a,c){b.opt.onPortRead(a,c)},onWriteIoPort:function(a,c){switch(a){case 224:this.memory.changeBlock0_DRAM();break;case 225:this.memory.changeBlock1_DRAM();break;case 226:this.memory.changeBlock0_MONITOR();break;case 227:this.memory.changeBlock1_VRAM();break;case 228:this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();break;case 229:this.memory.disableBlock1();break;case 230:this.memory.enableBlock1()}b.opt.onPortWrite(a,c)}})};p.AVG_CYCLE=40,p.Z80_CLOCK=3579545,p.DEFAULT_TIMER_INTERVAL=p.AVG_CYCLE*(1e3/p.Z80_CLOCK),p.prototype.mmioMapToRead=function(a){a.forEach(function(a){this.mmioMap[a-57344].r=!0},this)},p.prototype.mmioMapToWrite=function(a){a.forEach(function(a){this.mmioMap[a-57344].w=!0},this)},p.prototype.mmioIsMappedToRead=function(a){return this.mmioMap[a-57344].r},p.prototype.mmioIsMappedToWrite=function(a){return this.mmioMap[a-57344].w},p.prototype.writeAsmCode=function(a){for(var b=0;b<a.buffer.length;b++)this.memory.poke(a.min_addr+b,a.buffer[b]);return a.min_addr},p.prototype.exec=function(a){a=a||1;try{for(var b=0;b<a;b++)this.z80.exec(),this.clock()}catch(a){return-1}return 0},p.prototype.clock=function(){this.hblank.count(),this.vblank.count(),this.ic556.count()},p.prototype.setCassetteTape=function(a){if(a.length>0){if(a.length<=128)return this.dataRecorder_setCmt([]),console.error("error buf.length <= 128"),null;if(this.mzt_array=p.parseMZT(a),null==this.mzt_array||this.mzt_array.length<1)return console.error("setCassetteTape fail to parse"),null}return this.dataRecorder_setCmt(a),this.mzt_array},p.prototype.getCassetteTape=function(){var a=this.dataRecorder.getCmt();return null==a?null:f.toBytes(a)},p.prototype.loadCassetteTape=function(){for(var a=0;a<this.mzt_array.length;a++)for(var b=this.mzt_array[a],c=0;c<b.header.file_size;c++)this.memory.poke(b.header.addr_load+c,b.body.buffer[c])},p.prototype.reset=function(){this.memory.enableBlock1(),this.memory.enableBlock1(),this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();for(var a=0;a<1e3;a++)this.memory.poke(53248+a,0),this.memory.poke(55296+a,113);return this.z80.reset()},p.prototype.getRegister=function(){return this.z80.reg.cloneRaw()},p.prototype.getRegisterB=function(){return this.z80.regB.cloneRaw()},p.prototype.setPC=function(a){this.z80.reg.PC=a},p.prototype.getIFF1=function(){return this.z80.IFF1},p.prototype.getIFF2=function(){return this.z80.IFF2},p.prototype.getIM=function(){return this.z80.IM},p.prototype.getHALT=function(){return this.z80.HALT},p.prototype.readMemory=function(a){return this.memory.peek(a)},p.prototype.setKeyState=function(a,b,c){this.keymatrix.setKeyMatrixState(a,b,c)},p.prototype.clearBreakPoints=function(){this.z80.clearBreakPoints()},p.prototype.getBreakPoints=function(){return this.z80.getBreakPoints()},p.prototype.removeBreak=function(a,b){this.z80.removeBreak(a,b)},p.prototype.addBreak=function(a,b){this.z80.setBreak(a,b)},p.parseMZT=function(a){for(var b=[],c=0;c+128<=a.length;){var d=new e(a,c);c+=128;for(var f=[],g=0;g<d.file_size;g++)f.push(a[c+g]);c+=d.file_size,b.push({header:d,body:{buffer:f}})}return b},p.prototype.start=function(){if("tid"in this&&null!=this.tid)return console.warn("[emulator] MZ700.start(): already started, caller is ",p.prototype.start.caller),!1;this.tid=d.setInterval(this.run.bind(this),this.timerInterval),this.opt.started();var a=0;return this.tidMeasClock=setInterval(function(){this.opt.notifyClockFreq(this.z80.tick-a),a=this.z80.tick}.bind(this),1e3),!0},p.prototype.stop=function(){null!=this.tid&&(d.clearInterval(this.tid),this.tid=null,this.opt.stopped()),null!=this.tidMeasClock&&(clearInterval(this.tidMeasClock),this.tidMeasClock=null)},p.prototype.run=function(){try{this.z80.exec(),this.clock()}catch(a){console.log("Error:",a),console.log(a.stack),this.stop(),this.opt.onBreak()}},p.prototype.assemble=function(a){return new n(a)},p.prototype.disassemble=function(a){var b="",c=[],d=null;a.forEach(function(a){console.assert(a.header.constructor===e,"No MZT-header");var f=a.header.getHeadline();b+=f+"\n",c=m.dasm(a.body.buffer,0,a.header.file_size,a.header.addr_load),d=f.split("\n").map(function(a){var b=new o;return b.setComment(a),b})});var f=m.dasmlines(c);return b+=f.join("\n")+"\n",Array.prototype.splice.apply(c,[0,0].concat(d)),{outbuf:b,dasmlines:f,asmlist:c}},p.disassemble=p.prototype.disassemble,p.prototype.dataRecorder_setCmt=function(a){var b=null;return b=0==a.length?[]:f.fromBytes(a),this.dataRecorder.setCmt(b),b},p.prototype.dataRecorder_ejectCmt=function(){if(this.dataRecorder.isCmtSet()){var a=this.dataRecorder.ejectCmt();if(null!=a)return f.toBytes(a)}return[]},p.prototype.dataRecorder_pushPlay=function(){this.dataRecorder.play()},p.prototype.dataRecorder_pushRec=function(){this.dataRecorder.isCmtSet()&&this.dataRecorder.ejectCmt(),this.dataRecorder.setCmt([]),this.dataRecorder.rec()},p.prototype.dataRecorder_pushStop=function(){this.dataRecorder.stop()},p.prototype.dataRecorder_motorOn=function(a){this.dataRecorder.m_on(a)},p.prototype.dataRecorder_readBit=function(){return this.dataRecorder.rdata(this.z80.tick)},p.prototype.dataRecorder_writeBit=function(a){this.dataRecorder.wdata(a,this.z80.tick)},p.prototype.getExecutionParameter=function(){return this.timerInterval},p.prototype.setExecutionParameter=function(a){var b=null!=this.tid;b&&this.stop(),this.timerInterval=a,this.opt.onExecutionParameterUpdate(a),b&&this.start()},b.exports=p},{"../Z80/assembler.js":11,"../Z80/emulator":13,"../Z80/z80-line-assembler":18,"../lib/ex_number.js":23,"../lib/flip-flop-counter":24,"../lib/ic556":25,"../lib/intel-8253":26,"./memory.js":3,"./mz-data-recorder":6,"./mz-tape":8,"./mz-tape-header":7,"./mz700-key-matrix":9,"fractional-timer":40}],2:[function(a,b,c){!function(){var c=a("jquery");a("../lib/context.js"),a("../lib/ex_number.js");var d=a("transworker"),e=a("../Z80/assembler.js"),f=a("../MZ-700/mz-tape-header"),g=a("../MZ-700/emulator.js"),h=a("../MZ-700/sound.js"),i=a("../MZ-700/mmio"),j=a("../lib/mz700cg.js");a("../lib/jquery.asmview.js"),a("../lib/jquery.soundctrl.js"),a("../lib/jquery.Z80-mem.js"),a("../lib/jquery.Z80-reg.js"),a("../lib/jquery.mz700scrn"),a("../lib/jquery.MZ-700-kb.js");var k=a("../lib/cookies");c(function(){c("span.mz700scrn").each(function(){c(this).hide()}),setTimeout(function(){c("span.mz700scrn").each(function(){window.mz700scrn.convert(this),c(this).show()})},1)});var l=function(){this.opt={urlPrefix:""},this.isRunning=!1,this.mz700scrn=null,this.keyAcceptanceState=!0,this.keystates={}};l.create=function(a){var b=new l;return b.create(a),b},l.prototype.create=function(b){if(Object.keys(this.opt).forEach(function(a){a in b&&(this.opt[a]=b[a])},this),this._cgrom=new j,window.Worker){this.mz700scrn=null;var f=c(".MZ-700 .screen").mz700scrn("create",{CG:this._cgrom});f.length>0&&(this.mz700scrn=f.get(0).mz700scrn);var m=c(".MZ-700 .cmt-slot");if(m.length>0&&window.File&&window.FileReader&&window.FileList&&window.Blob){var n=m.get(0);n.addEventListener("dragover",function(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"},!1),n.addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault();var b=a.dataTransfer.files;b.length>0&&this.mz700comworker.stop(function(){var a=b[0],c=new FileReader;c.onload=function(){this.setMztData(new Uint8Array(c.result),function(a){this.start(a[0].header.addr_exec)}.bind(this))}.bind(this),c.readAsArrayBuffer(a)}.bind(this))}.bind(this),!1)}this.keyEventReceiver=c("<span/>").addClass("key-switcher").html("Key-In"),this.btnReset=this.btnReset_create(),this.btnStart=this.btnStart_create(),this.btnStep=this.btnStep_create(),this.btnReset_notHover(),this.btnStart_toStop(),this.btnStep_disable(),this.sliderExecParamTimerInterval=c("<input/>").attr("type","range").attr("min",0).attr("max",1).attr("step",.01).val(7).bind("change",function(){var a=this.sliderExecParamTimerInterval.val();this._timerInterval=g.DEFAULT_TIMER_INTERVAL/Math.pow(10,a),this.updateExecutionParameter(),k.setItem("speedSliderValue",this._timerInterval,1/0)}.bind(this));var o=new h,p=!1;k.hasItem("mute")&&(p="true"==k.getItem("mute"));var q=10;k.hasItem("volume")&&(q=parseInt(k.getItem("volume"))),c(".MZ-700 .ctrl-panel").append(this.keyEventReceiver).append(c("<span/>").soundctrl("create",{maxVolume:10,initialVolume:q,initialMute:p,onChangeVolume:function(a){this.mute||k.setItem("volume",a,1/0),o.setGain(a/10)},onChangeMute:function(a){k.setItem("mute",a,1/0)},urlIconOn:this.opt.urlPrefix+"image/icon-sound-on.svg",urlIconOff:this.opt.urlPrefix+"image/icon-sound-off.svg",colOn:"blue",colOff:"silver"})).append(this.btnStart).append(this.btnReset).append(this.btnStep).append(c("<span/>").addClass("speed-control-slider").html("Speed:").append(this.sliderExecParamTimerInterval));var r=c(".MZ-700 .data-recorder");if(this.btnCmtRec=c("<button/>").attr("type","button").html("<span style='color:red'>●</span> RECPLAY").click(function(){this.cmtMessageArea.empty().html("Recording ..."),this.mz700comworker.dataRecorder_pushRec(function(){})}.bind(this)),this.btnCmtPlay=c("<button/>").attr("type","button").html("<span class='cmtPlayImage'>▼</span> PLAY").click(function(){this.mz700comworker.dataRecorder_pushPlay(function(){})}.bind(this)),this.btnCmtStop=c("<button/>").attr("type","button").html("<span>■</span> STOP").click(function(){this.mz700comworker.dataRecorder_pushStop(function(){})}.bind(this)),this.btnCmtEject=c("<button/>").attr("type","button").html("<span>▲</span>EJECT").click(function(){this.mz700comworker.dataRecorder_ejectCmt(function(a){this.createCmtDownloadLink(a)}.bind(this))}.bind(this)),window.File&&window.FileReader&&window.FileList&&window.Blob){var s=r.get(0);s.addEventListener("dragover",function(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"},!1),s.addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault();var b=a.dataTransfer.files;if(b.length>0){var c=b[0],d=new FileReader;d.onload=function(){var a=new Uint8Array(d.result);this.mz700comworker.setCassetteTape(a,function(){this.createCmtDownloadLink(a)}.bind(this))}.bind(this),d.readAsArrayBuffer(c)}}.bind(this),!1)}this.cmtMessageArea=c("<span/>").addClass("cmt-message").html("(EMPTY)"),r.html("CMT: ").attr("title","Drop MZT file here to load with 'L' command").append(this.cmtMessageArea).append(this.btnCmtRec).append(this.btnCmtPlay).append(this.btnCmtStop).append(this.btnCmtEject),this.kb=c(".MZ-700 .keyboard").mz700keyboard("create",{onStateChange:function(a,b,c){this.mz700comworker.setKeyState(a,b,c,null)}.bind(this)}),window.onkeydown=l.prototype.onkeydown.bind(this),window.onkeyup=l.prototype.onkeyup.bind(this),this.MMIO=i.create(),this.mz700comworker=d.create(this.opt.urlPrefix+"MZ-700/bundle-worker.js",g,this,{onExecutionParameterUpdate:function(a){this.onExecutionParameterUpdate(a)},start:function(){this.isRunning=!0,this.clearCurrentExecLine(),this.updateUI()},stop:function(){this.isRunning=!1,this.scrollToShowPC(),this.updateUI()},onNotifyClockFreq:function(a){c(".speed-control-slider").attr("title","Clock: "+Math.round(100*a/1e6)/100+" MHz")},onBreak:function(){this.stop()},onUpdateScreen:null==this.mz700scrn?function(){}:function(a){Object.keys(a).forEach(function(b){var c=a[b];this.mz700scrn.writeVram(b,c.attr,c.dispcode)},this)}.bind(this),onMmioRead:function(a){this.MMIO.read(a.address,a.value)},onMmioWrite:function(a){this.MMIO.write(a.address,a.value)},onPortRead:function(){},onPortWrite:function(){},startSound:function(a){o.startSound(a[0])},stopSound:function(){o.stopSound()},onStartDataRecorder:function(){this.btnCmtRec.prop("disabled",!0),this.btnCmtEject.prop("disabled",!0),this.btnCmtStop.prop("disabled",!1)}.bind(this),onStopDataRecorder:function(){this.mz700comworker.getCassetteTape(function(a){this.createCmtDownloadLink(a)}.bind(this)),this.btnCmtRec.prop("disabled",!1),this.btnCmtEject.prop("disabled",!1),this.btnCmtStop.prop("disabled",!0)}.bind(this)}),this.PCG700=a("../lib/PCG-700").create(),this.PCG700.writeMMIO(57360,0),this.PCG700.writeMMIO(57361,0),this.PCG700.writeMMIO(57362,24),this.mmioMapPeripheral(this.PCG700,[],[57360,57361,57362]),window.addEventListener("enablePCG700",function(){this.mz700scrn.changeCG(this.PCG700._cg),this.mz700scrn.redraw()}.bind(this)),window.addEventListener("disablePCG700",function(){this.mz700scrn.restoreCG(),this.mz700scrn.redraw()}.bind(this)),window.addEventListener("updatePCG700",function(a){this.mz700scrn.redrawChar(a.detail.atb,a.detail.dispCode)}.bind(this)),this.regview=c("<div/>").Z80RegView("init");var t=function(a){a<=0?this.reg_upd_tid&&(clearInterval(this.reg_upd_tid),this.reg_upd_tid=null):this.reg_upd_tid||(this.reg_upd_tid=setInterval(function(){this.updateRegister()}.bind(this),a))}.bind(this);c(".register-monitor").append(c("<div/>").css("display","inline-block").append(this.regview)).append(c("<div/>").css("display","inline-block").css("text-align","center").append(c("<button type='button'>Update</button>").click(function(){this.updateRegister()}.bind(this))).append(c("<br/>")).append(c("<input type='checkbox'/>").change(function(){c(this).prop("checked")?(t(50),c(this).parent().find("button").prop("disabled",!0)):(t(0),c(this).parent().find("button").prop("disabled",!1))})).append(c("<span>Auto Update</span>"))),c(".MZ-700 .memory").append(c("<div/>").dumplist("init",{readMemory:null,rows:16,fontFamily:"inherit",fontSize:"12pt",rowHeight:"24px",colWidth:"30px",headerWidth:"60px",getReg:function(a,b){this.mz700comworker.getRegister(function(c){b(c[a])})}.bind(this)}).dumplist("setReadMemoryHandler",function(a,b){this.readMemory(a,b)}.bind(this.mz700comworker))),c(".source-list").asmview("create");var u=c(c("textarea.default.source").get(0)).val();c(".source-list").asmview("addTab",{index:"mzt",caption:"PCG-700 sample"},u,{onAssemble:function(a){this.mz700comworker.assemble(a,function(a){this.mz700comworker.writeAsmCode(a,function(){this.createAssembleList(a.list)}.bind(this))}.bind(this))}.bind(this),onSetBreakPoint:function(a,b,c){c?this.mz700comworker.addBreak(a,b,null):this.mz700comworker.removeBreak(a,b,null)}.bind(this)});var v=function(a){var b=new e(a);this.mz700comworker.getRegister(function(a){var c=a.PC;this.mz700comworker.writeAsmCode(b,function(a){this.mz700comworker.setPC(a,function(){this.mz700comworker.exec(1,function(){this.mz700comworker.setPC(c,function(){})}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this);c(".imm-exec").append(c("<label/>").html("Address")).append(c("<input/>").attr("type","text").attr("value","CF00h").addClass("address")).append(c("<label/>").html("mnemonic")).append(c("<input/>").attr("type","text").attr("value","NOP").addClass("mnemonic")).append(c("<button/>").attr("type","button").html("Execute").click(function(){var a=c(this).parent(),b=a.find("input.address").val(),d=new e,f=d.parseAddress(b);if(null!=f){var g="ORG "+f.HEX(4)+"H\r\n";g+=a.find("input.mnemonic").val()+"\r\n",v(g)}})).append(c("<br/>"))}if(this._timerInterval=g.DEFAULT_TIMER_INTERVAL,k.hasItem("speedSliderValue")){var w=parseFloat(k.getItem("speedSliderValue"));this._timerInterval=w,this.updateExecutionParameter(),this.onExecutionParameterUpdate(w)}else this.mz700comworker.getExecutionParameter(function(a){this._timerInterval=a,this.updateExecutionParameter(),this.onExecutionParameterUpdate(a),k.setItem("speedSliderValue",this._timerInterval,1/0)}.bind(this))},l.prototype.btnReset_create=function(){return c("<button/>").attr("type","button").addClass("imaged").append(c("<img/>").attr("title","Reset").attr("alt","Reset")).click(function(){this.reset()}.bind(this)).hover(this.btnReset_hover.bind(this),this.btnReset_notHover.bind(this))},l.prototype.btnReset_hover=function(){this.btnReset.find("img").attr("src","../image/btnReset-on.png")},l.prototype.btnReset_notHover=function(){this.btnReset.find("img").attr("src","../image/btnReset-off.png")},l.prototype.btnStart_create=function(){return c("<button/>").attr("type","button").attr("title","[F8]").addClass("imaged").append(c("<img/>")).click(this.btnStart_click.bind(this)).hover(this.btnStart_hover.bind(this),this.btnStart_notHover.bind(this))},l.prototype.btnStart_click=function(){this.isRunning?this.stop(function(){this.btnStart_toRun()}.bind(this)):this.start(null,function(){this.btnStart_toStop()}.bind(this))},l.prototype.btnStart_hover=function(){this.isRunning?this.btnStart_hoverOnRunning():this.btnStart_hoverOnStopping()},l.prototype.btnStart_notHover=function(){this.isRunning?this.btnStart_notHoverOnRunning():this.btnStart_notHoverOnStopping()},l.prototype.btnStart_toRun=function(){this.btnStart.find("img").attr("src","../image/btnRun-off.png").attr("title","Run").attr("alt","Run")},l.prototype.btnStart_toStop=function(){this.btnStart.find("img").attr("src","../image/btnStop-off.png").attr("title","Stop").attr("alt","Stop")},l.prototype.btnStart_hoverOnRunning=function(){this.btnStart.find("img").attr("src","../image/btnStop-on.png")},l.prototype.btnStart_hoverOnStopping=function(){this.btnStart.find("img").attr("src","../image/btnRun-on.png")},l.prototype.btnStart_notHoverOnRunning=function(){this.btnStart.find("img").attr("src","../image/btnStop-off.png")},l.prototype.btnStart_notHoverOnStopping=function(){this.btnStart.find("img").attr("src","../image/btnRun-off.png")},l.prototype.btnStep_create=function(){return c("<button/>").attr("type","button").attr("title","[F9]").addClass("imaged").append(c("<img/>").attr("title","Step-In").attr("alt","Step-In")).click(this.stepIn.bind(this)).hover(this.btnStep_hover.bind(this),this.btnStep_notHover.bind(this))},l.prototype.btnStep_enable=function(a){this.btnStep.prop("disabled",""),a?this.btnStep.find("img").attr("src","../image/btnStepIn-on.png"):this.btnStep.find("img").attr("src","../image/btnStepIn-off.png")},l.prototype.btnStep_disable=function(){this.btnStep.prop("disabled","disabled").find("img").attr("src","../image/btnStepIn-disabled.png")},l.prototype.btnStep_hover=function(){this.isRunning||this.btnStep_enable(!0)},l.prototype.btnStep_notHover=function(){this.isRunning||this.btnStep_enable()},l.prototype.mmioMapPeripheral=function(a,b,c){this.MMIO.entry(a,b,c),this.mz700comworker.mmioMapToWrite(b,function(){}),this.mz700comworker.mmioMapToWrite(c,function(){})},l.prototype.reset=function(a){this.mz700comworker.stop(function(){this.mz700comworker.reset(function(){this.mz700comworker.getCassetteTape(function(b){this.createCmtDownloadLink(b),this.start(null,a)}.bind(this))}.bind(this))}.bind(this))},l.EXEC_TIMER_INTERVAL=100,l.NUM_OF_EXEC_OPCODE=2e4,l.prototype.start=function(a,b){null==a?this.mz700comworker.start(b||function(){}):this.mz700comworker.setPC(a,function(){this.mz700comworker.start(b||function(){})}.bind(this))},l.prototype.stop=function(a){this.mz700comworker.stop(a||function(){})},l.prototype.stepIn=function(){this.clearCurrentExecLine(),this.mz700comworker.exec(1,function(){this.scrollToShowPC()}.bind(this))},l.prototype.stepOver=function(){this.stepIn()},l.prototype.updateExecutionParameter=function(){this.mz700comworker.setExecutionParameter(this._timerInterval,function(){})},l.prototype.onExecutionParameterUpdate=function(a){this._timerInterval=a;var b=Math.log10(g.DEFAULT_TIMER_INTERVAL/a);this.sliderExecParamTimerInterval.val(b)},l.prototype.updateUI=function(){this.isRunning?(c(".MZ-700").addClass("running"),this.btnStep_disable()):(c(".MZ-700").removeClass("running"),this.btnStep_enable())},l.prototype.updateRegister=function(){!function(a){a.mz700comworker.getRegister(function(b){a.regview.Z80RegView("update",b)}),a.mz700comworker.getRegisterB(function(b){a.regview.Z80RegView("update_",b)}),a.mz700comworker.getIFF1(function(b){a.regview.Z80RegView("IFF1",b)}),a.mz700comworker.getIFF2(function(b){a.regview.Z80RegView("IFF2",b)}),a.mz700comworker.getIM(function(b){a.regview.Z80RegView("IM",b)}),a.mz700comworker.getHALT(function(b){a.regview.Z80RegView("HALT",b)})}(this)},l.prototype.runServerMZT=function(a){this.mz700comworker.stop(function(){c.getJSON("mzt/"+a+".json",function(a){this.setMztData(a,function(a){this.start(a[0].header.addr_exec)}.bind(this))}.bind(this))}.bind(this))},l.prototype.setMztData=function(a,b){b=b||function(){},this.mz700comworker.setCassetteTape(a,function(c){null!=c&&(this.cmtMessageArea.html("MZT: '"+c[0].header.filename+"' Loading..."),this.mz700comworker.loadCassetteTape(function(){this.cmtMessageArea.html("MZT: '"+c[0].header.filename+"' Loaded"),this.createCmtDownloadLink(a),b(c)}.bind(this)))}.bind(this))},l.prototype.scrollToShowPC=function(){this.mz700comworker.getRegister(function(a){c(".source-list").asmview("setCurrentAddr","mzt",a.PC)})},l.prototype.clearCurrentExecLine=function(){c(".source-list").asmview("clearCurrentAddr","mzt")},l.prototype.disassemble=function(a){var b=this.isRunning,d=f.get1stFilename(a)||"(empty)";this.mz700comworker.stop(function(){var e=g.disassemble(a);c(".source-list").length>0&&(c(".source-list").asmview("setSource","mzt",e.outbuf,d,!1),this.createAssembleList(e.asmlist)),b&&this.start()}.bind(this))},l.prototype.createAssembleList=function(a){this.mz700comworker.getBreakPoints(function(b){c(".source-list").asmview("setAsmList","mzt",a,b)}.bind(this))},l.prototype.acceptKey=function(a){this.keyAcceptanceState=a,this.keyAcceptanceState?this.keyEventReceiver.addClass("on"):this.keyEventReceiver.removeClass("on")},l.prototype.onkeydown=function(a){if(this.keyAcceptanceState)return this.updateKeyStates(a,!0),!1},l.prototype.onkeyup=function(a){switch(a.keyCode){case 119:return void(this.isRunning?this.stop():this.start());case 120:return void this.stepOver()}if(this.keyAcceptanceState)return this.updateKeyStates(a,!1),!1},l.prototype.updateKeyStates=function(a,b){var c=a.keyCode;if(!(c in this.keystates)||this.keystates[c]!=b){this.keystates[c]=b;var d=this.kb.mz700keyboard("getMatPos",c);null!=d&&(this.kb.mz700keyboard("setState",d.strobe,d.bit,b),this.mz700comworker.setKeyState(d.strobe,d.bit,b,null))}},l.prototype.createCmtDownloadLink=function(a){if(null==a||a.length<128)return void this.cmtMessageArea.empty().append("(EMPTY)");var b=new f(a,0),d=new Uint8Array(a),e=new Blob([d],{type:"application/octet-stream"});this.cmtMessageArea.empty().html(b.filename).append(c("<a/>").addClass("download-link").attr("download",b.filename+".MZT").attr("type","application/octet-stream").attr("href",URL.createObjectURL(e)).html("").attr("title","Download "+b.filename+".MZT ("+b.file_size+" bytes)  ADDR:("+b.addr_load.HEX(4)+" - "+(b.addr_load+b.file_size-1).HEX(4)+") EXEC:"+b.addr_exec.HEX(4))),this.cmtMessageArea.append(c("<a/>").html("Disassemble").click(function(){this.mz700comworker.getCassetteTape(function(a){if(null!=a){var b=g.parseMZT(a);this.disassemble(b)}})}.bind(this)))},b.exports=l}()},{"../MZ-700/emulator.js":1,"../MZ-700/mmio":4,"../MZ-700/mz-tape-header":7,"../MZ-700/sound.js":10,"../Z80/assembler.js":11,"../lib/PCG-700":20,"../lib/context.js":21,"../lib/cookies":22,"../lib/ex_number.js":23,"../lib/jquery.MZ-700-kb.js":27,"../lib/jquery.Z80-mem.js":28,"../lib/jquery.Z80-reg.js":29,"../lib/jquery.asmview.js":31,"../lib/jquery.mz700scrn":32,"../lib/jquery.soundctrl.js":33,"../lib/mz700cg.js":36,jquery:19,transworker:41}],3:[function(a,b,c){function d(a){this.create(a)}var e=a("./monitor-rom.js"),f=a("../Z80/memory-block.js"),g=a("../Z80/memory-bank.js");d.prototype=new g,d.prototype.create=function(a){g.prototype.create.call(this,a);var b,c=function(){},d=function(){};if(a.onVramUpdate){var h=a.onVramUpdate,i=new Array(65536),j=new Array(65536),k=new Array(65536);for(b=0;b<1e3;b++)i[53248+b]=[b,0,113],i[55296+b]=[b,0,113],j[53248+b]=function(a,b){return function(c){b[1]=c,h(a[0],c,a[2])}}(i[53248+b],i[55296+b]),k[55296+b]=function(a,b){return function(c){a[2]=c,h(b[0],b[1],c)}}(i[53248+b],i[55296+b]);c=function(a,b){53248<=a&&a<54248&&j[a](b)},d=function(a,b){55296<=a&&a<56296&&k[a](b)}}for(this.memblks={IPL_AREA_ROM:new e,IPL_AREA_RAM:new f({startAddr:0,size:4096}),FREE_RAM:new f({startAddr:4096,size:49152}),TEXT_VRAM:new f({startAddr:53248,size:2048,onPoke:c}),ATTR_VRAM:new f({startAddr:55296,size:2048,onPoke:d}),MMAPED_IO:new f({startAddr:57344,size:2048,onPeek:a.onMappedIoRead||function(){},onPoke:a.onMappedIoUpdate||function(){}}),EXTND_ROM:new f({startAddr:59392,size:6144}),DRAM:new f({startAddr:55296,size:12288})},this._block1VRAM=!0,this._disabledBlock1=!1,this.changeBlock0_MONITOR(),this.setMemoryBlock("FREE_RAM",this.memblks.FREE_RAM),this.changeBlock1_VRAM(),b=0;b<2048;b++)this.memblks.ATTR_VRAM.pokeByte(55296+b,113)},d.prototype.clear=function(){g.prototype.clear.call(this);for(var a in this.memblks)this.memblks[a].clear()},d.prototype.getTextVram=function(){return this.memblks.TEXT_VRAM},d.prototype.getAttrVram=function(){return this.memblks.ATTR_VRAM},d.prototype.changeBlock0_MONITOR=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_ROM)},d.prototype.changeBlock0_DRAM=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_RAM)},d.prototype.changeBlock1_DRAM=function(){this._block1VRAM=!1,this._disabledBlock1=!1,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",this.memblks.DRAM)},d.prototype.changeBlock1_VRAM=function(){this._block1VRAM=!0,this._disabledBlock1=!1,this.setMemoryBlock("DRAM",null),this.setMemoryBlock("TEXT_VRAM",this.memblks.TEXT_VRAM),this.setMemoryBlock("ATTR_VRAM",this.memblks.ATTR_VRAM),this.setMemoryBlock("MMAPED_IO",this.memblks.MMAPED_IO),this.setMemoryBlock("EXTND_ROM",this.memblks.EXTND_ROM)},d.prototype.disableBlock1=function(){this._disabledBlock1||(this._disabledBlock1=!0,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",null))},d.prototype.enableBlock1=function(){this._disabledBlock1&&(this._block1VRAM?this.changeBlock1_VRAM():this.changeBlock1_DRAM(),this._disabledBlock1=!1)},b.exports=d},{"../Z80/memory-bank.js":15,"../Z80/memory-block.js":16,"./monitor-rom.js":5}],4:[function(a,b,c){!function(){"use strict";var a=function(){this.mmio=[];for(var a=57344;a<59392;a++)this.mmio.push({r:[],w:[]})};a.prototype.entry=function(a,b,c){b.forEach(function(b){"readMMIO"in a&&"function"==typeof a.readMMIO?this.mmio[b-57344].r.push(a):console.error("The periferal does not have a method 'readMMIO' for memory mapped I/O at",b.HEX(4)+"h")},this),c.forEach(function(b){"writeMMIO"in a&&"function"==typeof a.readMMIO?this.mmio[b-57344].w.push(a):console.error("The periferal does not have a method 'writeMMIO' for memory mapped I/O at",b.HEX(4)+"h")},this)},a.prototype.read=function(a,b){this.mmio[a-57344].r.forEach(function(c){b=c.readMMIO(a,b)})},a.prototype.write=function(a,b){this.mmio[a-57344].w.forEach(function(c){b=c.writeMMIO(a,b)})},b.exports={create:function(){return new a}}}()},{}],5:[function(a,b,c){function d(){this.create()}var e=a("../Z80/memory-block.js");d.prototype=new e,d.prototype.create=function(){e.prototype.create.call(this,{startAddr:0,size:4096});for(var a=0;a<this.size;a++){var b=this.startAddr+a;e.prototype.pokeByte.call(this,b,f[b])}},d.prototype.pokeByte=function(a){e.prototype.pokeByte.call(this,a,f[a])},b.exports=d
;var f=[195,74,0,195,230,7,195,14,9,195,24,9,195,32,9,195,127,0,195,53,9,195,129,9,195,153,9,195,189,8,195,50,10,195,54,4,195,117,4,195,216,4,195,248,4,195,136,5,195,199,1,195,8,3,0,0,195,56,16,195,88,3,195,229,2,195,250,2,195,171,2,195,190,2,49,240,16,237,86,205,201,15,62,22,215,6,60,33,112,17,205,216,15,33,146,3,62,195,50,56,16,34,57,16,33,4,5,34,158,17,205,190,2,17,65,1,223,205,192,10,24,8,17,241,16,24,150,195,38,9,49,240,16,17,130,0,213,205,9,0,62,42,215,17,163,17,205,3,0,26,254,42,194,84,12,19,26,254,71,202,89,1,254,35,202,18,2,254,77,202,15,12,254,83,202,130,12,254,38,202,14,14,254,76,40,31,0,0,0,0,254,82,202,170,1,254,80,202,18,2,195,155,10,205,232,0,205,45,0,56,10,17,196,1,207,223,201,205,232,0,239,218,103,1,42,6,17,124,254,18,216,233,205,39,0,56,149,207,17,56,1,223,24,134,17,0,208,14,25,6,40,26,205,206,11,205,15,1,19,16,246,62,13,205,15,1,13,32,236,201,213,245,219,254,230,13,183,40,7,205,30,0,40,119,24,242,241,211,255,62,128,211,254,219,254,230,13,254,1,32,248,175,211,254,201,70,79,85,78,68,32,13,76,79,46,32,13,195,73,1,0,32,77,90,144,55,48,48,13,211,225,17,240,255,213,33,46,7,1,5,0,237,176,201,0,19,26,254,79,32,4,19,19,19,19,205,192,12,233,254,2,200,207,17,181,1,223,201,62,255,50,157,17,201,175,24,249,33,0,240,126,183,192,233,197,213,229,26,190,32,11,5,40,8,254,13,40,4,19,35,24,241,225,209,193,201,245,195,173,13,62,255,211,224,201,17,49,1,223,17,241,16,223,195,227,15,205,232,0,205,227,15,239,195,209,0,0,67,69,13,54,255,58,112,17,183,32,2,54,239,175,201,79,75,13,197,213,229,62,2,50,160,17,6,1,26,254,13,40,2,254,200,40,46,254,207,40,30,254,215,40,34,254,35,33,113,2,32,3,46,137,19,205,28,2,56,224,205,200,2,56,21,205,171,2,65,24,213,62,3,50,160,17,19,24,205,62,1,24,246,205,200,2,245,205,190,2,241,24,128,19,205,31,4,216,205,15,1,24,246,197,6,8,26,190,40,9,35,35,35,16,248,55,19,193,201,35,213,94,35,86,235,124,183,40,9,58,160,17,61,40,3,41,24,250,34,161,17,62,2,50,160,17,209,19,26,71,230,240,254,48,40,5,58,159,17,24,7,19,120,230,15,50,159,17,79,6,0,33,161,2,9,78,58,158,17,71,175,129,16,253,193,79,175,201,67,119,7,68,167,6,69,237,5,70,152,5,71,252,4,65,113,4,66,245,3,82,0,0,67,12,7,68,71,6,69,152,5,70,72,5,71,180,4,65,49,4,66,187,3,82,0,0,1,2,3,4,6,8,12,16,24,32,42,161,17,124,183,40,12,213,235,33,4,224,115,114,62,1,209,24,6,62,54,50,7,224,175,50,8,224,201,33,0,224,54,248,35,126,230,128,32,2,55,201,58,8,224,15,56,250,58,8,224,15,48,250,16,242,175,201,197,229,33,113,4,205,174,2,6,50,175,205,91,7,16,250,225,193,195,190,2,245,197,230,15,71,62,8,144,50,158,17,193,241,201,243,197,213,229,50,155,17,62,240,50,156,17,33,192,168,175,237,82,229,35,235,62,116,50,7,224,62,176,50,7,224,33,6,224,115,114,43,54,10,54,0,62,128,50,7,224,35,78,126,186,32,251,121,187,32,247,43,0,0,0,54,18,54,122,35,209,78,126,186,32,251,121,187,32,247,225,209,193,251,201,229,62,128,50,7,224,33,6,224,243,94,86,251,123,178,202,121,3,175,33,192,168,237,82,218,131,3,235,58,155,17,225,201,17,192,168,58,155,17,238,1,225,201,243,33,6,224,126,47,95,126,47,87,251,19,195,124,3,245,197,213,229,58,155,17,238,1,50,155,17,62,128,50,7,224,33,6,224,94,86,33,192,168,25,43,43,235,33,6,224,115,114,225,209,193,241,251,201,124,205,195,3,125,205,195,3,201,245,230,240,15,15,15,15,205,218,3,205,18,0,241,230,15,205,218,3,215,62,32,201,213,229,33,233,3,230,15,95,22,0,25,126,225,209,201,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,197,229,1,0,16,33,233,3,190,32,3,121,24,6,35,12,5,32,245,55,225,193,201,213,205,31,4,56,7,103,205,31,4,56,1,111,209,201,197,26,19,195,241,6,56,13,7,7,7,7,79,26,19,205,249,3,56,1,177,193,201,243,213,197,229,22,215,30,204,33,240,16,1,128,0,205,51,7,205,178,6,218,99,5,123,254,204,32,17,205,9,0,213,17,108,4,205,21,0,17,241,16,205,21,0,209,205,184,7,205,141,4,195,99,5,87,82,73,84,73,78,71,32,13,243,213,197,229,22,215,30,83,42,2,17,229,193,42,4,17,120,177,202,212,4,195,68,4,213,197,229,58,55,16,87,62,248,50,0,224,126,205,165,7,58,1,224,230,8,32,3,55,24,45,35,11,120,177,194,153,4,42,151,17,124,205,165,7,125,205,165,7,205,128,7,21,194,196,4,183,195,212,4,6,0,205,103,7,5,194,198,4,225,193,197,229,195,153,4,225,193,209,201,243,213,197,229,22,210,30,204,1,128,0,33,240,16,205,178,6,218,130,5,205,94,6,218,130,5,205,16,5,195,99,5,243,213,197,229,22,210,30,83,42,2,17,229,193,42,4,17,120,177,202,99,5,195,230,4,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,97,205,85,6,26,230,32,40,243,84,33,0,0,34,151,17,225,193,197,229,205,36,6,56,73,119,35,11,120,177,32,244,42,151,17,205,36,6,56,58,95,205,36,6,56,52,189,32,35,123,188,32,31,24,11,62,1,50,55,16,201,62,2,24,248,0,175,225,193,209,205,0,7,245,58,156,17,254,240,32,1,251,241,201,21,202,124,5,98,195,22,5,62,1,55,195,99,5,62,2,55,195,99,5,243,213,197,229,42,2,17,229,193,42,4,17,22,210,30,83,120,177,202,99,5,205,51,7,205,178,6,218,130,5,205,94,6,218,130,5,205,178,5,195,99,5,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,191,205,85,6,26,230,32,40,243,84,225,193,197,229,205,36,6,56,173,190,32,164,35,11,120,177,32,242,42,153,17,205,36,6,188,32,149,205,36,6,189,32,143,21,202,98,5,98,195,184,5,120,6,192,128,48,2,214,64,71,195,58,8,62,249,50,0,224,0,10,230,4,194,15,6,55,201,26,230,32,194,7,6,10,230,8,194,29,6,55,201,26,230,32,202,21,6,201,197,213,229,33,0,8,1,1,224,17,2,224,205,1,6,56,28,205,85,6,26,230,32,40,10,229,42,151,17,35,34,151,17,225,55,125,23,111,37,32,227,205,1,6,125,225,209,193,201,58,53,16,61,32,253,32,0,201,197,213,229,33,40,40,123,254,204,40,3,33,20,20,34,149,17,1,1,224,17,2,224,42,149,17,205,1,6,56,30,205,85,6,26,230,32,40,240,37,32,240,205,1,6,56,14,205,85,6,26,230,32,32,224,45,32,240,205,1,6,225,209,193,201,194,245,5,62,40,42,113,17,149,71,205,177,15,205,216,15,195,238,7,197,213,229,14,10,58,2,224,230,16,40,5,175,225,209,193,201,62,6,33,3,224,119,60,119,13,32,233,207,122,254,215,40,6,17,34,7,223,24,8,17,41,7,223,17,36,7,223,58,2,224,230,16,32,213,205,68,10,32,244,55,24,206,254,47,40,6,205,249,3,195,37,4,26,19,195,52,4,245,197,213,6,10,58,2,224,230,16,32,4,209,193,241,201,62,6,50,3,224,62,7,50,3,224,5,194,5,7,209,193,241,201,127,32,80,76,65,89,13,127,82,69,67,13,211,224,195,0,0,197,213,229,17,0,0,120,177,32,11,235,34,151,17,34,153,17,225,209,193,201,126,229,38,8,7,48,1,19,37,32,249,225,35,11,24,225,58,54,16,61,32,253,201,58,55,0,24,244,0,0,0,245,62,3,50,3,224,205,95,7,62,2,50,3,224,205,95,7,241,201,8,195,228,9,0,0,245,62,3,50,3,224,205,95,7,205,95,7,62,2,50,3,224,205,95,7,205,98,7,241,201,62,0,50,52,16,33,68,46,34,53,16,201,197,6,8,205,128,7,7,220,128,7,212,103,7,5,194,171,7,193,201,197,213,123,1,248,42,17,40,40,254,204,202,204,7,1,190,10,17,20,20,205,103,7,11,120,177,32,248,205,128,7,21,32,250,205,103,7,29,32,250,205,128,7,209,193,201,245,197,229,213,175,50,147,17,205,179,9,71,58,157,17,183,204,109,12,120,230,240,254,192,32,55,120,254,205,40,86,254,201,40,29,254,202,40,20,254,203,202,179,8,254,200,40,11,254,199,40,7,58,147,17,183,32,28,120,205,220,13,24,200,33,112,17,175,190,32,1,60,119,214,6,47,50,3,224,24,183,205,68,10,40,106,120,205,166,13,205,181,13,254,98,32,167,33,147,17,126,47,119,24,159,254,16,202,66,15,254,213,254,5,195,159,6,42,113,17,92,22,0,33,115,17,25,235,26,183,1,40,0,42,113,17,194,122,8,19,26,183,202,125,8,195,123,8,37,14,80,46,0,205,180,15,209,213,197,205,166,13,237,176,193,225,229,65,126,205,206,11,119,35,16,248,54,13,43,126,254,32,40,248,205,6,0,209,225,193,241,201,120,254,18,202,246,13,254,73,202,41,14,24,156,225,229,54,27,35,54,13,24,226,0,205,202,8,254,240,32,2,175,201,205,206,11,201,197,213,229,205,80,10,120,7,56,6,62,240,225,209,193,201,7,210,236,8,6,0,33,8,0,9,17,201,10,25,126,195,214,8,58,112,17,183,194,253,8,6,0,33,201,10,9,126,195,214,8,121,230,240,15,71,121,230,15,128,198,160,111,38,0,195,228,8,175,50,148,17,62,205,205,220,13,201,58,148,17,183,200,195,6,0,62,32,205,53,9,201,205,12,0,58,148,17,183,200,214,10,56,244,32,250,201,254,13,202,14,9,197,79,71,205,150,1,205,70,9,121,193,201,121,205,185,11,79,230,240,254,240,200,254,192,121,194,112,9,254,199,210,112,9,205,220,13,254,195,202,115,9,254,197,202,107,9,254,198,192,175,50,148,17,201,205,181,13,58,148,17,60,254,80,56,2,214,80,50,148,17,201,245,197,213,6,5,205,150,1,26,254,13,202,223,15,79,205,70,9,19,16,243,195,132,9,245,197,213,6,5,205,150,1,26,254,13,202,223,15,205,185,11,205,112,9,19,16,241,195,156,9,197,213,229,205,177,15,205,166,13,126,50,142,17,34,143,17,33,146,17,205,184,1,50,0,224,50,145,17,47,50,0,224,22,20,205,255,9,205,80,10,120,7,218,230,11,21,194,213,9,205,255,9,205,202,8,254,240,202,122,7,245,205,166,13,58,142,17,42,143,17,119,241,225,209,193,201,245,229,58,2,224,7,7,218,37,10,58,145,17,15,218,34,10,58,146,17,42,143,17,205,166,13,119,58,145,17,238,1,50,145,17,225,241,201,58,145,17,15,210,34,10,58,142,17,195,19,10,62,248,50,0,224,0,58,1,224,47,230,33,194,68,10,198,1,201,62,248,50,0,224,0,58,1,224,230,128,201,213,229,6,250,22,0,5,120,50,0,224,254,239,32,4,66,225,209,201,254,248,40,31,58,1,224,47,183,40,232,95,203,250,120,230,15,7,7,7,7,79,62,8,61,40,4,203,3,48,249,129,79,24,208,58,1,224,47,95,230,33,40,2,203,242,123,230,222,40,192,24,214,205,62,0,254,86,202,203,0,254,67,192,19,26,254,65,202,158,7,254,49,202,87,5,254,50,202,93,5,254,66,194,184,12,33,34,21,34,53,16,201,205,153,7,205,93,5,195,118,1,205,79,44,240,201,43,240,202,205,27,57,240,201,62,240,202,240,240,240,105,104,85,26,25,240,240,240,74,54,109,90,61,24,23,22,21,20,19,18,17,83,115,70,112,113,93,51,114,16,15,14,13,12,11,10,9,118,119,67,86,120,94,30,60,8,7,6,5,4,3,2,1,95,31,29,50,28,68,65,92,40,39,38,37,36,35,34,33,82,103,102,101,100,99,98,97,46,47,41,32,0,42,106,107,87,81,84,96,0,221,222,89,45,73,196,195,193,194,199,200,69,64,196,195,193,194,197,198,240,199,240,195,205,240,240,240,240,200,240,196,205,240,240,203,197,0,193,203,240,60,62,220,198,0,194,240,240,124,126,216,205,188,141,240,201,153,240,202,240,240,240,184,180,160,145,134,129,135,151,150,130,132,156,148,170,171,143,140,173,176,142,162,138,131,144,136,146,154,147,152,161,137,149,166,165,164,133,163,172,174,175,139,0,167,168,169,155,191,196,195,193,194,199,200,240,199,240,195,205,240,189,191,197,0,193,240,240,188,190,219,197,229,254,23,56,28,33,198,12,1,224,0,237,177,32,26,62,223,145,24,10,197,229,33,198,12,79,6,0,9,126,225,193,201,254,17,56,4,198,176,24,245,175,24,242,58,52,16,183,194,211,9,121,8,185,202,224,9,6,4,205,202,8,230,63,87,205,255,9,205,202,8,230,63,186,194,231,9,11,120,177,202,228,9,24,236,19,205,16,4,6,16,205,48,12,205,202,8,183,40,5,254,203,200,16,242,205,179,9,254,205,40,233,183,192,6,1,24,229,197,205,186,3,6,8,197,229,175,215,126,205,195,3,35,175,215,16,247,215,225,193,126,205,185,11,205,181,13,35,16,246,193,195,6,0,205,192,12,30,168,205,31,4,56,5,119,19,35,24,246,62,169,187,208,205,186,3,195,142,0,197,229,42,54,16,125,254,16,56,3,46,80,36,205,174,2,6,7,195,239,2,19,26,254,83,202,112,1,254,71,202,118,1,205,192,12,34,4,17,229,30,170,205,16,4,209,237,82,35,34,2,17,17,175,17,205,192,12,34,6,17,17,241,16,33,180,17,1,16,0,237,176,62,13,18,205,159,1,231,210,36,0,201,205,16,4,208,209,201,32,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,251,205,221,203,209,48,49,50,51,52,53,54,55,56,57,45,61,59,47,46,44,229,244,236,218,227,226,215,212,230,232,194,193,196,199,207,202,32,225,254,200,250,95,248,241,247,63,204,219,220,233,245,58,94,60,91,243,93,64,201,62,252,92,198,223,208,206,211,210,255,33,34,35,36,37,38,39,40,41,43,42,222,246,235,234,195,197,239,240,228,231,238,237,224,253,216,213,242,249,217,214,32,161,154,159,156,146,170,151,152,166,175,169,184,179,176,183,158,160,157,164,150,165,171,163,155,189,162,187,153,130,135,140,188,167,172,145,147,148,149,180,181,182,174,173,186,178,185,168,177,131,136,141,134,132,137,142,191,133,138,143,190,129,139,144,127,17,18,19,20,21,22,96,97,98,99,100,101,102,103,104,112,113,17,115,116,117,118,119,120,121,122,123,124,125,126,105,245,58,2,224,7,48,250,58,2,224,7,56,250,241,201,245,197,213,229,71,205,177,15,112,42,113,17,125,254,39,194,144,14,92,22,0,33,115,17,25,126,183,194,144,14,35,54,1,35,54,0,195,144,14,245,197,213,229,71,230,240,254,192,32,127,168,254,13,202,139,15,254,11,48,117,38,14,111,110,233,33,52,16,126,47,119,195,238,7,0,50,116,132,144,174,191,197,248,11,225,242,195,73,15,17,163,17,213,33,27,14,1,12,0,237,176,201,33,2,224,203,158,203,198,203,134,195,128,9,223,0,33,157,17,24,203,0,195,125,8,205,150,1,175,50,3,224,1,192,3,17,0,208,33,40,208,237,176,235,6,40,205,216,15,1,26,0,17,115,17,33,116,17,237,176,54,0,58,115,17,183,194,106,14,205,150,1,62,1,50,3,224,195,222,15,0,42,113,17,37,34,113,17,195,57,14,42,113,17,124,254,24,202,50,14,36,34,113,17,195,222,15,42,113,17,124,183,202,222,15,37,195,126,14,42,113,17,125,254,39,210,157,14,44,195,126,14,46,0,36,124,254,25,218,126,14,38,24,34,113,17,195,50,14,42,113,17,125,183,40,4,45,195,126,14,46,39,37,242,126,14,33,0,0,195,126,14,205,166,13,14,25,33,0,208,6,40,205,216,15,13,194,205,14,33,115,17,6,27,205,216,15,195,191,14,33,112,17,175,190,24,1,60,119,214,6,47,50,3,224,24,143,33,112,17,175,24,240,42,113,17,124,181,202,222,15,125,183,32,22,92,22,0,33,115,17,25,126,183,32,11,205,177,15,205,166,13,43,54,0,24,148,42,113,17,92,28,22,0,33,115,17,25,126,71,183,62,40,40,2,62,80,42,113,17,149,79,6,0,205,177,15,229,209,27,205,166,13,237,176,24,211,205,244,0,195,238,7,0,42,113,17,92,28,22,0,33,115,17,25,126,183,14,0,42,113,17,46,39,40,2,36,12,205,180,15,126,183,194,222,15,229,42,113,17,62,39,149,71,121,183,40,4,62,40,128,71,209,213,225,43,205,166,13,126,18,54,0,43,27,16,248,195,222,15,42,113,17,92,28,22,0,33,115,17,25,126,183,42,113,17,202,157,14,46,0,124,254,23,40,5,36,36,195,126,14,36,34,113,17,195,50,14,42,113,17,197,213,229,193,17,40,0,33,216,207,25,5,242,190,15,6,0,9,209,193,201,33,3,224,54,138,54,7,54,5,62,1,50,3,224,201,175,119,35,16,252,201,225,209,193,241,201,62,58,215,42,4,17,205,186,3,235,42,2,17,25,43,205,248,15,42,6,17,62,45,215,205,186,3,175,201]},{"../Z80/memory-block.js":16}],6:[function(a,b,c){var d=function(a){this._m_on=!1,this._play=!1,this._rec=!1,this._motor=!1,this._wdata=null,this._twdata=null,this._rbit=null,this._trdata=null,this._cmt=null,this._pos=0,this._motorCallback=a,this._readTopBlank=0};d.RDATA_TOP_BLANK_LEN=1,d.RDATA_CYCLE_HI_LONG=1500,d.RDATA_CYCLE_HI_SHORT=700,d.RDATA_CYCLE_LO=700,d.prototype.isCmtSet=function(){return null!=this._cmt},d.prototype.getCmt=function(){return this._cmt},d.prototype.setCmt=function(a){this.motor()&&this.stop(),this._cmt=a,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0},d.prototype.play=function(){var a=this.motor();null!=this._cmt&&(this._play=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.rec=function(){var a=this.motor();null!=this._cmt&&(this._play=!0,this._rec=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.stop=function(){var a=this.motor();this._play=!1,this._rec=!1,a&&!this.motor()&&this._motorCallback(!1)},d.prototype.ejectCmt=function(){this.stop();var a=this._cmt;return this._cmt=null,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0,a},d.prototype.m_on=function(a){var b=this.motor();!this._m_on&&a&&(this._motor=!this._motor),this._m_on=a,!b&&this.motor()&&this._motorCallback(!0),b&&!this.motor()&&this._motorCallback(!1)},d.prototype.motor=function(){return null!=this._cmt&&this._play&&this._motor},d.prototype.wdata=function(a,b){if(this.motor()&&this._rec&&this._wdata!=a)if(this._wdata=a,a)this._twdata=b;else{null==this._twdata&&(this._twdata=b);var c=b-this._twdata>1400;this._pos<this._cmt.length?(this._cmt[this._pos]=c,this._pos++):(this._cmt.push(c),this._pos=this._cmt.length)}},d.prototype.rdata=function(a){if(this.motor()&&this._pos<this._cmt.length){if(0==this._pos&&this._readTopBlank<d.RDATA_TOP_BLANK_LEN)return++this._readTopBlank,!1;if(this._pos>=this._cmt.length)return console.log("MZ_DataRecorder stopped at the end of CMT."),this.stop(),!1;null==this._rbit&&(this._rbit=this._cmt[this._pos],this._pos++,this._trdata=a);var b=this._rbit?d.RDATA_CYCLE_HI_LONG:d.RDATA_CYCLE_HI_SHORT,c=a-this._trdata;c>=b+d.RDATA_CYCLE_LO&&(this._rbit=null);return c<b}return null},b.exports=d},{}],7:[function(a,b,c){var d=function(a,b){var c=function(a,b){return(255&a[b])+256*(255&a[b+1])};this.attr=function(a,b){return 255&a[b]}(a,b+0);var d=function(a,b,c){for(var d="",e=b;e<c&&13!=a[e];e++)0!=a[e]&&(d+=String.fromCharCode(a[e]));return d}(a,b+1,b+18);this.filename=d,this.file_size=c(a,b+18),this.addr_load=c(a,b+20),this.addr_exec=c(a,b+22);for(var e=[],f=0;f<128;f++)e.push(a[b+f]);this.buffer=e};d.get1stFilename=function(a){return a&&Array.isArray(a)&&a.length>0?a[0].header.filename:null},d.createNew=function(){for(var a=new Array(128),b=0;b<128;b++)a[b]=0;return a[0]=1,new d(a,0)},d.prototype.setFilename=function(a){a.length>16&&(a=a.substr(0,16)),this.filename=a;var b;for(b=0;b<=16;b++)this.buffer[1+b]=0;for(a+="\r",b=0;b<a.length;b++)this.buffer[1+b]=255&a.charCodeAt(b)},d.prototype.setFilesize=function(a){this.file_size=a,this.buffer[18]=a>>0&255,this.buffer[19]=a>>8&255},d.prototype.setAddrLoad=function(a){this.addr_load=a,this.buffer[20]=a>>0&255,this.buffer[21]=a>>8&255},d.prototype.setAddrExec=function(a){this.addr_exec=a,this.buffer[22]=a>>0&255,this.buffer[23]=a>>8&255},d.prototype.getHeadline=function(){return[";======================================================","; attribute :   "+this.attr.HEX(2)+"H","; filename  :   '"+this.filename+"'","; filesize  :   "+this.file_size+" bytes","; load addr :   "+this.addr_load.HEX(4)+"H","; start addr:   "+this.addr_exec.HEX(4)+"H",";======================================================"].join("\n")},b.exports=d},{}],8:[function(a,b,c){var d=a("./mz-tape-header"),e=function(a){this._index=0,this._tapeData=a};e.prototype.isThereSignal=function(a,b){for(var c=0;c<b;c++)if(this._tapeData[this._index+c]!=a)return!1;return this._index+=b,!0},e.prototype.recognizeStartingMark=function(){return!!this.isThereSignal(!1,11e3)&&(!!this.isThereSignal(!0,40)&&(!!this.isThereSignal(!1,40)&&!!this.isThereSignal(!0,1)))},e.prototype.recognizeStarting2Mark=function(){return!!this.isThereSignal(!1,2750)&&(!!this.isThereSignal(!0,20)&&(!!this.isThereSignal(!1,20)&&!!this.isThereSignal(!0,1)))},e.prototype.readSignal=function(){return this._index<this._tapeData.length?this._tapeData[this._index++]:null},e.prototype.writeSignal=function(a){this._tapeData.push(a)},e.prototype.writeByte=function(a){this.writeSignal(!0);for(var b=0;b<8;b++)0!=(a&1<<7-b)?this.writeSignal(!0):this.writeSignal(!1)},e.prototype.writeBlock=function(a){a.forEach(function(a){this.writeByte(a)},this);var b=this.countOnBit(a);this.writeByte(b>>8&255),this.writeByte(b>>0&255),this.writeSignal(!0)},e.prototype.writeDuplexBlock=function(a){this.writeBlock(a);for(var b=0;b<256;b++)this.writeSignal(!1);this.writeBlock(a)},e.prototype.readByte=function(){var a=null;do{if(null==(a=this.readSignal()))return null;if(!a)throw"NO START BIT"}while(!a);for(var b=0,c=0;c<8;c++){var d=this.readSignal();if(null==d)return null;d&&(b|=1<<7-c)}return b},e.prototype.readBytes=function(a){for(var b=[],c=0;c<a;c++){var d=this.readByte();if(null==d)break;b.push(d)}return b},e.prototype.countOnBit=function(a){var b=0,c=[0,1,2,3,4,5,6,7];return a.forEach(function(a){c.forEach(function(c){0!=(a&1<<c)&&b++})}),b&=65535},e.prototype.readBlock=function(a){var b=this.readBytes(a),c=this.readBytes(2);if(2!=c.length)throw"NO BLOCK CHECKSUM";var d=256*c[0]+c[1];if(!this.isThereSignal(!0,1))throw"NO BLOCK END BIT";if(this.countOnBit(b)!=d)throw"CHECKSUM ERROR";return b},e.prototype.readDuplexBlocks=function(a){var b=this.readBlock(a);if(null==b)throw"FAIL TO READ BLOCK[1]";if(!this.isThereSignal(!1,256))throw"NO DELIMITOR: Short x 256.";var c=this.readBlock(a);if(null==c)throw"FAIL TO READ BLOCK[2]";for(var d=0;d<b.length;d++)if(b[d]!=c[d])throw"FAIL TO VERIFY BLOCK 1 and 2";return b},e.prototype.readHeader=function(){if(!this.recognizeStartingMark())throw"NO STARTING MARK recognized";var a=this.readDuplexBlocks(128);if(null==a)throw"CANNOT READ MZT HEADER";return new d(a,0)},e.prototype.readDataBlock=function(a){if(!this.recognizeStarting2Mark())throw"NO STARTING MARK 2 recognized";return this.readDuplexBlocks(a)},e.toBytes=function(a){try{var b=new e(a),c=b.readHeader();if(null==c)throw"FAIL TO READ HEADER";var d=b.readDataBlock(c.file_size);if(null==d)throw"FAIL TO READ DATA";for(var f,g=[],h=!0;h;)f=b.readByte(),(h=!!f)&&(console.warn("MZ_Tape.toBytes rest bytes["+f.length+"] =",f.HEX(2)),g.push(f));return c.buffer.concat(d)}catch(a){console.log("MZ_Tape.toBytes:Error "+a)}return[]},e.fromBytes=function(a){if(a.length<128)throw"FAIL TO WRITE HEADER";var b=new d(a.slice(0,128),0),c=new e([]);return c.writeHeader(b.buffer),c.writeDataBlock(a.slice(128)),c._tapeData},e.prototype.outputStartingMark=function(){var a;for(a=0;a<11e3;a++)this.writeSignal(!1);for(a=0;a<40;a++)this.writeSignal(!0);for(a=0;a<40;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeHeader=function(a){this.outputStartingMark(),this.writeDuplexBlock(a)},e.prototype.writeStarting2Mark=function(){var a;for(a=0;a<2750;a++)this.writeSignal(!1);for(a=0;a<20;a++)this.writeSignal(!0);for(a=0;a<20;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeDataBlock=function(a){this.writeStarting2Mark(),this.writeDuplexBlock(a)},b.exports=e},{"./mz-tape-header":7}],9:[function(a,b,c){!function(){function a(){this.keymap=new Array(10);for(var a=0;a<this.keymap.length;a++)this.keymap[a]=255}a.prototype.getKeyData=function(a){var b=255;return a&=15,a<this.keymap.length&&(b=this.keymap[a]),b},a.prototype.setKeyMatrixState=function(a,b,c){c?this.keymap[a]&=255&~(1<<b):this.keymap[a]|=1<<b&255},a.KeyCodes={Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Numlock:44,ScrollLock:145,Pause:19,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Subtract:109,Caret:107,Atmark:192,Yen:106,Colon:186,SemiColon:187,Comma:188,Decimal:190,Divide:111,Backslash:226,OpenBrackets:219,CloseBrackets:221,Shift:16,Control:17,Alternate:18,Enter:13,Tab:9,Space:32,Backspace:8,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Left:37,Up:38,Right:39,Down:40,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadDivide:191,NumPadMultiply:220,NumPadSubtract:189,NumPadPlus:222,NumPadDecimal:110,Hankaku:243,Zenkaku:244};var c=function(a,b,c,d,e){this.strobe=a,this.bit=b,this.face=c||"&nbsp;",this.code=d||[],this.strcode=e||c};a.Keys=[new c(0,0,"CR",[a.KeyCodes.Enter]),new c(0,1,":",[a.KeyCodes.Colon]),new c(0,2,";",[a.KeyCodes.SemiColon]),new c(0,3),new c(0,4,"英数",[a.KeyCodes.F10,a.KeyCodes.End],"ALNUM"),new c(0,5,"=",[a.KeyCodes.Backspace]),new c(0,6,"GRAPH",[a.KeyCodes.F12,a.KeyCodes.PageDown,a.KeyCodes.Altername],"GRAPH"),new c(0,7,"カナ",[a.KeyCodes.F11,a.KeyCodes.PageUp],"KANA"),new c(1,0),new c(1,1),new c(1,2),new c(1,3,")",[a.KeyCodes.CloseBrackets]),new c(1,4,"(",[a.KeyCodes.OpenBrackets]),new c(1,5,"@",[a.KeyCodes.Atmark]),new c(1,6,"Z",[a.KeyCodes.Z]),new c(1,7,"Y",[a.KeyCodes.Y]),new c(2,0,"X",[a.KeyCodes.X]),new c(2,1,"W",[a.KeyCodes.W]),new c(2,2,"V",[a.KeyCodes.V]),new c(2,3,"U",[a.KeyCodes.U]),new c(2,4,"T",[a.KeyCodes.T]),new c(2,5,"S",[a.KeyCodes.S]),new c(2,6,"R",[a.KeyCodes.R]),new c(2,7,"Q",[a.KeyCodes.Q]),new c(3,0,"P",[a.KeyCodes.P]),new c(3,1,"O",[a.KeyCodes.O]),new c(3,2,"N",[a.KeyCodes.N]),new c(3,3,"M",[a.KeyCodes.M]),new c(3,4,"L",[a.KeyCodes.L]),new c(3,5,"K",[a.KeyCodes.K]),new c(3,6,"J",[a.KeyCodes.J]),new c(3,7,"I",[a.KeyCodes.I]),new c(4,0,"H",[a.KeyCodes.H]),new c(4,1,"G",[a.KeyCodes.G]),new c(4,2,"F",[a.KeyCodes.F]),new c(4,3,"E",[a.KeyCodes.E]),new c(4,4,"D",[a.KeyCodes.D]),new c(4,5,"C",[a.KeyCodes.C]),new c(4,6,"B",[a.KeyCodes.B]),new c(4,7,"A",[a.KeyCodes.A]),new c(5,0,"8",[a.KeyCodes.D8,a.KeyCodes.NumPad8]),new c(5,1,"7",[a.KeyCodes.D7,a.KeyCodes.NumPad7]),new c(5,2,"6",[a.KeyCodes.D6,a.KeyCodes.NumPad6]),new c(5,3,"5",[a.KeyCodes.D5,a.KeyCodes.NumPad5]),new c(5,4,"4",[a.KeyCodes.D4,a.KeyCodes.NumPad4]),new c(5,5,"3",[a.KeyCodes.D3,a.KeyCodes.NumPad3]),new c(5,6,"2",[a.KeyCodes.D2,a.KeyCodes.NumPad2]),new c(5,7,"1",[a.KeyCodes.D1,a.KeyCodes.NumPad1]),new c(6,0,".",[a.KeyCodes.Decimal,110]),new c(6,1,",",[a.KeyCodes.Comma]),new c(6,2,"9",[a.KeyCodes.D9,a.KeyCodes.NumPad9]),new c(6,3,"0",[a.KeyCodes.D0,a.KeyCodes.NumPad0]),new c(6,4,"SPC",[a.KeyCodes.Space]," "),new c(6,5,"-",[a.KeyCodes.Subtract,a.KeyCodes.NumPadSubtract]),new c(6,6,"+",[a.KeyCodes.Caret,a.KeyCodes.NumPadPlus]),new c(6,7,"*",[a.KeyCodes.Yen,a.KeyCodes.NumPadMultiply]),new c(7,0,"/",[a.KeyCodes.Divide,a.KeyCodes.NumPadDivide]),new c(7,1,"?",[a.KeyCodes.Backslash]),new c(7,2,"←",[a.KeyCodes.Left],"LEFT"),new c(7,3,"→",[a.KeyCodes.Right],"RIGHT"),new c(7,4,"↓",[a.KeyCodes.Down],"DOWN"),new c(7,5,"↑",[a.KeyCodes.Up],"UP"),new c(7,6,"DEL",[a.KeyCodes.Delete]),new c(7,7,"INS",[a.KeyCodes.Insert]),new c(8,0,"SHIFT",[a.KeyCodes.Shift]),new c(8,1,"(BS)"),new c(8,2),new c(8,3,"(→)",[a.KeyCodes.Tab]),new c(8,4,"(CR)"),new c(8,5,"(SHIFT)"),new c(8,6,"CTRL",[a.KeyCodes.Control]),new c(8,7,"BREAK",[a.KeyCodes.Escape,a.KeyCodes.Pause]),new c(9,0,"HOME",[a.KeyCodes.Home]),new c(9,1,"(SPC)"),new c(9,2,"(↓)"),new c(9,3,"F5",[a.KeyCodes.F5]),new c(9,4,"F4",[a.KeyCodes.F4]),new c(9,5,"F3",[a.KeyCodes.F3]),new c(9,6,"F2",[a.KeyCodes.F2]),new c(9,7,"F1",[a.KeyCodes.F1])],a.KeyNames=function(b){return Object.keys(a.KeyCodes).forEach(function(c){var d=a.KeyCodes[c];b[d]=c}),b}({}),a.Code2Key=function(){var b=new Array(256);return a.Keys.forEach(function(a){a.code.forEach(function(c){b[c]=a})}),b}(),a.Str2Key=function(){var b={};return a.Keys.forEach(function(a){b[a.strcode]=a}),b}(),b.exports=a}()},{}],10:[function(a,b,c){!function(){var a=function(){this.attackTime=.01,this.decayTime=.01,this.sustainLebel=.8,this.releaseTime=.05,this.audio=null,this.totalGain=null,this.gain=0,this.poly=128,this.indexOsc=0,this.oscNodes=new Array(this.poly),this.oscGainNodes=new Array(this.poly),window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext?(this.audio=new AudioContext,this.totalGainNode=this.audio.createGain(),this.totalGainNode.gain.setValueAtTime(this.gain,this.audio.currentTime),this.totalGainNode.connect(this.audio.destination)):(console.warn("NO AudioContext API supported by this browser."),this.setGain=function(){},this.startSound=function(){},this.stopSound=function(){})};a.prototype.setGain=function(a){a<0&&(a=0),a>1&&(a=1),this.gain=a,this.totalGainNode&&this.totalGainNode.gain.setValueAtTime(this.gain,this.audio.currentTime)},a.prototype.startSound=function(a){var b=this.indexOsc,c=this.oscGainNodes[b];null!=c&&(c.gain.linearRampToValueAtTime(0,this.audio.currentTime+this.releaseTime),c.disconnect()),this.oscGainNodes[b]=this.audio.createGain(),c=this.oscGainNodes[b],c.gain.setValueAtTime(0,this.audio.currentTime),c.gain.linearRampToValueAtTime(1,this.audio.currentTime+this.attackTime),c.gain.linearRampToValueAtTime(this.sustainLebel,this.audio.currentTime+this.attackTime+this.decayTime),c.connect(this.totalGainNode);var d=this.oscNodes[b];null!=d&&(d.stop(),d.disconnect()),this.oscNodes[b]=this.audio.createOscillator(),d=this.oscNodes[b],d.type="square",isFinite(a)&&(a<-24e3?a=-24e3:a>24e3&&(a=24e3),d.frequency.setValueAtTime(a,this.audio.currentTime)),d.start=d.start||d.noteOn,d.connect(c),d.start()},a.prototype.stopSound=function(){var a=this.indexOsc,b=this.oscGainNodes[a];null!=b&&b.gain.linearRampToValueAtTime(0,this.audio.currentTime+this.releaseTime),this.indexOsc=(a+1)%this.poly},b.exports=a}()},{}],11:[function(a,b,c){var d=a("./bin-util.js"),e=a("./z80-line-assembler"),f=function(a){var b;if(void 0!=a){this.list=[],this.label2value={};var c=0,d=a.split(/\r{0,1}\n/);for(b=0;b<d.length;b++){var f=e.assemble(d[b],c,this.label2value);c=f.getNextAddress(),this.list.push(f)}for(b=0;b<this.list.length;b++)this.list[b].resolveAddress(this.label2value);var g=null,h=null;this.list.forEach(function(a){if(a.bytecode.length>0){(null==g||a.address<g)&&(g=a.address);var b=a.getLastAddress();(null==h||b>h)&&(h=b)}}),this.min_addr=g,this.buffer=new Array(h-g+1),this.list.forEach(function(a){a.bytecode.length>0&&Array.prototype.splice.apply(this.buffer,[a.address-g,a.bytecode.length].concat(a.bytecode))},this)}};f.prototype.parseAddress=function(a){var b=e.parseNumLiteralPair(a);if(null==b)return null;var c=b[1];"function"==typeof c&&(c=c(this.label2value));var f=b[0];return"function"==typeof f&&(f=f(this.label2value)),d.pair(c,f)},f.prototype.getMap=function(){return Object.keys(this.label2value).map(function(a){return{label:a,address:this.label2value[a]}},this).sort(function(a,b){return a.address-b.address})},b.exports=f},{"./bin-util.js":12,"./z80-line-assembler":18}],12:[function(a,b,c){"use strict";b.exports=function(a,b,c){"use asm";function d(a,b){a=a|0;b=b|0;return((255&a)<<8)+(255&b)|0}function e(a){a=a|0;return a>>8&255|0}function f(a){a=a|0;return a&255|0}function g(a){a=a|0;a=a&255;if(a&128){a=(~a&255)+1|0;return-a|0}return a|0}return{pair:d,hibyte:e,lobyte:f,getSignedByte:g}}(Function("return this;")())},{}],13:[function(a,b,c){"use strict";var d=a("../lib/oct"),e=a("./memory-block.js"),f=a("./register.js"),g=a("./bin-util.js"),h=a("./z80-line-assembler"),i=function(a){a=a||{memory:null},this.memory=a.memory,this.createOpecodeTable(),null==a.memory&&(this.memory=new e,this.memory.create()),this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.ioPort=new Array(256);for(var b=0;b<256;b++)this.ioPort[b]=0;this.reg=new f,this.regB=new f,this.onReadIoPort=function(){},this.onReadIoPort=a.onReadIoPort||function(){},this.onWriteIoPort=a.onWriteIoPort||function(){},this.bpmap=new Array(65536),this.tick=0};i.prototype.readIoPort=function(a){var b=this.ioPort[a];return this.reg.onReadIoPort(b),this.onReadIoPort(a,b),b},i.prototype.writeIoPort=function(a,b){this.ioPort[a]=b,this.onWriteIoPort(a,b)},i.prototype.reset=function(){this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.reg.clear(),this.regB.clear(),this.exec=i.prototype.exec,this.tick=0},i.prototype.interrupt=function(){this.IFF1&&(this.pushPair(this.reg.PC),this.reg.PC=56)},i.prototype.exec=function(){this.reg.R=this.reg.R+1&255;var a=this.opecodeTable[this.fetch()],b=a.proc()||a.cycle||4;if(this.tick+=b,null!=this.bpmap[this.reg.PC])throw console.log("*** BREAK AT $"+this.reg.PC.HEX(4)),"break"},i.prototype.clearBreakPoints=function(){this.bpmap=new Array(65536);for(var a=0;a<65536;a++)this.bpmap[a]=null},i.prototype.getBreakPoints=function(){return this.bpmap},i.prototype.removeBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=null},i.prototype.setBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=!0},i.prototype.fetch=function(){var a=this.memory.peek(this.reg.PC);return this.reg.PC++,this.reg.PC>65535&&(this.reg.PC=0),a},i.prototype.fetchPair=function(){var a=this.memory.peekPair(this.reg.PC);return this.reg.PC+=2,this.reg.PC>65535&&(this.reg.PC-=65535),a},i.prototype.pushPair=function(a){this.memory.poke(--this.reg.SP,g.hibyte(a)),this.memory.poke(--this.reg.SP,g.lobyte(a))},i.prototype.popPair=function(){var a=this.memory.peek(this.reg.SP++),b=this.memory.peek(this.reg.SP++);return g.pair(b,a)},i.prototype.incrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getINCValue(b);this.memory.poke(a,c)},i.prototype.decrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getDECValue(b);this.memory.poke(a,c)},i.dasm=function(a,b,c,d){if(b=b||0,c=c||a.length-b,(d=d||0)-b<0)return void console.error("Z80.dasm: parameter error : (addr - offset) - out of range");if(c<0||b+c>a.length)return void console.error("Z80.dasm: parameter error : size - out of range");var f=[],g=new e;g.create({startAddr:d-b,size:c}),g.mem=a;var j=new i({memory:g});j.reg.PC=g.startAddr;var k=h.create("ORG",g.startAddr.HEX(4)+"H");for(k.setAddress(g.startAddr),f.push(k);j.reg.PC<g.startAddr+g.size;){var l=j.disassemble(j.reg.PC,d-b+c);l.setAddress(j.reg.PC),l.bytecode.length>0&&l.setComment("; "+l.address.HEX(4)+"H "+l.bytecode.map(function(a){return a.HEX(2)
}).join(" ")),f.push(l),j.reg.PC+=l.bytecode.length}return i.processAddressReference(f)},i.prototype.disassemble=function(a,b){var c=null,d="",e=this.memory.peek(a);try{var f=this.opecodeTable[e];if(null==f)d="UNKNOWN OPECODE";else if(null==f.disasm)d="NO DISASSEMBLER";else{var g=f.disasm(this.memory,a);null==g?d="NULL RETURNED":a+g.code.length>b?c=null:(c=h.create(g.mnemonic[0],g.mnemonic.slice(1).join(","),g.code),"ref_addr_to"in g&&c.setRefAddrTo(g.ref_addr_to))}}catch(a){d="EXCEPTION THROWN"}return null==c&&(c=h.create("DEFB",e.HEX(2)+"H",[e]),c.setComment(";*** DISASSEMBLE FAIL: "+d)),c},i.processAddressReference=function(a){var b={};return a.forEach(function(a,c){b[a.address]=c}),a.forEach(function(a,c,d){if(null!=a.ref_addr_to&&a.ref_addr_to in b){d[b[a.ref_addr_to]].referenced_count++}}),a.forEach(function(a,b,c){a.referenced_count>0&&c[b].setLabel("$"+a.address.HEX(4)+"H")}),a},i.dasmlines=function(a){return a.map(function(a){var b;b=a.referenced_count>0?"$"+a.address.HEX(4)+"H:":"       ",b+="   ";var c=a.mnemonic;if(c&&a.operand)for(;c.length<8;)c+=" ";for(var d=b+"      "+c+a.operand;d.length<40;)d+=" ";return""!=a.comment&&(d+=a.comment),d})},i.prototype.createOpecodeTable=function(){var a=this;this.opecodeTable=new Array(256);for(var b=new Array(256),c=new Array(256),e=new Array(256),h=new Array(256),i=new Array(256),j=new Array(256),k=0;k<256;k++)this.opecodeTable[k]={mnemonic:null,proc:function(){throw"ILLEGAL OPCODE"},disasm:function(a){return function(){return{code:[a],mnemonic:["DEFB",a.HEX(2)+"H; *** UNKNOWN OPCODE"]}}}(k)},b[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD "+a.HEX(2)+" for IX command subset"}}(k),disasm:function(a){return function(){return{code:[221],mnemonic:["DEFB","DDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},c[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD "+a.HEX(2)+" for IY command subset"}}(k),disasm:function(a){return function(){return{code:[253],mnemonic:["DEFB","FDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},e[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE CB "+a.HEX(2)+" for Rotate command subset"}}(k),disasm:function(a){return function(){return{code:[203],mnemonic:["DEFB","CBh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},h[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD CB "+a.HEX(2)+" for Rotate IX command subset"}}(k),disasm:function(a){return function(){return{code:[221,203],mnemonic:["DEFW","CBDDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},i[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD CB "+a.HEX(2)+" for Rotate IY command subset"}}(k),disasm:function(a){return function(){return{code:[253,203],mnemonic:["DEFW","CBFDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},j[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE ED "+a.HEX(2)+" for Misc command subset"}}(k),disasm:function(a){return function(){return{code:[237],mnemonic:["DEFB","EDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)};this.opecodeTable[221]={mnemonic:function(){return b},proc:function(){b[a.fetch()].proc()},disasm:function(a,c){return b[a.peek(c+1)].disasm(a,c)}},this.opecodeTable[253]={mnemonic:function(){return c},proc:function(){c[a.fetch()].proc()},disasm:function(a,b){return c[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[203]={mnemonic:function(){return e},proc:function(){e[a.fetch()].proc()},disasm:function(a,b){return e[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[237]={mnemonic:function(){return j},proc:function(){j[a.fetch()].proc()},disasm:function(a,b){return j[a.peek(b+1)].disasm(a,b)}};var l,m,n,o,p;for(l in f.REG_r_ID2NAME){n=f.REG_r_ID2NAME[l];for(m in f.REG_r_ID2NAME)o=f.REG_r_ID2NAME[m],p=64|l<<3|m,this.opecodeTable[p]={mnemonic:"LD "+n+","+o,proc:function(b,c,d){return function(){a.reg["set"+c](a.reg["get"+d]())}}(0,n,o),cycle:4,disasm:function(a,b,c){return function(){return{code:[a],mnemonic:["LD",b,c]}}}(p,n,o)}}var q=function(a,b){var c,d=a.peek(b),e=[d],g=0!=(64&d)?1:0,h=d>>3&7,i=d>>0&7,j=["???","???"];switch(j[0]=6==h?"(HL)":f.REG_r_ID2NAME[h],g){case 0:c=a.peek(b+1),e.push(c),j[1]=c.HEX(2)+"H";break;case 1:j[1]=6==i?"(HL)":f.REG_r_ID2NAME[i]}return{code:e,mnemonic:["LD",j[0],j[1]]}};this.opecodeTable[d("0006")]={mnemonic:"LD B,n",proc:function(){a.reg.setB(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0016")]={mnemonic:"LD C,n",proc:function(){a.reg.setC(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0026")]={mnemonic:"LD D,n",proc:function(){a.reg.setD(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0036")]={mnemonic:"LD E,n",proc:function(){a.reg.setE(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0046")]={mnemonic:"LD H,n",proc:function(){a.reg.setH(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0056")]={mnemonic:"LD L,n",proc:function(){a.reg.setL(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0076")]={mnemonic:"LD A,n",proc:function(){a.reg.setA(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0106")]={mnemonic:"LD B,(HL)",proc:function(){a.reg.setB(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0116")]={mnemonic:"LD C,(HL)",proc:function(){a.reg.setC(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0126")]={mnemonic:"LD D,(HL)",proc:function(){a.reg.setD(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0136")]={mnemonic:"LD E,(HL)",proc:function(){a.reg.setE(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0146")]={mnemonic:"LD H,(HL)",proc:function(){a.reg.setH(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0156")]={mnemonic:"LD L,(HL)",proc:function(){a.reg.setL(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0176")]={mnemonic:"LD A,(HL)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0160")]={mnemonic:"LD (HL),B",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getB())},cycle:10,disasm:q},this.opecodeTable[d("0161")]={mnemonic:"LD (HL),C",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getC())},cycle:10,disasm:q},this.opecodeTable[d("0162")]={mnemonic:"LD (HL),D",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getD())},cycle:10,disasm:q},this.opecodeTable[d("0163")]={mnemonic:"LD (HL),E",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getE())},cycle:10,disasm:q},this.opecodeTable[d("0164")]={mnemonic:"LD (HL),H",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getH())},cycle:10,disasm:q},this.opecodeTable[d("0165")]={mnemonic:"LD (HL),L",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getL())},cycle:10,disasm:q},this.opecodeTable[d("0167")]={mnemonic:"LD (HL),A",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getA())},cycle:10,disasm:q},this.opecodeTable[d("0066")]={mnemonic:"LD (HL),n",proc:function(){a.memory.poke(a.reg.getHL(),a.fetch())},cycle:10,disasm:q},this.opecodeTable[d("0012")]={mnemonic:"LD A,(BC)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getBC()))},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(BC)"]}}},this.opecodeTable[d("0032")]={mnemonic:"LD A,(DE)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getDE()))},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(DE)"]}}},this.opecodeTable[d("0072")]={mnemonic:"LD A,(nn)",proc:function(){a.reg.setA(a.memory.peek(a.fetchPair()))},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","A","("+a.peekPair(b+1).HEX(4)+"H)"]}}},this.opecodeTable[d("0002")]={mnemonic:"LD (BC),A",proc:function(){a.memory.poke(a.reg.getBC(),a.reg.getA())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(BC)","A"]}}},this.opecodeTable[d("0022")]={mnemonic:"LD (DE),A",proc:function(){a.memory.poke(a.reg.getDE(),a.reg.getA())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(DE)","A"]}}},this.opecodeTable[d("0062")]={mnemonic:"LD (nn),A",proc:function(){a.memory.poke(a.fetchPair(),a.reg.getA())},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","("+a.peekPair(b+1).HEX(4)+"H)","A"]}}},j[d("0127")]={mnemonic:"LD A,I",proc:function(){a.reg.LD_A_I(a.IFF2)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","I"]}}},j[d("0137")]={mnemonic:"LD A,R",proc:function(){a.reg.LD_A_R(a.IFF2,a.regB.R)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","R"]}}},j[d("0107")]={mnemonic:"LD I,A",proc:function(){a.reg.I=a.reg.getA()},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","I","A"]}}},j[d("0117")]={mnemonic:"LD R,A",proc:function(){a.reg.R=a.regB.R=a.reg.getA()},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","R","A"]}}};var r=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD",c,"("+d+"+"+e.HEX(2)+"H)"]}},s=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD","("+c+"+"+e.HEX(2)+"H)",d]}};b[d("0106")]={mnemonic:"LD B,(IX+d)",proc:function(){a.reg.setB(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"B","IX")}},b[d("0116")]={mnemonic:"LD C,(IX+d)",proc:function(){a.reg.setC(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"C","IX")}},b[d("0126")]={mnemonic:"LD D,(IX+d)",proc:function(){a.reg.setD(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"D","IX")}},b[d("0136")]={mnemonic:"LD E,(IX+d)",proc:function(){a.reg.setE(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"E","IX")}},b[d("0146")]={mnemonic:"LD H,(IX+d)",proc:function(){a.reg.setH(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"H","IX")}},b[d("0156")]={mnemonic:"LD L,(IX+d)",proc:function(){a.reg.setL(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"L","IX")}},b[d("0176")]={mnemonic:"LD A,(IX+d)",proc:function(){a.reg.setA(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"A","IX")}},b[d("0160")]={mnemonic:"LD (IX+d),B",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getB())},cycle:19,disasm:function(a,b){return s(a,b,"IX","B")}},b[d("0161")]={mnemonic:"LD (IX+d),C",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getC())},cycle:19,disasm:function(a,b){return s(a,b,"IX","C")}},b[d("0162")]={mnemonic:"LD (IX+d),D",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getD())},cycle:19,disasm:function(a,b){return s(a,b,"IX","D")}},b[d("0163")]={mnemonic:"LD (IX+d),E",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getE())},cycle:19,disasm:function(a,b){return s(a,b,"IX","E")}},b[d("0164")]={mnemonic:"LD (IX+d),H",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getH())},cycle:19,disasm:function(a,b){return s(a,b,"IX","H")}},b[d("0165")]={mnemonic:"LD (IX+d),L",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getL())},cycle:19,disasm:function(a,b){return s(a,b,"IX","L")}},b[d("0167")]={mnemonic:"LD (IX+d),A",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getA())},cycle:19,disasm:function(a,b){return s(a,b,"IX","A")}},c[d("0106")]={mnemonic:"LD B,(IY+d)",proc:function(){a.reg.setB(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"B","IY")}},c[d("0116")]={mnemonic:"LD C,(IY+d)",proc:function(){a.reg.setC(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"C","IY")}},c[d("0126")]={mnemonic:"LD D,(IY+d)",proc:function(){a.reg.setD(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"D","IY")}},c[d("0136")]={mnemonic:"LD E,(IY+d)",proc:function(){a.reg.setE(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"E","IY")}},c[d("0146")]={mnemonic:"LD H,(IY+d)",proc:function(){a.reg.setH(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"H","IY")}},c[d("0156")]={mnemonic:"LD L,(IY+d)",proc:function(){a.reg.setL(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"L","IY")}},c[d("0176")]={mnemonic:"LD A,(IY+d)",proc:function(){a.reg.setA(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"A","IY")}},c[d("0160")]={mnemonic:"LD (IY+d),B",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getB())},cycle:19,disasm:function(a,b){return s(a,b,"IY","B")}},c[d("0161")]={mnemonic:"LD (IY+d),C",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getC())},cycle:19,disasm:function(a,b){return s(a,b,"IY","C")}},c[d("0162")]={mnemonic:"LD (IY+d),D",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getD())},cycle:19,disasm:function(a,b){return s(a,b,"IY","D")}},c[d("0163")]={mnemonic:"LD (IY+d),E",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getE())},cycle:19,disasm:function(a,b){return s(a,b,"IY","E")}},c[d("0164")]={mnemonic:"LD (IY+d),H",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getH())},cycle:19,disasm:function(a,b){return s(a,b,"IY","H")}},c[d("0165")]={mnemonic:"LD (IY+d),L",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getL())},cycle:19,disasm:function(a,b){return s(a,b,"IY","L")}},c[d("0167")]={mnemonic:"LD (IY+d),A",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getA())},cycle:19,disasm:function(a,b){return s(a,b,"IY","A")}};var t=function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=g.pair(e,d),h=c>>4&3;switch(h){case 0:h="BC";break;case 1:h="DE";break;case 2:h="HL";break;case 3:h="SP";break;default:throw"*** LD dd,nn; but unknown dd."}return{code:[c,d,e],mnemonic:["LD",h,f.HEX(4)+"H"]}};this.opecodeTable[d("0001")]={mnemonic:"LD BC,nn",cycle:10,proc:function(){a.reg.setC(a.fetch()),a.reg.setB(a.fetch())},disasm:t},this.opecodeTable[d("0021")]={mnemonic:"LD DE,nn",cycle:10,proc:function(){a.reg.setE(a.fetch()),a.reg.setD(a.fetch())},disasm:t},this.opecodeTable[d("0041")]={mnemonic:"LD HL,nn",cycle:10,proc:function(){a.reg.setL(a.fetch()),a.reg.setH(a.fetch())},disasm:t},this.opecodeTable[d("0061")]={mnemonic:"LD SP,nn",cycle:10,proc:function(){a.reg.SP=a.fetchPair()},disasm:t},this.opecodeTable[d("0052")]={mnemonic:"LD HL,(nn)",cycle:16,proc:function(){var b=a.fetchPair();a.reg.setL(a.memory.peek(b+0)),a.reg.setH(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2);return{code:[c,d,e],mnemonic:["LD","HL","("+g.pair(e,d).HEX(4)+"H)"]}}},j[d("0113")]={mnemonic:"LD BC,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setC(a.memory.peek(b+0)),a.reg.setB(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","BC","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0133")]={mnemonic:"LD DE,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setE(a.memory.peek(b+0)),a.reg.setD(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","DE","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0153")]={mnemonic:"LD HL,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setL(a.memory.peek(b+0)),a.reg.setH(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","HL","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0173")]={mnemonic:"LD SP,(nn)",cycle:20,proc:function(){a.reg.SP=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","SP","("+g.pair(f,e).HEX(4)+"H)"]}}},this.opecodeTable[d("0042")]={mnemonic:"LD (nn), HL",cycle:16,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getL()),a.memory.poke(b+1,a.reg.getH())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2);return{code:[c,d,e],mnemonic:["LD","("+g.pair(e,d).HEX(4)+"H)","HL"]}}},j[d("0103")]={mnemonic:"LD (nn),BC",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getC()),a.memory.poke(b+1,a.reg.getB())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","BC"]}}},j[d("0123")]={mnemonic:"LD (nn),DE",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getE()),a.memory.poke(b+1,a.reg.getD())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","DE"]}}},j[d("0143")]={mnemonic:"LD (nn),HL",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getL()),a.memory.poke(b+1,a.reg.getH())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","HL"]}}},j[d("0163")]={mnemonic:"LD (nn),SP",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.SP>>0&255),a.memory.poke(b+1,a.reg.SP>>8&255)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","SP"]}}},this.opecodeTable[d("0371")]={mnemonic:"LD SP,HL",cycle:6,proc:function(){a.reg.SP=a.reg.getHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","SP","HL"]}}},this.opecodeTable[197]={mnemonic:"PUSH BC",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getB()),a.memory.poke(--a.reg.SP,a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","BC"]}}},this.opecodeTable[213]={mnemonic:"PUSH DE",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getD()),a.memory.poke(--a.reg.SP,a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","DE"]}}},this.opecodeTable[229]={mnemonic:"PUSH HL",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getH()),a.memory.poke(--a.reg.SP,a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","HL"]}}},this.opecodeTable[245]={mnemonic:"PUSH AF",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getA()),a.memory.poke(--a.reg.SP,a.reg.getF())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","AF"]}}},this.opecodeTable[193]={mnemonic:"POP BC",cycle:10,proc:function(){a.reg.setC(a.memory.peek(a.reg.SP++)),a.reg.setB(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","BC"]}}},this.opecodeTable[209]={mnemonic:"POP DE",cycle:10,proc:function(){a.reg.setE(a.memory.peek(a.reg.SP++)),a.reg.setD(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","DE"]}}},this.opecodeTable[225]={mnemonic:"POP HL",cycle:10,proc:function(){a.reg.setL(a.memory.peek(a.reg.SP++)),a.reg.setH(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","HL"]}}},this.opecodeTable[241]={mnemonic:"POP AF",cycle:10,proc:function(){a.reg.setF(a.memory.peek(a.reg.SP++)),a.reg.setA(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","AF"]}}},b[33]={mnemonic:"LD IX,nn",cycle:14,proc:function(){a.reg.IX=a.fetchPair()},disasm:function(a,b){return{code:[221,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX",a.peekPair(b+2).HEX(4)+"H"]}}},b[42]={mnemonic:"LD IX,(nn)",cycle:20,proc:function(){a.reg.IX=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[221,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX","("+a.peekPair(b+2).HEX(4)+"H)"]}}},b[54]={mnemonic:"LD (IX+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IX+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[221,54,c,d],mnemonic:["LD","(IX + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},b[249]={mnemonic:"LD SP,IX",cycle:10,proc:function(){a.reg.SP=a.reg.IX},disasm:function(){return{code:[221,249],mnemonic:["LD","SP","IX"]}}},b[229]={mnemonic:"PUSH IX",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,g.hibyte(a.reg.IX)),a.memory.poke(--a.reg.SP,g.lobyte(a.reg.IX))},disasm:function(){return{code:[221,229],mnemonic:["PUSH","IX"]}}},b[225]={mnemonic:"POP IX",cycle:14,proc:function(){a.reg.IX=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[221,225],mnemonic:["POP","IX"]}}},b[227]={mnemonic:"EX (SP),IX",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,g.hibyte(a.reg.IX));var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,g.lobyte(a.reg.IX)),a.reg.IX=g.pair(b,c)},disasm:function(){return{code:[221,227],mnemonic:["EX","(SP)","IX"]}}},c[33]={mnemonic:"LD IY,nn",cycle:14,proc:function(){a.reg.IY=a.fetchPair()},disasm:function(a,b){return{code:[253,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY",a.peekPair(b+2).HEX(4)+"H"]}}},c[42]={mnemonic:"LD IY,(nn)",cycle:20,proc:function(){a.reg.IY=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[253,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY","("+a.peekPair(b+2).HEX(4)+"H)"]}}},c[54]={mnemonic:"LD (IY+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IY+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[253,54,c,d],mnemonic:["LD","(IY + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},c[249]={mnemonic:"LD SP,IY",cycle:10,proc:function(){a.reg.SP=a.reg.IY},disasm:function(){return{code:[253,249],mnemonic:["LD","SP","IY"]}}},c[229]={mnemonic:"PUSH IY",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,g.hibyte(a.reg.IY)),a.memory.poke(--a.reg.SP,g.lobyte(a.reg.IY))},disasm:function(){return{code:[253,229],mnemonic:["PUSH","IY"]}}},c[225]={mnemonic:"POP IY",cycle:14,proc:function(){a.reg.IY=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[253,225],mnemonic:["POP","IY"]}}},c[227]={mnemonic:"EX (SP),IY",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.IY>>8&255);var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,a.reg.IY>>0&255),a.reg.IY=(b<<8)+c},disasm:function(){return{code:[253,227],mnemonic:["EX","(SP)","IY"]}}},this.opecodeTable[235]={mnemonic:"EX DE,HL ",cycle:4,proc:function(){var b=a.reg.getD();a.reg.setD(a.reg.getH()),a.reg.setH(b),b=a.reg.getE(),a.reg.setE(a.reg.getL()),a.reg.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","DE","HL"]}}},this.opecodeTable[8]={mnemonic:"EX AF,AF'",cycle:4,proc:function(){var b=a.reg.getA();a.reg.setA(a.regB.getA()),a.regB.setA(b),b=a.reg.getF(),a.reg.setF(a.regB.getF()),a.regB.setF(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","AF","AF'"]}}},this.opecodeTable[217]={mnemonic:"EXX",cycle:4,proc:function(){var b=a.reg.getB();a.reg.setB(a.regB.getB()),a.regB.setB(b),b=a.reg.getC(),a.reg.setC(a.regB.getC()),a.regB.setC(b),b=a.reg.getD(),a.reg.setD(a.regB.getD()),a.regB.setD(b),b=a.reg.getE(),a.reg.setE(a.regB.getE()),a.regB.setE(b),b=a.reg.getH(),a.reg.setH(a.regB.getH()),a.regB.setH(b),b=a.reg.getL(),a.reg.setL(a.regB.getL()),a.regB.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EXX"]}}},this.opecodeTable[227]={mnemonic:"EX (SP),HL",cycle:19,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.getH()),a.reg.setH(b),b=a.memory.peek(a.reg.SP),a.memory.poke(a.reg.SP,a.reg.getL()),a.reg.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","(SP)","HL"]}}},j[d("0240")]={mnemonic:"LDI",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDI"]}}},j[d("0260")]={mnemonic:"LDIR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDIR"]}}},j[d("0250")]={mnemonic:"LDD",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDD"]}}},j[d("0270")]={mnemonic:"LDDR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDDR"]}}},j[d("0241")]={mnemonic:"CPI",cycle:16,proc:function(){a.reg.CPI(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPI"]}}},j[d("0261")]={mnemonic:"CPIR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPI(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPIR"]}}},j[d("0251")]={mnemonic:"CPD",cycle:16,proc:function(){a.reg.CPD(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPD"]}}},j[d("0271")]={mnemonic:"CPDR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPD(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPDR"]}}},this.opecodeTable[d("0200")]={mnemonic:"ADD A,B",cycle:4,proc:function(){a.reg.addAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","B"]}}},this.opecodeTable[d("0201")]={mnemonic:"ADD A,C",cycle:4,proc:function(){a.reg.addAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","C"]}}},this.opecodeTable[d("0202")]={mnemonic:"ADD A,D",cycle:4,proc:function(){a.reg.addAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","D"]}}},this.opecodeTable[d("0203")]={mnemonic:"ADD A,E",cycle:4,proc:function(){a.reg.addAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","E"]}}},this.opecodeTable[d("0204")]={mnemonic:"ADD A,H",cycle:4,proc:function(){a.reg.addAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","H"]}}},this.opecodeTable[d("0205")]={mnemonic:"ADD A,L",cycle:4,proc:function(){a.reg.addAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","L"]}}},this.opecodeTable[d("0207")]={mnemonic:"ADD A,A",cycle:4,proc:function(){a.reg.addAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","A"]}}},this.opecodeTable[d("0306")]={mnemonic:"ADD A,n",cycle:7,proc:function(){a.reg.addAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADD","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0206")]={mnemonic:"ADD A,(HL)",cycle:7,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","(HL)"]}}},b[d("0206")]={mnemonic:"ADD A,(IX+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0206")]={mnemonic:"ADD A,(IY+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0210")]={mnemonic:"ADC A,B",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","B"]}}},this.opecodeTable[d("0211")]={mnemonic:"ADC A,C",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","C"]}}},this.opecodeTable[d("0212")]={mnemonic:"ADC A,D",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","D"]}}},this.opecodeTable[d("0213")]={mnemonic:"ADC A,E",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","E"]}}},this.opecodeTable[d("0214")]={mnemonic:"ADC A,H",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","H"]}}},this.opecodeTable[d("0215")]={mnemonic:"ADC A,L",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","L"]}}},this.opecodeTable[d("0217")]={mnemonic:"ADC A,A",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","A"]}}},this.opecodeTable[d("0316")]={mnemonic:"ADC A,n",cycle:7,proc:function(){a.reg.addAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADC","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0216")]={mnemonic:"ADC A,(HL)",cycle:7,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","(HL)"]}}},b[d("0216")]={mnemonic:"ADC A,(IX+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0216")]={mnemonic:"ADC A,(IY+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0220")]={mnemonic:"SUB A,B",cycle:4,proc:function(){a.reg.subAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","B"]}}},this.opecodeTable[d("0221")]={mnemonic:"SUB A,C",cycle:4,proc:function(){a.reg.subAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","C"]}}},this.opecodeTable[d("0222")]={mnemonic:"SUB A,D",cycle:4,proc:function(){a.reg.subAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","D"]}}},this.opecodeTable[d("0223")]={mnemonic:"SUB A,E",cycle:4,proc:function(){a.reg.subAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","E"]}}},this.opecodeTable[d("0224")]={mnemonic:"SUB A,H",cycle:4,proc:function(){a.reg.subAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","H"]}}},this.opecodeTable[d("0225")]={mnemonic:"SUB A,L",cycle:4,proc:function(){a.reg.subAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","L"]}}},this.opecodeTable[d("0227")]={mnemonic:"SUB A,A",cycle:4,proc:function(){a.reg.subAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","A"]}}},this.opecodeTable[d("0326")]={mnemonic:"SUB A,n",cycle:7,proc:function(){a.reg.subAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SUB","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0226")]={mnemonic:"SUB A,(HL)",cycle:7,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","(HL)"]}}},b[d("0226")]={mnemonic:"SUB A,(IX+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0226")]={mnemonic:"SUB A,(IY+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0230")]={mnemonic:"SBC A,B",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","B"]}}},this.opecodeTable[d("0231")]={mnemonic:"SBC A,C",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","C"]}}},this.opecodeTable[d("0232")]={mnemonic:"SBC A,D",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],
mnemonic:["SBC","A","D"]}}},this.opecodeTable[d("0233")]={mnemonic:"SBC A,E",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","E"]}}},this.opecodeTable[d("0234")]={mnemonic:"SBC A,H",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","H"]}}},this.opecodeTable[d("0235")]={mnemonic:"SBC A,L",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","L"]}}},this.opecodeTable[d("0237")]={mnemonic:"SBC A,A",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","A"]}}},this.opecodeTable[d("0336")]={mnemonic:"SBC A,n",cycle:7,proc:function(){a.reg.subAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SBC","A,"+c.HEX(2)+"H"]}}},this.opecodeTable[d("0236")]={mnemonic:"SBC A,(HL)",cycle:7,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","(HL)"]}}},b[d("0236")]={mnemonic:"SBC A,(IX+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0236")]={mnemonic:"SBC A,(IY+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0240")]={mnemonic:"AND B",cycle:4,proc:function(){a.reg.andAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","B"]}}},this.opecodeTable[d("0241")]={mnemonic:"AND C",cycle:4,proc:function(){a.reg.andAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","C"]}}},this.opecodeTable[d("0242")]={mnemonic:"AND D",cycle:4,proc:function(){a.reg.andAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","D"]}}},this.opecodeTable[d("0243")]={mnemonic:"AND E",cycle:4,proc:function(){a.reg.andAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","E"]}}},this.opecodeTable[d("0244")]={mnemonic:"AND H",cycle:4,proc:function(){a.reg.andAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","H"]}}},this.opecodeTable[d("0245")]={mnemonic:"AND L",cycle:4,proc:function(){a.reg.andAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","L"]}}},this.opecodeTable[d("0247")]={mnemonic:"AND A",cycle:4,proc:function(){a.reg.andAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","A"]}}},this.opecodeTable[d("0346")]={mnemonic:"AND n",cycle:7,proc:function(){a.reg.andAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["AND",c.HEX(2)+"H"]}}},this.opecodeTable[d("0246")]={mnemonic:"AND (HL)",cycle:7,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","(HL)"]}}},b[d("0246")]={mnemonic:"AND (IX+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IX+"+c.HEX(2)+"H)"]}}},c[d("0246")]={mnemonic:"AND (IY+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0260")]={mnemonic:"OR B",cycle:4,proc:function(){a.reg.orAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","B"]}}},this.opecodeTable[d("0261")]={mnemonic:"OR C",cycle:4,proc:function(){a.reg.orAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","C"]}}},this.opecodeTable[d("0262")]={mnemonic:"OR D",cycle:4,proc:function(){a.reg.orAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","D"]}}},this.opecodeTable[d("0263")]={mnemonic:"OR E",cycle:4,proc:function(){a.reg.orAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","E"]}}},this.opecodeTable[d("0264")]={mnemonic:"OR H",cycle:4,proc:function(){a.reg.orAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","H"]}}},this.opecodeTable[d("0265")]={mnemonic:"OR L",cycle:4,proc:function(){a.reg.orAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","L"]}}},this.opecodeTable[d("0267")]={mnemonic:"OR A",cycle:4,proc:function(){a.reg.orAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","A"]}}},this.opecodeTable[d("0366")]={mnemonic:"OR n",cycle:7,proc:function(){a.reg.orAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["OR",c.HEX(2)+"H"]}}},this.opecodeTable[d("0266")]={mnemonic:"OR (HL)",cycle:7,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","(HL)"]}}},b[d("0266")]={mnemonic:"OR (IX+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IX+"+c.HEX(2)+"H)"]}}},c[d("0266")]={mnemonic:"OR (IY+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0250")]={mnemonic:"XOR B",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","B"]}}},this.opecodeTable[d("0251")]={mnemonic:"XOR C",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","C"]}}},this.opecodeTable[d("0252")]={mnemonic:"XOR D",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","D"]}}},this.opecodeTable[d("0253")]={mnemonic:"XOR E",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","E"]}}},this.opecodeTable[d("0254")]={mnemonic:"XOR H",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","H"]}}},this.opecodeTable[d("0255")]={mnemonic:"XOR L",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","L"]}}},this.opecodeTable[d("0257")]={mnemonic:"XOR A",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","A"]}}},this.opecodeTable[d("0356")]={mnemonic:"XOR n",cycle:7,proc:function(){a.reg.xorAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["XOR",c.HEX(2)+"H"]}}},this.opecodeTable[d("0256")]={mnemonic:"XOR (HL)",cycle:7,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","(HL)"]}}},b[d("0256")]={mnemonic:"XOR (IX+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IX+"+c.HEX(2)+"H)"]}}},c[d("0256")]={mnemonic:"XOR (IY+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0270")]={mnemonic:"CP B",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","B"]}}},this.opecodeTable[d("0271")]={mnemonic:"CP C",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","C"]}}},this.opecodeTable[d("0272")]={mnemonic:"CP D",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","D"]}}},this.opecodeTable[d("0273")]={mnemonic:"CP E",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","E"]}}},this.opecodeTable[d("0274")]={mnemonic:"CP H",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","H"]}}},this.opecodeTable[d("0275")]={mnemonic:"CP L",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","L"]}}},this.opecodeTable[d("0277")]={mnemonic:"CP A",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","A"]}}},this.opecodeTable[d("0376")]={mnemonic:"CP n",cycle:7,proc:function(){a.reg.compareAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["CP",c.HEX(2)+"H"]}}},this.opecodeTable[d("0276")]={mnemonic:"CP (HL)",cycle:7,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","(HL)"]}}},b[d("0276")]={mnemonic:"CP (IX+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IX+"+c.HEX(2)+"H)"]}}},c[d("0276")]={mnemonic:"CP (IY+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0004")]={mnemonic:"INC B",cycle:4,proc:function(){a.reg.increment("B")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","B"]}}},this.opecodeTable[d("0014")]={mnemonic:"INC C",cycle:4,proc:function(){a.reg.increment("C")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","C"]}}},this.opecodeTable[d("0024")]={mnemonic:"INC D",cycle:4,proc:function(){a.reg.increment("D")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","D"]}}},this.opecodeTable[d("0034")]={mnemonic:"INC E",cycle:4,proc:function(){a.reg.increment("E")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","E"]}}},this.opecodeTable[d("0044")]={mnemonic:"INC H",cycle:4,proc:function(){a.reg.increment("H")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","H"]}}},this.opecodeTable[d("0054")]={mnemonic:"INC L",cycle:4,proc:function(){a.reg.increment("L")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","L"]}}},this.opecodeTable[d("0074")]={mnemonic:"INC A",cycle:4,proc:function(){a.reg.increment("A")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","A"]}}},this.opecodeTable[d("0064")]={mnemonic:"INC (HL)",cycle:11,proc:function(){a.incrementAt(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","(HL)"]}}},b[d("0064")]={mnemonic:"INC (IX+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IX+ "+c+")"]}}},c[d("0064")]={mnemonic:"INC (IY+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IY+ "+c+")"]}}},this.opecodeTable[d("0005")]={mnemonic:"DEC B",proc:function(){a.reg.decrement("B")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","B"]}}},this.opecodeTable[d("0015")]={mnemonic:"DEC C",proc:function(){a.reg.decrement("C")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","C"]}}},this.opecodeTable[d("0025")]={mnemonic:"DEC D",proc:function(){a.reg.decrement("D")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","D"]}}},this.opecodeTable[d("0035")]={mnemonic:"DEC E",proc:function(){a.reg.decrement("E")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","E"]}}},this.opecodeTable[d("0045")]={mnemonic:"DEC H",proc:function(){a.reg.decrement("H")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","H"]}}},this.opecodeTable[d("0055")]={mnemonic:"DEC L",proc:function(){a.reg.decrement("L")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","L"]}}},this.opecodeTable[d("0075")]={mnemonic:"DEC A",proc:function(){a.reg.decrement("A")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","A"]}}},this.opecodeTable[d("0065")]={mnemonic:"DEC (HL)",proc:function(){a.decrementAt(a.reg.getHL())},cycle:11,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","(HL)"]}}},b[d("0065")]={mnemonic:"DEC (IX+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IX+ "+c+")"]}}},c[d("0065")]={mnemonic:"DEC (IY+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IY+ "+c+")"]}}},this.opecodeTable[d("0047")]={mnemonic:"DAA",cycle:4,proc:function(){a.reg.DAA()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DAA"]}}},this.opecodeTable[d("0057")]={mnemonic:"CPL",cycle:4,proc:function(){a.reg.CPL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CPL"]}}},this.opecodeTable[d("0077")]={mnemonic:"CCF",cycle:4,proc:function(){a.reg.flagC()?a.reg.clearFlagC():a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CCF"]}}},this.opecodeTable[d("0067")]={mnemonic:"SCF",cycle:4,proc:function(){a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SCF"]}}},this.opecodeTable[d("0000")]={mnemonic:"NOP",cycle:4,proc:function(){},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["NOP"]}}},this.opecodeTable[d("0166")]={mnemonic:"HALT",cycle:4,proc:function(){throw a.HALT=1,a.reg.PC-=1,a.exec=function(){throw a.reg.R=a.reg.R+1&255,"halt"},"halt"},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["HALT"]}}},this.opecodeTable[d("0363")]={mnemonic:"DI",cycle:4,proc:function(){a.IFF1=a.IFF2=0},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DI"]}}},this.opecodeTable[d("0373")]={mnemonic:"EI",cycle:4,proc:function(){a.IFF1?a.IFF2=1:(a.IFF1=this.IFF2=1,a.reg.R=a.reg.R+1&255,a.exec())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EI"]}}},j[d("0104")]={mnemonic:"NEG",cycle:8,proc:function(){a.reg.NEG()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["NEG"]}}},j[d("0106")]={mnemonic:"IM0",cycle:8,proc:function(){a.IM=0},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM0"]}}},j[d("0126")]={mnemonic:"IM1",cycle:8,proc:function(){a.IM=1},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM1"]}}},j[d("0136")]={mnemonic:"IM2",cycle:8,proc:function(){a.IM=2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM2"]}}},this.opecodeTable[d("0011")]={mnemonic:"ADD HL,BC",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","BC"]}}},this.opecodeTable[d("0031")]={mnemonic:"ADD HL,DE",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","DE"]}}},this.opecodeTable[d("0051")]={mnemonic:"ADD HL,HL",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","HL"]}}},this.opecodeTable[d("0071")]={mnemonic:"ADD HL,SP",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","SP"]}}},j[d("0112")]={mnemonic:"ADC HL,BC",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","BC"]}}},j[d("0132")]={mnemonic:"ADC HL,DE",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","DE"]}}},j[d("0152")]={mnemonic:"ADC HL,HL",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","HL"]}}},j[d("0172")]={mnemonic:"ADC HL,SP",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","SP"]}}},j[d("0102")]={mnemonic:"SBC HL,BC",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","BC"]}}},j[d("0122")]={mnemonic:"SBC HL,DE",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","DE"]}}},j[d("0142")]={mnemonic:"SBC HL,HL",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","HL"]}}},j[d("0162")]={mnemonic:"SBC HL,SP",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","SP"]}}},b[d("0011")]={mnemonic:"ADD IX,BC",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getBC())},disasm:function(){return{code:[221,9],mnemonic:["ADD","IX","BC"]}}},b[d("0031")]={mnemonic:"ADD IX,DE",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getDE())},disasm:function(){return{code:[221,25],mnemonic:["ADD","IX","DE"]}}},b[d("0051")]={mnemonic:"ADD IX,IX",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.IX)},disasm:function(){return{code:[221,41],mnemonic:["ADD","IX","IX"]}}},b[d("0071")]={mnemonic:"ADD IX,SP",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.SP)},disasm:function(){return{code:[221,57],mnemonic:["ADD","IX","SP"]}}},c[d("0011")]={mnemonic:"ADD IY,BC",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getBC())},disasm:function(){return{code:[253,9],mnemonic:["ADD","IY","BC"]}}},c[d("0031")]={mnemonic:"ADD IY,DE",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getDE())},disasm:function(){return{code:[253,25],mnemonic:["ADD","IY","DE"]}}},c[d("0051")]={mnemonic:"ADD IY,IY",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.IY)},disasm:function(){return{code:[253,41],mnemonic:["ADD","IY","IY"]}}},c[d("0071")]={mnemonic:"ADD IY,SP",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.SP)},disasm:function(){return{code:[253,57],mnemonic:["ADD","IY","SP"]}}},this.opecodeTable[d("0003")]={mnemonic:"INC BC",cycle:6,proc:function(){a.reg.incBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","BC"]}}},this.opecodeTable[d("0023")]={mnemonic:"INC DE",cycle:6,proc:function(){a.reg.incDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","DE"]}}},this.opecodeTable[d("0043")]={mnemonic:"INC HL",cycle:6,proc:function(){a.reg.incHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","HL"]}}},this.opecodeTable[d("0063")]={mnemonic:"INC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP+1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","SP"]}}},b[d("0043")]={mnemonic:"INC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IX"]}}},c[d("0043")]={mnemonic:"INC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IY"]}}},this.opecodeTable[d("0013")]={mnemonic:"DEC BC",cycle:6,proc:function(){a.reg.decBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","BC"]}}},this.opecodeTable[d("0033")]={mnemonic:"DEC DE",cycle:6,proc:function(){a.reg.decDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","DE"]}}},this.opecodeTable[d("0053")]={mnemonic:"DEC HL",cycle:6,proc:function(){a.reg.decHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","HL"]}}},this.opecodeTable[d("0073")]={mnemonic:"DEC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP-1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","SP"]}}},b[d("0053")]={mnemonic:"DEC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IX"]}}};c[d("0053")]={mnemonic:"DEC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IY"]}}},this.opecodeTable[d("0007")]={mnemonic:"RLCA",cycle:4,proc:function(){a.reg.RLCA()},disasm:function(){return{code:[d("0007")],mnemonic:["RLCA"]}}},this.opecodeTable[d("0027")]={mnemonic:"RLA",cycle:4,proc:function(){a.reg.RLA()},disasm:function(){return{code:[d("0027")],mnemonic:["RLA"]}}},this.opecodeTable[d("0017")]={mnemonic:"RRCA",cycle:4,proc:function(){a.reg.RRCA()},disasm:function(){return{code:[d("0017")],mnemonic:["RRCA"]}}},this.opecodeTable[d("0037")]={mnemonic:"RRA",cycle:4,proc:function(){a.reg.RRA()},disasm:function(){return{code:[d("0037")],mnemonic:["RRA"]}}},b[d("0313")]={mnemonic:function(){return h},proc:function(){var b=a.fetch(),c=a.fetch();h[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return h[c].disasm(a,b)}},c[d("0313")]={mnemonic:function(){return i},proc:function(){var b=a.fetch(),c=a.fetch();i[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return i[c].disasm(a,b)}},e[d("0000")]={mnemonic:"RLC B",cycle:4,proc:function(){a.reg.setB(a.reg.RLC(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","B"]}}},e[d("0001")]={mnemonic:"RLC C",cycle:4,proc:function(){a.reg.setC(a.reg.RLC(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","C"]}}},e[d("0002")]={mnemonic:"RLC D",cycle:4,proc:function(){a.reg.setD(a.reg.RLC(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","D"]}}},e[d("0003")]={mnemonic:"RLC E",cycle:4,proc:function(){a.reg.setE(a.reg.RLC(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","E"]}}},e[d("0004")]={mnemonic:"RLC H",cycle:4,proc:function(){a.reg.setH(a.reg.RLC(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","H"]}}},e[d("0005")]={mnemonic:"RLC L",cycle:4,proc:function(){a.reg.setL(a.reg.RLC(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","L"]}}},e[d("0007")]={mnemonic:"RLC A",cycle:4,proc:function(){a.reg.setA(a.reg.RLC(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","A"]}}},e[d("0006")]={mnemonic:"RLC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RLC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","(HL)"]}}},h[d("0006")]={mnemonic:"RLC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IX+"+a.peek(b+2)+")"]}}},i[d("0006")]={mnemonic:"RLC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IY+"+a.peek(b+2)+")"]}}},e[d("0020")]={mnemonic:"RL B",cycle:8,proc:function(){a.reg.setB(a.reg.RL(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","B"]}}},e[d("0021")]={mnemonic:"RL C",cycle:8,proc:function(){a.reg.setC(a.reg.RL(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","C"]}}},e[d("0022")]={mnemonic:"RL D",cycle:8,proc:function(){a.reg.setD(a.reg.RL(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","D"]}}},e[d("0023")]={mnemonic:"RL E",cycle:8,proc:function(){a.reg.setE(a.reg.RL(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","E"]}}},e[d("0024")]={mnemonic:"RL H",cycle:8,proc:function(){a.reg.setH(a.reg.RL(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","H"]}}},e[d("0025")]={mnemonic:"RL L",cycle:8,proc:function(){a.reg.setL(a.reg.RL(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","L"]}}},e[d("0026")]={mnemonic:"RL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","(HL)"]}}},e[d("0027")]={mnemonic:"RL A",cycle:8,proc:function(){a.reg.setA(a.reg.RL(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","A"]}}},h[d("0026")]={mnemonic:"RL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IX+"+a.peek(b+2)+")"]}}},i[d("0026")]={mnemonic:"RL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IY+"+a.peek(b+2)+")"]}}},e[d("0010")]={mnemonic:"RRC B",cycle:4,proc:function(){a.reg.setB(a.reg.RRC(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","B"]}}},e[d("0011")]={mnemonic:"RRC C",cycle:4,proc:function(){a.reg.setC(a.reg.RRC(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","C"]}}},e[d("0012")]={mnemonic:"RRC D",cycle:4,proc:function(){a.reg.setD(a.reg.RRC(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","D"]}}},e[d("0013")]={mnemonic:"RRC E",cycle:4,proc:function(){a.reg.setE(a.reg.RRC(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","E"]}}},e[d("0014")]={mnemonic:"RRC H",cycle:4,proc:function(){a.reg.setH(a.reg.RRC(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","H"]}}},e[d("0015")]={mnemonic:"RRC L",cycle:4,proc:function(){a.reg.setL(a.reg.RRC(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","L"]}}},e[d("0017")]={mnemonic:"RRC A",cycle:4,proc:function(){a.reg.setA(a.reg.RRC(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","A"]}}},e[d("0016")]={mnemonic:"RRC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RRC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","(HL)"]}}},h[d("0016")]={mnemonic:"RRC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IX+"+a.peek(b+2)+")"]}}},i[d("0016")]={mnemonic:"RRC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IY+"+a.peek(b+2)+")"]}}},e[d("0030")]={mnemonic:"RR B",cycle:8,proc:function(){a.reg.setB(a.reg.RR(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","B"]}}},e[d("0031")]={mnemonic:"RR C",cycle:8,proc:function(){a.reg.setC(a.reg.RR(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","C"]}}},e[d("0032")]={mnemonic:"RR D",cycle:8,proc:function(){a.reg.setD(a.reg.RR(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","D"]}}},e[d("0033")]={mnemonic:"RR E",cycle:8,proc:function(){a.reg.setE(a.reg.RR(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","E"]}}},e[d("0034")]={mnemonic:"RR H",cycle:8,proc:function(){a.reg.setH(a.reg.RR(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","H"]}}},e[d("0035")]={mnemonic:"RR L",cycle:8,proc:function(){a.reg.setL(a.reg.RR(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","L"]}}},e[d("0036")]={mnemonic:"RR (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RR(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","(HL)"]}}},e[d("0037")]={mnemonic:"RR A",cycle:8,proc:function(){a.reg.setA(a.reg.RR(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","A"]}}},h[d("0036")]={mnemonic:"RR (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IX+"+a.peek(b+2)+")"]}}},i[d("0036")]={mnemonic:"RR (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IY+"+a.peek(b+2)+")"]}}},e[d("0040")]={mnemonic:"SLA B",cycle:8,proc:function(){a.reg.setB(a.reg.SLA(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","B"]}}},e[d("0041")]={mnemonic:"SLA C",cycle:8,proc:function(){a.reg.setC(a.reg.SLA(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","C"]}}},e[d("0042")]={mnemonic:"SLA D",cycle:8,proc:function(){a.reg.setD(a.reg.SLA(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","D"]}}},e[d("0043")]={mnemonic:"SLA E",cycle:8,proc:function(){a.reg.setE(a.reg.SLA(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","E"]}}},e[d("0044")]={mnemonic:"SLA H",cycle:8,proc:function(){a.reg.setH(a.reg.SLA(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","H"]}}},e[d("0045")]={mnemonic:"SLA L",cycle:8,proc:function(){a.reg.setL(a.reg.SLA(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","L"]}}},e[d("0047")]={mnemonic:"SLA A",cycle:8,proc:function(){a.reg.setA(a.reg.SLA(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","A"]}}},e[d("0046")]={mnemonic:"SLA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SLA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","(HL)"]}}},h[d("0046")]={mnemonic:"SLA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IX+"+a.peek(b+2)+")"]}}},i[d("0046")]={mnemonic:"SLA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IY+"+a.peek(b+2)+")"]}}},e[d("0050")]={mnemonic:"SRA B",cycle:8,proc:function(){a.reg.setB(a.reg.SRA(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","B"]}}},e[d("0051")]={mnemonic:"SRA C",cycle:8,proc:function(){a.reg.setC(a.reg.SRA(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","C"]}}},e[d("0052")]={mnemonic:"SRA D",cycle:8,proc:function(){a.reg.setD(a.reg.SRA(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","D"]}}},e[d("0053")]={mnemonic:"SRA E",cycle:8,proc:function(){a.reg.setE(a.reg.SRA(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","E"]}}},e[d("0054")]={mnemonic:"SRA H",cycle:8,proc:function(){a.reg.setH(a.reg.SRA(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","H"]}}},e[d("0055")]={mnemonic:"SRA L",cycle:8,proc:function(){a.reg.setL(a.reg.SRA(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","L"]}}},e[d("0057")]={mnemonic:"SRA A",cycle:8,proc:function(){a.reg.setA(a.reg.SRA(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],
mnemonic:["SRA","A"]}}},e[d("0056")]={mnemonic:"SRA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","(HL)"]}}},h[d("0056")]={mnemonic:"SRA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IX+"+a.peek(b+2)+")"]}}},i[d("0056")]={mnemonic:"SRA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IY+"+a.peek(b+2)+")"]}}},e[d("0070")]={mnemonic:"SRL B",cycle:8,proc:function(){a.reg.setB(a.reg.SRL(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","B"]}}},e[d("0071")]={mnemonic:"SRL C",cycle:8,proc:function(){a.reg.setC(a.reg.SRL(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","C"]}}},e[d("0072")]={mnemonic:"SRL D",cycle:8,proc:function(){a.reg.setD(a.reg.SRL(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","D"]}}},e[d("0073")]={mnemonic:"SRL E",cycle:8,proc:function(){a.reg.setE(a.reg.SRL(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","E"]}}},e[d("0074")]={mnemonic:"SRL H",cycle:8,proc:function(){a.reg.setH(a.reg.SRL(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","H"]}}},e[d("0075")]={mnemonic:"SRL L",cycle:8,proc:function(){a.reg.setL(a.reg.SRL(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","L"]}}},e[d("0077")]={mnemonic:"SRL A",cycle:8,proc:function(){a.reg.setA(a.reg.SRL(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","A"]}}},e[d("0076")]={mnemonic:"SRL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","(HL)"]}}},h[d("0076")]={mnemonic:"SRL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IX+"+a.peek(b+2)+")"]}}},i[d("0076")]={mnemonic:"SRL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IY+"+a.peek(b+2)+")"]}}},j[d("0157")]={mnemonic:"RLD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.getA(),e=15&a.reg.getA(),f=c>>4&15,g=c>>0&15;a.reg.setA(d|f),c=g<<4|e,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLD"]}}},j[d("0147")]={mnemonic:"RRD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.getA(),e=15&a.reg.getA(),f=c>>4&15,g=c>>0&15;a.reg.setA(d|g),c=e<<4|f,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRD"]}}};var u,v,w=["B","C","D","E","H","L","(HL)","A"];for(u=0;u<w.length;u++)for(v=0;v<8;v++)e[d("0100")|v<<3|u]={mnemonic:"BIT "+v+","+w[u],cycle:function(a){return 6!=a?8:12}(u),proc:function(b,c){return 6!=c?function(){0!=(a.reg["get"+w[c]]()&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}:function(){var c=a.reg.getHL();0!=(a.memory.peek(c)&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}}(v,u),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["BIT",a,b]}}}(v,w[u])};var x=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["BIT",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};for(h[d("0106")]={mnemonic:"BIT 0,(IX+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,0,"IX")}},h[d("0116")]={mnemonic:"BIT 1,(IX+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,1,"IX")}},h[d("0126")]={mnemonic:"BIT 2,(IX+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,2,"IX")}},h[d("0136")]={mnemonic:"BIT 3,(IX+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,3,"IX")}},h[d("0146")]={mnemonic:"BIT 4,(IX+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,4,"IX")}},h[d("0156")]={mnemonic:"BIT 5,(IX+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,5,"IX")}},h[d("0166")]={mnemonic:"BIT 6,(IX+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,6,"IX")}},h[d("0176")]={mnemonic:"BIT 7,(IX+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,7,"IX")}},i[d("0106")]={mnemonic:"BIT 0,(IY+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,0,"IY")}},i[d("0116")]={mnemonic:"BIT 1,(IY+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,1,"IY")}},i[d("0126")]={mnemonic:"BIT 2,(IY+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,2,"IY")}},i[d("0136")]={mnemonic:"BIT 3,(IY+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,3,"IY")}},i[d("0146")]={mnemonic:"BIT 4,(IY+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,4,"IY")}},i[d("0156")]={mnemonic:"BIT 5,(IY+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,5,"IY")}},i[d("0166")]={mnemonic:"BIT 6,(IY+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,6,"IY")}},i[d("0176")]={mnemonic:"BIT 7,(IY+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,7,"IY")}},u=0;u<w.length;u++)for(v=0;v<8;v++)e[d("0300")|v<<3|u]={mnemonic:"SET "+v+","+w[u],cycle:function(a){return 6!=a?4:15}(u),proc:function(b,c){return 6!=c?function(){a.reg["set"+w[c]](a.reg["get"+w[c]]()|1<<b)}:function(){var c=a.reg.getHL();a.memory.poke(c,a.memory.peek(c)|1<<b)}}(v,u),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["SET",a,b]}}}(v,w[u])};var y=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c+0),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["SET",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};h[d("0306")]={mnemonic:"SET 0,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return y(0,b,0,"IX")}},h[d("0316")]={mnemonic:"SET 1,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return y(0,b,1,"IX")}},h[d("0326")]={mnemonic:"SET 2,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return y(0,b,2,"IX")}},h[d("0336")]={mnemonic:"SET 3,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return y(0,b,3,"IX")}},h[d("0346")]={mnemonic:"SET 4,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return y(0,b,4,"IX")}},h[d("0356")]={mnemonic:"SET 5,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return y(0,b,5,"IX")}},h[d("0366")]={mnemonic:"SET 6,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return y(0,b,6,"IX")}},h[d("0376")]={mnemonic:"SET 7,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return y(0,b,7,"IX")}},i[d("0306")]={mnemonic:"SET 0,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return y(0,b,0,"IY")}},i[d("0316")]={mnemonic:"SET 1,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return y(0,b,1,"IY")}},i[d("0326")]={mnemonic:"SET 2,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return y(0,b,2,"IY")}},i[d("0336")]={mnemonic:"SET 3,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return y(0,b,3,"IY")}},i[d("0346")]={mnemonic:"SET 4,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return y(0,b,4,"IY")}},i[d("0356")]={mnemonic:"SET 5,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return y(0,b,5,"IY")}},i[d("0366")]={mnemonic:"SET 6,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return y(0,b,6,"IY")}},i[d("0376")]={mnemonic:"SET 7,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return y(0,b,7,"IY")}};var z=function(b,c){var d=~(1<<b);return function(){a.reg["set"+c](a.reg["get"+c]()&d)}},A=function(a,b){var c="BCDEHL A".indexOf(b),e=a<<3;return function(){return{code:[203,d("0200")|e|c],mnemonic:["RES",a,b]}}},B=function(b){var c=255&~(1<<b);return function(b){return function(){var c=a.reg.getHL(),d=a.memory.peek(c),e=d&b;a.memory.poke(c,e)}}(c)},C=function(a){var b=a<<3;return function(b){return function(){return{code:[203,d("0200")|b|6],mnemonic:["RES",a,"(HL)"]}}}(b)},D=function(b,c){var d=255&~(1<<b);return function(b){return function(d){var e=a.reg[c]+d,f=a.memory.peek(e),g=f&b;a.memory.poke(e,g)}}(d)},E=function(a,b){var c={IX:221,IY:253}[b];return function(c,d){return function(c,e){var f=c.peek(e+2),g=c.peek(e+3);return{code:[d,203,f,g],mnemonic:["RES",a,"("+b+"+"+f.HEX(2)+"H)"]}}}(0,c)};e[d("0200")]={mnemonic:"RES 0,B",cycle:8,proc:z(0,"B"),disasm:A(0,"B")},e[d("0210")]={mnemonic:"RES 1,B",cycle:8,proc:z(1,"B"),disasm:A(1,"B")},e[d("0220")]={mnemonic:"RES 2,B",cycle:8,proc:z(2,"B"),disasm:A(2,"B")},e[d("0230")]={mnemonic:"RES 3,B",cycle:8,proc:z(3,"B"),disasm:A(3,"B")},e[d("0240")]={mnemonic:"RES 4,B",cycle:8,proc:z(4,"B"),disasm:A(4,"B")},e[d("0250")]={mnemonic:"RES 5,B",cycle:8,proc:z(5,"B"),disasm:A(5,"B")},e[d("0260")]={mnemonic:"RES 6,B",cycle:8,proc:z(6,"B"),disasm:A(6,"B")},e[d("0270")]={mnemonic:"RES 7,B",cycle:8,proc:z(7,"B"),disasm:A(7,"B")},e[d("0201")]={mnemonic:"RES 0,C",cycle:8,proc:z(0,"C"),disasm:A(0,"C")},e[d("0211")]={mnemonic:"RES 1,C",cycle:8,proc:z(1,"C"),disasm:A(1,"C")},e[d("0221")]={mnemonic:"RES 2,C",cycle:8,proc:z(2,"C"),disasm:A(2,"C")},e[d("0231")]={mnemonic:"RES 3,C",cycle:8,proc:z(3,"C"),disasm:A(3,"C")},e[d("0241")]={mnemonic:"RES 4,C",cycle:8,proc:z(4,"C"),disasm:A(4,"C")},e[d("0251")]={mnemonic:"RES 5,C",cycle:8,proc:z(5,"C"),disasm:A(5,"C")},e[d("0261")]={mnemonic:"RES 6,C",cycle:8,proc:z(6,"C"),disasm:A(6,"C")},e[d("0271")]={mnemonic:"RES 7,C",cycle:8,proc:z(7,"C"),disasm:A(7,"C")},e[d("0202")]={mnemonic:"RES 0,D",cycle:8,proc:z(0,"D"),disasm:A(0,"D")},e[d("0212")]={mnemonic:"RES 1,D",cycle:8,proc:z(1,"D"),disasm:A(1,"D")},e[d("0222")]={mnemonic:"RES 2,D",cycle:8,proc:z(2,"D"),disasm:A(2,"D")},e[d("0232")]={mnemonic:"RES 3,D",cycle:8,proc:z(3,"D"),disasm:A(3,"D")},e[d("0242")]={mnemonic:"RES 4,D",cycle:8,proc:z(4,"D"),disasm:A(4,"D")},e[d("0252")]={mnemonic:"RES 5,D",cycle:8,proc:z(5,"D"),disasm:A(5,"D")},e[d("0262")]={mnemonic:"RES 6,D",cycle:8,proc:z(6,"D"),disasm:A(6,"D")},e[d("0272")]={mnemonic:"RES 7,D",cycle:8,proc:z(7,"D"),disasm:A(7,"D")},e[d("0203")]={mnemonic:"RES 0,E",cycle:8,proc:z(0,"E"),disasm:A(0,"E")},e[d("0213")]={mnemonic:"RES 1,E",cycle:8,proc:z(1,"E"),disasm:A(1,"E")},e[d("0223")]={mnemonic:"RES 2,E",cycle:8,proc:z(2,"E"),disasm:A(2,"E")},e[d("0233")]={mnemonic:"RES 3,E",cycle:8,proc:z(3,"E"),disasm:A(3,"E")},e[d("0243")]={mnemonic:"RES 4,E",cycle:8,proc:z(4,"E"),disasm:A(4,"E")},e[d("0253")]={mnemonic:"RES 5,E",cycle:8,proc:z(5,"E"),disasm:A(5,"E")},e[d("0263")]={mnemonic:"RES 6,E",cycle:8,proc:z(6,"E"),disasm:A(6,"E")},e[d("0273")]={mnemonic:"RES 7,E",cycle:8,proc:z(7,"E"),disasm:A(7,"E")},e[d("0204")]={mnemonic:"RES 0,H",cycle:8,proc:z(0,"H"),disasm:A(0,"H")},e[d("0214")]={mnemonic:"RES 1,H",cycle:8,proc:z(1,"H"),disasm:A(1,"H")},e[d("0224")]={mnemonic:"RES 2,H",cycle:8,proc:z(2,"H"),disasm:A(2,"H")},e[d("0234")]={mnemonic:"RES 3,H",cycle:8,proc:z(3,"H"),disasm:A(3,"H")},e[d("0244")]={mnemonic:"RES 4,H",cycle:8,proc:z(4,"H"),disasm:A(4,"H")},e[d("0254")]={mnemonic:"RES 5,H",cycle:8,proc:z(5,"H"),disasm:A(5,"H")},e[d("0264")]={mnemonic:"RES 6,H",cycle:8,proc:z(6,"H"),disasm:A(6,"H")},e[d("0274")]={mnemonic:"RES 7,H",cycle:8,proc:z(7,"H"),disasm:A(7,"H")},e[d("0205")]={mnemonic:"RES 0,L",cycle:8,proc:z(0,"L"),disasm:A(0,"L")},e[d("0215")]={mnemonic:"RES 1,L",cycle:8,proc:z(1,"L"),disasm:A(1,"L")},e[d("0225")]={mnemonic:"RES 2,L",cycle:8,proc:z(2,"L"),disasm:A(2,"L")},e[d("0235")]={mnemonic:"RES 3,L",cycle:8,proc:z(3,"L"),disasm:A(3,"L")},e[d("0245")]={mnemonic:"RES 4,L",cycle:8,proc:z(4,"L"),disasm:A(4,"L")},e[d("0255")]={mnemonic:"RES 5,L",cycle:8,proc:z(5,"L"),disasm:A(5,"L")},e[d("0265")]={mnemonic:"RES 6,L",cycle:8,proc:z(6,"L"),disasm:A(6,"L")},e[d("0275")]={mnemonic:"RES 7,L",cycle:8,proc:z(7,"L"),disasm:A(7,"L")},e[d("0207")]={mnemonic:"RES 0,A",cycle:8,proc:z(0,"A"),disasm:A(0,"A")},e[d("0217")]={mnemonic:"RES 1,A",cycle:8,proc:z(1,"A"),disasm:A(1,"A")},e[d("0227")]={mnemonic:"RES 2,A",cycle:8,proc:z(2,"A"),disasm:A(2,"A")},e[d("0237")]={mnemonic:"RES 3,A",cycle:8,proc:z(3,"A"),disasm:A(3,"A")},e[d("0247")]={mnemonic:"RES 4,A",cycle:8,proc:z(4,"A"),disasm:A(4,"A")},e[d("0257")]={mnemonic:"RES 5,A",cycle:8,proc:z(5,"A"),disasm:A(5,"A")},e[d("0267")]={mnemonic:"RES 6,A",cycle:8,proc:z(6,"A"),disasm:A(6,"A")},e[d("0277")]={mnemonic:"RES 7,A",cycle:8,proc:z(7,"A"),disasm:A(7,"A")},e[d("0206")]={mnemonic:"RES 0,(HL)",cycle:15,proc:B(0),disasm:C(0)},e[d("0216")]={mnemonic:"RES 1,(HL)",cycle:15,proc:B(1),disasm:C(1)},e[d("0226")]={mnemonic:"RES 2,(HL)",cycle:15,proc:B(2),disasm:C(2)},e[d("0236")]={mnemonic:"RES 3,(HL)",cycle:15,proc:B(3),disasm:C(3)},e[d("0246")]={mnemonic:"RES 4,(HL)",cycle:15,proc:B(4),disasm:C(4)},e[d("0256")]={mnemonic:"RES 5,(HL)",cycle:15,proc:B(5),disasm:C(5)},e[d("0266")]={mnemonic:"RES 6,(HL)",cycle:15,proc:B(6),disasm:C(6)},e[d("0276")]={mnemonic:"RES 7,(HL)",cycle:15,proc:B(7),disasm:C(7)},h[d("0206")]={mnemonic:"RES 0,(IX+d)",cycle:23,proc:D(0,"IX"),disasm:E(0,"IX")},h[d("0216")]={mnemonic:"RES 1,(IX+d)",cycle:23,proc:D(1,"IX"),disasm:E(1,"IX")},h[d("0226")]={mnemonic:"RES 2,(IX+d)",cycle:23,proc:D(2,"IX"),disasm:E(2,"IX")},h[d("0236")]={mnemonic:"RES 3,(IX+d)",cycle:23,proc:D(3,"IX"),disasm:E(3,"IX")},h[d("0246")]={mnemonic:"RES 4,(IX+d)",cycle:23,proc:D(4,"IX"),disasm:E(4,"IX")},h[d("0256")]={mnemonic:"RES 5,(IX+d)",cycle:23,proc:D(5,"IX"),disasm:E(5,"IX")},h[d("0266")]={mnemonic:"RES 6,(IX+d)",cycle:23,proc:D(6,"IX"),disasm:E(6,"IX")},h[d("0276")]={mnemonic:"RES 7,(IX+d)",cycle:23,proc:D(7,"IX"),disasm:E(7,"IX")},i[d("0206")]={mnemonic:"RES 0,(IY+d)",cycle:23,proc:D(0,"IY"),disasm:E(0,"IY")},i[d("0216")]={mnemonic:"RES 1,(IY+d)",cycle:23,proc:D(1,"IY"),disasm:E(1,"IY")},i[d("0226")]={mnemonic:"RES 2,(IY+d)",cycle:23,proc:D(2,"IY"),disasm:E(2,"IY")},i[d("0236")]={mnemonic:"RES 3,(IY+d)",cycle:23,proc:D(3,"IY"),disasm:E(3,"IY")},i[d("0246")]={mnemonic:"RES 4,(IY+d)",cycle:23,proc:D(4,"IY"),disasm:E(4,"IY")},i[d("0256")]={mnemonic:"RES 5,(IY+d)",cycle:23,proc:D(5,"IY"),disasm:E(5,"IY")},i[d("0266")]={mnemonic:"RES 6,(IY+d)",cycle:23,proc:D(6,"IY"),disasm:E(6,"IY")},i[d("0276")]={mnemonic:"RES 7,(IY+d)",cycle:23,proc:D(7,"IY"),disasm:E(7,"IY")};var F=function(a,b){var c,e,f,h=a.peek(b),i=[h],j=[],k=null;switch(h&d("0300")){case d("0000"):switch(j.push("JR"),c=g.getSignedByte(a.peek(b+1)),k=b+c+2,i.push(255&c),c=c+2>=0?"+"+(c+2):""+(c+2),h&d("0070")){case d("0030"):break;case d("0070"):j.push("C");break;case d("0050"):j.push("Z");break;case d("0060"):j.push("NC");break;case d("0040"):j.push("NZ");break;default:throw"UNKNOWN OPCODE"}j.push(k.HEX(4)+"H;("+c+")");break;case d("0300"):switch(j.push("JP"),h&d("0003")){case 1:j.push("(HL)");break;case 2:switch(e=a.peek(b+1),f=a.peek(b+2),k=g.pair(f,e),i.push(e),i.push(f),h&d("0070")){case d("0000"):j.push("NZ");break;case d("0010"):j.push("Z");break;case d("0020"):j.push("NC");break;case d("0030"):j.push("C");break;case d("0040"):j.push("PO");break;case d("0050"):j.push("PE");break;case d("0060"):j.push("P");break;case d("0070"):j.push("M")}j.push(f.HEX(2)+e.HEX(2)+"H");break;case 3:e=a.peek(b+1),f=a.peek(b+2),k=g.pair(f,e),i.push(e),i.push(f),j.push(f.HEX(2)+e.HEX(2)+"H")}break;default:throw"UNKNOWN OPCODE"}return{code:i,mnemonic:j,ref_addr_to:k}};this.opecodeTable[d("0303")]={mnemonic:"JP nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.PC=b},disasm:F},this.opecodeTable[d("0302")]={mnemonic:"JP NZ,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0312")]={mnemonic:"JP Z,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0322")]={mnemonic:"JP NC,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0332")]={mnemonic:"JP C,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0342")]={mnemonic:"JP PO,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0352")]={mnemonic:"JP PE,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0362")]={mnemonic:"JP P,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0372")]={mnemonic:"JP M,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0030")]={mnemonic:"JR e",cycle:12,proc:function(){var b=a.fetch();a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0070")]={mnemonic:"JR C,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()&&a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0050")]={mnemonic:"JR Z,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagZ()&&a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0060")]={mnemonic:"JR NC,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()||a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0040")]={mnemonic:"JR NZ,e",proc:function(){var b=a.fetch();a.reg.flagZ()||a.reg.jumpRel(b)},cycle:12,disasm:F},this.opecodeTable[d("0351")]={mnemonic:"JP (HL)",cycle:4,proc:function(){a.reg.PC=a.reg.getHL()},disasm:F},b[d("0351")]={mnemonic:"JP (IX)",cycle:8,proc:function(){a.reg.PC=a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IX)"]}}},c[d("0351")]={mnemonic:"JP (IY)",cycle:8,proc:function(){a.reg.PC=a.reg.IY},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IY)"]}}},b[d("0104")]={mnemonic:"LD B,IXH",proc:function(){a.reg.setB(a.reg.IX>>8&255)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","B","IXH"]}}},b[d("0115")]={mnemonic:"LD C,IXL",proc:function(){a.reg.setC(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","C","IXL"]}}},b[d("0140")]={mnemonic:"LD IXH,B",proc:function(){a.reg.IX=65280&a.reg.getB()<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","B"]}}},b[d("0147")]={mnemonic:"LD IXH,A",proc:function(){a.reg.IX=65280&a.reg.getA()<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","A"]}}},b[d("0151")]={mnemonic:"LD IXL,C",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.getC()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","C"]}}},b[d("0157")]={mnemonic:"LD IXL,A",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.getA()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","A"]}}},b[d("0175")]={mnemonic:"LD A,IXL",proc:function(){a.reg.setA(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","IXL"]}}},b[d("0204")]={mnemonic:"ADD A,IXH",proc:function(){a.reg.addAcc(a.reg.IX>>8&255)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXH"]}}},b[d("0205")]={mnemonic:"ADD A,IXL",proc:function(){a.reg.addAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXL"]}}},b[d("0275")]={mnemonic:"CP IXL",proc:function(){a.reg.compareAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CP","IXL"]}}},this.opecodeTable[d("0020")]={mnemonic:"DJNZ",cycle:13,proc:function(){var b=a.fetch();a.reg.decrement("B"),a.reg.getB()&&a.reg.jumpRel(b)},disasm:function(a,b){var c=g.getSignedByte(a.peek(b+1)),d=b+c+2;return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DJNZ",d.HEX(4)+"H;("+(c+2>=0?"+":"")+(c+2)+")"],ref_addr_to:d}}},this.opecodeTable[d("0315")]={mnemonic:"CALL nn",cycle:17,proc:function(){var b=a.fetchPair();a.pushPair(a.reg.PC),a.reg.PC=b},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0304")]={mnemonic:"CALL NZ,nn",cycle:"NZ→17,Z→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NZ",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0314")]={mnemonic:"CALL Z,nn",cycle:"Z→17,NZ→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","Z",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0324")]={mnemonic:"CALL NC,nn",cycle:"NC→17, C→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NC",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0334")]={mnemonic:"CALL C,nn",cycle:"C→17, NC→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","C",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0344")]={mnemonic:"CALL PO,nn",cycle:"Parity Odd→17, Even→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PO",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0354")]={mnemonic:"CALL PE,nn",cycle:"Parity Even→17, Odd→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PE",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0364")]={mnemonic:"CALL P,nn",cycle:"P→17, M→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","P",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0374")]={mnemonic:"CALL M,nn",cycle:"M→17, P→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","M",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0311")]={mnemonic:"RET",cycle:10,proc:function(){a.reg.PC=a.popPair()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET"]}}},this.opecodeTable[d("0300")]={mnemonic:"RET NZ",cycle:"NZ→11, Z→5",proc:function(){return a.reg.flagZ()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NZ"]}}},this.opecodeTable[d("0310")]={mnemonic:"RET Z",cycle:"Z→5, NZ→11",proc:function(){return a.reg.flagZ()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","Z"]}}},this.opecodeTable[d("0320")]={mnemonic:"RET NC",cycle:"NC→11,C→5",proc:function(){return a.reg.flagC()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NC"]}}},this.opecodeTable[d("0330")]={mnemonic:"RET C",cycle:"C→11,NC→5",proc:function(){return a.reg.flagC()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","C"]}}},this.opecodeTable[d("0340")]={mnemonic:"RET PO",cycle:"Parity Odd→11, Parity Even→5",proc:function(){return a.reg.flagP()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PO"]}}},this.opecodeTable[d("0350")]={mnemonic:"RET PE",cycle:"Parity Even→11, Parity Odd→5",proc:function(){return a.reg.flagP()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PE"]}}},this.opecodeTable[d("0360")]={mnemonic:"RET P",cycle:"P→11, M→5",proc:function(){return a.reg.flagS()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","P"]}}},this.opecodeTable[d("0370")]={mnemonic:"RET M",cycle:"M→11, P→5",proc:function(){return a.reg.flagS()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","M"]}}},j[d("0115")]={mnemonic:"RETI",cycle:15,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETI"]}}},j[d("0105")]={mnemonic:"RETN",cycle:14,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETN"]}}};for(var G=[0,8,16,24,32,40,48,56],H=0;H<G.length;H++)this.opecodeTable[d("0307")|H<<3]={mnemonic:"RST "+G[H].HEX(2)+"H",proc:function(b){return function(){a.pushPair(a.reg.PC),a.reg.PC=b}}(G[H]),cycle:12,disasm:function(a){return function(b,c){return{code:[b.peek(c)],mnemonic:["RST",a.HEX(2)+"H"]}}}(G[H])};this.opecodeTable[d("0333")]={mnemonic:"IN A,(n)",cycle:11,proc:function(){a.reg.setA(a.readIoPort(a.fetch()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","("+a.peek(b+1)+")"]}}},j[d("0100")]={mnemonic:"IN B,(C)",cycle:12,proc:function(){a.reg.setB(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","B","(C)"]}}},j[d("0110")]={mnemonic:"IN C,(C)",cycle:12,proc:function(){a.reg.setC(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","C","(C)"]}}},j[d("0120")]={mnemonic:"IN D,(C)",cycle:12,proc:function(){a.reg.setD(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","D","(C)"]}}},j[d("0130")]={mnemonic:"IN E,(C)",cycle:12,proc:function(){a.reg.setE(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","E","(C)"]}}},j[d("0140")]={mnemonic:"IN H,(C)",cycle:12,proc:function(){a.reg.setH(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","H","(C)"]}}},j[d("0150")]={mnemonic:"IN L,(C)",cycle:12,proc:function(){a.reg.setL(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","L","(C)"]}}},j[d("0170")]={mnemonic:"IN A,(C)",cycle:12,proc:function(){a.reg.setA(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","(C)"]}}},j[d("0242")]={mnemonic:"INI",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postINI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INI"]}}},j[d("0262")]={mnemonic:"INIR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postINI(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INIR"]}}},j[d("0252")]={mnemonic:"IND",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postIND()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IND"]}}},j[d("0272")]={mnemonic:"INDR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postIND(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INDR"]}}},this.opecodeTable[d("0323")]={mnemonic:"OUT (n),A",cycle:11,proc:function(){a.writeIoPort(a.fetch(),a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","("+a.peek(b+1)+")","A"]}}},j[d("0101")]={mnemonic:"OUT (C),B",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","B"]}}},j[d("0111")]={mnemonic:"OUT (C),C",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","C"]}}},j[d("0121")]={mnemonic:"OUT (C),D",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","D"]}}},j[d("0131")]={mnemonic:"OUT (C),E",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","E"]}}},j[d("0141")]={mnemonic:"OUT (C),H",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","H"]}}},j[d("0151")]={mnemonic:"OUT (C),L",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","L"]}}},j[d("0171")]={mnemonic:"OUT (C),A",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","A"]}}},j[d("0243")]={mnemonic:"OUTI",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTI()},disasm:function(a,b){return{
code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTI"]}}},j[d("0263")]={mnemonic:"OTIR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTI(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTIR"]}}},j[d("0253")]={mnemonic:"OUTD",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTD"]}}},j[d("0273")]={mnemonic:"OTDR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTD(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTDR"]}}}},b.exports=i},{"../lib/oct":37,"./bin-util.js":12,"./memory-block.js":16,"./register.js":17,"./z80-line-assembler":18}],14:[function(a,b,c){!function(){var c=a("./bin-util.js"),d=function(){};d.prototype.create=function(a){a=a||{},this.onPeek=a.onPeek||function(){},this.onPoke=a.onPoke||function(){},this.size=a.size||65536,this.startAddr=a.startAddr||0},d.prototype.peekByte=function(){var a="Error: peekByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.pokeByte=function(){var a="Error: pokeByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.clear=function(){for(var a=0;a<this.size;a++)this.pokeByte(0)},d.prototype.peek=function(a){var b=this.peekByte(a),c=this.onPeek.call(this,a,b);return null!=c&&void 0!=c&&(b=c),b},d.prototype.poke=function(a,b){this.pokeByte(a,b),this.onPoke.call(this,a,this.peekByte(a))},d.prototype.peekPair=function(a){var b=this.peek(a+1),d=this.peek(a+0);return c.pair(b,d)},b.exports=d}()},{"./bin-util.js":12}],15:[function(a,b,c){var d=a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size),this.memblk={}},e.prototype.setMemoryBlock=function(a,b){var c,d,e;if(null==b){if(a in this.memblk){for(c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=null;delete this.memblk[a]}}else for(this.memblk[a]=b,c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=b},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535].peek(a)},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535].poke(a,255&b)},b.exports=e},{"./imem":14}],16:[function(a,b,c){var d=a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size)},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535]},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535]=255&b},b.exports=e},{"./imem":14}],17:[function(a,b,c){!function(){"use strict";function c(a,b,c){"use asm";var d=0x80;var e=0x40;var f=0x10;var g=0x04;var h=0x02;var i=0x01;var j=0;var k=0;var l=0;var m=0;var n=0;var o=0;var p=0;var q=0;var r=new a.Uint8Array(c);var s=0;var t=512;var u=1024;function v(a){a=a|0;return r[s|0+a]|0}function w(a,b){a=a|0;b=b|0;r[s|0+a]=b}function x(a){a=a|0;return r[t|0+a]|0}function y(a,b){a=a|0;b=b|0;r[t|0+a]=b}function z(a){a=a|0;return r[u|0+a]|0}function A(a,b){a=a|0;b=b|0;r[u|0+a]=b}function B(){var a=0;var b=0;var c=0;for(a=0;(a|0)<256;a=(a|0)+1|0){b=0;if((a|0)==0){b=b|e}if(a&0x80){b=b|d}c=0;if((a&1|0)!=0){c=c+1|0}if((a&2|0)!=0){c=c+1|0}if((a&4|0)!=0){c=c+1|0}if((a&8|0)!=0){c=c+1|0}if((a&16|0)!=0){c=c+1|0}if((a&32|0)!=0){c=c+1|0}if((a&64|0)!=0){c=c+1|0}if((a&128|0)!=0){c=c+1|0}w(a,(c&1?0:g)|0);y(a,b|0);A(a,b|(v(a)|0)|0)}for(a=0;(a|0)<256;a=(a|0)+1|0){y(a+256|0,x(a|0)|0|i|0);A(a+256|0,z(a|0)|0|i|0);w(a+256|0,v(a|0)|0|i|0)}}function C(a,b){a=a|0;b=b|0;return((0xff&a)<<8)+(0xff&b)|0}function D(a){a=a|0;return a>>8&0xff|0}function E(a){a=a|0;return a&0xff|0}function F(){j=0;k=0;l=0;m=0;n=0;o=0;p=0;q=0}function G(a){a=a|0;j=a&0xff|0}function H(){return j|0}function I(a){a=a|0;k=a&0xff|0}function J(){return k|0}function K(a){a=a|0;l=a&0xff|0}function L(){return l|0}function M(a){a=a|0;m=a&0xff|0}function N(){return m|0}function O(a){a=a|0;n=a&0xff|0}function P(){return n|0}function Q(a){a=a|0;o=a&0xff|0}function R(){return o|0}function S(a){a=a|0;p=a&0xff|0}function T(){return p|0}function U(a){a=a|0;q=a&0xff|0}function V(){return q|0}function W(a){a=a|0;j=D(a)|0;k=E(a)|0}function X(){return C(j,k)|0}function Y(a){a=a|0;l=D(a)|0;m=E(a)|0}function Z(){return C(l,m)|0}function $(a){a=a|0;n=D(a)|0;o=E(a)|0}function _(){return C(n,o)|0}function aa(a){a=a|0;p=D(a)|0;q=E(a)|0}function ba(){return C(p,q)|0}function ca(a){a=a|0;return(q&a?1:0)|0}function da(a){a=a|0;q=q|a}function ea(a){a=a|0;q=q&(~a&0xff)}function fa(){return(q&d?1:0)|0}function ga(){return(q&e?1:0)|0}function ha(){return(q&f?1:0)|0}function ia(){return(q&g?1:0)|0}function ja(){return(q&h?1:0)|0}function ka(){return(q&i?1:0)|0}function la(){q=q|d}function ma(){q=q|e}function na(){q=q|f}function oa(){q=q|g}function pa(){q=q|h}function qa(){q=q|i}function ra(){q=q&(~d&0xff)}function sa(){q=q&(~e&0xff)}function ta(){q=q&(~f&0xff)}function ua(){q=q&(~g&0xff)}function va(){q=q&(~h&0xff)}function wa(){q=q&(~i&0xff)}function xa(a,b){a=a|0;b=b|0;var c=0;c=a+b|0;U((V()|0)&(d|e|g)|((a^c^b)&0x1000)>>8|c>>16&1);return c&0xffff|0}function ya(a){a=a|0;$(xa(_()|0,a)|0)}function za(a){a=a|0;var b=0;var c=0;b=_()|0;c=b+a+((V()|0)&i)|0;U(((b^c^a)&0x1000)>>8|c>>16&1|(c&0x8000)>>8|(c&0xffff?0:e)|((a^b^0x8000)&(a^c)&0x8000)>>13);$(c)}function Aa(a){a=a|0;var b=0;var c=0;b=_()|0;c=b-a-((V()|0)&1)|0;U(((b^c^a)&0x1000)>>8|c>>16&1|(c&0x8000)>>8|(c&0xffff?0:e)|(a&b&(a^c)&0x8000)>>13|h);$(c)}function Ba(){W((X()|0)+1|0)}function Ca(){W((X()|0)-1|0)}function Da(){$((_()|0)+1|0)}function Ea(){$((_()|0)-1|0)}function Fa(){Y((Z()|0)+1|0)}function Ga(){Y((Z()|0)-1|0)}function Ha(){var a=0;a=T()|0;S((a<<1|(a&0x80)>>7)&255|0);U((V()|0)&0xEC|(T()|0)&0x01|0)}function Ia(){var a=0;var b=0;a=(V()|0)&i;b=T()|0;U((V()|0)&0xEC|(b&0x80)>>7|0);S((b<<1|a)&255|0)}function Ja(){var a=0;a=T()|0;U((V()|0)&0xEC|a&0x01|0);S(a>>1|a<<7&255|0)}function Ka(){var a=0;var b=0;a=(V()|0)&i;b=T()|0;U((V()|0)&0xEC|b&0x01|0);S(b>>1|a<<7|0)}function La(){Ea();U((H()|0?h:h|e)|0)}function Ma(){Da();U((H()|0?h:h|e)|0)}function Na(){Ea();U((H()|0?h:h|e)|0)}function Oa(){Da();U((H()|0?h:h|e)|0)}function Pa(){Ga();Ea();Ca();U((V()|0)&0xE9|(X()|0?g:0)|0)}function Qa(){Fa();Da();Ca();U((V()|0)&0xE9|(X()|0?g:0)|0)}function Ra(a){a=a|0;var b=0;b=(T()|0)+a|0;U(x(b&255|0)|0|(b&256)>>8|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Sa(a){a=a|0;var b=0;b=(T()|0)+a+((V()|0)&i)|0;U(x(b&255|0)|0|(b&256)>>8|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Ta(a){a=a|0;var b=0;b=(T()|0)-a&0x1ff|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Ua(a){a=a|0;var b=0;b=(T()|0)-a-((V()|0)&i)&0x1ff|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Va(a){a=a|0;S((T()|0)&(a&0xff)|0);U(z(T()|0)|0|f|0)}function Wa(a){a=a|0;S(T()|0|a&0xff|0);U(z(T()|0)|0)}function Xa(a){a=a|0;S((T()|0)^a&0xff|0);U(z(T()|0)|0)}function Ya(){S(((T()|0)^0xff)&255|0);U(f|h|0)}function Za(){var a=0;a=T()|0;S(0);Ta(a)}function $a(a){a=a|0;a=(a+1|0)&255;U((V()|0)&i|(x(a)|0)|((a|0)==0x80?g:0)|(a&0x0F?0:f)|0);return a|0}function _a(a){a=a|0;U((V()|0)&i|h|((a|0)==0x80?g:0)|(a&0x0F?0:f)|0);a=(a-1|0)&255;U(V()|0|(x(a)|0));return a|0}function ab(a){a=a|0;var b=0;b=(T()|0)-a|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0))&(a^b)&0x80)>>5|0)}function bb(a){a=a|0;var b=0;b=(T()|0)-a|0;Da();Ca();U((V()|0)&i|(x(b&255|0)|0)|((T()|0)^a^b)&f|(X()|0?g:0)|h|0)}function cb(a){a=a|0;var b=0;b=(T()|0)-a|0;Ea();Ca();U((V()|0)&i|(x(b&255|0)|0)|((T()|0)^a^b)&f|(X()|0?g:0)|h|0)}function db(a){a=a|0;var b=0;b=a>>7|0;a=(a<<1|b)&255|0;U(z(a|0)|0|b|0);return a|0}function eb(a){a=a|0;var b=0;b=a>>7|0;a=(a<<1|(V()|0)&1)&255;U(z(a|0)|0|b|0);return a|0}function fb(a){a=a|0;var b=0;b=a&1|0;a=a>>1|b<<7&255;U(z(a|0)|0|b|0);return a|0}function gb(a){a=a|0;var b=0;b=a&1|0;a=a>>1|(V()|0)<<7&255;U(z(a|0)|0|b|0);return a|0}function hb(a){a=a|0;var b=0;b=a>>7|0;a=a<<1&255;U(z(a|0)|0|b|0);return a|0}function ib(a){a=a|0;var b=0;b=a&1|0;a=a>>1|a&0x80;U(z(a|0)|0|b|0);return a|0}function jb(a){a=a|0;var b=0;b=a&1|0;a=a>>1;U(z(a|0)|0|b|0);return a|0}function kb(a){a=a|0;U((V()|0)&i|(z(a|0)|0)|0)}function lb(a,b){a=a|0;b=b|0;S(b);U((V()|0)&i|(x(b)|0)|a<<2|0)}function mb(a,b,c){a=a|0;b=b|0;c=c|0;S(c&127|b&128);U((V()|0)&i|(x(T()|0)|0)|a<<2|0)}return{getPTable:v,setPTable:w,getZSTable:x,setZSTable:y,getZSPTable:z,setZSPTable:A,initialize:B,clear:F,setB:G,getB:H,setC:I,getC:J,setD:K,getD:L,setE:M,getE:N,setH:O,getH:P,setL:Q,getL:R,setA:S,getA:T,setF:U,getF:V,setBC:W,getBC:X,setDE:Y,getDE:Z,setHL:$,getHL:_,setAF:aa,getAF:ba,testFlag:ca,setFlag:da,clearFlag:ea,flagS:fa,flagZ:ga,flagH:ha,flagP:ia,flagN:ja,flagC:ka,setFlagS:la,setFlagZ:ma,setFlagH:na,setFlagP:oa,setFlagN:pa,setFlagC:qa,clearFlagS:ra,clearFlagZ:sa,clearFlagH:ta,clearFlagP:ua,clearFlagN:va,clearFlagC:wa,ADDW:xa,ADD_HL:ya,ADC_HL:za,SBC_HL:Aa,incBC:Ba,decBC:Ca,incHL:Da,decHL:Ea,incDE:Fa,decDE:Ga,RLCA:Ha,RLA:Ia,RRCA:Ja,RRA:Ka,postIND:La,postINI:Ma,postOUTD:Na,postOUTI:Oa,onLDD:Pa,onLDI:Qa,addAcc:Ra,addAccWithCarry:Sa,subAcc:Ta,subAccWithCarry:Ua,andAcc:Va,orAcc:Wa,xorAcc:Xa,CPL:Ya,NEG:Za,getINCValue:$a,getDECValue:_a,compareAcc:ab,CPI:bb,CPD:cb,RLC:db,RL:eb,RRC:fb,RR:gb,SLA:hb,SRA:ib,SRL:jb,onReadIoPort:kb,LD_A_I:lb,LD_A_R:mb}}var d=a("./bin-util.js"),e=function(){var a=Function("return this;")(),b=d,e=new ArrayBuffer(65536);this._reg8=c(a,b,e),this._reg8.initialize(),this.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0,this.getB=this._reg8.getB,this.getC=this._reg8.getC,this.getD=this._reg8.getD,this.getE=this._reg8.getE,this.getH=this._reg8.getH,this.getL=this._reg8.getL,this.getA=this._reg8.getA,this.getF=this._reg8.getF,this.setB=this._reg8.setB,this.setC=this._reg8.setC,this.setD=this._reg8.setD,this.setE=this._reg8.setE,this.setH=this._reg8.setH,this.setL=this._reg8.setL,this.setA=this._reg8.setA,this.setF=this._reg8.setF,this.testFlag=this._reg8.testFlag,this.flagS=this._reg8.flagS,this.flagZ=this._reg8.flagZ,this.flagH=this._reg8.flagH,this.flagP=this._reg8.flagP,this.flagN=this._reg8.flagN,this.flagC=this._reg8.flagC,this.setFlag=this._reg8.setFlag,this.setFlagS=this._reg8.setFlagS,this.setFlagZ=this._reg8.setFlagZ,this.setFlagH=this._reg8.setFlagH,this.setFlagP=this._reg8.setFlagP,this.setFlagN=this._reg8.setFlagN,this.setFlagC=this._reg8.setFlagC,this.clearFlag=this._reg8.clearFlag,this.clearFlagS=this._reg8.clearFlagS,this.clearFlagZ=this._reg8.clearFlagZ,this.clearFlagH=this._reg8.clearFlagH,this.clearFlagP=this._reg8.clearFlagP,this.clearFlagN=this._reg8.clearFlagN,this.clearFlagC=this._reg8.clearFlagC,this.getHL=this._reg8.getHL,this.getBC=this._reg8.getBC,this.getDE=this._reg8.getDE,this.getAF=this._reg8.getAF,this.setHL=this._reg8.setHL,this.setBC=this._reg8.setBC,this.setDE=this._reg8.setDE,this.setAF=this._reg8.setAF,this.ADD_HL=this._reg8.ADD_HL,this.ADC_HL=this._reg8.ADC_HL,this.SBC_HL=this._reg8.SBC_HL,this.incBC=this._reg8.incBC,this.decBC=this._reg8.decBC,this.incHL=this._reg8.incHL,this.decHL=this._reg8.decHL,this.incDE=this._reg8.incDE,this.decDE=this._reg8.decDE,this.RLCA=this._reg8.RLCA,this.RLA=this._reg8.RLA,this.RRCA=this._reg8.RRCA,this.RRA=this._reg8.RRA,this.postIND=this._reg8.postIND,this.postINI=this._reg8.postINI,this.postOUTD=this._reg8.postOUTD,this.postOUTI=this._reg8.postOUTI,this.onLDD=this._reg8.onLDD,this.onLDI=this._reg8.onLDI,this.addAcc=this._reg8.addAcc,this.addAccWithCarry=this._reg8.addAccWithCarry,this.subAcc=this._reg8.subAcc,this.subAccWithCarry=this._reg8.subAccWithCarry,this.andAcc=this._reg8.andAcc,this.orAcc=this._reg8.orAcc,this.xorAcc=this._reg8.xorAcc,this.CPL=this._reg8.CPL,this.NEG=this._reg8.NEG,this.getINCValue=this._reg8.getINCValue,this.getDECValue=this._reg8.getDECValue,this.compareAcc=this._reg8.compareAcc,this.CPI=this._reg8.CPI,this.CPD=this._reg8.CPD,this.RLC=this._reg8.RLC,this.RL=this._reg8.RL,this.RRC=this._reg8.RRC,this.RR=this._reg8.RR,this.SLA=this._reg8.SLA,this.SRA=this._reg8.SRA,this.SRL=this._reg8.SRL,this.onReadIoPort=this._reg8.onReadIoPort};e.prototype.cloneRaw=function(){return{B:this.getB(),C:this.getC(),D:this.getD(),E:this.getE(),H:this.getH(),L:this.getL(),A:this.getA(),F:this.getF(),PC:this.PC,SP:this.SP,IX:this.IX,IY:this.IY,R:this.R,I:this.I}},e.prototype.clear=function(){this._reg8.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0},e.prototype.setFrom=function(a){this.setB(a.getB()),this.setC(a.getC()),this.setD(a.getD()),this.setE(a.getE()),this.setH(a.getH()),this.setL(a.getL()),this.setA(a.getA()),this.setF(a.getF()),this.PC=a.PC,this.SP=a.SP,this.IX=a.IX,this.IY=a.IY,this.R=a.R,this.I=a.I},e.prototype.setPair=function(a,b){switch(a){case"SP":this.SP=b;break;case"PC":this.PC=b;break;case"IX":this.IX=b;break;case"IY":this.IY=b;break;case"BC":this.setBC(b);break;case"DE":this.setDE(b);break;case"HL":this.setHL(b);break;case"AF":this.setAF(b)}},e.prototype.debugDump=function(){console.info("B:"+this.getB().HEX(2)+"H "+this.getB()+" C:"+this.getC().HEX(2)+"H "+this.getC()+" / "+this.getBC()),console.info("D:"+this.getD().HEX(2)+"H "+this.getD()+" E:"+this.getE().HEX(2)+"H "+this.getE()+" / "+this.getDE()),console.info("H:"+this.getH().HEX(2)+"H "+this.getH()+" L:"+this.getL().HEX(2)+"H "+this.getL()+" / "+this.getHL()),console.info("A:"+this.getA().HEX(2)+"H "+this.getA()),console.info("SZ-HPN-C"),console.info(this.getF().bin(8)),console.info("PC:"+this.PC.HEX(4)+"H "+this.PC.bin(16)+"(2) "+this.PC),console.info("SP:"+this.SP.HEX(4)+"H "+this.SP.bin(16)+"(2) "+this.SP),console.info("I:"+this.I.HEX(2)+"H "+this.I.bin(8)+"(2) "+this.I+" R:"+this.R.HEX(2)+"H "+this.R.bin(8)+"(2) "+this.R)},e.prototype.ADD_IX=function(a){this.IX=this._reg8.ADDW(this.IX,a)},e.prototype.ADD_IY=function(a){this.IY=this._reg8.ADDW(this.IY,a)},e.prototype.jumpRel=function(a){this.PC+=d.getSignedByte(a)},e.prototype.increment=function(a){this["set"+a](this.getINCValue(this["get"+a]()))},e.prototype.decrement=function(a){this["set"+a](this.getDECValue(this["get"+a]()))},e.prototype.LD_A_I=function(a){this._reg8.LD_A_I(a,this.I)},e.prototype.LD_A_R=function(a,b){this._reg8.LD_A_R(a,b,this.R)},e.REG_r_ID2NAME={0:"B",1:"C",2:"D",3:"E",4:"H",5:"L",7:"A"},e.CONDITION_INDEX={NZ:0,Z:1,NC:2,C:3,PO:4,PE:5,P:6,N:7};e.prototype.DAA=function(){var a=this.getA(),b=this.getF();1&b&&(a|=256),16&b&&(a|=512),2&b&&(a|=1024),this.setAF(f[a])};var f=[68,256,512,772,1024,1284,1540,1792,2056,2316,4112,4372,4628,4880,5140,5392,4096,4356,4612,4864,5124,5376,5632,5892,6156,6408,8240,8500,8756,9008,9268,9520,8224,8484,8740,8992,9252,9504,9760,10020,10284,10536,12340,12592,12848,13108,13360,13620,12324,12576,12832,13092,13344,13604,13860,14112,14376,14636,16400,16660,16916,17168,17428,17680,16384,16644,16900,17152,17412,17664,17920,18180,18444,18696,20500,20752,21008,21268,21520,21780,20484,20736,20992,21252,21504,21764,22020,22272,22536,22796,24628,24880,25136,25396,25648,25908,24612,24864,25120,25380,25632,25892,26148,26400,26664,26924,28720,28980,29236,29488,29748,3e4,28704,28964,29220,29472,29732,29984,30240,30500,30764,31016,-32624,-32364,-32108,-31856,-31596,-31344,-32640,-32380,-32124,-31872,-31612,-31360,-31104,-30844,-30580,-30328,-28524,-28272,-28016,-27756,-27504,-27244,-28540,-28288,-28032,-27772,-27520,-27260,-27004,-26752,-26488,-26228,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,24613,24865,25121,25381,25633,25893,26149,26401,26665,26925,28721,28981,29237,29489,29749,30001,28705,28965,29221,29473,29733,29985,30241,30501,30765,31017,-32623,-32363,-32107,-31855,-31595,-31343,-32639,-32379,-32123,-31871,-31611,-31359,-31103,-30843,-30579,-30327,-28523,-28271,-28015,-27755,-27503,-27243,-28539,-28287,-28031,-27771,-27519,-27259,-27003,-26751,-26487,-26227,-24395,-24143,-23887,-23627,-23375,-23115,-24411,-24159,-23903,-23643,-23391,-23131,-22875,-22623,-22359,-22099,-20303,-20043,-19787,-19535,-19275,-19023,-20319,-20059,-19803,-19551,-19291,-19039,-18783,-18523,-18259,-18007,-16235,-15983,-15727,-15467,-15215,-14955,-16251,-15999,-15743,-15483,-15231,-14971,-14715,-14463,-14199,-13939,-12143,-11883,-11627,-11375,-11115,-10863,-12159,-11899,-11643,-11391,-11131,-10879,-10623,-10363,-10099,-9847,-8015,-7755,-7499,-7247,-6987,-6735,-8031,-7771,-7515,-7263,-7003,-6751,-6495,-6235,-5971,-5719,-3915,-3663,-3407,-3147,-2895,-2635,-3931,-3679,-3423,-3163,-2911,-2651,-2395,-2143,-1879,-1619,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,1540,1792,2056,2316,2572,2824,3084,3336,3592,3852,4112,4372,4628,4880,5140,5392,5632,5892,6156,6408,6664,6924,7176,7436,7692,7944,8240,8500,8756,9008,9268,9520,9760,10020,10284,10536,10792,11052,11304,11564,11820,12072,12340,12592,12848,13108,13360,13620,13860,14112,14376,14636,14892,15144,15404,15656,15912,16172,16400,16660,16916,17168,17428,17680,17920,18180,18444,18696,18952,19212,19464,19724,19980,20232,20500,20752,21008,21268,21520,21780,22020,22272,22536,22796,23052,23304,23564,23816,24072,24332,24628,24880,25136,25396,25648,25908,26148,26400,26664,26924,27180,27432,27692,27944,28200,28460,28720,28980,29236,29488,29748,3e4,30240,30500,30764,31016,31272,31532,31784,32044,32300,32552,-32624,-32364,-32108,-31856,-31596,-31344,-31104,-30844,-30580,-30328,-30072,-29812,-29560,-29300,-29044,-28792,-28524,-28272,-28016,-27756,-27504,-27244,-27004,-26752,-26488,-26228,-25972,-25720,-25460,-25208,-24952,-24692,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,26149,26401,26665,26925,27181,27433,27693,27945,28201,28461,28721,28981,29237,29489,29749,30001,30241,30501,30765,31017,31273,31533,31785,32045,32301,32553,-32623,-32363,-32107,-31855,-31595,-31343,-31103,-30843,-30579,-30327,-30071,-29811,-29559,-29299,-29043,-28791,-28523,-28271,-28015,-27755,-27503,-27243,-27003,-26751,-26487,-26227,-25971,-25719,-25459,-25207,-24951,-24691,-24395,-24143,-23887,-23627,-23375,-23115,-22875,-22623,-22359,-22099,-21843,-21591,-21331,-21079,-20823,-20563,-20303,-20043,-19787,-19535,-19275,-19023,-18783,-18523,-18259,-18007,-17751,-17491,-17239,-16979,-16723,-16471,-16235,-15983,-15727,-15467,-15215,-14955,-14715,-14463,-14199,-13939,-13683,-13431,-13171,-12919,-12663,-12403,-12143,-11883,-11627,-11375,-11115,-10863,-10623,-10363,-10099,-9847,-9591,-9331,-9079,-8819,-8563,-8311,-8015,-7755,-7499,-7247,-6987,-6735,-6495,-6235,-5971,-5719,-5463,-5203,-4951,-4691,-4435,-4183,-3915,-3663,-3407,-3147,-2895,-2635,-2395,-2143,-1879,-1619,-1363,-1111,-851,-599,-343,-83,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,70,258,514,774,1026,1286,1542,1794,2058,2318,1026,1286,1542,1794,2058,2318,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,5126,5378,5634,5894,6158,6410,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,9254,9506,9762,10022,10286,10538,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,13346,13606,13862,14114,14378,14638,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,17414,17666,17922,18182,18446,18698,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,21506,21766,22022,22274,22538,22798,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,25634,25894,26150,26402,26666,26926,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,29734,29986,30242,30502,30766,31018,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-31610,-31358,-31102,-30842,-30578,-30326,-28538,-28286,-28030,-27770,-27518,-27258,-27002,-26750,-26486,-26226,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-23389,-23129,-22873,-22621,-22357,-22097,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-19289,-19037,-18781,-18521,-18257,-18005,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-15229,-14969,-14713,-14461,-14197,-13937,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-11129,-10877,-10621,-10361,-10097,-9845,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-7001,-6749,-6493,-6233,-5969,-5717,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-2909,-2649,-2393,-2141,-1877,-1617,71,259,515,775,1027,1287,1543,1795,2059,2319,1027,1287,1543,1795,2059,2319,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,5127,5379,5635,5895,6159,6411,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,9255,9507,9763,10023,10287,10539,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-1346,-1094,-834,-582,-326,-66,70,258,514,774,1026,1286,1542,1794,2058,2318,2590,2842,3102,3354,3610,3870,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,6682,6942,7194,7454,7710,7962,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,10810,11070,11322,11582,11838,12090,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,14910,15162,15422,15674,15930,16190,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,18970,19230,19482,19742,19998,20250,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,23070,23322,23582,23834,24090,24350,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,27198,27450,27710,27962,28218,28478,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,31290,31550,31802,32062,32318,32570,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-30054,-29794,-29542,-29282,-29026,-28774,-28538,-28286,-28030,-27770,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-25953,-25701,-25441,-25189,-24933,-24673,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-21825,-21573,-21313,-21061,-20805,-20545,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-17733,-17473,-17221,-16961,-16705,-16453,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-13665,-13413,-13153,-12901,-12645,-12385,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-9573,-9313,-9061,-8801,-8545,-8293,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-5445,-5185,-4933,-4673,-4417,-4165,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-1345,-1093,-833,-581,-325,-65,71,259,515,775,1027,1287,1543,1795,2059,2319,2591,2843,3103,3355,3611,3871,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,6683,6943,7195,7455,7711,7963,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,10811,11071,11323,11583,11839,12091,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225];b.exports=e}()},{"./bin-util.js":12}],18:[function(a,b,c){"use strict";function d(a){var b=0;switch(a){case"IX":b=j("0335");break;case"IY":b=j("0375")}return b}function e(a){var b=0;switch(a){case"ADD":b=0;break;case"ADC":b=1;break;case"SUB":b=2;break;case"SBC":b=3;break;case"AND":b=4;break;case"OR":b=6;break;case"XOR":b=5;break;case"CP":b=7}return b}function f(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"SP":b=3}return b}function g(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"AF":b=3}return b}function h(a){var b=null;switch(a){case"B":b=0;break;case"C":b=1;break;case"D":b=2;break;case"E":b=3;break;case"H":b=4;break;case"L":b=5;break;case"A":b=7}return b}function i(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(null!=b[c])if("string"==typeof b[c]){if(a[c]!=b[c])return!1}else if("object"==typeof b[c]&&"RegExp"==b[c].constructor.name&&!b[c].test(a[c]))return!1;return!0}var j=a("../lib/oct"),k=function(){this.address=null,this.bytecode=[],this.label=null,this.mnemonic=null,this.operand=null,this.comment="",this.ref_addr_to=null,this.referenced_count=0};k.prototype.setAddress=function(a){this.address=a},k.prototype.setRefAddrTo=function(a){this.ref_addr_to=a},k.prototype.setLabel=function(a){this.label=a},k.prototype.setComment=function(a){this.address=this.address||0,this.comment=a},k.create=function(a,b,c){var d=new k;return d.mnemonic=a,d.operand=b||"",d.bytecode=c||[],d},k.assemble=function(a,b,c){var d=new k;d.address=b;for(var e=k.tokenize(a),f=-1,g=-1,h=0;h<e.length;h++)switch(e[h]){case":":f<0&&g<0&&(f=h);break;case";":g<0&&(g=h)}if(f>=0&&(d.label=e.slice(0,f).join(""),e.splice(0,f+1),g-=f+1),g>=0&&(d.comment=e.slice(g).join(""),e.splice(g)),e.length>0&&(d.mnemonic=e[0],d.operand=e.slice(1).join("")),e.length>0)try{d.bytecode=d.assembleMnemonic(e,c)}catch(a){d.comment+="*** ASSEMBLE ERROR - "+a}return d},k.prototype.getNextAddress=function(){return this.address+this.bytecode.length},k.prototype.getLastAddress=function(){return this.address+this.bytecode.length-1},k.prototype.resolveAddress=function(a){for(var b=0;b<this.bytecode.length;b++)"function"==typeof this.bytecode[b]&&(this.bytecode[b]=this.bytecode[b](a))},k.tokenize=function(a){var b=0,c=a.length,d=0,e=[],f="";for(a=a.toUpperCase();d<c;){var g=a.charAt(d);switch(b){case 0:if(/\s/.test(g))d++;else if("-"==g||"+"==g)f+=g,d++,b=2;else if(/[0-9]/.test(g))b=2;else if(/[A-Z_\?\.\*#!\$]/.test(g))f+=g,d++,b=3;else if("'"==g)f+=g,d++,b=4;else if("("==g||")"==g||","==g||"+"==g||":"==g)e.push(g),d++;else{if(";"!=g)throw"unrecognized char "+g+" at column "+d;e.push(g),d++;var h=a.substr(d);e.push(h),d+=h.length,f=""}break;case 2:/[0-9A-F]/.test(g)?(f+=g,d++):"H"==g?(f+=g,d++,e.push(f),f="",b=0):(e.push(f),f="",b=0);break;case 3:/[A-Z_0-9\?\.\*#!\$']/.test(g)?(f+=g,d++):(e.push(f),f="",b=0);break;case 4:"\\"==g?++d<c&&(g=a.charAt(d),f+=g,d++):"'"!=g?(f+=g,d++):(f+=g,d++,e.push(f),f="",b=0);break;default:throw"unrecognized status "}}return""!=f&&e.push(f),e},k.prototype.assembleMnemonic=function(a,b){var c=this.label;if(i(a,["ORG",null]))return this.address=k._parseNumLiteral(a[1]),[];if(i(a,["ENT"]))return b[c]=this.address,[];if(i(a,["EQU",null])){if(null==c||""==c)throw"empty label for EQU";return b[c]=k._parseNumLiteral(a[1]),[]}if(i(a,["DEFB",null]))return[k.parseNumLiteral(a[1])];if(i(a,["DEFW",null]))return k.parseNumLiteralPair(a[1]);if(i(a,["DEFS",null])){var l=k._parseNumLiteral(a[1]);if(l<0)throw"negative DEFS number "+a[1];for(var m=[],n=0;n<l;n++)m.push(0);return m}if(i(a,["LD","A",",","I"]))return[j("0355"),j("0127")];if(i(a,["LD","A",",","R"]))return[j("0355"),j("0137")];if(i(a,["LD","I",",","A"]))return[j("0355"),j("0107")];if(i(a,["LD","R",",","A"]))return[j("0355"),j("0117")];if(i(a,["LD","B",",","IXH"]))return[221,68];if(i(a,["LD","C",",","IXL"]))return[221,77];if(i(a,["LD","A",",","IXL"]))return[221,125];if(i(a,["ADD","A",",","IXH"]))return[221,132];if(i(a,["ADD","A",",","IXL"]))return[221,133];if(i(a,["LD",/^[BCDEHLA]$/,",",/^[BCDEHLA]$/])){var o=h(a[1]),p=h(a[3]);return[j("0100")|o<<3|p<<0]}if(i(a,["LD",/^[BCDEHLA]$/,",",null]))return function(){var b=h(a[1]),c=k.parseNumLiteral(a[3]);return[j("0006")|b<<3,c]}();if(i(a,["LD",/^[BCDEHLA]$/,",","(","HL",")"]))return function(){var b=h(a[1]);return[j("0106")|b<<3]}();if(i(a,["LD","(","HL",")",",",/^[BCDEHLA]$/]))return function(){var b=h(a[5]);return[j("0160")|b]}();if(i(a,["LD","(","HL",")",",",null]))return function(){var b=k.parseNumLiteral(a[5]);return[j("0066"),b]}();if(i(a,["LD","A",",","(",/^(BC|DE)$/,")"]))return function(){var b=f(a[4]);return[j("0012")|b<<4]}();if(i(a,["LD","A",",","(",null,")"]))return function(){
var b=k.parseNumLiteralPair(a[4]);return[j("0072"),b[0],b[1]]}();if(i(a,["LD","(",/^(BC|DE)$/,")",",","A"]))return function(){var b=f(a[2]);return[j("0002")|b<<4]}();if(i(a,["LD","(",null,")",",","A"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0062"),b[0],b[1]]}();if(i(a,["LD","SP",",","HL"]))return[j("0371")];if(i(a,["LD","SP",",","IX"]))return[221,249];if(i(a,["LD","SP",",","IY"]))return[253,249];if(i(a,["LD",/^(BC|DE|HL|SP)$/,",",null]))return function(){var b=f(a[1]),c=k.parseNumLiteralPair(a[3]);return[j("0001")|b<<4,c[0],c[1]]}();if(i(a,["LD","HL",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0052"),b[0],b[1]]}();if(i(a,["LD","BC",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0113"),b[0],b[1]]}();if(i(a,["LD","DE",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0133"),b[0],b[1]]}();if(i(a,["LD","SP",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0173"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","HL"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0042"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","BC"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0103"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","DE"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0123"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","SP"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0163"),b[0],b[1]]}();if(i(a,["PUSH",/^(BC|DE|HL|AF)$/]))return function(){var b=g(a[1]);return[j("0305")|b<<4]}();if(i(a,["POP",/^(BC|DE|HL|AF)$/]))return function(){var b=g(a[1]);return[j("0301")|b<<4]}();if(i(a,["LD","IXH",",","B"]))return[221,96];if(i(a,["LD","IXL",",","C"]))return[221,105];if(i(a,["LD","IXH",",","A"]))return[221,103];if(i(a,["LD","IXL",",","A"]))return[221,111];if(i(a,["CP","IXL"]))return[221,189];if(i(a,["EX","DE",",","HL"]))return[235];if(i(a,["EX","AF",",","AF'"]))return[8];if(i(a,["EXX"]))return[217];if(i(a,["EX","(","SP",")",",","HL"]))return[227];if(i(a,["LDI"]))return[j("0355"),j("0240")];if(i(a,["LDIR"]))return[j("0355"),j("0260")];if(i(a,["LDD"]))return[j("0355"),j("0250")];if(i(a,["LDDR"]))return[j("0355"),j("0270")];if(i(a,["CPI"]))return[j("0355"),j("0241")];if(i(a,["CPIR"]))return[j("0355"),j("0261")];if(i(a,["CPD"]))return[j("0355"),j("0251")];if(i(a,["CPDR"]))return[j("0355"),j("0271")];if(i(a,["DAA"]))return[j("0047")];if(i(a,["CPL"]))return[j("0057")];if(i(a,["NEG"]))return[j("0355"),j("0104")];if(i(a,["CCF"]))return[j("0077")];if(i(a,["SCF"]))return[j("0067")];if(i(a,["NOP"]))return[j("0000")];if(i(a,["HALT"]))return[j("0166")];if(i(a,["DI"]))return[j("0363")];if(i(a,["EI"]))return[j("0373")];if(i(a,["IM0"]))return[j("0355"),j("0106")];if(i(a,["IM1"]))return[j("0355"),j("0126")];if(i(a,["IM2"]))return[j("0355"),j("0136")];if(i(a,["IM","0"]))return[j("0355"),j("0106")];if(i(a,["IM","1"]))return[j("0355"),j("0126")];if(i(a,["IM","2"]))return[j("0355"),j("0136")];if(i(a,[/^(ADD|ADC|SBC)$/,"HL",",",/^(BC|DE|HL|SP)$/])){var q=0;switch(a[3]){case"BC":q=0;break;case"DE":q=1;break;case"HL":q=2;break;case"SP":q=3}switch(a[0]){case"ADD":return[j("0011")|q<<4];case"ADC":return[j("0355"),j("0112")|q<<4];case"SBC":return[j("0355"),j("0102")|q<<4]}return[]}if(i(a,["ADD","IX",",",/^(BC|DE|IX|SP)$/])){switch(a[3]){case"BC":return[j("0335"),j("0011")];case"DE":return[j("0335"),j("0031")];case"IX":return[j("0335"),j("0051")];case"SP":return[j("0335"),j("0071")]}return[]}if(i(a,["ADD","IY",",",/^(BC|DE|IY|SP)$/])){switch(a[3]){case"BC":return[j("0375"),j("0011")];case"DE":return[j("0375"),j("0031")];case"IY":return[j("0375"),j("0051")];case"SP":return[j("0375"),j("0071")]}return[]}if(i(a,[/^(INC|DEC)$/,/^(BC|DE|HL|SP|IX|IY)$/])){switch(a[0]){case"INC":switch(a[1]){case"BC":return[j("0003")];case"DE":return[j("0023")];case"HL":return[j("0043")];case"SP":return[j("0063")];case"IX":return[j("0335"),j("0043")];case"IY":return[j("0375"),j("0043")]}break;case"DEC":switch(a[1]){case"BC":return[j("0013")];case"DE":return[j("0033")];case"HL":return[j("0053")];case"SP":return[j("0073")];case"IX":return[j("0335"),j("0053")];case"IY":return[j("0375"),j("0053")]}}return[]}if(i(a,["RLCA"]))return[j("0007")];if(i(a,["RLA"]))return[j("0027")];if(i(a,["RRCA"]))return[j("0017")];if(i(a,["RRA"]))return[j("0037")];if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,/^[BCDEHLA]$/])){switch(a[0]){case"RLC":return[j("0313"),j("0000")|h(a[1])];case"RL":return[j("0313"),j("0020")|h(a[1])];case"RRC":return[j("0313"),j("0010")|h(a[1])];case"RR":return[j("0313"),j("0030")|h(a[1])];case"SLA":return[j("0313"),j("0040")|h(a[1])];case"SRA":return[j("0313"),j("0050")|h(a[1])];case"SRL":return[j("0313"),j("0070")|h(a[1])]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(","HL",")"])){switch(a[0]){case"RLC":return[j("0313"),j("0006")];case"RL":return[j("0313"),j("0026")];case"RRC":return[j("0313"),j("0016")];case"RR":return[j("0313"),j("0036")];case"SLA":return[j("0313"),j("0046")];case"SRA":return[j("0313"),j("0056")];case"SRL":return[j("0313"),j("0076")]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[3]?4:3,c=0;switch(a[2]){case"IX":c=j("0335");break;case"IY":c=j("0375")}var d=k.parseNumLiteral(a[b]);switch(a[0]){case"RLC":return[c,j("0313"),d,j("0006")];case"RL":return[c,j("0313"),d,j("0026")];case"RRC":return[c,j("0313"),d,j("0016")];case"RR":return[c,j("0313"),d,j("0036")];case"SLA":return[c,j("0313"),d,j("0046")];case"SRA":return[c,j("0313"),d,j("0056")];case"SRL":return[c,j("0313"),d,j("0076")]}return[]}();if(i(a,["RLD"]))return[j("0355"),j("0157")];if(i(a,["RRD"]))return[j("0355"),j("0147")];if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",",/^[BCDEHLA]$/])){switch(a[0]){case"BIT":return[j("0313"),j("0100")|a[1]<<3|h(a[3])];case"SET":return[j("0313"),j("0300")|a[1]<<3|h(a[3])];case"RES":return[j("0313"),j("0200")|a[1]<<3|h(a[3])]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(","HL",")"])){switch(a[0]){case"BIT":return[j("0313"),j("0106")|a[1]<<3];case"SET":return[j("0313"),j("0306")|a[1]<<3];case"RES":return[j("0313"),j("0206")|a[1]<<3]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[5]?6:5,c=0;switch(a[4]){case"IX":c=j("0335");break;case"IY":c=j("0375")}var d=k.parseNumLiteral(a[b]);switch(a[0]){case"BIT":return[c,j("0313"),d,j("0106")|a[1]<<3];case"SET":return[c,j("0313"),d,j("0306")|a[1]<<3];case"RES":return[c,j("0313"),d,j("0206")|a[1]<<3]}return[]}();if(i(a,["JP",null]))return function(){var b=k.parseNumLiteralPair(a[1]);return[j("0303"),b[0],b[1]]}();if(i(a,["JP",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[j("0302"),b[0],b[1]];case"Z":return[j("0312"),b[0],b[1]];case"NC":return[j("0322"),b[0],b[1]];case"C":return[j("0332"),b[0],b[1]];case"PO":return[j("0342"),b[0],b[1]];case"PE":return[j("0352"),b[0],b[1]];case"P":return[j("0362"),b[0],b[1]];case"M":return[j("0372"),b[0],b[1]]}return[]}();if(i(a,["JR",null]))return function(){var b=k.parseRelAddr(a[1],this.address+2);return[j("0030"),b]}.bind(this)();if(i(a,["JR",/^(NZ|Z|NC|C)$/,",",null]))return function(){var b=k.parseRelAddr(a[3],this.address+2);switch(a[1]){case"NZ":return[j("0040"),b];case"Z":return[j("0050"),b];case"NC":return[j("0060"),b];case"C":return[j("0070"),b]}return[]}.bind(this)();if(i(a,["JP","(",/^(HL|IX|IY)$/,")"])){switch(a[2]){case"HL":return[j("0351")];case"IX":return[j("0335"),j("0351")];case"IY":return[j("0375"),j("0351")]}return[]}if(i(a,["DJNZ",null]))return function(){var b=k.parseRelAddr(a[1],this.address+2);return[j("0020"),b]}.bind(this)();if(i(a,["CALL",null]))return function(){var b=k.parseNumLiteralPair(a[1]);return[j("0315"),b[0],b[1]]}();if(i(a,["CALL",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[j("0304"),b[0],b[1]];case"Z":return[j("0314"),b[0],b[1]];case"NC":return[j("0324"),b[0],b[1]];case"C":return[j("0334"),b[0],b[1]];case"PO":return[j("0344"),b[0],b[1]];case"PE":return[j("0354"),b[0],b[1]];case"P":return[j("0364"),b[0],b[1]];case"M":return[j("0374"),b[0],b[1]]}return[]}();if(i(a,["RET"]))return[j("0311")];if(i(a,["RET",/^(NZ|Z|NC|C|PO|PE|P|M)$/])){switch(a[1]){case"NZ":return[j("0300")];case"Z":return[j("0310")];case"NC":return[j("0320")];case"C":return[j("0330")];case"PO":return[j("0340")];case"PE":return[j("0350")];case"P":return[j("0360")];case"M":return[j("0370")]}return[]}if(i(a,["RETI"]))return[j("0355"),j("0115")];if(i(a,["RETN"]))return[j("0355"),j("0105")];if(i(a,["RST",/^(00H|08H|10H|18H|20H|28H|30H|38H)$/])){switch(a[1]){case"00H":return[j("0307")];case"08H":return[j("0317")];case"10H":return[j("0327")];case"18H":return[j("0337")];case"20H":return[j("0347")];case"28H":return[j("0357")];case"30H":return[j("0367")];case"38H":return[j("0377")]}return[]}if(i(a,["IN",/^[BCDEHLA]$/,",","(","C",")"]))return function(){var b=h(a[1]);return[j("0355"),j("0100")|b<<3]}();if(i(a,["IN","A",",","(",null,")"]))return function(){var b=k.parseNumLiteral(a[4]);return[j("0333"),b]}();if(i(a,["OUT","(","C",")",",",/^[BCDEHLA]$/]))return function(){var b=h(a[5]);return[j("0355"),j("0101")|b<<3]}();if(i(a,["OUT","(",null,")",",","A"]))return function(){var b=k.parseNumLiteral(a[2]);return[j("0323"),b]}();if(i(a,["INI"]))return[j("0355"),j("0242")];if(i(a,["INIR"]))return[j("0355"),j("0262")];if(i(a,["IND"]))return[j("0355"),j("0252")];if(i(a,["INDR"]))return[j("0355"),j("0272")];if(i(a,["OUTI"]))return[j("0355"),j("0243")];if(i(a,["OTIR"]))return[j("0355"),j("0263")];if(i(a,["OUTD"]))return[j("0355"),j("0253")];if(i(a,["OTDR"]))return[j("0355"),j("0273")];if(i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,null,")"]))return function(){var b="+"==a[5]?6:5,c=h(a[1]),e=k.parseNumLiteral(a[b]);return[d(a[4]),j("0106")|c<<3,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",/^[BCDEHLA]$/])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",/^[BCDEHLA]$/]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=k.parseNumLiteral(a[b]),f=h(a[c]);return[d(a[2]),j("0160")|f,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",null])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",null]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=k.parseNumLiteral(a[b]),f=k.parseNumLiteral(a[c]);return[d(a[2]),54,e,f]}();if(i(a,["LD",/^(IX|IY)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);return[d(a[1]),33,b[0],b[1]]}();if(i(a,["LD",/^(IX|IY)$/,",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[d(a[1]),42,b[0],b[1]]}();if(i(a,["PUSH",/^(IX|IY)$/]))return function(){return[d(a[1]),229]}();if(i(a,["POP",/^(IX|IY)$/]))return function(){return[d(a[1]),225]}();if(i(a,["EX","(","SP",")",",",/^(IX|IY)$/]))return function(){return[d(a[5]),227]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",/^[BCDEHLA]$/]))return function(){var b=e(a[0]),c=h(a[3]);return[j("0200")|b<<3|c]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",null]))return function(){var b=e(a[0]),c=k.parseNumLiteral(a[3]);return[j("0306")|b<<3,c]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(","HL",")"]))return function(){var b=e(a[0]);return[j("0206")|b<<3]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[5]?6:5,c=e(a[0]),f=k.parseNumLiteral(a[b]);return[d(a[4]),j("0206")|c<<3,f]}();if(i(a,[/^(AND|OR|XOR|CP)$/,/^[BCDEHLA]$/]))return function(){var b=e(a[0]),c=h(a[1]);return[j("0200")|b<<3|c]}();if(i(a,[/^(AND|OR|XOR|CP)$/,null]))return function(){var b=e(a[0]),c=k.parseNumLiteral(a[1]);return[j("0306")|b<<3,c]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(","HL",")"]))return function(){var b=e(a[0]);return[j("0206")|b<<3]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[3]?4:3,c=e(a[0]),f=k.parseNumLiteral(a[b]);return[d(a[2]),j("0206")|c<<3,f]}();if(i(a,[/^(INC|DEC)$/,/^[BCDEHLA]$/]))return function(){var b=h(a[1]);switch(a[0]){case"INC":return[j("0004")|b<<3];case"DEC":return[j("0005")|b<<3]}}();if(i(a,[/^(INC|DEC)$/,"(","HL",")"]))switch(a[0]){case"INC":return[j("0064")];case"DEC":return[j("0065")]}return i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"])?function(){var b=d(a[2]),c="+"==a[3]?4:3,e=k.parseNumLiteral(a[c]);switch(a[0]){case"INC":return[b,j("0064"),e];case"DEC":return[b,j("0065"),e]}}():(console.warn("**** ERROR: CANNOT ASSEMBLE:"+a.join(" / ")),[])},k.parseNumLiteral=function(a){var b=k._parseNumLiteral(a);if("number"==typeof b){if(b<-128||256<=b)throw"operand "+a+" out of range";return 255&b}return function(b){return k.dereferLowByte(a,b)}},k.parseNumLiteralPair=function(a){var b=k._parseNumLiteral(a);if("number"==typeof b){if(b<-32768||65535<b)throw"operand "+a+" out of range";return[255&b,b>>8&255]}return[function(b){return k.dereferLowByte(a,b)},function(b){return k.dereferHighByte(a,b)}]},k.parseRelAddr=function(a,b){var c=k._parseNumLiteral(a);if("number"==typeof c){var d=a.charAt(0);if("+"!=d&&"-"!=d&&(c=c-b+2),(c-=2)<-128||256<=c)throw"operand "+a+" out of range";return 255&c}return function(c){return k.derefer(a,c)-b&255}},k.dereferLowByte=function(a,b){return 255&k.derefer(a,b)},k.dereferHighByte=function(a,b){return k.derefer(a,b)>>8&255},k.derefer=function(a,b){return a in b?b[a]:0},k._parseNumLiteral=function(a){if(/^[\+\-]?[0-9]+$/.test(a)||/^[\+\-]?[0-9A-F]+H$/i.test(a)){var b,c=0,d=/^\-/.test(a)?-1:1;return/[hH]$/.test(a)?(b=a.match(/^[\+\-]?([0-9a-fA-F]+)[hH]$/),c=parseInt(b[1],16)):/^[\+\-]?0/.test(a)?(b=a.match(/^[\+\-]?([0-7]+)$/),c=parseInt(b[1],8)):(b=a.match(/^[\+\-]?([0-9]+)$/),c=parseInt(b[1],10)),d*c}return a},b.exports=k},{"../lib/oct":37}],19:[function(a,b,c){!function(a,c){"use strict";"object"==typeof b&&"object"==typeof b.exports?b.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||_;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=la.type(a);return"function"!==c&&!la.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,c){if(la.isFunction(b))return la.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return la.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(va.test(b))return la.filter(b,a,c);b=la.filter(b,a)}return la.grep(a,function(a){return ea.call(b,a)>-1!==c&&1===a.nodeType})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return la.each(a.match(Aa)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&la.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&la.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){_.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),la.ready()}function l(){this.expando=la.expando+l.uid++}function m(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ia,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ha.test(c)?JSON.parse(c):c)}catch(a){}Ga.set(a,b,c)}else c=void 0;return c}function n(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return la.css(a,b,"")},i=h(),j=c&&c[3]||(la.cssNumber[b]?"":"px"),k=(la.cssNumber[b]||"px"!==j&&+i)&&Ka.exec(la.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,la.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function o(a){var b,c=a.ownerDocument,d=a.nodeName,e=Oa[d];return e||(b=c.body.appendChild(c.createElement(d)),e=la.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Oa[d]=e,e)}function p(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Fa.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Ma(d)&&(e[f]=o(d))):"none"!==c&&(e[f]="none",Fa.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function q(a,b){var c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&la.nodeName(a,b)?la.merge([a],c):c}function r(a,b){for(var c=0,d=a.length;c<d;c++)Fa.set(a[c],"globalEval",!b||Fa.get(b[c],"globalEval"))}function s(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if((f=a[n])||0===f)if("object"===la.type(f))la.merge(m,f.nodeType?[f]:f);else if(Ta.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Qa.exec(f)||["",""])[1].toLowerCase(),i=Sa[h]||Sa._default,g.innerHTML=i[1]+la.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;la.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&la.inArray(f,d)>-1)e&&e.push(f);else if(j=la.contains(f.ownerDocument,f),g=q(l.appendChild(f),"script"),j&&r(g),c)for(k=0;f=g[k++];)Ra.test(f.type||"")&&c.push(f);return l}function t(){return!0}function u(){return!1}function v(){try{return _.activeElement}catch(a){}}function w(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)w(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=u;else if(!e)return a;return 1===f&&(g=e,e=function(a){return la().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=la.guid++)),a.each(function(){la.event.add(this,b,e,d,c)})}function x(a,b){return la.nodeName(a,"table")&&la.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function y(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function z(a){var b=_a.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Fa.hasData(a)&&(f=Fa.access(a),g=Fa.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)la.event.add(b,e,j[e][c])}Ga.hasData(a)&&(h=Ga.access(a),i=la.extend({},h),Ga.set(b,i))}}function B(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Pa.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function C(a,b,d,e){b=ca.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=la.isFunction(o);if(p||m>1&&"string"==typeof o&&!ka.checkClone&&$a.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),C(f,b,d,e)});if(m&&(f=s(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=la.map(q(f,"script"),y),i=h.length;l<m;l++)j=f,l!==n&&(j=la.clone(j,!0,!0),i&&la.merge(h,q(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,la.map(h,z),l=0;l<i;l++)j=h[l],Ra.test(j.type||"")&&!Fa.access(j,"globalEval")&&la.contains(k,j)&&(j.src?la._evalUrl&&la._evalUrl(j.src):c(j.textContent.replace(ab,""),k))}return a}function D(a,b,c){for(var d,e=b?la.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||la.cleanData(q(d)),d.parentNode&&(c&&la.contains(d.ownerDocument,d)&&r(q(d,"script")),d.parentNode.removeChild(d));return a}function E(a,b,c){var d,e,f,g,h=a.style;return c=c||db(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||la.contains(a.ownerDocument,a)||(g=la.style(a,b)),!ka.pixelMarginRight()&&cb.test(g)&&bb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function F(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function G(a){if(a in ib)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=hb.length;c--;)if((a=hb[c]+b)in ib)return a}function H(a,b,c){var d=Ka.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function I(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=la.css(a,c+La[f],!0,e)),d?("content"===c&&(g-=la.css(a,"padding"+La[f],!0,e)),"margin"!==c&&(g-=la.css(a,"border"+La[f]+"Width",!0,e))):(g+=la.css(a,"padding"+La[f],!0,e),"padding"!==c&&(g+=la.css(a,"border"+La[f]+"Width",!0,e)));return g}function J(a,b,c){var d,e=!0,f=db(a),g="border-box"===la.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=E(a,b,f),(d<0||null==d)&&(d=a.style[b]),cb.test(d))return d;e=g&&(ka.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+I(a,b,c||(g?"border":"content"),e,f)+"px"}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(){kb&&(a.requestAnimationFrame(L),la.fx.tick())}function M(){return a.setTimeout(function(){jb=void 0}),jb=la.now()}function N(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=La[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function O(a,b,c){for(var d,e=(R.tweeners[b]||[]).concat(R.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function P(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,q=a.nodeType&&Ma(a),r=Fa.get(a,"fxshow");c.queue||(g=la._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,la.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],lb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}n[d]=r&&r[d]||la.style(a,d)}if((i=!la.isEmptyObject(b))||!la.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Fa.get(a,"display")),k=la.css(a,"display"),"none"===k&&(j?k=j:(p([a],!0),j=a.style.display||j,k=la.css(a,"display"),p([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===la.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(q=r.hidden):r=Fa.access(a,"fxshow",{display:j}),f&&(r.hidden=!q),q&&p([a],!0),m.done(function(){q||p([a]),Fa.remove(a,"fxshow");for(d in n)la.style(a,d,n[d])})),i=O(q?r[d]:0,d,m),d in r||(r[d]=i.start,q&&(i.end=i.start,i.start=0))}}function Q(a,b){var c,d,e,f,g;for(c in a)if(d=la.camelCase(c),e=b[d],f=a[c],la.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=la.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function R(a,b,c){var d,e,f=0,g=R.prefilters.length,h=la.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=jb||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:la.extend({},b),opts:la.extend(!0,{specialEasing:{},easing:la.easing._default},c),originalProperties:b,originalOptions:c,startTime:jb||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=la.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Q(k,j.opts.specialEasing);f<g;f++)if(d=R.prefilters[f].call(j,a,k,j.opts))return la.isFunction(d.stop)&&(la._queueHooks(j.elem,j.opts.queue).stop=la.proxy(d.stop,d)),d;return la.map(k,O,j),la.isFunction(j.opts.start)&&j.opts.start.call(a,j),la.fx.timer(la.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function S(a){return a.getAttribute&&a.getAttribute("class")||""}function T(a,b,c,d){var e;if(la.isArray(b))la.each(b,function(b,e){c||yb.test(a)?d(a,e):T(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==la.type(b))d(a,b);else for(e in b)T(a+"["+e+"]",b[e],c,d)}function U(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Aa)||[];if(la.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function V(a,b,c,d){function e(h){var i;return f[h]=!0,la.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Kb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function W(a,b){var c,d,e=la.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&la.extend(!0,a,d),a}function X(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Y(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Z(a){return la.isWindow(a)?a:9===a.nodeType&&a.defaultView}var $=[],_=a.document,aa=Object.getPrototypeOf,ba=$.slice,ca=$.concat,da=$.push,ea=$.indexOf,fa={},ga=fa.toString,ha=fa.hasOwnProperty,ia=ha.toString,ja=ia.call(Object),ka={},la=function(a,b){return new la.fn.init(a,b)},ma=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,na=/^-ms-/,oa=/-([a-z])/g,pa=function(a,b){return b.toUpperCase()};la.fn=la.prototype={jquery:"3.1.0",constructor:la,length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){var b=la.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return la.each(this,a)},map:function(a){return this.pushStack(la.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:da,sort:$.sort,splice:$.splice},la.extend=la.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||la.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(la.isPlainObject(d)||(e=la.isArray(d)))?(e?(e=!1,f=c&&la.isArray(c)?c:[]):f=c&&la.isPlainObject(c)?c:{},g[b]=la.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},la.extend({expando:"jQuery"+("3.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===la.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=la.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==ga.call(a))&&(!(b=aa(a))||"function"==typeof(c=ha.call(b,"constructor")&&b.constructor)&&ia.call(c)===ja)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?fa[ga.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(na,"ms-").replace(oa,pa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;e<c&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(ma,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?la.merge(c,"string"==typeof a?[a]:a):da.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ea.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;e<f;e++)!b(a[e],e)!==g&&d.push(a[e]);return d},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;g<e;g++)null!=(f=b(a[g],g,c))&&h.push(f);else for(g in a)null!=(f=b(a[g],g,c))&&h.push(f);return ca.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),la.isFunction(a))return d=ba.call(arguments,2),e=function(){return a.apply(b||this,d.concat(ba.call(arguments)))},e.guid=a.guid=a.guid||la.guid++,e},now:Date.now,support:ka}),"function"==typeof Symbol&&(la.fn[Symbol.iterator]=$[Symbol.iterator]),la.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){fa["[object "+b+"]"]=b.toLowerCase()});var qa=function(a){function b(a,b,c,d){var e,f,g,h,i,k,m,n=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:N)!==F&&E(b),b=b||F,H)){if(11!==o&&(i=pa.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(n&&(g=n.getElementById(e))&&L(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return Y.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&u.getElementsByClassName&&b.getElementsByClassName)return Y.apply(c,b.getElementsByClassName(e)),c}if(u.qsa&&!S[a+" "]&&(!I||!I.test(a))){if(1!==o)n=b,m=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,ua):b.setAttribute("id",h=M),k=y(a),f=k.length;f--;)k[f]="#"+h+" "+l(k[f]);m=k.join(","),n=qa.test(a)&&j(b.parentNode)||b}if(m)try{return Y.apply(c,n.querySelectorAll(m)),c}catch(a){}finally{h===M&&b.removeAttribute("id")}}}return A(a.replace(fa,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>v.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[M]=!0,a}function e(a){var b=F.createElement("fieldset");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)v.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&!1===b.disabled&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!wa(b))!==a)}}function i(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function j(a){return a&&void 0!==a.getElementsByTagName&&a}function k(){}function l(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}
function m(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=P++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[O,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[M]||(b[M]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===O&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function n(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function o(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function q(a,b,c,e,f,g){return e&&!e[M]&&(e=q(e)),f&&!f[M]&&(f=q(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],q=g.length,r=d||o(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:p(r,m,a,h,i),t=c?f||(d?a:q||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=p(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?$(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=p(t===g?t.splice(q,t.length):t),f?f(null,g,t,i):Y.apply(g,t)})}function r(a){for(var b,c,d,e=a.length,f=v.relative[a[0].type],g=f||v.relative[" "],h=f?1:0,i=m(function(a){return a===b},g,!0),j=m(function(a){return $(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==B)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=v.relative[a[h].type])k=[m(n(k),c)];else{if(c=v.filter[a[h].type].apply(null,a[h].matches),c[M]){for(d=++h;d<e&&!v.relative[a[d].type];d++);return q(h>1&&n(k),h>1&&l(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(fa,"$1"),c,h<d&&r(a.slice(h,d)),d<e&&r(a=a.slice(d)),d<e&&l(a))}k.push(c)}return n(k)}function s(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",q=d&&[],r=[],s=B,t=d||f&&v.find.TAG("*",j),u=O+=null==s?1:Math.random()||.1,w=t.length;for(j&&(B=g===F||g||j);o!==w&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===F||(E(k),h=!H);m=a[l++];)if(m(k,g||F,h)){i.push(k);break}j&&(O=u)}e&&((k=!m&&k)&&n--,d&&q.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(q,r,g,h);if(d){if(n>0)for(;o--;)q[o]||r[o]||(r[o]=W.call(i));r=p(r)}Y.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(O=u,B=s),q};return e?d(g):g}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M="sizzle"+1*new Date,N=a.document,O=0,P=0,Q=c(),R=c(),S=c(),T=function(a,b){return a===b&&(D=!0),0},U={}.hasOwnProperty,V=[],W=V.pop,X=V.push,Y=V.push,Z=V.slice,$=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ca="\\["+aa+"*("+ba+")(?:"+aa+"*([*^$|!~]?=)"+aa+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ba+"))|)"+aa+"*\\]",da=":("+ba+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ca+")*)|.*)\\)|)",ea=new RegExp(aa+"+","g"),fa=new RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ga=new RegExp("^"+aa+"*,"+aa+"*"),ha=new RegExp("^"+aa+"*([>+~]|"+aa+")"+aa+"*"),ia=new RegExp("="+aa+"*([^\\]'\"]*?)"+aa+"*\\]","g"),ja=new RegExp(da),ka=new RegExp("^"+ba+"$"),la={ID:new RegExp("^#("+ba+")"),CLASS:new RegExp("^\\.("+ba+")"),TAG:new RegExp("^("+ba+"|[*])"),ATTR:new RegExp("^"+ca),PSEUDO:new RegExp("^"+da),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},ma=/^(?:input|select|textarea|button)$/i,na=/^h\d$/i,oa=/^[^{]+\{\s*\[native \w/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/[+~]/,ra=new RegExp("\\\\([\\da-f]{1,6}"+aa+"?|("+aa+")|.)","ig"),sa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ta=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ua=function(a,b){return b?"\0"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},va=function(){E()},wa=m(function(a){return!0===a.disabled},{dir:"parentNode",next:"legend"});try{Y.apply(V=Z.call(N.childNodes),N.childNodes),V[N.childNodes.length].nodeType}catch(a){Y={apply:V.length?function(a,b){X.apply(a,Z.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}u=b.support={},x=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},E=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:N;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=F.documentElement,H=!x(F),N!==F&&(c=F.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",va,!1):c.attachEvent&&c.attachEvent("onunload",va)),u.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),u.getElementsByTagName=e(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),u.getElementsByClassName=oa.test(F.getElementsByClassName),u.getById=e(function(a){return G.appendChild(a).id=M,!F.getElementsByName||!F.getElementsByName(M).length}),u.getById?(v.find.ID=function(a,b){if(void 0!==b.getElementById&&H){var c=b.getElementById(a);return c?[c]:[]}},v.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){return a.getAttribute("id")===b}}):(delete v.find.ID,v.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),v.find.TAG=u.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):u.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},v.find.CLASS=u.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&H)return b.getElementsByClassName(a)},J=[],I=[],(u.qsa=oa.test(F.querySelectorAll))&&(e(function(a){G.appendChild(a).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+aa+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:value|"+_+")"),a.querySelectorAll("[id~="+M+"-]").length||I.push("~="),a.querySelectorAll(":checked").length||I.push(":checked"),a.querySelectorAll("a#"+M+"+*").length||I.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=F.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&I.push("name"+aa+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),G.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(u.matchesSelector=oa.test(K=G.matches||G.webkitMatchesSelector||G.mozMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&e(function(a){u.disconnectedMatch=K.call(a,"*"),K.call(a,"[s!='']:x"),J.push("!=",da)}),I=I.length&&new RegExp(I.join("|")),J=J.length&&new RegExp(J.join("|")),b=oa.test(G.compareDocumentPosition),L=b||oa.test(G.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},T=b?function(a,b){if(a===b)return D=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!u.sortDetached&&b.compareDocumentPosition(a)===c?a===F||a.ownerDocument===N&&L(N,a)?-1:b===F||b.ownerDocument===N&&L(N,b)?1:C?$(C,a)-$(C,b):0:4&c?-1:1)}:function(a,b){if(a===b)return D=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===F?-1:b===F?1:e?-1:f?1:C?$(C,a)-$(C,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===N?-1:i[d]===N?1:0},F):F},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==F&&E(a),c=c.replace(ia,"='$1']"),u.matchesSelector&&H&&!S[c+" "]&&(!J||!J.test(c))&&(!I||!I.test(c)))try{var d=K.call(a,c);if(d||u.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,F,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==F&&E(a);var c=v.attrHandle[b.toLowerCase()],d=c&&U.call(v.attrHandle,b.toLowerCase())?c(a,b,!H):void 0;return void 0!==d?d:u.attributes||!H?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(ta,ua)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(D=!u.detectDuplicates,C=!u.sortStable&&a.slice(0),a.sort(T),D){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return C=null,a},w=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=w(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=w(b);return c},v=b.selectors={cacheLength:50,createPseudo:d,match:la,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ra,sa),a[3]=(a[3]||a[4]||a[5]||"").replace(ra,sa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return la.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ja.test(c)&&(b=y(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ra,sa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Q[a+" "];return b||(b=new RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&Q(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ea," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===O&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[O,n,t];break}}else if(s&&(m=b,l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===O&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[M]||(m[M]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[O,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=v.pseudos[a]||v.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[M]?f(c):f.length>1?(e=[a,a,"",c],v.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=$(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=z(a.replace(fa,"$1"));return e[M]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ra,sa),function(b){return(b.textContent||b.innerText||w(b)).indexOf(a)>-1}}),lang:d(function(a){return ka.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ra,sa).toLowerCase(),function(b){var c;do{if(c=H?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:h(!1),disabled:h(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!v.pseudos.empty(a)},header:function(a){return na.test(a.nodeName)},input:function(a){return ma.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:i(function(){return[0]}),last:i(function(a,b){return[b-1]}),eq:i(function(a,b,c){return[c<0?c+b:c]}),even:i(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:i(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:i(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:i(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},v.pseudos.nth=v.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[t]=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}(t);for(t in{submit:!0,reset:!0})v.pseudos[t]=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}(t);return k.prototype=v.filters=v.pseudos,v.setFilters=new k,y=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=R[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=v.preFilter;h;){d&&!(e=ga.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ha.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(fa," ")}),h=h.slice(d.length));for(g in v.filter)!(e=la[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):R(a,i).slice(0)},z=b.compile=function(a,b){var c,d=[],e=[],f=S[a+" "];if(!f){for(b||(b=y(a)),c=b.length;c--;)f=r(b[c]),f[M]?d.push(f):e.push(f);f=S(a,s(e,d)),f.selector=a}return f},A=b.select=function(a,b,c,d){var e,f,g,h,i,k="function"==typeof a&&a,m=!d&&y(a=k.selector||a);if(c=c||[],1===m.length){if(f=m[0]=m[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&u.getById&&9===b.nodeType&&H&&v.relative[f[1].type]){if(!(b=(v.find.ID(g.matches[0].replace(ra,sa),b)||[])[0]))return c;k&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=la.needsContext.test(a)?0:f.length;e--&&(g=f[e],!v.relative[h=g.type]);)if((i=v.find[h])&&(d=i(g.matches[0].replace(ra,sa),qa.test(f[0].type)&&j(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&l(f)))return Y.apply(c,d),c;break}}return(k||z(a,m))(d,b,!H,c,!b||qa.test(a)&&j(b.parentNode)||b),c},u.sortStable=M.split("").sort(T).join("")===M,u.detectDuplicates=!!D,E(),u.sortDetached=e(function(a){return 1&a.compareDocumentPosition(F.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),u.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(_,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);la.find=qa,la.expr=qa.selectors,la.expr[":"]=la.expr.pseudos,la.uniqueSort=la.unique=qa.uniqueSort,la.text=qa.getText,la.isXMLDoc=qa.isXML,la.contains=qa.contains,la.escapeSelector=qa.escape;var ra=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&la(a).is(c))break;d.push(a)}return d},sa=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},ta=la.expr.match.needsContext,ua=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,va=/^.[^:#\[\.,]*$/;la.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?la.find.matchesSelector(d,a)?[d]:[]:la.find.matches(a,la.grep(b,function(a){return 1===a.nodeType}))},la.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(la(a).filter(function(){for(b=0;b<d;b++)if(la.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)la.find(a,e[b],c);return d>1?la.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&ta.test(a)?la(a):a||[],!1).length}});var wa,xa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(la.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||wa,"string"==typeof a){if(!(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:xa.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof la?b[0]:b,la.merge(this,la.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),ua.test(d[1])&&la.isPlainObject(b))for(d in b)la.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=_.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):la.isFunction(a)?void 0!==c.ready?c.ready(a):a(la):la.makeArray(a,this)}).prototype=la.fn,wa=la(_);var ya=/^(?:parents|prev(?:Until|All))/,za={children:!0,contents:!0,next:!0,prev:!0};la.fn.extend({has:function(a){var b=la(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(la.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&la(a);if(!ta.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&la.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?la.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ea.call(la(a),this[0]):ea.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(la.uniqueSort(la.merge(this.get(),la(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),la.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ra(a,"parentNode")},parentsUntil:function(a,b,c){return ra(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ra(a,"nextSibling")},prevAll:function(a){return ra(a,"previousSibling")},nextUntil:function(a,b,c){return ra(a,"nextSibling",c)},prevUntil:function(a,b,c){return ra(a,"previousSibling",c)},siblings:function(a){return sa((a.parentNode||{}).firstChild,a)},children:function(a){return sa(a.firstChild)},contents:function(a){return a.contentDocument||la.merge([],a.childNodes)}},function(a,b){la.fn[a]=function(c,d){var e=la.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=la.filter(d,e)),this.length>1&&(za[a]||la.uniqueSort(e),ya.test(a)&&e.reverse()),this.pushStack(e)}});var Aa=/\S+/g;la.Callbacks=function(a){a="string"==typeof a?g(a):la.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)!1===f[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function b(c){la.each(c,function(c,d){la.isFunction(d)?a.unique&&k.has(d)||f.push(d):d&&d.length&&"string"!==la.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return la.each(arguments,function(a,b){for(var c;(c=la.inArray(b,f,c))>-1;)f.splice(c,1),c<=i&&i--}),this},has:function(a){return a?la.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},la.extend({Deferred:function(b){var c=[["notify","progress",la.Callbacks("memory"),la.Callbacks("memory"),2],["resolve","done",la.Callbacks("once memory"),la.Callbacks("once memory"),0,"resolved"],["reject","fail",la.Callbacks("once memory"),la.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return la.Deferred(function(b){la.each(c,function(c,d){var e=la.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&la.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(b<g)){if((a=d.apply(j,k))===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,la.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){la.Deferred.exceptionHook&&la.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(la.Deferred.getStackHook&&(m.stackTrace=la.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return la.Deferred(function(a){c[0][3].add(f(0,a,la.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,la.isFunction(b)?b:h)),c[2][3].add(f(0,a,la.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?la.extend(a,e):e}},f={};return la.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=ba.call(arguments),f=la.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?ba.call(arguments):c,--b||f.resolveWith(d,e)}};if(b<=1&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||la.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Ba=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;la.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Ba.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},la.readyException=function(b){a.setTimeout(function(){throw b})};var Ca=la.Deferred();la.fn.ready=function(a){return Ca.then(a).catch(function(a){la.readyException(a)}),this},la.extend({isReady:!1,readyWait:1,holdReady:function(a){a?la.readyWait++:la.ready(!0)},ready:function(a){(!0===a?--la.readyWait:la.isReady)||(la.isReady=!0,!0!==a&&--la.readyWait>0||Ca.resolveWith(_,[la]))}}),la.ready.then=Ca.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?a.setTimeout(la.ready):(_.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Da=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===la.type(c)){e=!0;for(h in c)Da(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,la.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(la(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ea(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[la.camelCase(b)]=c;else for(d in b)e[la.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][la.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){la.isArray(b)?b=b.map(la.camelCase):(b=la.camelCase(b),b=b in d?[b]:b.match(Aa)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||la.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!la.isEmptyObject(b)}};var Fa=new l,Ga=new l,Ha=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ia=/[A-Z]/g;la.extend({hasData:function(a){return Ga.hasData(a)||Fa.hasData(a)},data:function(a,b,c){return Ga.access(a,b,c)},removeData:function(a,b){Ga.remove(a,b)},_data:function(a,b,c){return Fa.access(a,b,c)},_removeData:function(a,b){Fa.remove(a,b)}}),la.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ga.get(f),1===f.nodeType&&!Fa.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=la.camelCase(d.slice(5)),m(f,d,e[d])));Fa.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ga.set(this,a)}):Da(this,function(b){var c;if(f&&void 0===b){if(void 0!==(c=Ga.get(f,a)))return c;if(void 0!==(c=m(f,a)))return c}else this.each(function(){Ga.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ga.remove(this,a)})}}),la.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=Fa.get(a,b),c&&(!d||la.isArray(c)?d=Fa.access(a,b,la.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=la.queue(a,b),d=c.length,e=c.shift(),f=la._queueHooks(a,b),g=function(){la.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Fa.get(a,c)||Fa.access(a,c,{empty:la.Callbacks("once memory").add(function(){Fa.remove(a,[b+"queue",c])})})}}),la.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?la.queue(this[0],a):void 0===b?this:this.each(function(){var c=la.queue(this,a,b);la._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&la.dequeue(this,a)})},dequeue:function(a){return this.each(function(){la.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=la.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=Fa.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ka=new RegExp("^(?:([+-])=|)("+Ja+")([a-z%]*)$","i"),La=["Top","Right","Bottom","Left"],Ma=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&la.contains(a.ownerDocument,a)&&"none"===la.css(a,"display")},Na=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Oa={};la.fn.extend({show:function(){return p(this,!0)},hide:function(){return p(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ma(this)?la(this).show():la(this).hide()})}});var Pa=/^(?:checkbox|radio)$/i,Qa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ra=/^$|\/(?:java|ecma)script/i,Sa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Sa.optgroup=Sa.option,Sa.tbody=Sa.tfoot=Sa.colgroup=Sa.caption=Sa.thead,Sa.th=Sa.td;var Ta=/<|&#?\w+;/;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div")),c=_.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ka.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ka.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ua=_.documentElement,Va=/^key/,Wa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Xa=/^([^.]*)(?:\.(.+)|)/;la.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Fa.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&la.find.matchesSelector(Ua,e),c.guid||(c.guid=la.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==la&&la.event.triggered!==b.type?la.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Aa)||[""],j=b.length;j--;)h=Xa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=la.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=la.event.special[n]||{},k=la.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&la.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),la.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Fa.hasData(a)&&Fa.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Aa)||[""],j=b.length;j--;)if(h=Xa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=la.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||la.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)la.event.remove(a,n+b[j],c,d,!0);la.isEmptyObject(i)&&Fa.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=la.event.fix(a),i=new Array(arguments.length),j=(Fa.get(this,"events")||{})[h.type]||[],k=la.event.special[h.type]||{};for(i[0]=h,
b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,h)){for(g=la.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!h.rnamespace.test(f.namespace)||(h.handleObj=f,h.data=f.data,void 0!==(d=((la.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i))&&!1===(h.result=d)&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?la(e,this).index(i)>-1:la.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(la.Event.prototype,a,{enumerable:!0,configurable:!0,get:la.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[la.expando]?a:new la.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==v()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===v()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&la.nodeName(this,"input"))return this.click(),!1},_default:function(a){return la.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},la.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},la.Event=function(a,b){if(!(this instanceof la.Event))return new la.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?t:u,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&la.extend(this,b),this.timeStamp=a&&a.timeStamp||la.now(),this[la.expando]=!0},la.Event.prototype={constructor:la.Event,isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=t,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=t,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=t,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},la.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Va.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Wa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},la.event.addProp),la.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){la.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||la.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),la.fn.extend({on:function(a,b,c,d){return w(this,a,b,c,d)},one:function(a,b,c,d){return w(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,la(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=u),this.each(function(){la.event.remove(this,a,c,b)})}});var Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Za=/<script|<style|<link/i,$a=/checked\s*(?:[^=]|=\s*.checked.)/i,_a=/^true\/(.*)/,ab=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;la.extend({htmlPrefilter:function(a){return a.replace(Ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=la.contains(a.ownerDocument,a);if(!(ka.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||la.isXMLDoc(a)))for(g=q(h),f=q(a),d=0,e=f.length;d<e;d++)B(f[d],g[d]);if(b)if(c)for(f=f||q(a),g=g||q(h),d=0,e=f.length;d<e;d++)A(f[d],g[d]);else A(a,h);return g=q(h,"script"),g.length>0&&r(g,!i&&q(a,"script")),h},cleanData:function(a){for(var b,c,d,e=la.event.special,f=0;void 0!==(c=a[f]);f++)if(Ea(c)){if(b=c[Fa.expando]){if(b.events)for(d in b.events)e[d]?la.event.remove(c,d):la.removeEvent(c,d,b.handle);c[Fa.expando]=void 0}c[Ga.expando]&&(c[Ga.expando]=void 0)}}}),la.fn.extend({detach:function(a){return D(this,a,!0)},remove:function(a){return D(this,a)},text:function(a){return Da(this,function(a){return void 0===a?la.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){x(this,a).appendChild(a)}})},prepend:function(){return C(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return C(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(la.cleanData(q(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return la.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Za.test(a)&&!Sa[(Qa.exec(a)||["",""])[1].toLowerCase()]){a=la.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(la.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return C(this,arguments,function(b){var c=this.parentNode;la.inArray(this,a)<0&&(la.cleanData(q(this)),c&&c.replaceChild(b,this))},a)}}),la.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){la.fn[a]=function(a){for(var c,d=[],e=la(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),la(e[g])[b](c),da.apply(d,c.get());return this.pushStack(d)}});var bb=/^margin/,cb=new RegExp("^("+Ja+")(?!px)[a-z%]+$","i"),db=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ua.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Ua.removeChild(g),h=null}}var c,d,e,f,g=_.createElement("div"),h=_.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ka.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),la.extend(ka,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var eb=/^(none|table(?!-c[ea]).+)/,fb={position:"absolute",visibility:"hidden",display:"block"},gb={letterSpacing:"0",fontWeight:"400"},hb=["Webkit","Moz","ms"],ib=_.createElement("div").style;la.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=E(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=la.camelCase(b),i=a.style;if(b=la.cssProps[h]||(la.cssProps[h]=G(h)||h),g=la.cssHooks[b]||la.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];f=typeof c,"string"===f&&(e=Ka.exec(c))&&e[1]&&(c=n(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(la.cssNumber[h]?"":"px")),ka.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))}},css:function(a,b,c,d){var e,f,g,h=la.camelCase(b);return b=la.cssProps[h]||(la.cssProps[h]=G(h)||h),g=la.cssHooks[b]||la.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=E(a,b,d)),"normal"===e&&b in gb&&(e=gb[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),la.each(["height","width"],function(a,b){la.cssHooks[b]={get:function(a,c,d){if(c)return!eb.test(la.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?J(a,b,d):Na(a,fb,function(){return J(a,b,d)})},set:function(a,c,d){var e,f=d&&db(a),g=d&&I(a,b,d,"border-box"===la.css(a,"boxSizing",!1,f),f);return g&&(e=Ka.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=la.css(a,b)),H(a,c,g)}}}),la.cssHooks.marginLeft=F(ka.reliableMarginLeft,function(a,b){if(b)return(parseFloat(E(a,"marginLeft"))||a.getBoundingClientRect().left-Na(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),la.each({margin:"",padding:"",border:"Width"},function(a,b){la.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+La[d]+b]=f[d]||f[d-2]||f[0];return e}},bb.test(a)||(la.cssHooks[a+b].set=H)}),la.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(la.isArray(b)){for(d=db(a),e=b.length;g<e;g++)f[b[g]]=la.css(a,b[g],!1,d);return f}return void 0!==c?la.style(a,b,c):la.css(a,b)},a,b,arguments.length>1)}}),la.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||la.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(la.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=la.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=la.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){la.fx.step[a.prop]?la.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[la.cssProps[a.prop]]&&!la.cssHooks[a.prop]?a.elem[a.prop]=a.now:la.style(a.elem,a.prop,a.now+a.unit)}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},la.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},la.fx=K.prototype.init,la.fx.step={};var jb,kb,lb=/^(?:toggle|show|hide)$/,mb=/queueHooks$/;la.Animation=la.extend(R,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return n(c.elem,a,Ka.exec(b),c),c}]},tweener:function(a,b){la.isFunction(a)?(b=a,a=["*"]):a=a.match(Aa);for(var c,d=0,e=a.length;d<e;d++)c=a[d],R.tweeners[c]=R.tweeners[c]||[],R.tweeners[c].unshift(b)},prefilters:[P],prefilter:function(a,b){b?R.prefilters.unshift(a):R.prefilters.push(a)}}),la.speed=function(a,b,c){var d=a&&"object"==typeof a?la.extend({},a):{complete:c||!c&&b||la.isFunction(a)&&a,duration:a,easing:c&&b||b&&!la.isFunction(b)&&b};return la.fx.off||_.hidden?d.duration=0:d.duration="number"==typeof d.duration?d.duration:d.duration in la.fx.speeds?la.fx.speeds[d.duration]:la.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){la.isFunction(d.old)&&d.old.call(this),d.queue&&la.dequeue(this,d.queue)},d},la.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ma).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=la.isEmptyObject(a),f=la.speed(b,c,d),g=function(){var b=R(this,la.extend({},a),f);(e||Fa.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=la.timers,g=Fa.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&mb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||la.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=Fa.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=la.timers,g=d?d.length:0;for(c.finish=!0,la.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),la.each(["toggle","show","hide"],function(a,b){var c=la.fn[b];la.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}}),la.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){la.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),la.timers=[],la.fx.tick=function(){var a,b=0,c=la.timers;for(jb=la.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||la.fx.stop(),jb=void 0},la.fx.timer=function(a){la.timers.push(a),a()?la.fx.start():la.timers.pop()},la.fx.interval=13,la.fx.start=function(){kb||(kb=a.requestAnimationFrame?a.requestAnimationFrame(L):a.setInterval(la.fx.tick,la.fx.interval))},la.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(kb):a.clearInterval(kb),kb=null},la.fx.speeds={slow:600,fast:200,_default:400},la.fn.delay=function(b,c){return b=la.fx?la.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",ka.checkOn=""!==a.value,ka.optSelected=c.selected,a=_.createElement("input"),a.value="t",a.type="radio",ka.radioValue="t"===a.value}();var nb,ob=la.expr.attrHandle;la.fn.extend({attr:function(a,b){return Da(this,la.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){la.removeAttr(this,a)})}}),la.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?la.prop(a,b,c):(1===f&&la.isXMLDoc(a)||(e=la.attrHooks[b.toLowerCase()]||(la.expr.match.bool.test(b)?nb:void 0)),void 0!==c?null===c?void la.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=la.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ka.radioValue&&"radio"===b&&la.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Aa);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),nb={set:function(a,b,c){return!1===b?la.removeAttr(a,c):a.setAttribute(c,c),c}},la.each(la.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||la.find.attr;ob[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=ob[g],ob[g]=e,e=null!=c(a,b,d)?g:null,ob[g]=f),e}});var pb=/^(?:input|select|textarea|button)$/i,qb=/^(?:a|area)$/i;la.fn.extend({prop:function(a,b){return Da(this,la.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[la.propFix[a]||a]})}}),la.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&la.isXMLDoc(a)||(b=la.propFix[b]||b,e=la.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=la.find.attr(a,"tabindex");return b?parseInt(b,10):pb.test(a.nodeName)||qb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ka.optSelected||(la.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),la.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){la.propFix[this.toLowerCase()]=this});var rb=/[\t\r\n\f]/g;la.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(la.isFunction(a))return this.each(function(b){la(this).addClass(a.call(this,b,S(this)))});if("string"==typeof a&&a)for(b=a.match(Aa)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(rb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=la.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(la.isFunction(a))return this.each(function(b){la(this).removeClass(a.call(this,b,S(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Aa)||[];c=this[i++];)if(e=S(c),d=1===c.nodeType&&(" "+e+" ").replace(rb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=la.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):la.isFunction(a)?this.each(function(c){la(this).toggleClass(a.call(this,c,S(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=la(this),f=a.match(Aa)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=S(this),b&&Fa.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":Fa.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+S(c)+" ").replace(rb," ").indexOf(b)>-1)return!0;return!1}});var sb=/\r/g,tb=/[\x20\t\r\n\f]+/g;la.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=la.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,la(this).val()):a,null==e?e="":"number"==typeof e?e+="":la.isArray(e)&&(e=la.map(e,function(a){return null==a?"":a+""})),(b=la.valHooks[this.type]||la.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return(b=la.valHooks[e.type]||la.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(sb,""):null==c?"":c)}}}),la.extend({valHooks:{option:{get:function(a){var b=la.find.attr(a,"value");return null!=b?b:la.trim(la.text(a)).replace(tb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!la.nodeName(c.parentNode,"optgroup"))){if(b=la(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=la.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=la.inArray(la.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),la.each(["radio","checkbox"],function(){la.valHooks[this]={set:function(a,b){if(la.isArray(b))return a.checked=la.inArray(la(a).val(),b)>-1}},ka.checkOn||(la.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ub=/^(?:focusinfocus|focusoutblur)$/;la.extend(la.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=ha.call(b,"type")?b.type:b,o=ha.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!ub.test(n+la.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[la.expando]?b:new la.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:la.makeArray(c,[b]),l=la.event.special[n]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!la.isWindow(d)){for(i=l.delegateType||n,ub.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Fa.get(g,"events")||{})[b.type]&&Fa.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&Ea(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(m.pop(),c)||!Ea(d)||j&&la.isFunction(d[n])&&!la.isWindow(d)&&(h=d[j],h&&(d[j]=null),la.event.triggered=n,d[n](),la.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=la.extend(new la.Event,c,{type:a,isSimulated:!0});la.event.trigger(d,null,b)}}),la.fn.extend({trigger:function(a,b){return this.each(function(){la.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return la.event.trigger(a,b,c,!0)}}),la.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){la.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),la.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ka.focusin="onfocusin"in a,ka.focusin||la.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){la.event.simulate(b,a.target,la.event.fix(a))};la.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Fa.access(d,b);e||d.addEventListener(a,c,!0),Fa.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Fa.access(d,b)-1;e?Fa.access(d,b,e):(d.removeEventListener(a,c,!0),Fa.remove(d,b))}}});var vb=a.location,wb=la.now(),xb=/\?/;la.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||la.error("Invalid XML: "+b),c};var yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;la.param=function(a,b){var c,d=[],e=function(a,b){var c=la.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(la.isArray(a)||a.jquery&&!la.isPlainObject(a))la.each(a,function(){e(this.name,this.value)});else for(c in a)T(c,a[c],b,e);return d.join("&")},la.fn.extend({serialize:function(){return la.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=la.prop(this,"elements");return a?la.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!la(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!Pa.test(a))}).map(function(a,b){var c=la(this).val();return null==c?null:la.isArray(c)?la.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}});var Cb=/%20/g,Db=/#.*$/,Eb=/([?&])_=[^&]*/,Fb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hb=/^(?:GET|HEAD)$/,Ib=/^\/\//,Jb={},Kb={},Lb="*/".concat("*"),Mb=_.createElement("a");Mb.href=vb.href,la.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb.href,type:"GET",isLocal:Gb.test(vb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":la.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?W(W(a,la.ajaxSettings),b):W(la.ajaxSettings,a)},ajaxPrefilter:U(Jb),ajaxTransport:U(Kb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(u=X(o,x,d)),u=Y(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(la.lastModified[f]=v),(v=x.getResponseHeader("etag"))&&(la.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,!b&&w||(w="error",b<0&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--la.active||la.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=la.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?la(p):la.event,r=la.Deferred(),s=la.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Fb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||vb.href)+"").replace(Ib,vb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Aa)||[""],null==o.crossDomain){j=_.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Mb.protocol+"//"+Mb.host!=j.protocol+"//"+j.host}catch(a){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=la.param(o.data,o.traditional)),V(Jb,o,c,x),k)return x;l=la.event&&o.global,l&&0==la.active++&&la.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Hb.test(o.type),f=o.url.replace(Db,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Cb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(xb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Eb,""),n=(xb.test(f)?"&":"?")+"_="+wb+++n),o.url=f+n),o.ifModified&&(la.lastModified[f]&&x.setRequestHeader("If-Modified-Since",la.lastModified[f]),la.etag[f]&&x.setRequestHeader("If-None-Match",la.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Lb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,x,o)||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=V(Kb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(a){if(k)throw a;d(-1,a)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return la.get(a,b,c,"json")},getScript:function(a,b){return la.get(a,void 0,b,"script")}}),la.each(["get","post"],function(a,b){la[b]=function(a,c,d,e){return la.isFunction(c)&&(e=e||d,d=c,c=void 0),la.ajax(la.extend({url:a,type:b,dataType:e,data:c,success:d},la.isPlainObject(a)&&a))}}),la._evalUrl=function(a){return la.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},la.fn.extend({wrapAll:function(a){var b;return this[0]&&(la.isFunction(a)&&(a=a.call(this[0])),b=la(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return la.isFunction(a)?this.each(function(b){la(this).wrapInner(a.call(this,b))}):this.each(function(){var b=la(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=la.isFunction(a);return this.each(function(c){la(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){la(this).replaceWith(this.childNodes)}),this}}),la.expr.pseudos.hidden=function(a){return!la.expr.pseudos.visible(a)},la.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},la.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var Nb={0:200,1223:204},Ob=la.ajaxSettings.xhr();ka.cors=!!Ob&&"withCredentials"in Ob,ka.ajax=Ob=!!Ob,la.ajaxTransport(function(b){var c,d;if(ka.cors||Ob&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Nb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),la.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),la.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return la.globalEval(a),a}}}),la.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),la.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=la("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Pb=[],Qb=/(=)\?(?=&|$)|\?\?/;la.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Pb.pop()||la.expando+"_"+wb++;return this[a]=!0,a}}),
la.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Qb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=la.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Qb,"$1"+e):!1!==b.jsonp&&(b.url+=(xb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||la.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?la(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Pb.push(e)),g&&la.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ka.createHTMLDocument=function(){var a=_.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),la.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ka.createHTMLDocument?(b=_.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=_.location.href,b.head.appendChild(d)):b=_),e=ua.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=s([a],b,f),f&&f.length&&la(f).remove(),la.merge([],e.childNodes))},la.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=la.trim(a.slice(h)),a=a.slice(0,h)),la.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&la.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?la("<div>").append(la.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},la.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){la.fn[b]=function(a){return this.on(b,a)}}),la.expr.pseudos.animated=function(a){return la.grep(la.timers,function(b){return a===b.elem}).length},la.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=la.css(a,"position"),l=la(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=la.css(a,"top"),i=la.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),la.isFunction(b)&&(b=b.call(a,c,la.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},la.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){la.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Z(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===la.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),la.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+la.css(a[0],"borderTopWidth",!0),left:d.left+la.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-la.css(c,"marginTop",!0),left:b.left-d.left-la.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===la.css(a,"position");)a=a.offsetParent;return a||Ua})}}),la.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;la.fn[a]=function(d){return Da(this,function(a,d,e){var f=Z(a);if(void 0===e)return f?f[b]:a[d];f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e},a,d,arguments.length)}}),la.each(["top","left"],function(a,b){la.cssHooks[b]=F(ka.pixelPosition,function(a,c){if(c)return c=E(a,b),cb.test(c)?la(a).position()[b]+"px":c})}),la.each({Height:"height",Width:"width"},function(a,b){la.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){la.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return Da(this,function(b,c,e){var f;return la.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?la.css(b,c,h):la.style(b,c,e,h)},b,g?e:void 0,g)}})}),la.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),la.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return la});var Rb=a.jQuery,Sb=a.$;return la.noConflict=function(b){return a.$===la&&(a.$=Sb),b&&a.jQuery===la&&(a.jQuery=Rb),la},b||(a.jQuery=a.$=la),la})},{}],20:[function(a,b,c){!function(){"use strict";var c=a("../lib/mz700cg.js"),d=function(){this.addr=0,this.pattern=0,this.we=0,this.ssw=1,this.copy=0;for(var a=[],b=0;b<512;b++){a.push([0,0,0,0,0,0,0,0]);for(var d=0;d<8;d++)a[b][d]=c.ROM[b][d]}this._cg=new c(a,8,8)};d.COPY=32,d.WE=16,d.SSW=8,d.ADDR=7,d.prototype.readMMIO=function(){},d.prototype.writeMMIO=function(a,b){switch(a){case 57360:this.pattern=255&b;break;case 57361:this.addr=1792&this.addr|(255&b)<<0;break;case 57362:this.addr=255&this.addr|(b&d.ADDR)<<8,this.copy=0==(b&d.COPY)?0:1;var c=this.we;this.we=0==(b&d.WE)?0:1,c&&!this.we&&this.write();var e=this.ssw;this.ssw=0==(b&d.SSW)?0:1,e!=this.ssw&&this.applySSW()}},d.prototype.applySSW=function(){0==this.ssw?window.dispatchEvent(new Event("enablePCG700")):window.dispatchEvent(new Event("disablePCG700"))},d.prototype.write=function(){var a=this.addr>>10&1,b=128+(this.addr>>3&127),d=256*a+b,e=this.addr>>0&7,f=0==this.copy?this.pattern:c.ROM[d][e];if(this._cg.setPattern(a,b,e,f),0==this.ssw){var g=new CustomEvent("updatePCG700",{detail:{atb:a,dispCode:b}});window.dispatchEvent(g)}},b.exports={create:function(){return new d}}}()},{"../lib/mz700cg.js":36}],21:[function(a,b,c){!function(c){var d=null;if("context"in c)d=c.context;else{d={webMain:!1,webWorker:!1,nodeJs:!1,ie11:!1,requirable:!1};try{a&&(d.requirable=!0)}catch(a){}}var e=c.constructor.name;e?"window"in c?d.webMain=!0:"DedicatedWorkerGlobalScope"==e||"WorkerGlobalScope"==e?d.webWorker=!0:d.nodeJs=!0:(d.ie11=!0,"[object Window]"==c?d.webMain=!0:"[object WorkerGlobalScope]"==c&&(d.webWorker=!0)),d.nodeJs?b.exports=d:d.webWorker&&(c.module={exports:null},c.require=function(){}),d.exportModule=function(a,b){return d.requirable||(a in c&&b!==c[a]&&(console.log("context.exports: "+a+" is already exported."),console.log("predecessor: "+JSON.stringify(c[a])),console.log("override with: "+JSON.stringify(b))),c[a]=b),b},c.getModule=function(a){if(!("context"in c)||d.nodeJs||d.requirable)return!1;if(!(a in c&&c[a]))throw new Error(["module ",a,"not found"].join(" "));return c[a]},c.context=d}(Function("return this;")())},{}],22:[function(a,b,c){"use strict";var d={getItem:function(a){return a&&this.hasItem(a)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(a,b,c,d,e,f){if(a&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(a)){var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toGMTString()}document.cookie=escape(a)+"="+escape(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":"")}},removeItem:function(a,b){a&&this.hasItem(a)&&(document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(b?"; path="+b:""))},hasItem:function(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=0;b<a.length;b++)a[b]=unescape(a[b]);return a}};b.exports=d},{}],23:[function(a,b,c){!function(){Number.prototype.round=function(a){void 0==a&&(a=0);var b=Math.pow(10,-a);return Math.round(this*b)/b},Number.prototype.bin=function(a){for(var b="",c=this;c>0;){var d=c%2,e="";e=d?"1":"0",b=e+b,c=Math.floor(c/2)}return a&&(b=new Array(a+1).join("0")+b,b=b.substring(b.length-a)),b},Number.prototype.hex=function(a){var b=this.toString(16);return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.HEX=function(a){var b=this.toString(16).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.BIN=function(a){var b=this.toString(2).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)}}()},{}],24:[function(a,b,c){!function(){"use strict";function a(a){this.initialize(),this.setFrequency(a),this._handlers={change:[]}}a.SPEED_FACTOR=1.5,a.CPU_CLOCK=4e6,a.MNEMONIC_AVE_CYCLE=6,a.prototype.initialize=function(){this._out=!1,this._counter=0},a.prototype.setFrequency=function(b){this._counter_max=a.CPU_CLOCK/a.MNEMONIC_AVE_CYCLE/b},a.prototype.readOutput=function(){return this._out},a.prototype.count=function(){return this._counter+=a.SPEED_FACTOR,this._counter>=this._counter_max/2&&(this._out=!this._out,this._counter=0,this.fireEvent("change"),!0)},a.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},a.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=a}()},{}],25:[function(a,b,c){!function(){"use strict";function c(a){this._reset=!1,this.initialize(),this.setFrequency(a)}var d=a("../lib/flip-flop-counter");c.prototype=new d,c.prototype.count=function(){return!!this._reset&&d.prototype.count.call(this)},c.prototype.loadReset=function(a){a?this._reset||(this._reset=!0):this._reset&&(this._reset=!1,this.initialize())},b.exports=c}()},{"../lib/flip-flop-counter":24}],26:[function(a,b,c){!function(){"use strict";function a(){this.counter=[new c("#0"),new c("#1"),new c("#2")]}function c(a){this._name=a,this.RL=3,this.MODE=3,this.BCD=0,this.value=65535,this.counter=65535,this._written=!0,this._read=!0,this.out=!0,this.gate=!1,this._handlers={timeup:[]}}a.prototype.setCtrlWord=function(a){var b=(192&a)>>6;this.counter[b].setCtrlWord(63&a)},c.prototype.setCtrlWord=function(a){this.RL=(48&a)>>4,this.MODE=(14&a)>>1,this.BCD=0!=(1&a),this.value=0,this.counter=0,this._written=!0,this._read=!0,this.out=!1,this.gate=!1},c.prototype.load=function(a){this.counter=0;var b=!1;switch(this.RL){case 0:break;case 1:this.value=255&a,this.counter=this.value,this.out=!1,b=!0;break;case 2:this.value=(255&a)<<8,this.counter=this.value,b=!0;break;case 3:this._written?(this._written=!1,this.value=65280&this.value|255&a,this.counter=this.value,b=!1):(this._written=!0,this.value=255&this.value|(255&a)<<8,this.counter=this.value,this.out=!1,b=!0)}if(b)switch(this.MODE){case 0:this.out=!1;break;case 1:break;case 2:case 6:this.out=!0;break;case 3:case 7:this.out=!0}return b},c.prototype.read=function(){switch(this.RL){case 0:break;case 1:return 255&this.counter;case 2:return this.counter>>8&255;case 3:return this._read?(this._read=!1,255&this.counter):(this._read=!0,this.counter>>8&255)}return null},c.prototype.setGate=function(a){this.gate=a},c.prototype.count=function(a){var b=this.out;switch(this.MODE){case 0:this.counter>0?(this.counter-=a,this.counter<=0&&(this.counter=0,this.out||(this.out=!0))):this.counter=this.value;break;case 1:break;case 2:case 6:this.counter-=a,this.out&&this.counter<=0?(this.out=!1,this.counter=this.value):this.out||(this.out=!0);break;case 3:case 7:this.counter-=a,this.counter>=this.value/2?this.out=!0:this.counter>0?this.out=!1:(this.out=!0,this.counter=this.value)}!b&&this.out&&this.fireEvent("timeup")},c.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},c.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=a}()},{}],27:[function(a,b,c){!function(){var b=a("jquery"),c=a("../MZ-700/mz700-key-matrix.js");a("../lib/jquery_plugin_class")("mz700keyboard");var d=function(a){this.element=a,b(this.element).addClass("mz700keymatrix")};window.mz700keyboard=d;var e=c.KeyCodes,f=c.KeyNames;d.prototype.create=function(a){var d=b("<div/>").addClass("keyboard-base-panel");b(this.element).append(d),d.append(b("<div/>").addClass("FKEYS").append(b("<span/>").addClass("keyContainer-"+f[e.Escape])).append(b("<span/>").addClass("nk-1-1")).append(b("<span/>").addClass("keyContainer-"+f[e.F1])).append(b("<span/>").addClass("keyContainer-"+f[e.F2])).append(b("<span/>").addClass("keyContainer-"+f[e.F3])).append(b("<span/>").addClass("keyContainer-"+f[e.F4])).append(b("<span/>").addClass("nk-1-2")).append(b("<span/>").addClass("keyContainer-"+f[e.F5])).append(b("<span/>").addClass("keyContainer-"+f[e.F6])).append(b("<span/>").addClass("keyContainer-"+f[e.F7])).append(b("<span/>").addClass("keyContainer-"+f[e.F8])).append(b("<span/>").addClass("nk-1-3")).append(b("<span/>").addClass("keyContainer-"+f[e.F9])).append(b("<span/>").addClass("keyContainer-"+f[e.F10])).append(b("<span/>").addClass("keyContainer-"+f[e.F11])).append(b("<span/>").addClass("keyContainer-"+f[e.F12]))).append(b("<div/>").append(b("<span/>").addClass("keyContainer-Kanji")).append(b("<span/>").addClass("keyContainer-"+f[e.D1])).append(b("<span/>").addClass("keyContainer-"+f[e.D2])).append(b("<span/>").addClass("keyContainer-"+f[e.D3])).append(b("<span/>").addClass("keyContainer-"+f[e.D4])).append(b("<span/>").addClass("keyContainer-"+f[e.D5])).append(b("<span/>").addClass("keyContainer-"+f[e.D6])).append(b("<span/>").addClass("keyContainer-"+f[e.D7])).append(b("<span/>").addClass("keyContainer-"+f[e.D8])).append(b("<span/>").addClass("keyContainer-"+f[e.D9])).append(b("<span/>").addClass("keyContainer-"+f[e.D0])).append(b("<span/>").addClass("keyContainer-"+f[e.Subtract])).append(b("<span/>").addClass("keyContainer-"+f[e.Caret])).append(b("<span/>").addClass("keyContainer-"+f[e.Yen])).append(b("<span/>").addClass("keyContainer-"+f[e.Backspace])).append(b("<span/>").addClass("nk-2")).append(b("<span/>").addClass("keyContainer-"+f[e.Insert])).append(b("<span/>").addClass("keyContainer-"+f[e.Home])).append(b("<span/>").addClass("keyContainer-"+f[e.PageUp]))).append(b("<div/>").append(b("<span/>").addClass("keyContainer-Tab")).append(b("<span/>").addClass("keyContainer-"+f[e.Q])).append(b("<span/>").addClass("keyContainer-"+f[e.W])).append(b("<span/>").addClass("keyContainer-"+f[e.E])).append(b("<span/>").addClass("keyContainer-"+f[e.R])).append(b("<span/>").addClass("keyContainer-"+f[e.T])).append(b("<span/>").addClass("keyContainer-"+f[e.Y])).append(b("<span/>").addClass("keyContainer-"+f[e.U])).append(b("<span/>").addClass("keyContainer-"+f[e.I])).append(b("<span/>").addClass("keyContainer-"+f[e.O])).append(b("<span/>").addClass("keyContainer-"+f[e.P])).append(b("<span/>").addClass("keyContainer-"+f[e.Atmark])).append(b("<span/>").addClass("keyContainer-"+f[e.OpenBrackets])).append(b("<span/>").addClass("nk-3")).append(b("<span/>").addClass("keyContainer-"+f[e.Enter])).append(b("<span/>").addClass("nk-2")).append(b("<span/>").addClass("keyContainer-"+f[e.Delete])).append(b("<span/>").addClass("keyContainer-"+f[e.End])).append(b("<span/>").addClass("keyContainer-"+f[e.PageDown]))).append(b("<div/>").append(b("<span/>").addClass("keyContainer-"+f[e.Control])).append(b("<span/>").addClass("keyContainer-"+f[e.A])).append(b("<span/>").addClass("keyContainer-"+f[e.S])).append(b("<span/>").addClass("keyContainer-"+f[e.D])).append(b("<span/>").addClass("keyContainer-"+f[e.F])).append(b("<span/>").addClass("keyContainer-"+f[e.G])).append(b("<span/>").addClass("keyContainer-"+f[e.H])).append(b("<span/>").addClass("keyContainer-"+f[e.J])).append(b("<span/>").addClass("keyContainer-"+f[e.K])).append(b("<span/>").addClass("keyContainer-"+f[e.L])).append(b("<span/>").addClass("keyContainer-"+f[e.SemiColon])).append(b("<span/>").addClass("keyContainer-"+f[e.Colon])).append(b("<span/>").addClass("keyContainer-"+f[e.CloseBrackets])).append(b("<span/>").addClass("keyContainer-"+f[e.Enter]))).append(b("<div/>").append(b("<span/>").addClass("keyContainer-"+f[e.Shift])).append(b("<span/>").addClass("keyContainer-"+f[e.Z])).append(b("<span/>").addClass("keyContainer-"+f[e.X])).append(b("<span/>").addClass("keyContainer-"+f[e.C])).append(b("<span/>").addClass("keyContainer-"+f[e.V])).append(b("<span/>").addClass("keyContainer-"+f[e.B])).append(b("<span/>").addClass("keyContainer-"+f[e.N])).append(b("<span/>").addClass("keyContainer-"+f[e.M])).append(b("<span/>").addClass("keyContainer-"+f[e.Comma])).append(b("<span/>").addClass("keyContainer-"+f[e.Decimal])).append(b("<span/>").addClass("keyContainer-"+f[e.Divide])).append(b("<span/>").addClass("keyContainer-"+f[e.Backslash])).append(b("<span/>").addClass("keyContainer-"+f[e.Shift])).append(b("<span/>").addClass("nk-5-1")).append(b("<span/>").addClass("keyContainer-"+f[e.Up]))).append(b("<div/>").append(b("<span/>").addClass("nk-6-1")).append(b("<span/>").addClass("keyContainer-"+f[e.Space])).append(b("<span/>").addClass("nk-6-2")).append(b("<span/>").addClass("keyContainer-"+f[e.Left])).append(b("<span/>").addClass("keyContainer-"+f[e.Down])).append(b("<span/>").addClass("keyContainer-"+f[e.Right]))),c.Keys.forEach(function(c){var d=c.strobe,e=c.bit;c.code.forEach(function(g){var h=b("<span/>").addClass("button").addClass("matrix-"+d+"-"+e).html(c.face).mousedown(function(b,c,d){return function(){a.onStateChange(b,c,!0),d.setState(b,c,!0)}}(d,e,this)).mouseup(function(b,c,d){return function(){a.onStateChange(b,c,!1),d.setState(b,c,!1)}}(d,e,this));b(".keyContainer-"+f[g]).append(h)},this)},this),b(".keyContainer-F6").append(b("<span/>").addClass("button").addClass("dummy").html("&nbsp;")),b(".keyContainer-F7").append(b("<span/>").addClass("button").addClass("dummy").html("&nbsp;")),b(".keyContainer-F8").append(b("<span/>").addClass("button").addClass("dummy").html("&nbsp;")),b(".keyContainer-F9").append(b("<span/>").addClass("button").addClass("dummy").html("&nbsp;")),b(".keyContainer-Kanji").append(b("<span/>").addClass("button").addClass("dummy").html("&nbsp;"))},d.prototype.getMatPos=function(a){return c.Code2Key[a]},d.prototype.setState=function(a,c,d){var e=b(this.element).find(".matrix-"+a+"-"+c);d?e.addClass("push"):e.removeClass("push")}}()},{"../MZ-700/mz700-key-matrix.js":9,"../lib/jquery_plugin_class":35,jquery:19}],28:[function(a,b,c){!function(){var b=a("jquery"),c=a("../lib/jquery_plugin_class"),d=a("../Z80/assembler.js");c("dumplist");var e=function(a){this.element=a,this.opt={readMemory:null,rows:16,_topAddr:0,fontFamily:"monospace",fontSize:"4pt",rowHeight:"14px",colWidth:"16px",headerWidth:"30px",getRegValue:function(){}}};window.dumplist=e,e.prototype.init=function(a){a&&Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this);var c=b("<div/>");c.insertBefore(b(this.element)),b(this.element).appendTo(c);var e=b(this.element);e.empty().css("font-family",this.opt.fontFamily).css("font-size",this.opt.fontSize).css("border-bottom","solid 1px gray");var f=b("<div/>");e.append(f);var g=b("<div/>").addClass("row").addClass("header").css("height",this.opt.rowHeight).css("line-height",this.opt.rowHeight).css("border-bottom","solid 1px gray");e.append(g);var h=b("<span/>").addClass("cell").addClass("header").css("display","inline-block").css("width",this.opt.headerWidth).css("text-align","center").html("ADDR");g.append(h);for(var i=0;i<16;i++)h=b("<span/>").addClass("cell").addClass("c"+i).css("display","inline-block").css("width",this.opt.colWidth).css("text-align","center"),h.html("+"+i.HEX(1)),g.append(h);this._topAddr=this.opt._topAddr;var j=this._topAddr;this.addrCols=[],this.dataCells=[];for(var k=0;k<this.opt.rows;k++)for(g=b("<div/>").addClass("row").addClass("r"+k).css("height",this.opt.rowHeight).css("line-height",this.opt.rowHeight),e.append(g),h=b("<span/>").addClass("cell").addClass("header").css("display","inline-block").css("width",this.opt.headerWidth).css("text-align","center"),g.append(h),this.addrCols.push(h),i=0;i<16;i++)null==this.readMemory?(h=b("<span/>").addClass("cell").addClass("c"+i).css("display","inline-block").css("width",this.opt.colWidth).css("text-align","center"),this.dataCells.push(h),g.append(h)):this.readMemory(j,function(a,c,d){return function(){var e=b("<span/>").addClass("cell").addClass("c"+d).css("display","inline-block").css("width",a.opt.colWidth).css("text-align","center");a.dataCells.push(e),c.append(e)}}(this,g,i)),j++;[{H:"B",L:"C"},{H:"D",L:"E"},{H:"H",L:"L"},"PC","SP","IX","IY"].forEach(function(c){var d="string"!=typeof c,e=d?c.H+c.L:c,g=d?function(b,c){a.getReg(b.H,function(d){a.getReg(b.L,function(a){c(256*d+a)})})}:function(b,c){a.getReg(b,c)};f.append(b("<button/>").attr("id","btnShowMem"+e).attr("type","button").css("width","50px").html(e).click(function(){g(c,function(a){b("#txtShowMemAddr").val(a.HEX(4)+"H"),this.topAddr(a)}.bind(this))}.bind(this)))},this),f.append(b("<input/>").attr("id","txtShowMemAddr").attr("type","text").attr("value","0000h").css("width","80px").attr("title","16進数(最後にhまたはH)の他、プログラム中のラベルも使えます。10進数、8進数(0から始まる数字)もOK")).append(b("<button/>").attr("id","btnShowMemAddr").attr("type","button").css("width","80px").html("表示更新").click(function(){var a=b("#txtShowMemAddr").val(),c=new d,e=c.parseAddress(a);null!=e&&this.topAddr(e)}.bind(this))),this.redraw()},e.prototype.setReadMemoryHandler=function(a){this.readMemory=a,this.redraw()},e.prototype.topAddr=function(a){return null!=a&&(this._topAddr=a,this.redraw()),this._topAddr},e.prototype.redraw=function(){for(var a=this._topAddr,b=0,c=0;c<this.opt.rows;c++){this.addrCols[c].html(a.HEX(4));for(var d=0;d<16;d++)null==this.readMemory?this.dataCells[b].html("**"):this.readMemory(a,function(a,b){return function(c){a.dataCells[b].html(c.HEX(2))}}(this,b)),a++,b++}},e.prototype.updateAt=function(a,b){var c=a-this._topAddr;0<=c&&c<16*this.opt.rows&&this.dataCells[c].html(b.HEX(2))}}()},{"../Z80/assembler.js":11,"../lib/jquery_plugin_class":35,jquery:19}],29:[function(a,b,c){!function(){var b=a("jquery");a("../lib/jquery_plugin_class")("Z80RegView");var c=function(a){this.element=a};window.Z80RegView=c,c.prototype.init=function(){var a=function(a){return b("<div/>").addClass("reg-value").html(a)};this.$B=a("--"),this.$C=a("--"),this.$D=a("--"),this.$E=a("--"),this.$H=a("--"),this.$L=a("--"),this.$A=a("--"),this.$FS=a("-"),this.$FZ=a("-"),this.$F5=a("-"),this.$FH=a("-"),this.$F1=a("-"),this.$FP=a("-"),this.$FN=a("-"),this.$FC=a("-"),this.$PC=a("----"),this.$SP=a("----"),this.$IX=a("----"),this.$IY=a("----"),this.$IFF1=a("-"),this.$IFF2=a("-"),this.$HALT=a("-"),this.$IM=a("-"),this.$I=a("--"),this.$R=a("--"),this.$B_=a("--"),this.$C_=a("--"),this.$D_=a("--"),this.$E_=a("--"),this.$H_=a("--"),this.$L_=a("--"),this.$A_=a("--"),this.$FS_=a("-"),this.$FZ_=a("-"),this.$F5_=a("-"),this.$FH_=a("-"),this.$F1_=a("-"),this.$FP_=a("-"),this.$FN_=a("-"),this.$FC_=a("-"),this.$R_=a("-"),b(this.element).empty().addClass("Z80RegView").append(b("<div/>").addClass("row").append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("B")).append(this.$B)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("C")).append(this.$C)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("D")).append(this.$D)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("E")).append(this.$E)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("H")).append(this.$H)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("L")).append(this.$L)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("A")).append(this.$A)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("S")).append(this.$FS)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("Z")).append(this.$FZ)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("-")).append(this.$F5)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("H")).append(this.$FH)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("-")).append(this.$F1)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("P/V")).append(this.$FP)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("N")).append(this.$FN)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("C")).append(this.$FC)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("PC")).append(this.$PC)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("SP")).append(this.$SP)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("IX")).append(this.$IX)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("IY")).append(this.$IY)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("I")).append(this.$I))).append(b("<div/>").addClass("row").append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("B'")).append(this.$B_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("C'")).append(this.$C_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("D'")).append(this.$D_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("E'")).append(this.$E_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("H'")).append(this.$H_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("L'")).append(this.$L_)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("A'")).append(this.$A_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("S'")).append(this.$FS_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("Z'")).append(this.$FZ_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("-")).append(this.$F5_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("H'")).append(this.$FH_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("-")).append(this.$F1_)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("P/V'")).append(this.$FP_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("N'")).append(this.$FN_)).append(b("<div/>").addClass("register narrow").append(b("<div/>").addClass("name").html("C'")).append(this.$FC_)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("IFF1")).append(this.$IFF1)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("IFF2")).append(this.$IFF2)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("HALT")).append(this.$HALT)).append(b("<div/>").addClass("register wide").append(b("<div/>").addClass("name").html("IM")).append(this.$IM)).append(b("<div/>").addClass("register").append(b("<div/>").addClass("name").html("R")).append(this.$R))),this.elemB=this.$B.get(0),this.elemC=this.$C.get(0),this.elemD=this.$D.get(0),this.elemE=this.$E.get(0),this.elemH=this.$H.get(0),this.elemL=this.$L.get(0),this.elemA=this.$A.get(0),this.elemFS=this.$FS.get(0),this.elemFZ=this.$FZ.get(0),this.elemF5=this.$F5.get(0),this.elemFH=this.$FH.get(0),this.elemF1=this.$F1.get(0),this.elemFP=this.$FP.get(0),this.elemFN=this.$FN.get(0),this.elemFC=this.$FC.get(0),this.elemPC=this.$PC.get(0),this.elemSP=this.$SP.get(0),this.elemIX=this.$IX.get(0),this.elemIY=this.$IY.get(0),this.elemIFF1=this.$IFF1.get(0),this.elemIFF2=this.$IFF2.get(0),this.elemHALT=this.$HALT.get(0),this.elemIM=this.$IM.get(0),this.elemI=this.$I.get(0),this.elemR=this.$R.get(0),this.elemB_=this.$B_.get(0),this.elemC_=this.$C_.get(0),this.elemD_=this.$D_.get(0),this.elemE_=this.$E_.get(0),this.elemH_=this.$H_.get(0),this.elemL_=this.$L_.get(0),this.elemA_=this.$A_.get(0),this.elemFS_=this.$FS_.get(0),this.elemFZ_=this.$FZ_.get(0),this.elemF5_=this.$F5_.get(0),this.elemFH_=this.$FH_.get(0),this.elemF1_=this.$F1_.get(0),this.elemFP_=this.$FP_.get(0),this.elemFN_=this.$FN_.get(0),this.elemFC_=this.$FC_.get(0),this.elemR_=this.$R_.get(0)},c.prototype.update=function(a){this.elemB.innerHTML=a.B.HEX(2),this.elemC.innerHTML=a.C.HEX(2),this.elemD.innerHTML=a.D.HEX(2),this.elemE.innerHTML=a.E.HEX(2),this.elemH.innerHTML=a.H.HEX(2),this.elemL.innerHTML=a.L.HEX(2),this.elemA.innerHTML=a.A.HEX(2),this.elemFS.innerHTML=128&a.F?1:0,this.elemFZ.innerHTML=64&a.F?1:0,this.elemF5.innerHTML=32&a.F?1:0,this.elemFH.innerHTML=16&a.F?1:0,this.elemF1.innerHTML=8&a.F?1:0,this.elemFP.innerHTML=4&a.F?1:0,this.elemFN.innerHTML=2&a.F?1:0,this.elemFC.innerHTML=1&a.F?1:0,this.elemPC.innerHTML=a.PC.HEX(4),this.elemSP.innerHTML=a.SP.HEX(4),this.elemIX.innerHTML=a.IX.HEX(4),this.elemIY.innerHTML=a.IY.HEX(4),this.elemI.innerHTML=a.I.HEX(2),this.elemR.innerHTML=a.R.HEX(2)},c.prototype.update_=function(a){this.elemB_.innerHTML=a.B.HEX(2),this.elemC_.innerHTML=a.C.HEX(2),this.elemD_.innerHTML=a.D.HEX(2),this.elemE_.innerHTML=a.E.HEX(2),this.elemH_.innerHTML=a.H.HEX(2),this.elemL_.innerHTML=a.L.HEX(2),this.elemA_.innerHTML=a.A.HEX(2),this.elemFS_.innerHTML=128&a.F?1:0,this.elemFZ_.innerHTML=64&a.F?1:0,this.elemF5_.innerHTML=32&a.F?1:0,this.elemFH_.innerHTML=16&a.F?1:0,this.elemF1_.innerHTML=8&a.F?1:0,this.elemFP_.innerHTML=4&a.F?1:0,this.elemFN_.innerHTML=2&a.F?1:0,this.elemFC_.innerHTML=1&a.F?1:0,this.elemR_.innerHTML=a.R.HEX(2)},c.prototype.IFF1=function(a){this.elemIFF1.innerHTML=a},c.prototype.IFF2=function(a){this.elemIFF2.innerHTML=a},c.prototype.IM=function(a){this.elemIM.innerHTML=a},c.prototype.HALT=function(a){this.elemHALT.innerHTML=a}}()},{"../lib/jquery_plugin_class":35,jquery:19}],30:[function(a,b,c){!function(){"use strict";a("../node_modules/codemirror/mode/z80/z80");var c=a("codemirror"),d=a("jquery");a("./jquery.tabview.js"),a("../lib/jquery_plugin_class")("asmlist");var e=function(a){this._root=d(a),this._asmList=this._root.find(".assemble_list"),this._opts="opts"in a?a.opts:{onAssemble:function(){},onSetBreakPoint:function(){}}};window.asmlist=e,e.prototype.create=function(a){if(!this._root.hasClass("asmlist")){Object.keys(this._opts).forEach(function(b){b in a&&(this._opts[b]=a[b])},this),this._asmList=d("<div/>").addClass("assemble_list"),this._root.addClass("asmlist").tabview("create").tabview("add",{index:"asm",caption:"Assemble List"},d("<div/>").addClass("tabAsmList").append(d("<div/>").addClass("y-scroll-pane").append(this._asmList)).append("<span>* Click a line, and set break point</span>"),function(){0==this._asmList.children().length&&(this._opts.onAssemble(this.text()),this._root.tabview("caption","src","Source List"))}.bind(this)).tabview("add",{index:"src",caption:"Source List"},d("<div/>").addClass("tabSource").append(d("<textarea type='text'/>")),null,function(){this.onSourceTabPageShown()}.bind(this));var b=this._root.find(".tabSource textarea").get(0);this._editor=this.createEditor(b,"z80",{change:function(){this._asmList.empty(),this._root.tabview("caption","src","Source List *")}.bind(this)})}},e.prototype.createEditor=function(a,b,d){var e=c.fromTextArea(a,{mode:b});return Object.keys(d).forEach(function(a){e.on(a,d[a])}),e},e.prototype.onSourceTabPageShown=function(){this._editor.refresh(),this._editor.focus()},e.prototype.text=function(a,b){if(null==a)return this._editor.getValue();this._editor.setValue(a),this._editor.markClean(),(null==b||b)&&(this._asmList.empty(),this._opts.onAssemble(a)),
this._root.tabview("caption","src","Source List")},e.prototype.list=function(){return this._asmList},e.prototype.writeList=function(a,b){this._asmList.empty(),a.forEach(function(a,c){var e=a.address,f=a.bytecode.length,g=this.createAsmRow(a,c+1);g.addClass("pc"+e.HEX(4)),f>0&&g.click(function(){var a=d(".pc"+e.HEX(4));a.hasClass("breakPoint")?(a.removeClass("breakPoint"),this._opts.onSetBreakPoint(e,f,!1)):(a.addClass("breakPoint"),this._opts.onSetBreakPoint(e,f,!0))}.bind(this)),b[e]&&a.bytecode.length>0&&g.addClass("breakPoint"),this._asmList.append(g)},this)},e.prototype.createAsmRow=function(a,b){var c=d("<div/>").addClass("row"),e=a.address;return c.append(d('<span class="colRowAttr"></span>')),c.append(d('<span class="colLineNumber">'+b+"</span>")),c.append(d('<span class="colAddress" style="">'+e.HEX(4)+"</span>")),c.append(d('<span class="colMachineCode">'+a.bytecode.map(function(a){return a.HEX(2)}).join("")+"</span>")),null!=a.label&&c.append(d('<span class="colLabel"/>').html(a.label+":")),null!=a.mnemonic&&(null==a.label&&c.append(d('<span class="colLabel"> </span>')),c.append(d('<span class="colMnemonic"/>').html(a.mnemonic)),c.append(d('<span class="colOperand"/>').html(a.operand))),c.append(d('<span class="colComment"/>').html(null==a.comment?" ":a.comment)),c},e.prototype.setCurrentAddr=function(a){var b=this._asmList.children(".pc"+a.HEX(4));if(!(b.length<=0)){var c=this._asmList,d=c.parent(),e=parseInt(d.css("height")),f=d.scrollTop(),g=b.offset().top-c.offset().top;(g<f+.1*e||f+.9*e<g)&&d.animate({scrollTop:g-.2*e},"fast"),b.addClass("current")}},e.prototype.clearCurrentAddr=function(){this._asmList.find(".current").removeClass("current")},b.exports=e}()},{"../lib/jquery_plugin_class":35,"../node_modules/codemirror/mode/z80/z80":39,"./jquery.tabview.js":34,codemirror:38,jquery:19}],31:[function(a,b,c){!function(){"use strict";var b=a("jquery");a("./jquery.tabview.js"),a("./jquery.asmlist.js"),a("../lib/jquery_plugin_class")("asmview");var c=function(a){this._root=b(a),this._root.tabview("create")};window.asmview=c,c.prototype.create=function(){},c.prototype.addTab=function(a,c,d){var e=b("<div/>").asmlist("create",{onAssemble:d.onAssemble,onSetBreakPoint:d.onSetBreakPoint});this._root.tabview("add",a,e),e.asmlist("text",c)},c.prototype.setCurrentAddr=function(a,b){this._root.tabview("page",a).asmlist("setCurrentAddr",b)},c.prototype.clearCurrentAddr=function(a){this._root.tabview("page",a).asmlist("clearCurrentAddr")},c.prototype.setSource=function(a,b,c,d){this._root.tabview("page",a).asmlist("text",b,d),this._root.tabview("caption",a,c)},c.prototype.setAsmList=function(a,b,c){this._root.tabview("page",a).asmlist("writeList",b,c)}}()},{"../lib/jquery_plugin_class":35,"./jquery.asmlist.js":30,"./jquery.tabview.js":34,jquery:19}],32:[function(a,b,c){!function(){"use strict";function b(a){var b=i[a];return b||(b={attr:0,dispcode:239}),b}function c(a){var b=a.split(""),c=!1,d=[],e="";return b.forEach(function(a){c?";"==a?(d.push(e.toUpperCase()),c=!1,e=""):e+=a:"&"==a?(e="",c=!0):d.push(a)}),d}var d=a("jquery"),e=a("../lib/jquery_plugin_class"),f=a("../lib/mz700cg.js");e("mz700scrn");var g=function(a){this._container=a,this._ctx=null};window.mz700scrn=g,g.colors={black:0,blue:1,red:2,magenta:3,green:4,cyan:5,yellow:6,white:7},g.size={cols:40,rows:25},g.charSize={dotWidth:8,dotHeight:8},g.prototype.create=function(a){this.opt={cols:g.size.cols,rows:g.size.rows,CG:null,color:g.colors.white,backgroundColor:g.colors.blue,width:"100%",alt:null,title:"MZ-700 FULL JAVASCRIPT EMULATOR"},a=a||{},Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this),null==this.opt.CG&&(this.opt.CG=new f),this._font=this.opt.CG,this.vramText=[],this.vramAttr=[];for(var b=0;b<this.opt.cols*this.opt.rows;b++)this.vramText.push(0),this.vramAttr.push(113);var c=document.createElement("CANVAS");c.setAttribute("width",g.charSize.dotWidth*this.opt.cols+"px"),c.setAttribute("height",g.charSize.dotHeight*this.opt.rows+"px"),c.setAttribute("style","width:100%;height:auto"),d(c).css("width",this.opt.width),null!=this.opt.alt&&c.setAttribute("alt",this.opt.alt),null!=this.opt.title&&c.setAttribute("title",this.opt.title),this._container.appendChild(c),this._ctx=c.getContext("2d"),this.idxloc=function(a,b,c){for(var d=0;d<c;d++)for(var e=0;e<b;e++)a.push({x:g.charSize.dotWidth*e,y:g.charSize.dotHeight*d});return a}([],this.opt.cols,this.opt.rows)},g.prototype.redrawChar=function(a,b){for(var c=a<<7,d=this.opt.cols*this.opt.rows,e=0;e<d;e++){var f=this.vramAttr[e];this.vramText[e]==b&&(128&f)==c&&this.writeVram(e,f,b)}},g.prototype.writeVram=function(a,b,c){this._writeVram(a,b,c),this.vramText[a]=c,this.vramAttr[a]=b},g.prototype._writeVram=function(a,b,c){var d=this.idxloc[a];this._ctx.putImageData(this._font.get(b,c).getImageData(),d.x,d.y)},g.prototype.redraw=function(){for(var a=this.opt.cols*this.opt.rows,b=0;b<a;b++)this._writeVram(b,this.vramAttr[b],this.vramText[b])},g.prototype.changeCG=function(a){this._font=a},g.prototype.restoreCG=function(a){this._font=this.opt.CG},g.prototype.clear=function(){for(var a=this.opt.rows*this.opt.cols,b=c(" "),d=0;d<a;d++)this.putChars(b,d,0)},g.prototype.puts=function(a,b,d){var e=c(a);return this.putChars(e,b,d)},g.convert=function(a){var b=parseInt(d(a).attr("charSize"))||8,e=parseInt(d(a).attr("padding"))||0,f=7&parseInt(d(a).attr("color")||"7"),g=7&parseInt(d(a).attr("bgColor")||"1"),h=a.innerText,i=c(h);d(a).empty().mz700scrn("create",{cols:i.length+2*e,rows:1+2*e,width:b*(i.length+2*e)+"px",color:f,backgroundColor:g,alt:h,title:h}).mz700scrn("clear").mz700scrn("putChars",i,e,e),d(a).find("canvas").css("display","inherit")};var h=[[[" ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O"],["P","Q","R","S","T","U","V","W","X","Y","Z","┼","└","┘","├","┴"],["0","1","2","3","4","5","6","7","8","9","-","=",";","/",".",","],["","","","","","","","","","","","","","","",""],["→","SPADE","","","DIA","←","CLUB","●","○","?","●反転","","","","","",":"],["↑","<","[","HEART","]","@","",">","","BACKSLASH","HATCH","","","","",""],["π","!",'"',"#","$","%","AMP","'","(",")","+","*","","","",""],["","","","","","","","","","","","","","","",""],["↓","チ","コ","ソ","シ","イ","ハ","キ","ク","ニ","マ","ノ","リ","モ","ミ","ラ"],["セ","タ","ス","ト","カ","ナ","ヒ","テ","サ","ン","ツ","ロ","ケ","「","ァ","ャ"],["ワ","ヌ","フ","ア","ウ","エ","オ","ヤ","ユ","ヨ","ホ","ヘ","レ","メ","ル","ネ"],["ム","」","ィ","ュ","ヲ","、","ゥ","ョ","゜","・","ェ","ッ","゛","。","ォ","ー"],["PUSHDOWN","~DOWN","~UP","~RIGHT","~LEFT","~HOME","~CLEAR","UFO","CARRIGHT","CARUP","HUMAN","LHUMAN","RHUMAN","DHUMAN","FILLEDFACE","FACE"],["日","月","火","水","木","金","土","生","年","時","分","秒","円","￥","￡","蛇"],[" ","","","","","","","","","","","","","","",""],[" ","","","","","","","","","","","","","","",""]],[[" ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o"],["p","q","r","s","t","u","v","w","x","y","z","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","ち","こ","そ","し","い","は","き","く","に","ま","の","り","も","み","ら"],["せ","た","す","と","か","な","ひ","て","さ","ん","つ","ろ","け","","ぁ","ゃ"],["わ","ぬ","ふ","あ","う","え","お","や","ゆ","よ","ほ","へ","れ","め","る","ね"],["む","","ぃ","ゅ","を","","ぅ","ょ","","","ぇ","っ","","","ぉ",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","","",""]]],i=function(a){return h.forEach(function(b,c){b.forEach(function(b,d){b.forEach(function(b,e){b in a||(a[b]={attr:c,dispcode:d<<4|e})})})}),a}({});g.prototype.putChars=function(a,c,d){var e=this.opt.rows*this.opt.cols,f=0,g=d*this.opt.cols+c,h=this.opt.color<<4|this.opt.backgroundColor;return a.forEach(function(a){if(g<e){var c=b(a);this.writeVram(g,c.attr<<7|h,c.dispcode),g++,f++}},this),f}}()},{"../lib/jquery_plugin_class":35,"../lib/mz700cg.js":36,jquery:19}],33:[function(a,b,c){!function(){var b=a("jquery");a("../lib/jquery_plugin_class")("soundctrl");var c=function(a){this.element=a,b(this.element).addClass("soundctrl"),this.opt={onChangeVolume:function(){},onChangeMute:function(){},urlIconOn:"images/icon-sound-on.svg",urlIconOff:"images/icon-sound-off.svg",colOn:"red",colOff:"silver",colMute:"gray",maxVolume:10,initialVolume:10,initialMute:!1},this.mute=!1,this.volume=10};window.soundctrl=c,c.prototype.create=function(a){Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this),this.iconOn=b("<img/>").attr("src",this.opt.urlIconOn).attr("width","100%").attr("height","100%"),this.iconOff=b("<img/>").attr("src",this.opt.urlIconOff).attr("width","100%").attr("height","100%"),this.opt.initialMute?(this.iconOn.css("display","none"),this.mute=!0):(this.iconOff.css("display","none"),this.mute=!1),this.gauges=[];for(var c=b("<span/>").addClass("gauge").css("display","inline-block").css("padding-right",this.opt.stepMargin),d=0;d<this.opt.maxVolume;d++){var e=b("<span/>").addClass("step").css("display","inline-block").click(function(a){return function(){this.gaugeOnClick(a)}}(d+1).bind(this)).css("overflow","hidden").html(" ");this.gauges.push(e),c.append(e)}b(this.element).append(b("<button type='button'/>").addClass("muteButton").css("padding","0").append(this.iconOn).append(this.iconOff).click(function(){this.muteOnClick()}.bind(this))).append(c),this.setVolume(this.opt.initialVolume),this.setMute(this.opt.initialMute)},c.prototype.muteOnClick=function(){this.setMute(!this.mute)},c.prototype.gaugeOnClick=function(a){this.setVolume(a)},c.prototype.setMute=function(a){this.mute=a,this.redrawMuteButton(),this.opt.onChangeMute.call(this,this.mute),this.redrawGauge(),this.mute?this.opt.onChangeVolume.call(this,0):this.opt.onChangeVolume.call(this,this.volume)},c.prototype.setVolume=function(a){if(a<=0)return void this.setMute(!0);a>=this.opt.maxVolume&&(a=this.opt.maxVolume),this.mute&&(this.mute=!1,this.redrawMuteButton(),this.opt.onChangeMute.call(this,this.mute)),this.volume=a,this.redrawGauge(),this.opt.onChangeVolume.call(this,this.volume)},c.prototype.redrawMuteButton=function(){this.mute?(this.iconOn.css("display","none"),this.iconOff.css("display","block")):(this.iconOn.css("display","block"),this.iconOff.css("display","none"))},c.prototype.redrawGauge=function(){for(var a=0;a<this.opt.maxVolume;a++){var b=this.opt.colMute;a>=this.volume?b=this.opt.colOff:this.mute||(b=this.opt.colOn),this.gauges[a].css("background-color",b)}}}()},{"../lib/jquery_plugin_class":35,jquery:19}],34:[function(a,b,c){!function(){"use strict";var c=a("jquery");a("../lib/jquery_plugin_class")("tabview");var d=function(a){this._root=c(a),this._tabs=this._root.children(".tabs"),this._container=this._root.find("tabPageContainer"),this._currentPage=null,this._root._data={},this._root._lastTabId=0};window.tabview=d,d.tabId=function(a){return"tabId"+a},d.prototype.create=function(){0===this._container.length&&(this._tabs=c("<div/>").addClass("tabs"),this._container=c("<div/>").addClass("tabPageContainer clearfix"),this._root.addClass("tabview"),this._root.append(this._tabs).append(this._container))},d.prototype.add=function(a,b,e,f){var g=null;"object"==typeof a?(g=a.index,a=a.caption):(this._root._lastTabId++,g=this._root._lastTabId);var h=d.tabId(g),i=c("<button type='button'/>").click(function(){this._tabs.children("button.tab").removeClass("selected"),i.addClass("selected"),this._container.children().hide(),e&&e(),b.show(f)}.bind(this)).html(a);i.addClass("tab").addClass(h),b.addClass(h),this._tabs.append(i),this._container.append(b),null==this._currentPage?this.show(g):b.hide()},d.prototype.show=function(a){var b=d.tabId(a),c=this._container.children("."+b);this._tabs.children("button.tab").removeClass("selected"),this._container.children().hide(),this._currentPage=c.get(0),this._tabs.children("button."+b).addClass("selected"),c.show()},d.prototype.index=function(a){if(null==a){a=-1;var b=this._currentPage;if(null!=b){var c=0;this._container.children().each(function(){if(this===b)return a=c,!1;c++})}return a}this.show(a)},d.prototype.currentPage=function(){return c(this._currentPage)},d.prototype.page=function(a){return a=d.tabId(a),this._container.children("."+a)},d.prototype.data=function(a,b){if(null==b)return this._root._data[a];this._root._data[a]=b},d.prototype.caption=function(a,b){if(a=d.tabId(a),null==b)return this._tabs.children("."+a).html();this._tabs.children("."+a).html(b)},b.exports=d}()},{"../lib/jquery_plugin_class":35,jquery:19}],35:[function(a,b,c){!function(){"use strict";var c=a("jquery");try{var d=function(a){c.fn[a]=function(b){var d=Array.prototype.slice.call(arguments,1),e=function(c){var e=window[a];return null==c[a]&&(c[a]=new e(c)),e.prototype[b].apply(c[a],d)};if(1==this.length){var f=e(this[0]);return void 0==f&&(f=this),f}return c(this).each(function(){e(this)})}};b.exports=d}catch(a){console.error("exception: "+a.name+a.message+" at "+a.fileName+"("+a.lineNumber+")")}}()},{jquery:19}],36:[function(a,b,c){"use strict";function d(a,b,c){a=a||d.ROM,b=b||8,c=c||8,this._fontTable=null,this._patternBuffer=a,this._width=b,this._height=c,this.createFontTable()}d.prototype.createFontTable=function(){this._fontTable=new Array(32768);for(var a=0;a<2;a++)for(var b=0;b<256;b++)this.initFont(a,b)},d.prototype.initFont=function(a,b){for(var c=this._patternBuffer[256*a+b],e=0;e<8;e++)for(var f=0;f<8;f++){var g=a<<7|f<<4|e;this._fontTable[d.tableIndex(g,b)]=new d.FontImage(c,d.Colors[f],d.Colors[e],this._width,this._height)}},d.prototype.setPattern=function(a,b,c,d){var e=256*a+b;this._patternBuffer[e][c]=d,this.initFont(a,b)},d.tableIndex=function(a,b){return a<<8|b},d.prototype.get=function(a,b){return this._fontTable[d.tableIndex(a,b)]},d.Colors=["rgb(0,0,0)","rgb(0,0,255)","rgb(255,0,0)","rgb(255,0,255)","rgb(0,255,0)","rgb(0,255,255)","rgb(255,255,0)","rgb(255,255,255)"],d.FontImage=function(a,b,c,d,e){this.getImageData=function(){var f=document.createElement("CANVAS");f.setAttribute("width",d+"px"),f.setAttribute("height",e+"px");for(var g=f.getContext("2d"),h=0;h<8;h++)for(var i=a[h],j=0;j<8;j++)g.fillStyle=0!=(i&128>>j)?b:c,g.fillRect(j,h,1,1);return this.getImageData=function(){return g.getImageData(0,0,d,e)},this.getImageData()}.bind(this)},d.ROM=[[0,0,0,0,0,0,0,0],[24,36,66,126,66,66,66,0],[124,34,34,60,34,34,124,0],[28,34,64,64,64,34,28,0],[120,36,34,34,34,36,120,0],[126,64,64,120,64,64,126,0],[126,64,64,120,64,64,64,0],[28,34,64,78,66,34,28,0],[66,66,66,126,66,66,66,0],[28,8,8,8,8,8,28,0],[14,4,4,4,4,68,56,0],[66,68,72,112,72,68,66,0],[64,64,64,64,64,64,126,0],[66,102,90,90,66,66,66,0],[66,98,82,74,70,66,66,0],[24,36,66,66,66,36,24,0],[124,66,66,124,64,64,64,0],[24,36,66,66,74,36,26,0],[124,66,66,124,72,68,66,0],[60,66,64,60,2,66,60,0],[62,8,8,8,8,8,8,0],[66,66,66,66,66,66,60,0],[66,66,66,36,36,24,24,0],[66,66,66,90,90,102,66,0],[66,66,36,24,36,66,66,0],[34,34,34,28,8,8,8,0],[126,2,4,24,32,64,126,0],[8,8,8,8,255,8,8,8],[8,8,8,8,15,0,0,0],[8,8,8,8,248,0,0,0],[8,8,8,8,15,8,8,8],[8,8,8,8,255,0,0,0],[60,66,70,90,98,66,60,0],[8,24,40,8,8,8,62,0],[60,66,2,12,48,64,126,0],[60,66,2,60,2,66,60,0],[4,12,20,36,126,4,4,0],[126,64,120,4,2,68,56,0],[28,32,64,124,66,66,60,0],[126,66,4,8,16,16,16,0],[60,66,66,60,66,66,60,0],[60,66,66,62,2,4,56,0],[0,0,0,126,0,0,0,0],[0,0,126,0,126,0,0,0],[0,0,8,0,0,8,8,16],[0,2,4,8,16,32,64,0],[0,0,0,0,0,24,24,0],[0,0,0,0,0,8,8,16],[0,255,0,0,0,0,0,0],[64,64,64,64,64,64,64,64],[128,128,128,128,128,128,128,255],[1,1,1,1,1,1,1,255],[0,0,0,255,0,0,0,0],[16,16,16,16,16,16,16,16],[255,255,0,0,0,0,0,0],[192,192,192,192,192,192,192,192],[0,0,0,0,0,255,0,0],[4,4,4,4,4,4,4,4],[0,0,0,0,255,255,255,255],[15,15,15,15,15,15,15,15],[0,0,0,0,0,0,0,255],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,255,255],[3,3,3,3,3,3,3,3],[0,0,8,4,254,4,8,0],[8,28,62,127,127,28,62,0],[255,127,63,31,15,7,3,1],[255,255,255,255,255,255,255,255],[8,28,62,127,62,28,8,0],[0,0,16,32,127,32,16,0],[8,28,42,127,42,8,8,0],[0,60,126,126,126,126,60,0],[0,60,66,66,66,66,60,0],[60,66,2,12,16,0,16,0],[255,195,129,129,129,129,195,255],[0,0,0,0,3,4,8,8],[0,0,0,0,192,32,16,16],[128,192,224,240,248,252,254,255],[1,3,7,15,31,63,127,255],[0,0,8,0,0,8,0,0],[0,8,28,42,8,8,8,0],[14,24,48,96,48,24,14,0],[60,32,32,32,32,32,60,0],[54,127,127,127,62,28,8,0],[60,4,4,4,4,4,60,0],[28,34,74,86,76,32,30,0],[255,254,252,248,240,224,192,128],[112,24,12,6,12,24,112,0],[160,80,160,80,160,80,160,80],[0,64,32,16,8,4,2,0],[170,85,170,85,170,85,170,85],[240,240,240,240,15,15,15,15],[0,0,0,0,15,8,8,8],[0,0,0,0,248,8,8,8],[8,8,8,8,248,8,8,8],[0,0,0,0,255,8,8,8],[0,0,1,62,84,20,20,0],[8,8,8,8,0,0,8,0],[36,36,36,0,0,0,0,0],[36,36,126,36,126,36,36,0],[8,30,40,28,10,60,8,0],[0,98,100,8,16,38,70,0],[48,72,72,48,74,68,58,0],[4,8,16,0,0,0,0,0],[4,8,16,16,16,8,4,0],[32,16,8,8,8,16,32,0],[0,8,8,62,8,8,0,0],[8,42,28,62,28,42,8,0],[15,15,15,15,240,240,240,240],[129,66,36,24,24,36,66,129],[16,16,32,192,0,0,0,0],[8,8,4,3,0,0,0,0],[255,0,0,0,0,0,0,0],[128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128],[255,1,1,1,1,1,1,1],[0,0,255,0,0,0,0,0],[32,32,32,32,32,32,32,32],[1,2,4,8,16,32,64,128],[128,64,32,16,8,4,2,1],[0,0,0,0,255,0,0,0],[8,8,8,8,8,8,8,8],[255,255,255,255,0,0,0,0],[240,240,240,240,240,240,240,240],[0,0,0,0,0,0,255,0],[2,2,2,2,2,2,2,2],[0,0,0,0,0,255,255,255],[7,7,7,7,7,7,7,7],[0,8,8,8,42,28,8,0],[4,56,8,62,8,8,16,0],[0,62,2,2,2,2,62,0],[0,34,34,18,2,4,24,0],[0,48,2,50,2,4,56,0],[2,4,8,24,40,8,8,0],[0,8,4,34,34,34,34,0],[8,62,8,62,8,8,8,0],[0,30,18,34,2,4,24,0],[0,28,0,0,0,0,62,0],[0,62,2,2,20,8,4,0],[4,4,4,4,4,8,16,0],[36,36,36,36,4,8,16,0],[0,62,16,62,16,16,14,0],[0,28,0,28,0,60,2,0],[28,0,62,2,2,4,8,0],[16,62,18,20,16,16,14,0],[0,30,18,42,6,4,24,0],[0,62,2,4,8,20,34,0],[16,16,16,24,20,16,16,0],[16,62,18,18,18,18,36,0],[8,8,62,8,8,16,32,0],[32,32,62,32,32,32,30,0],[28,0,62,8,8,8,16,0],[20,62,20,20,4,8,16,0],[0,48,0,2,2,4,56,0],[0,42,42,42,2,4,8,0],[0,62,34,34,34,34,62,0],[16,30,36,4,4,4,8,0],[30,16,16,16,0,0,0,0],[0,0,62,2,12,8,16,0],[0,0,16,62,18,20,16,0],[0,62,34,34,2,4,8,0],[0,62,2,20,8,20,32,0],[0,62,2,2,2,4,24,0],[62,2,10,12,8,8,16,0],[8,62,34,34,2,4,8,0],[0,62,8,8,8,8,62,0],[4,62,4,12,20,36,4,0],[16,16,62,18,20,16,16,0],[0,28,4,4,4,4,62,0],[0,62,2,62,2,2,62,0],[8,62,8,8,42,42,8,0],[0,16,40,4,2,2,0,0],[0,32,32,34,36,40,48,0],[0,2,2,20,8,20,32,0],[0,8,40,40,42,42,44,0],[8,62,4,8,28,42,8,0],[0,8,16,32,34,62,2,0],[0,0,0,8,8,8,120,0],[0,0,4,8,24,40,8,0],[0,0,0,28,4,4,62,0],[0,62,2,62,2,4,8,0],[0,0,0,0,64,32,16,0],[0,0,8,62,34,2,12,0],[0,0,60,4,60,4,60,0],[112,80,112,0,0,0,0,0],[0,0,0,0,0,0,32,0],[0,0,0,62,8,8,62,0],[0,0,0,42,42,2,12,0],[16,72,32,0,0,0,0,0],[0,0,0,0,112,80,112,0],[0,0,4,62,12,20,36,0],[0,0,0,28,0,0,0,0],[28,28,62,28,8,0,62,0],[255,247,247,247,213,227,247,255],[255,247,227,213,247,247,247,255],[255,255,247,251,129,251,247,255],[255,255,239,223,129,223,239,255],[187,187,187,131,187,187,187,255],[227,221,191,191,191,221,227,255],[24,36,126,255,90,36,0,0],[224,71,66,126,66,71,224,0],[34,62,42,8,8,73,127,65],[28,28,8,62,8,8,20,34],[0,17,210,252,210,17,0,0],[0,136,75,63,75,136,0,0],[34,20,8,8,62,8,28,28],[60,126,255,219,255,231,126,60],[60,66,129,165,129,153,66,60],[62,34,34,62,34,34,62,0],[62,34,62,34,62,34,66,0],[8,42,42,8,20,34,65,0],[8,9,58,12,28,42,73,0],[8,8,62,8,28,42,73,0],[8,20,62,73,62,28,127,0],[0,8,8,62,8,8,127,0],[8,72,126,72,62,8,127,0],[32,62,72,60,40,126,8,0],[4,126,84,127,82,127,10,0],[8,20,34,127,18,18,36,0],[56,18,127,23,59,82,20,0],[127,73,73,127,65,65,65,0],[34,20,62,8,62,8,8,0],[12,18,16,56,16,16,62,0],[0,192,200,84,84,85,34,0],[0,0,0,0,0,2,255,2],[2,2,2,2,2,2,7,2],[2,2,2,2,2,2,255,2],[0,0,32,80,136,5,2,0],[0,14,17,34,196,4,2,1],[0,255,0,129,66,66,129,0],[0,112,136,68,35,32,64,128],[0,196,164,148,143,148,164,196],[0,35,37,41,241,41,37,35],[136,144,160,192,192,168,152,184],[168,176,184,192,192,160,144,136],[128,64,32,16,31,32,64,128],[0,0,36,36,231,36,36,0],[8,8,62,0,0,62,8,8],[8,16,32,16,8,4,2,4],[85,170,85,170,85,170,85,170],[0,0,0,0,0,0,0,0],[0,112,112,112,0,0,0,0],[0,7,7,7,0,0,0,0],[0,119,119,119,0,0,0,0],[0,0,0,0,0,112,112,112],[0,112,112,112,0,112,112,112],[0,7,7,7,0,112,112,112],[0,119,119,119,0,112,112,112],[0,0,0,0,0,7,7,7],[0,112,112,112,0,7,7,7],[0,7,7,7,0,7,7,7],[0,119,119,119,0,7,7,7],[0,0,0,0,0,119,119,119],[0,112,112,112,0,119,119,119],[0,7,7,7,0,119,119,119],[0,119,119,119,0,119,119,119],[0,0,0,0,0,0,0,0],[0,0,56,4,60,68,58,0],[64,64,92,98,66,98,92,0],[0,0,60,66,64,66,60,0],[2,2,58,70,66,70,58,0],[0,0,60,66,126,64,60,0],[12,18,16,124,16,16,16,0],[0,0,58,70,70,58,2,60],[64,64,92,98,66,66,66,0],[8,0,24,8,8,8,28,0],[4,0,12,4,4,4,68,56],[64,64,68,72,80,104,68,0],[24,8,8,8,8,8,28,0],[0,0,118,73,73,73,73,0],[0,0,92,98,66,66,66,0],[0,0,60,66,66,66,60,0],[0,0,92,98,98,92,64,64],[0,0,58,70,70,58,2,2],[0,0,92,98,64,64,64,0],[0,0,62,64,60,2,124,0],[16,16,124,16,16,18,12,0],[0,0,66,66,66,66,60,0],[0,0,66,66,66,36,24,0],[0,0,65,73,73,73,54,0],[0,0,68,40,16,40,68,0],[0,0,66,66,70,58,2,60],[0,0,126,4,24,32,126,0],[8,8,8,8,255,8,8,8],[8,8,8,8,15,0,0,0],[8,8,8,8,248,0,0,0],[8,8,8,8,15,8,8,8],[8,8,8,8,255,0,0,0],[60,66,70,90,98,66,60,0],[8,24,40,8,8,8,62,0],[60,66,2,12,48,64,126,0],[60,66,2,60,2,66,60,0],[4,12,20,36,126,4,4,0],[126,64,120,4,2,68,56,0],[28,32,64,124,66,66,60,0],[126,66,4,8,16,16,16,0],[60,66,66,60,66,66,60,0],[60,66,66,62,2,4,56,0],[0,0,0,126,0,0,0,0],[0,0,126,0,126,0,0,0],[0,0,8,0,0,8,8,16],[0,2,4,8,16,32,64,0],[0,0,0,0,0,24,24,0],[0,0,0,0,0,8,8,16],[0,255,0,0,0,0,0,0],[64,64,64,64,64,64,64,64],[128,128,128,128,128,128,128,255],[1,1,1,1,1,1,1,255],[0,0,0,255,0,0,0,0],[16,16,16,16,16,16,16,16],[255,255,0,0,0,0,0,0],[192,192,192,192,192,192,192,192],[0,0,0,0,0,255,0,0],[4,4,4,4,4,4,4,4],[0,0,0,0,255,255,255,255],[15,15,15,15,15,15,15,15],[0,0,0,0,0,0,0,255],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,255,255],[3,3,3,3,3,3,3,3],[0,0,8,4,254,4,8,0],[8,28,62,127,127,28,62,0],[255,127,63,31,15,7,3,1],[255,255,255,255,255,255,255,255],[8,28,62,127,62,28,8,0],[0,0,16,32,127,32,16,0],[8,28,42,127,42,8,8,0],[0,60,126,126,126,126,60,0],[0,60,66,66,66,66,60,0],[60,66,2,12,16,0,16,0],[255,195,129,129,129,129,195,255],[0,0,0,0,3,4,8,8],[0,0,0,0,192,32,16,16],[128,192,224,240,248,252,254,255],[1,3,7,15,31,63,127,255],[0,0,8,0,0,8,0,0],[0,8,28,42,8,8,8,0],[14,24,48,96,48,24,14,0],[60,32,32,32,32,32,60,0],[54,127,127,127,62,28,8,0],[60,4,4,4,4,4,60,0],[28,34,74,86,76,32,30,0],[255,254,252,248,240,224,192,128],[112,24,12,6,12,24,112,0],[160,80,160,80,160,80,160,80],[0,64,32,16,8,4,2,0],[170,85,170,85,170,85,170,85],[240,240,240,240,15,15,15,15],[0,0,0,0,15,8,8,8],[0,0,0,0,248,8,8,8],[8,8,8,8,248,8,8,8],[0,0,0,0,255,8,8,8],[0,0,1,62,84,20,20,0],[8,8,8,8,0,0,8,0],[36,36,36,0,0,0,0,0],[36,36,126,36,126,36,36,0],[8,30,40,28,10,60,8,0],[0,98,100,8,16,38,70,0],[48,72,72,48,74,68,58,0],[4,8,16,0,0,0,0,0],[4,8,16,16,16,8,4,0],[32,16,8,8,8,16,32,0],[0,8,8,62,8,8,0,0],[8,42,28,62,28,42,8,0],[15,15,15,15,240,240,240,240],[129,66,36,24,24,36,66,129],[16,16,32,192,0,0,0,0],[8,8,4,3,0,0,0,0],[255,0,0,0,0,0,0,0],[128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128],[255,1,1,1,1,1,1,1],[0,0,255,0,0,0,0,0],[32,32,32,32,32,32,32,32],[4,8,17,34,68,136,16,32],[32,16,136,68,34,17,8,4],[0,0,0,0,255,0,0,0],[8,8,8,8,8,8,8,8],[255,255,255,255,0,0,0,0],[240,240,240,240,240,240,240,240],[0,0,0,0,0,0,255,0],[2,2,2,2,2,2,2,2],[0,0,0,0,0,255,255,255],[7,7,7,7,7,7,7,7],[0,8,8,8,42,28,8,0],[16,254,32,124,2,2,252,0],[0,252,2,0,0,128,126,0],[60,8,16,126,8,16,12,0],[64,64,64,64,68,68,56,0],[132,130,130,130,130,144,96,0],[132,158,132,132,156,166,92,0],[16,126,8,126,4,2,96,24],[12,24,48,96,48,24,12,0],[158,128,128,128,128,144,222,0],[16,126,16,126,16,112,156,114],[56,84,146,146,146,146,100,0],[68,68,68,100,4,8,16,0],[32,248,32,248,34,34,28,0],[112,16,20,126,148,148,100,0],[96,0,156,162,194,130,28,0],[68,68,254,68,88,64,62,0],[32,252,64,94,128,160,190,0],[8,254,8,56,72,56,8,16],[32,34,44,48,64,128,126,0],[34,249,37,36,36,36,72,0],[32,250,65,68,156,166,28,0],[224,38,69,132,132,136,112,0],[254,4,8,16,16,8,4,0],[32,254,16,8,68,32,24,0],[16,32,32,112,72,136,134,0],[128,124,2,2,2,4,24,0],[124,8,16,44,66,2,36,24],[132,190,132,132,132,132,72,0],[30,16,16,16,0,0,0,0],[0,32,112,32,120,148,104,0],[0,0,88,228,40,32,16,0],[32,228,42,50,98,162,36,0],[4,68,124,74,178,151,102,0],[56,0,16,74,74,138,48,0],[32,252,32,124,170,146,100,0],[24,0,60,66,2,4,8,0],[16,0,124,8,16,40,70,0],[32,253,33,124,162,162,100,0],[72,76,50,226,36,16,16,8],[8,156,170,202,202,140,24,0],[8,14,8,8,120,142,120,0],[158,132,158,132,156,166,220,0],[0,32,80,136,4,2,2,0],[32,230,44,52,100,164,34,0],[4,68,124,74,178,146,100,0],[124,8,16,60,66,26,36,24],[32,228,42,50,102,171,38,0],[32,253,33,96,160,98,62,0],[0,0,0,0,8,8,8,120],[0,0,72,68,68,68,32,0],[0,0,16,184,212,152,48,0],[16,254,32,116,184,72,126,0],[0,0,0,0,0,64,32,16],[0,32,0,120,4,4,8,0],[0,0,32,56,32,120,96,0],[112,80,112,0,0,0,0,0],[0,0,0,0,0,0,32,0],[0,32,0,120,16,48,76,0],[0,0,0,248,4,4,24,0],[32,144,64,0,0,0,0,0],[0,0,0,0,0,112,80,112],[0,32,116,32,120,164,104,0],[0,0,0,28,0,0,0,0],[28,28,62,28,8,0,62,0],[255,247,247,247,213,227,247,255],[255,247,227,213,247,247,247,255],[255,255,247,251,129,251,247,255],[255,255,239,223,129,223,239,255],[187,187,187,131,187,187,187,255],[227,221,191,191,191,221,227,255],[24,36,126,255,90,36,0,0],[224,71,66,126,66,71,224,0],[34,62,42,8,8,73,127,65],[28,28,8,62,8,8,20,34],[0,17,210,252,210,17,0,0],[0,136,75,63,75,136,0,0],[34,20,8,8,62,8,28,28],[60,126,255,219,255,231,126,60],[60,66,129,165,129,153,66,60],[62,34,34,62,34,34,62,0],[62,34,62,34,62,34,66,0],[8,42,42,8,20,34,65,0],[8,9,58,12,28,42,73,0],[8,8,62,8,28,42,73,0],[8,20,62,73,62,28,127,0],[0,8,8,62,8,8,127,0],[8,72,126,72,62,8,127,0],[32,62,72,60,40,126,8,0],[4,126,84,127,82,127,10,0],[8,20,34,127,18,18,36,0],[56,18,127,23,59,82,20,0],[127,73,73,127,65,65,65,0],[34,20,62,8,62,8,8,0],[12,18,16,56,16,16,62,0],[0,192,200,84,84,85,34,0],[0,0,0,0,0,2,255,2],[2,2,2,2,2,2,7,2],[2,2,2,2,2,2,255,2],[0,0,32,80,136,5,2,0],[0,14,17,34,196,4,2,1],[0,255,0,129,66,66,129,0],[0,112,136,68,35,32,64,128],[0,196,164,148,143,148,164,196],[0,35,37,41,241,41,37,35],[136,144,160,192,192,168,152,184],[168,176,184,192,192,160,144,136],[128,64,32,16,31,32,64,128],[0,0,36,36,231,36,36,0],[8,8,62,0,0,62,8,8],[8,16,32,16,8,4,2,4],[85,170,85,170,85,170,85,170],[0,0,0,0,0,0,0,0],[0,112,112,112,0,0,0,0],[0,7,7,7,0,0,0,0],[0,119,119,119,0,0,0,0],[0,0,0,0,0,112,112,112],[0,112,112,112,0,112,112,112],[0,7,7,7,0,112,112,112],[0,119,119,119,0,112,112,112],[0,0,0,0,0,7,7,7],[0,112,112,112,0,7,7,7],[0,7,7,7,0,7,7,7],[0,119,119,119,0,7,7,7],[0,0,0,0,0,119,119,119],[0,112,112,112,0,119,119,119],[0,7,7,7,0,119,119,119],[0,119,119,119,0,119,119,119]],b.exports=d},{}],37:[function(a,b,c){"use strict";function d(a){return parseInt(a,8)}b.exports=d},{}],38:[function(a,b,c){!function(a,d){"object"==typeof c&&void 0!==b?b.exports=d():"function"==typeof define&&define.amd?define(d):a.CodeMirror=d()}(this,function(){"use strict";function a(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function b(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function c(a,c){return b(a).appendChild(c)}function d(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function e(a,b,c,e){var f=d(a,b,c,e);return f.setAttribute("role","presentation"),f}function f(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do{if(11==b.nodeType&&(b=b.host),b==a)return!0}while(b=b.parentNode)}function g(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function h(b,c){var d=b.className;a(c).test(d)||(b.className+=(d?" ":"")+c)}function i(b,c){for(var d=b.split(" "),e=0;e<d.length;e++)d[e]&&!a(d[e]).test(c)&&(c+=" "+d[e]);return c}function j(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function k(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function l(a,b,c,d,e){null==b&&-1==(b=a.search(/[^\s\u00a0]/))&&(b=a.length);for(var f=d||0,g=e||0;;){var h=a.indexOf("\t",f);if(h<0||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}}function m(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function n(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function o(a){for(;Ug.length<=a;)Ug.push(p(Ug)+" ");return Ug[a]}function p(a){return a[a.length-1]}function q(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function r(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=e;)d++;a.splice(d,0,b)}function s(){}function t(a,b){var c;return Object.create?c=Object.create(a):(s.prototype=a,c=new s),b&&k(b,c),c}function u(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Vg.test(a))}function v(a,b){return b?!!(b.source.indexOf("\\w")>-1&&u(a))||b.test(a):u(a)}function w(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function x(a){return a.charCodeAt(0)>=768&&Wg.test(a)}function y(a,b,c){for(;(c<0?b>0:b<a.length)&&x(a.charAt(b));)b+=c;return b}function z(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,f=d<0?Math.ceil(e):Math.floor(e);if(f==b)return a(f)?b:c;a(f)?c=f:b=f+d}}function A(a,b,c){var f=this;this.input=c,f.scrollbarFiller=d("div",null,"CodeMirror-scrollbar-filler"),f.scrollbarFiller.setAttribute("cm-not-content","true"),f.gutterFiller=d("div",null,"CodeMirror-gutter-filler"),f.gutterFiller.setAttribute("cm-not-content","true"),f.lineDiv=e("div",null,"CodeMirror-code"),f.selectionDiv=d("div",null,null,"position: relative; z-index: 1"),f.cursorDiv=d("div",null,"CodeMirror-cursors"),f.measure=d("div",null,"CodeMirror-measure"),f.lineMeasure=d("div",null,"CodeMirror-measure"),f.lineSpace=e("div",[f.measure,f.lineMeasure,f.selectionDiv,f.cursorDiv,f.lineDiv],null,"position: relative; outline: none");var g=e("div",[f.lineSpace],"CodeMirror-lines");f.mover=d("div",[g],null,"position: relative"),f.sizer=d("div",[f.mover],"CodeMirror-sizer"),f.sizerWidth=null,f.heightForcer=d("div",null,null,"position: absolute; height: "+Pg+"px; width: 1px;"),f.gutters=d("div",null,"CodeMirror-gutters"),f.lineGutter=null,f.scroller=d("div",[f.sizer,f.heightForcer,f.gutters],"CodeMirror-scroll"),f.scroller.setAttribute("tabIndex","-1"),f.wrapper=d("div",[f.scrollbarFiller,f.gutterFiller,f.scroller],"CodeMirror"),rg&&sg<8&&(f.gutters.style.zIndex=-1,f.scroller.style.paddingRight=0),tg||ng&&Cg||(f.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(f.wrapper):a(f.wrapper)),f.viewFrom=f.viewTo=b.first,f.reportedViewFrom=f.reportedViewTo=b.first,f.view=[],f.renderedView=null,f.externalMeasured=null,f.viewOffset=0,f.lastWrapHeight=f.lastWrapWidth=0,f.updateLineNumbers=null,f.nativeBarWidth=f.barHeight=f.barWidth=0,f.scrollbarsClipped=!1,f.lineNumWidth=f.lineNumInnerWidth=f.lineNumChars=null,f.alignWidgets=!1,f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null,f.maxLine=null,f.maxLineLength=0,f.maxLineChanged=!1,f.wheelDX=f.wheelDY=f.wheelStartX=f.wheelStartY=null,f.shift=!1,f.selForContextMenu=null,f.activeTouch=null,c.init(f)}function B(a,b){if((b-=a.first)<0||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function C(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function D(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function E(a,b){var c=b-a.height
;if(c)for(var d=a;d;d=d.parent)d.height+=c}function F(a){if(null==a.parent)return null;for(var b=a.parent,c=m(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function G(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var g=0;g<a.lines.length;++g){var h=a.lines[g],i=h.height;if(b<i)break;b-=i}return c+g}function H(a,b){return b>=a.first&&b<a.first+a.size}function I(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function J(a,b,c){if(void 0===c&&(c=null),!(this instanceof J))return new J(a,b,c);this.line=a,this.ch=b,this.sticky=c}function K(a,b){return a.line-b.line||a.ch-b.ch}function L(a,b){return a.sticky==b.sticky&&0==K(a,b)}function M(a){return J(a.line,a.ch)}function N(a,b){return K(a,b)<0?b:a}function O(a,b){return K(a,b)<0?a:b}function P(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Q(a,b){if(b.line<a.first)return J(a.first,0);var c=a.first+a.size-1;return b.line>c?J(c,B(a,c).text.length):R(b,B(a,b.line).text.length)}function R(a,b){var c=a.ch;return null==c||c>b?J(a.line,b):c<0?J(a.line,0):a}function S(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=Q(a,b[d]);return c}function T(){Xg=!0}function U(){Yg=!0}function V(a,b,c){this.marker=a,this.from=b,this.to=c}function W(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function X(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Y(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Z(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new V(g,f.from,i?null:f.to))}}return d}function $(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new V(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function _(a,b){if(b.full)return null;var c=H(a,b.from.line)&&B(a,b.from.line).markedSpans,d=H(a,b.to.line)&&B(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==K(b.from,b.to),h=Z(c,e,g),i=$(d,f,g),j=1==b.text.length,k=p(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=W(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var o=0;o<i.length;++o){var q=i[o];if(null!=q.to&&(q.to+=k),null==q.from){var r=W(h,q.marker);r||(q.from=k,j&&(h||(h=[])).push(q))}else q.from+=k,j&&(h||(h=[])).push(q)}h&&(h=aa(h)),i&&i!=h&&(i=aa(i));var s=[h];if(!j){var t,u=b.text.length-2;if(u>0&&h)for(var v=0;v<h.length;++v)null==h[v].to&&(t||(t=[])).push(new V(h[v].marker,null,null));for(var w=0;w<u;++w)s.push(t);s.push(i)}return s}function aa(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function ba(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=m(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(K(j.to,h.from)<0||K(j.from,h.to)>0)){var k=[i,1],l=K(j.from,h.from),n=K(j.to,h.to);(l<0||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(n>0||!g.inclusiveRight&&!n)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-3}}return e}function ca(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function da(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function ea(a){return a.inclusiveLeft?-1:0}function fa(a){return a.inclusiveRight?1:0}function ga(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=K(d.from,e.from)||ea(a)-ea(b);if(f)return-f;var g=K(d.to,e.to)||fa(a)-fa(b);return g||b.id-a.id}function ha(a,b){var c,d=Yg&&a.markedSpans;if(d)for(var e=void 0,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||ga(c,e.marker)<0)&&(c=e.marker);return c}function ia(a){return ha(a,!0)}function ja(a){return ha(a,!1)}function ka(a,b,c,d,e){var f=B(a,b),g=Yg&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=K(j.from,c)||ea(i.marker)-ea(e),l=K(j.to,d)||fa(i.marker)-fa(e);if(!(k>=0&&l<=0||k<=0&&l>=0)&&(k<=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?K(j.to,c)>=0:K(j.to,c)>0)||k>=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?K(j.from,d)<=0:K(j.from,d)<0)))return!0}}}function la(a){for(var b;b=ia(a);)a=b.find(-1,!0).line;return a}function ma(a){for(var b;b=ja(a);)a=b.find(1,!0).line;return a}function na(a){for(var b,c;b=ja(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function oa(a,b){var c=B(a,b),d=la(c);return c==d?b:F(d)}function pa(a,b){if(b>a.lastLine())return b;var c,d=B(a,b);if(!qa(a,d))return b;for(;c=ja(d);)d=c.find(1,!0).line;return F(d)+1}function qa(a,b){var c=Yg&&b.markedSpans;if(c)for(var d=void 0,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&ra(a,b,d))return!0}}function ra(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return ra(a,d.line,W(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e=void 0,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&ra(a,b,e))return!0}function sa(a){a=la(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var g=0;g<f.children.length;++g){var h=f.children[g];if(h==c)break;b+=h.height}return b}function ta(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=ia(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=ja(d);){var f=b.find(0,!0);c-=d.text.length-f.from.ch,d=f.to.line,c+=d.text.length-f.to.ch}return c}function ua(a){var b=a.display,c=a.doc;b.maxLine=B(c,c.first),b.maxLineLength=ta(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=ta(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function va(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr",f),e=!0)}e||d(b,c,"ltr")}function wa(a,b,c){var d;Zg=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:Zg=e),f.from==b&&(f.from!=f.to&&"before"!=c?d=e:Zg=e)}return null!=d?d:Zg}function xa(a,b){var c=a.order;return null==c&&(c=a.order=$g(a.text,b)),c}function ya(a,b){return a._handlers&&a._handlers[b]||_g}function za(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers,e=d&&d[b];if(e){var f=m(e,c);f>-1&&(d[b]=e.slice(0,f).concat(e.slice(f+1)))}}}function Aa(a,b){var c=ya(a,b);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Ba(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),Aa(a,c||b.type,a,b),Ha(b)||b.codemirrorIgnore}function Ca(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==m(c,b[d])&&c.push(b[d])}function Da(a,b){return ya(a,b).length>0}function Ea(a){a.prototype.on=function(a,b){ah(this,a,b)},a.prototype.off=function(a,b){za(this,a,b)}}function Fa(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ga(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ha(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Ia(a){Fa(a),Ga(a)}function Ja(a){return a.target||a.srcElement}function Ka(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Dg&&a.ctrlKey&&1==b&&(b=3),b}function La(a){if(null==Ng){var b=d("span","​");c(a,d("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Ng=b.offsetWidth<=1&&b.offsetHeight>2&&!(rg&&sg<8))}var e=Ng?d("span","​"):d("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function Ma(a){if(null!=Og)return Og;var d=c(a,document.createTextNode("AخA")),e=Hg(d,0,1).getBoundingClientRect(),f=Hg(d,1,2).getBoundingClientRect();return b(a),!(!e||e.left==e.right)&&(Og=f.right-e.right<3)}function Na(a){if(null!=fh)return fh;var b=c(a,d("span","x")),e=b.getBoundingClientRect(),f=Hg(b,0,1).getBoundingClientRect();return fh=Math.abs(e.left-f.left)>1}function Oa(a,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),gh[a]=b}function Pa(a,b){hh[a]=b}function Qa(a){if("string"==typeof a&&hh.hasOwnProperty(a))a=hh[a];else if(a&&"string"==typeof a.name&&hh.hasOwnProperty(a.name)){var b=hh[a.name];"string"==typeof b&&(b={name:b}),a=t(b,a),a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return Qa("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return Qa("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function Ra(a,b){b=Qa(b);var c=gh[b.name];if(!c)return Ra(a,"text/plain");var d=c(a,b);if(ih.hasOwnProperty(b.name)){var e=ih[b.name];for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}if(d.name=b.name,b.helperType&&(d.helperType=b.helperType),b.modeProps)for(var g in b.modeProps)d[g]=b.modeProps[g];return d}function Sa(a,b){k(b,ih.hasOwnProperty(a)?ih[a]:ih[a]={})}function Ta(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function Ua(a,b){for(var c;a.innerMode&&(c=a.innerMode(b))&&c.mode!=a;)b=c.state,a=c.mode;return c||{mode:a,state:b}}function Va(a,b,c){return!a.startState||a.startState(b,c)}function Wa(a,b,c,d){var e=[a.state.modeGen],f={};cb(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);for(var g=c.state,h=0;h<a.state.overlays.length;++h)!function(d){c.baseTokens=e;var h=a.state.overlays[d],i=1,j=0;c.state=!0,cb(a,b.text,h.mode,c,function(a,b){for(var c=i;j<a;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"overlay "+b),i=c+2;else for(;c<i;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"overlay "+b}},f),c.state=g,c.baseTokens=null,c.baseTokenPos=1}(h);return{styles:e,classes:f.bgClass||f.textClass?f:null}}function Xa(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Ya(a,F(b)),e=b.text.length>a.options.maxHighlightLength&&Ta(a.doc.mode,d.state),f=Wa(a,b,d);e&&(d.state=e),b.stateAfter=d.save(!e),b.styles=f.styles,f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function Ya(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new lh(d,!0,b);var f=db(a,b,c),g=f>d.first&&B(d,f-1).stateAfter,h=g?lh.fromSaved(d,g,f):new lh(d,Va(d.mode),f);return d.iter(f,b,function(c){Za(a,c.text,h);var d=h.line;c.stateAfter=d==b-1||d%5==0||d>=e.viewFrom&&d<e.viewTo?h.save():null,h.nextLine()}),c&&(d.modeFrontier=h.line),h}function Za(a,b,c,d){var e=a.doc.mode,f=new jh(b,a.options.tabSize,c);for(f.start=f.pos=d||0,""==b&&$a(e,c.state);!f.eol();)_a(e,f,c.state),f.start=f.pos}function $a(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=Ua(a,b);return c.mode.blankLine?c.mode.blankLine(c.state):void 0}}function _a(a,b,c,d){for(var e=0;e<10;e++){d&&(d[0]=Ua(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw new Error("Mode "+a.name+" failed to advance stream.")}function ab(a,b,c,d){var e,f=a.doc,g=f.mode;b=Q(f,b);var h,i=B(f,b.line),j=Ya(a,b.line,c),k=new jh(i.text,a.options.tabSize,j);for(d&&(h=[]);(d||k.pos<b.ch)&&!k.eol();)k.start=k.pos,e=_a(g,k,j.state),d&&h.push(new mh(k,e,Ta(f.mode,j.state)));return d?h:new mh(k,e,j.state)}function bb(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function cb(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new jh(b,a.options.tabSize,d),m=a.options.addModeClass&&[null];for(""==b&&bb($a(c,d.state),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&Za(a,b,d,l.pos),l.pos=b.length,i=null):i=bb(_a(c,l,d.state,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)j=Math.min(l.start,j+5e3),e(j,k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e3);e(o,k),j=o}}function db(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=B(f,h-1),j=i.stateAfter;if(j&&(!c||h+(j instanceof kh?j.lookAhead:0)<=f.modeFrontier))return h;var k=l(i.text,null,a.options.tabSize);(null==e||d>k)&&(e=h-1,d=k)}return e}function eb(a,b){if(a.modeFrontier=Math.min(a.modeFrontier,b),!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=B(a,d).stateAfter;if(e&&(!(e instanceof kh)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function fb(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),ca(a),da(a,c);var e=d?d(a):1;e!=a.height&&E(a,e)}function gb(a){a.parent=null,ca(a)}function hb(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?qh:ph;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function ib(a,b){var c=e("span",null,null,tg?"padding-right: .1px":null),d={pre:e("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:(rg||tg)&&a.getOption("lineWrapping")};b.measure={};for(var f=0;f<=(b.rest?b.rest.length:0);f++){var g=f?b.rest[f-1]:b.line,h=void 0;d.pos=0,d.addToken=kb,Ma(a.display.measure)&&(h=xa(g,a.doc.direction))&&(d.addToken=mb(d.addToken,h)),d.map=[];ob(g,d,Xa(a,g,b!=a.display.externalMeasured&&F(g))),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=i(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=i(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(La(a.display.measure))),0==f?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(tg){var j=d.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return Aa(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=i(d.pre.className,d.textClass||"")),d}function jb(a){var b=d("span","•","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function kb(a,b,c,e,f,g,h){if(b){var i,j=a.splitSpaces?lb(b,a.trailingSpace):b,k=a.cm.state.specialChars,l=!1;if(k.test(b)){i=document.createDocumentFragment();for(var m=0;;){k.lastIndex=m;var n=k.exec(b),p=n?n.index-m:b.length-m;if(p){var q=document.createTextNode(j.slice(m,m+p));rg&&sg<9?i.appendChild(d("span",[q])):i.appendChild(q),a.map.push(a.pos,a.pos+p,q),a.col+=p,a.pos+=p}if(!n)break;m+=p+1;var r=void 0;if("\t"==n[0]){var s=a.cm.options.tabSize,t=s-a.col%s;r=i.appendChild(d("span",o(t),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),a.col+=t}else"\r"==n[0]||"\n"==n[0]?(r=i.appendChild(d("span","\r"==n[0]?"␍":"␤","cm-invalidchar")),r.setAttribute("cm-text",n[0]),a.col+=1):(r=a.cm.options.specialCharPlaceholder(n[0]),r.setAttribute("cm-text",n[0]),rg&&sg<9?i.appendChild(d("span",[r])):i.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r),a.pos++}}else a.col+=b.length,i=document.createTextNode(j),a.map.push(a.pos,a.pos+b.length,i),rg&&sg<9&&(l=!0),a.pos+=b.length;if(a.trailingSpace=32==j.charCodeAt(b.length-1),c||e||f||l||h){var u=c||"";e&&(u+=e),f&&(u+=f);var v=d("span",[i],u,h);return g&&(v.title=g),a.content.appendChild(v)}a.content.appendChild(i)}}function lb(a,b){if(a.length>1&&!/  /.test(a))return a;for(var c=b,d="",e=0;e<a.length;e++){var f=a.charAt(e);" "!=f||!c||e!=a.length-1&&32!=a.charCodeAt(e+1)||(f=" "),d+=f,c=" "==f}return d}function mb(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=void 0,m=0;m<b.length&&(l=b[m],!(l.to>j&&l.from<=j));m++);if(l.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,l.to-j),e,f,null,h,i),f=null,d=d.slice(l.to-j),j=l.to}}}function nb(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b,a.trailingSpace=!1}function ob(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m,n=e.length,o=0,p=1,q="",r=0;;){if(r==o){i=j=k=l=h="",m=null,r=1/0;for(var s=[],t=void 0,u=0;u<d.length;++u){var v=d[u],w=v.marker;"bookmark"==w.type&&v.from==o&&w.widgetNode?s.push(w):v.from<=o&&(null==v.to||v.to>o||w.collapsed&&v.to==o&&v.from==o)?(null!=v.to&&v.to!=o&&r>v.to&&(r=v.to,j=""),w.className&&(i+=" "+w.className),w.css&&(h=(h?h+";":"")+w.css),w.startStyle&&v.from==o&&(k+=" "+w.startStyle),w.endStyle&&v.to==r&&(t||(t=[])).push(w.endStyle,v.to),w.title&&!l&&(l=w.title),w.collapsed&&(!m||ga(m.marker,w)<0)&&(m=v)):v.from>o&&r>v.from&&(r=v.from)}if(t)for(var x=0;x<t.length;x+=2)t[x+1]==r&&(j+=" "+t[x]);if(!m||m.from==o)for(var y=0;y<s.length;++y)nb(b,0,s[y]);if(m&&(m.from||0)==o){if(nb(b,(null==m.to?n+1:m.to)-o,m.marker,null==m.from),null==m.to)return;m.to==o&&(m=!1)}}if(o>=n)break;for(var z=Math.min(n,r);;){if(q){var A=o+q.length;if(!m){var B=A>z?q.slice(0,z-o):q;b.addToken(b,B,g?g+i:i,k,o+B.length==r?j:"",l,h)}if(A>=z){q=q.slice(z-o),o=z;break}o=A,k=""}q=e.slice(f,f=c[p++]),g=hb(c[p++],b.cm.options)}}else for(var C=1;C<c.length;C+=2)b.addToken(b,e.slice(f,f=c[C]),hb(c[C+1],b.cm.options))}function pb(a,b,c){this.line=b,this.rest=na(b),this.size=this.rest?F(p(this.rest))-c+1:1,this.node=this.text=null,this.hidden=qa(a,b)}function qb(a,b,c){for(var d,e=[],f=b;f<c;f=d){var g=new pb(a.doc,B(a.doc,f),f);d=f+g.size,e.push(g)}return e}function rb(a){rh?rh.ops.push(a):a.ownsGroup=rh={ops:[a],delayedCallbacks:[]}}function sb(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}function tb(a,b){var c=a.ownsGroup;if(c)try{sb(c)}finally{rh=null,b(c)}}function ub(a,b){var c=ya(a,b);if(c.length){var d,e=Array.prototype.slice.call(arguments,2);rh?d=rh.delayedCallbacks:sh?d=sh:(d=sh=[],setTimeout(vb,0));for(var f=0;f<c.length;++f)!function(a){d.push(function(){return c[a].apply(null,e)})}(f)}}function vb(){var a=sh;sh=null;for(var b=0;b<a.length;++b)a[b]()}function wb(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?Ab(a,b):"gutter"==f?Cb(a,b,c,d):"class"==f?Bb(a,b):"widget"==f&&Db(a,b,d)}b.changes=null}function xb(a){return a.node==a.text&&(a.node=d("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),rg&&sg<8&&(a.node.style.zIndex=2)),a.node}function yb(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=xb(b);b.background=e.insertBefore(d("div",null,c),e.firstChild),a.display.input.setUneditable(b.background)}}function zb(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):ib(a,b)}function Ab(a,b){var c=b.text.className,d=zb(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,Bb(a,b)):c&&(b.text.className=c)}function Bb(a,b){yb(a,b),b.line.wrapClass?xb(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var c=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=c||""}function Cb(a,b,c,e){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var f=xb(b);b.gutterBackground=d("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px"),a.display.input.setUneditable(b.gutterBackground),f.insertBefore(b.gutterBackground,b.text)}var g=b.line.gutterMarkers;if(a.options.lineNumbers||g){var h=xb(b),i=b.gutter=d("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px");if(a.display.input.setUneditable(i),h.insertBefore(i,b.text),b.line.gutterClass&&(i.className+=" "+b.line.gutterClass),!a.options.lineNumbers||g&&g["CodeMirror-linenumbers"]||(b.lineNumber=i.appendChild(d("div",I(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),g)for(var j=0;j<a.options.gutters.length;++j){var k=a.options.gutters[j],l=g.hasOwnProperty(k)&&g[k];l&&i.appendChild(d("div",[l],"CodeMirror-gutter-elt","left: "+e.gutterLeft[k]+"px; width: "+e.gutterWidth[k]+"px"))}}}function Db(a,b,c){b.alignable&&(b.alignable=null);for(var d=b.node.firstChild,e=void 0;d;d=e)e=d.nextSibling,"CodeMirror-linewidget"==d.className&&b.node.removeChild(d);Fb(a,b,c)}function Eb(a,b,c,d){var e=zb(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),Bb(a,b),Cb(a,b,c,d),Fb(a,b,d),b.node}function Fb(a,b,c){if(Gb(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)Gb(a,b.rest[d],b,c,!1)}function Gb(a,b,c,e,f){if(b.widgets)for(var g=xb(c),h=0,i=b.widgets;h<i.length;++h){var j=i[h],k=d("div",[j.node],"CodeMirror-linewidget");j.handleMouseEvents||k.setAttribute("cm-ignore-events","true"),Hb(j,k,c,e),a.display.input.setUneditable(k),f&&j.above?g.insertBefore(k,c.gutter||c.text):g.appendChild(k),ub(j,"redraw")}}function Hb(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ib(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!f(document.body,a.node)){var e="position: relative;";a.coverGutter&&(e+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(e+="width: "+b.display.wrapper.clientWidth+"px;"),c(b.display.measure,d("div",[a.node],null,e))}return a.height=a.node.parentNode.offsetHeight}function Jb(a,b){for(var c=Ja(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Kb(a){return a.lineSpace.offsetTop}function Lb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Mb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=c(a.measure,d("pre","x")),e=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,f={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return isNaN(f.left)||isNaN(f.right)||(a.cachedPaddingH=f),f}function Nb(a){return Pg-a.display.nativeBarWidth}function Ob(a){return a.display.scroller.clientWidth-Nb(a)-a.display.barWidth}function Pb(a){return a.display.scroller.clientHeight-Nb(a)-a.display.barHeight}function Qb(a,b,c){var d=a.options.lineWrapping,e=d&&Ob(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Rb(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var e=0;e<a.rest.length;e++)if(F(a.rest[e])>c)return{map:a.measure.maps[e],cache:a.measure.caches[e],before:!0}}function Sb(a,b){b=la(b);var d=F(b),e=a.display.externalMeasured=new pb(a.doc,b,d);e.lineN=d;var f=e.built=ib(a,e);return e.text=f.pre,c(a.display.lineMeasure,f.pre),e}function Tb(a,b,c,d){return Wb(a,Vb(a,b),c,d)}function Ub(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[zc(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Vb(a,b){var c=F(b),d=Ub(a,c);d&&!d.text?d=null:d&&d.changes&&(wb(a,d,c,uc(a)),a.curOp.forceUpdate=!0),d||(d=Sb(a,b));var e=Rb(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function Wb(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Qb(a,b.view,b.rect),b.hasHeights=!0),f=Zb(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function Xb(a,b,c){for(var d,e,f,g,h,i,j=0;j<a.length;j+=3)if(h=a[j],i=a[j+1],b<h?(e=0,f=1,g="left"):b<i?(e=b-h,f=e+1):(j==a.length-3||b==i&&a[j+3]>b)&&(f=i-h,e=f-1,b>=i&&(g="right")),null!=e){if(d=a[j+2],h==i&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;j&&a[j-2]==a[j-3]&&a[j-1].insertLeft;)d=a[2+(j-=3)],g="left";if("right"==c&&e==i-h)for(;j<a.length-3&&a[j+3]==a[j+4]&&!a[j+5].insertLeft;)d=a[(j+=3)+2],g="right";break}return{node:d,start:e,end:f,collapse:g,coverStart:h,coverEnd:i}}function Yb(a,b){var c=th;if("left"==b)for(var d=0;d<a.length&&(c=a[d]).left==c.right;d++);else for(var e=a.length-1;e>=0&&(c=a[e]).left==c.right;e--);return c}function Zb(a,b,c,d){var e,f=Xb(b.map,c,d),g=f.node,h=f.start,i=f.end,j=f.collapse;if(3==g.nodeType){for(var k=0;k<4;k++){for(;h&&x(b.line.text.charAt(f.coverStart+h));)--h;for(;f.coverStart+i<f.coverEnd&&x(b.line.text.charAt(f.coverStart+i));)++i;if(e=rg&&sg<9&&0==h&&i==f.coverEnd-f.coverStart?g.parentNode.getBoundingClientRect():Yb(Hg(g,h,i).getClientRects(),d),e.left||e.right||0==h)break;i=h,h-=1,j="right"}rg&&sg<11&&(e=$b(a.display.measure,e))}else{h>0&&(j=d="right");var l;e=a.options.lineWrapping&&(l=g.getClientRects()).length>1?l["right"==d?l.length-1:0]:g.getBoundingClientRect()}if(rg&&sg<9&&!h&&(!e||!e.left&&!e.right)){var m=g.parentNode.getClientRects()[0];e=m?{left:m.left,right:m.left+tc(a.display),top:m.top,bottom:m.bottom}:th}for(var n=e.top-b.rect.top,o=e.bottom-b.rect.top,p=(n+o)/2,q=b.view.measure.heights,r=0;r<q.length-1&&!(p<q[r]);r++);var s=r?q[r-1]:0,t=q[r],u={left:("right"==j?e.right:e.left)-b.rect.left,right:("left"==j?e.left:e.right)-b.rect.left,top:s,bottom:t};return e.left||e.right||(u.bogus=!0),a.options.singleCursorHeightPerLine||(u.rtop=n,u.rbottom=o),u}function $b(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Na(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function _b(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function ac(a){a.display.externalMeasure=null,b(a.display.lineMeasure);for(var c=0;c<a.display.view.length;c++)_b(a.display.view[c])}function bc(a){ac(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function cc(){return vg&&Bg?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dc(){return vg&&Bg?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ec(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Ib(a.widgets[c]));return b}function fc(a,b,c,d,e){if(!e){var f=ec(b);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=sa(b);if("local"==d?g+=Kb(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:dc());var i=h.left+("window"==d?0:cc());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function gc(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=cc(),e-=dc();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function hc(a,b,c,d,e){return d||(d=B(a.doc,b.line)),fc(a,d,Tb(a,d,b.ch,e),c)}function ic(a,b,c,d,e,f){function g(b,g){var h=Wb(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,fc(a,d,h,c)}function h(a,b,c){var d=i[b],e=1==d.level;return g(c?a-1:a,e!=c)}d=d||B(a.doc,b.line),e||(e=Vb(a,d));var i=xa(d,a.doc.direction),j=b.ch,k=b.sticky;if(j>=d.text.length?(j=d.text.length,k="before"):j<=0&&(j=0,k="after"),!i)return g("before"==k?j-1:j,"before"==k);var l=wa(i,j,k),m=Zg,n=h(j,l,"before"==k);return null!=m&&(n.other=h(j,m,"before"!=k)),n}function jc(a,b){var c=0;b=Q(a.doc,b),a.options.lineWrapping||(c=tc(a.display)*b.ch);var d=B(a.doc,b.line),e=sa(d)+Kb(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function kc(a,b,c,d,e){var f=J(a,b,c);return f.xRel=e,d&&(f.outside=!0),f}function lc(a,b,c){var d=a.doc;if((c+=a.display.viewOffset)<0)return kc(d.first,0,null,!0,-1);var e=G(d,c),f=d.first+d.size-1;if(e>f)return kc(d.first+d.size-1,B(d,f).text.length,null,!0,1);b<0&&(b=0);for(var g=B(d,e);;){var h=pc(a,g,e,b,c),i=ja(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=F(g=j.to.line)}}function mc(a,b,c,d){d-=ec(b);var e=b.text.length,f=z(function(b){return Wb(a,c,b-1).bottom<=d},e,0);return e=z(function(b){return Wb(a,c,b).top>d},f,e),{begin:f,end:e}}function nc(a,b,c,d){return c||(c=Vb(a,b)),mc(a,b,c,fc(a,b,Wb(a,c,d),"line").top)}function oc(a,b,c,d){return!(a.bottom<=c)&&(a.top>c||(d?a.left:a.right)>b)}function pc(a,b,c,d,e){e-=sa(b);var f=Vb(a,b),g=ec(b),h=0,i=b.text.length,j=!0,k=xa(b,a.doc.direction);if(k){var l=(a.options.lineWrapping?rc:qc)(a,b,c,f,k,d,e);j=1!=l.level,h=j?l.from:l.to-1,i=j?l.to:l.from-1}var m,n,o=null,p=null,q=z(function(b){var c=Wb(a,f,b);return c.top+=g,c.bottom+=g,!!oc(c,d,e,!1)&&(c.top<=e&&c.left<=d&&(o=b,p=c),!0)},h,i),r=!1;if(p){var s=d-p.left<p.right-d,t=s==j;q=o+(t?0:1),n=t?"after":"before",m=s?p.left:p.right}else{j||q!=i&&q!=h||q++,n=0==q?"after":q==b.text.length?"before":Wb(a,f,q-(j?1:0)).bottom+g<=e==j?"after":"before";var u=ic(a,J(c,q,n),"line",b,f);m=u.left,r=e<u.top||e>=u.bottom}return q=y(b.text,q,1),kc(c,q,n,r,d-m)}function qc(a,b,c,d,e,f,g){var h=z(function(h){var i=e[h],j=1!=i.level
;return oc(ic(a,J(c,j?i.to:i.from,j?"before":"after"),"line",b,d),f,g,!0)},0,e.length-1),i=e[h];if(h>0){var j=1!=i.level,k=ic(a,J(c,j?i.from:i.to,j?"after":"before"),"line",b,d);oc(k,f,g,!0)&&k.top>g&&(i=e[h-1])}return i}function rc(a,b,c,d,e,f,g){var h=mc(a,b,d,g),i=h.begin,j=h.end;/\s/.test(b.text.charAt(j-1))&&j--;for(var k=null,l=null,m=0;m<e.length;m++){var n=e[m];if(!(n.from>=j||n.to<=i)){var o=1!=n.level,p=Wb(a,d,o?Math.min(j,n.to)-1:Math.max(i,n.from)).right,q=p<f?f-p+1e9:p-f;(!k||l>q)&&(k=n,l=q)}}return k||(k=e[e.length-1]),k.from<i&&(k={from:i,to:k.to,level:k.level}),k.to>j&&(k={from:k.from,to:j,level:k.level}),k}function sc(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==oh){oh=d("pre");for(var e=0;e<49;++e)oh.appendChild(document.createTextNode("x")),oh.appendChild(d("br"));oh.appendChild(document.createTextNode("x"))}c(a.measure,oh);var f=oh.offsetHeight/50;return f>3&&(a.cachedTextHeight=f),b(a.measure),f||1}function tc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=d("span","xxxxxxxxxx"),e=d("pre",[b]);c(a.measure,e);var f=b.getBoundingClientRect(),g=(f.right-f.left)/10;return g>2&&(a.cachedCharWidth=g),g||10}function uc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:vc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function vc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function wc(a){var b=sc(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/tc(a.display)-3);return function(e){if(qa(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function xc(a){var b=a.doc,c=wc(a);b.iter(function(a){var b=c(a);b!=a.height&&E(a,b)})}function yc(a,b,c,d){var e=a.display;if(!c&&"true"==Ja(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(b){return null}var i,j=lc(a,f,g);if(d&&1==j.xRel&&(i=B(a.doc,j.line).text).length==j.ch){var k=l(i,i.length,a.options.tabSize)-i.length;j=J(j.line,Math.max(0,Math.round((f-Mb(a.display).left)/tc(a.display))-k))}return j}function zc(a,b){if(b>=a.display.viewTo)return null;if((b-=a.display.viewFrom)<0)return null;for(var c=a.display.view,d=0;d<c.length;d++)if((b-=c[d].size)<0)return d}function Ac(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Bc(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&Cc(a,h.head,e),i||Ec(a,h,f)}}return d}function Cc(a,b,c){var e=ic(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),f=c.appendChild(d("div"," ","CodeMirror-cursor"));if(f.style.left=e.left+"px",f.style.top=e.top+"px",f.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px",e.other){var g=c.appendChild(d("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));g.style.display="",g.style.left=e.other.left+"px",g.style.top=e.other.top+"px",g.style.height=.85*(e.other.bottom-e.other.top)+"px"}}function Dc(a,b){return a.top-b.top||a.left-b.left}function Ec(a,b,c){function e(a,b,c,e){b<0&&(b=0),b=Math.round(b),e=Math.round(e),i.appendChild(d("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==c?l-a:c)+"px;\n                             height: "+(e-b)+"px"))}function f(b,c,d){function f(c,d){return hc(a,J(b,c),"div",n,d)}function g(b,c,d){var e=nc(a,n,null,b),g="ltr"==c==("after"==d)?"left":"right";return f("after"==d?e.begin:e.end-(/\s/.test(n.text.charAt(e.end-1))?2:1),g)[g]}var i,j,n=B(h,b),o=n.text.length,p=xa(n,h.direction);return va(p,c||0,null==d?o:d,function(a,b,h,n){var q="ltr"==h,r=f(a,q?"left":"right"),s=f(b-1,q?"right":"left"),t=null==c&&0==a,u=null==d&&b==o,v=0==n,w=!p||n==p.length-1;if(s.top-r.top<=3){var x=(m?t:u)&&v,y=(m?u:t)&&w,z=x?k:(q?r:s).left,A=y?l:(q?s:r).right;e(z,r.top,A-z,r.bottom)}else{var B,C,D,E;q?(B=m&&t&&v?k:r.left,C=m?l:g(a,h,"before"),D=m?k:g(b,h,"after"),E=m&&u&&w?l:s.right):(B=m?g(a,h,"before"):k,C=!m&&t&&v?l:r.right,D=!m&&u&&w?k:s.left,E=m?g(b,h,"after"):l),e(B,r.top,C-B,r.bottom),r.bottom<s.top&&e(k,r.bottom,null,s.top),e(D,s.top,E-D,s.bottom)}(!i||Dc(r,i)<0)&&(i=r),Dc(s,i)<0&&(i=s),(!j||Dc(r,j)<0)&&(j=r),Dc(s,j)<0&&(j=s)}),{start:i,end:j}}var g=a.display,h=a.doc,i=document.createDocumentFragment(),j=Mb(a.display),k=j.left,l=Math.max(g.sizerWidth,Ob(a)-g.sizer.offsetLeft)-j.right,m="ltr"==h.direction,n=b.from(),o=b.to();if(n.line==o.line)f(n.line,n.ch,o.ch);else{var p=B(h,n.line),q=B(h,o.line),r=la(p)==la(q),s=f(n.line,n.ch,r?p.text.length+1:null).end,t=f(o.line,r?0:null,o.ch).start;r&&(s.top<t.top-2?(e(s.right,s.top,null,s.bottom),e(k,t.top,t.left,t.bottom)):e(s.right,s.top,t.left-s.right,s.bottom)),s.bottom<t.top&&e(k,s.bottom,null,t.top)}c.appendChild(i)}function Fc(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Gc(a){a.state.focused||(a.display.input.focus(),Ic(a))}function Hc(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Jc(a))},100)}function Ic(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(Aa(a,"focus",a,b),a.state.focused=!0,h(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),tg&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Fc(a))}function Jc(a,b){a.state.delayingBlurEvent||(a.state.focused&&(Aa(a,"blur",a,b),a.state.focused=!1,Kg(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Kc(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e=b.view[d],f=void 0;if(!e.hidden){if(rg&&sg<8){var g=e.node.offsetTop+e.node.offsetHeight;f=g-c,c=g}else{var h=e.node.getBoundingClientRect();f=h.bottom-h.top}var i=e.line.height-f;if(f<2&&(f=sc(b)),(i>.005||i<-.005)&&(E(e.line,f),Lc(e.line),e.rest))for(var j=0;j<e.rest.length;j++)Lc(e.rest[j])}}}function Lc(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function Mc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Kb(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=G(b,d),g=G(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;h<f?(f=h,g=G(b,sa(B(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=G(b,sa(B(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function Nc(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=vc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Oc(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=I(a.options,b.first+b.size-1),e=a.display;if(c.length!=e.lineNumChars){var f=e.measure.appendChild(d("div",[d("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=f.firstChild.offsetWidth,h=f.offsetWidth-g;return e.lineGutter.style.width="",e.lineNumInnerWidth=Math.max(g,e.lineGutter.offsetWidth-h)+1,e.lineNumWidth=e.lineNumInnerWidth+h,e.lineNumChars=e.lineNumInnerWidth?c.length:-1,e.lineGutter.style.width=e.lineNumWidth+"px",Fd(a),!0}return!1}function Pc(a,b){if(!Ba(a,"scrollCursorIntoView")){var c=a.display,e=c.sizer.getBoundingClientRect(),f=null;if(b.top+e.top<0?f=!0:b.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight)&&(f=!1),null!=f&&!zg){var g=d("div","​",null,"position: absolute;\n                         top: "+(b.top-c.viewOffset-Kb(a.display))+"px;\n                         height: "+(b.bottom-b.top+Nb(a)+c.barHeight)+"px;\n                         left: "+b.left+"px; width: "+Math.max(2,b.right-b.left)+"px;");a.display.lineSpace.appendChild(g),g.scrollIntoView(f),a.display.lineSpace.removeChild(g)}}}function Qc(a,b,c,d){null==d&&(d=0);var e;a.options.lineWrapping||b!=c||(b=b.ch?J(b.line,"before"==b.sticky?b.ch-1:b.ch,"after"):b,c="before"==b.sticky?J(b.line,b.ch+1,"before"):b);for(var f=0;f<5;f++){var g=!1,h=ic(a,b),i=c&&c!=b?ic(a,c):h;e={left:Math.min(h.left,i.left),top:Math.min(h.top,i.top)-d,right:Math.max(h.left,i.left),bottom:Math.max(h.bottom,i.bottom)+d};var j=Sc(a,e),k=a.doc.scrollTop,l=a.doc.scrollLeft;if(null!=j.scrollTop&&(Zc(a,j.scrollTop),Math.abs(a.doc.scrollTop-k)>1&&(g=!0)),null!=j.scrollLeft&&(_c(a,j.scrollLeft),Math.abs(a.doc.scrollLeft-l)>1&&(g=!0)),!g)break}return e}function Rc(a,b){var c=Sc(a,b);null!=c.scrollTop&&Zc(a,c.scrollTop),null!=c.scrollLeft&&_c(a,c.scrollLeft)}function Sc(a,b){var c=a.display,d=sc(a.display);b.top<0&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=Pb(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+Lb(c),i=b.top<d,j=b.bottom>h-d;if(b.top<e)g.scrollTop=i?0:b.top;else if(b.bottom>e+f){var k=Math.min(b.top,(j?h:b.bottom)-f);k!=e&&(g.scrollTop=k)}var l=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft,m=Ob(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0),n=b.right-b.left>m;return n&&(b.right=b.left+m),b.left<10?g.scrollLeft=0:b.left<l?g.scrollLeft=Math.max(0,b.left-(n?0:10)):b.right>m+l-3&&(g.scrollLeft=b.right+(n?0:10)-m),g}function Tc(a,b){null!=b&&(Xc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function Uc(a){Xc(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Vc(a,b,c){null==b&&null==c||Xc(a),null!=b&&(a.curOp.scrollLeft=b),null!=c&&(a.curOp.scrollTop=c)}function Wc(a,b){Xc(a),a.curOp.scrollToPos=b}function Xc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;Yc(a,jc(a,b.from),jc(a,b.to),b.margin)}}function Yc(a,b,c,d){var e=Sc(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});Vc(a,e.scrollLeft,e.scrollTop)}function Zc(a,b){Math.abs(a.doc.scrollTop-b)<2||(ng||Dd(a,{top:b}),$c(a,b,!0),ng&&Dd(a),wd(a,100))}function $c(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b),(a.display.scroller.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b))}function _c(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)&&!d||(a.doc.scrollLeft=b,Nc(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function ad(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Lb(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Nb(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function bd(a,b){b||(b=ad(a));var c=a.display.barWidth,d=a.display.barHeight;cd(a,b);for(var e=0;e<4&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Kc(a),cd(a,ad(a)),c=a.display.barWidth,d=a.display.barHeight}function cd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function dd(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Kg(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new wh[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),ah(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?_c(a,b):Zc(a,b)},a),a.display.scrollbars.addClass&&h(a.display.wrapper,a.display.scrollbars.addClass)}function ed(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xh},rb(a.curOp)}function fd(a){tb(a.curOp,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;gd(a)})}function gd(a){for(var b=a.ops,c=0;c<b.length;c++)hd(b[c]);for(var d=0;d<b.length;d++)id(b[d]);for(var e=0;e<b.length;e++)jd(b[e]);for(var f=0;f<b.length;f++)kd(b[f]);for(var g=0;g<b.length;g++)ld(b[g])}function hd(a){var b=a.cm,c=b.display;yd(b),a.updateMaxLine&&ua(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new yh(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function id(a){a.updatedDisplay=a.mustUpdate&&Bd(a.cm,a.update)}function jd(a){var b=a.cm,c=b.display;a.updatedDisplay&&Kc(b),a.barMeasure=ad(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=Tb(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+Nb(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-Ob(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function kd(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&_c(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1);var c=a.focus&&a.focus==g();a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,c),(a.updatedDisplay||a.startHeight!=b.doc.height)&&bd(b,a.barMeasure),a.updatedDisplay&&Gd(b,a.barMeasure),a.selectionChanged&&Fc(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),c&&Gc(a.cm)}function ld(a){var b=a.cm,c=b.display,d=b.doc;if(a.updatedDisplay&&Cd(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&$c(b,a.scrollTop,a.forceScroll),null!=a.scrollLeft&&_c(b,a.scrollLeft,!0,!0),a.scrollToPos){Pc(b,Qc(b,Q(d,a.scrollToPos.from),Q(d,a.scrollToPos.to),a.scrollToPos.margin))}var e=a.maybeHiddenMarkers,f=a.maybeUnhiddenMarkers;if(e)for(var g=0;g<e.length;++g)e[g].lines.length||Aa(e[g],"hide");if(f)for(var h=0;h<f.length;++h)f[h].lines.length&&Aa(f[h],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&Aa(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function md(a,b){if(a.curOp)return b();ed(a);try{return b()}finally{fd(a)}}function nd(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ed(a);try{return b.apply(a,arguments)}finally{fd(a)}}}function od(a){return function(){if(this.curOp)return a.apply(this,arguments);ed(this);try{return a.apply(this,arguments)}finally{fd(this)}}}function pd(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ed(b);try{return a.apply(this,arguments)}finally{fd(b)}}}function qd(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)Yg&&oa(a.doc,b)<e.viewTo&&sd(a);else if(c<=e.viewFrom)Yg&&pa(a.doc,c+d)>e.viewFrom?sd(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)sd(a);else if(b<=e.viewFrom){var f=td(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):sd(a)}else if(c>=e.viewTo){var g=td(a,b,b,-1);g?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):sd(a)}else{var h=td(a,b,b,-1),i=td(a,c,c+d,1);h&&i?(e.view=e.view.slice(0,h.index).concat(qb(a,h.lineN,i.lineN)).concat(e.view.slice(i.index)),e.viewTo+=d):sd(a)}var j=e.externalMeasured;j&&(c<j.lineN?j.lineN+=d:b<j.lineN+j.size&&(e.externalMeasured=null))}function rd(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[zc(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==m(g,c)&&g.push(c)}}}function sd(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function td(a,b,c,d){var e,f=zc(a,b),g=a.display.view;if(!Yg||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=a.display.viewFrom,i=0;i<f;i++)h+=g[i].size;if(h!=b){if(d>0){if(f==g.length-1)return null;e=h+g[f].size-b,f++}else e=h-b;b+=e,c+=e}for(;oa(a.doc,c)!=c;){if(f==(d<0?0:g.length-1))return null;c+=d*g[f-(d<0?1:0)].size,f+=d}return{index:f,lineN:c}}function ud(a,b,c){var d=a.display;0==d.view.length||b>=d.viewTo||c<=d.viewFrom?(d.view=qb(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=qb(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(zc(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(qb(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,zc(a,c)))),d.viewTo=c}function vd(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function wd(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,j(xd,a))}function xd(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Ya(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?Ta(b.mode,d.state):null,i=Wa(a,f,d,!0);h&&(d.state=h),f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(d.line),f.stateAfter=d.save(),d.nextLine()}else f.text.length<=a.options.maxHighlightLength&&Za(a,f.text,d),f.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>c)return wd(a,a.options.workDelay),!0}),b.highlightFrontier=d.line,b.modeFrontier=Math.max(b.modeFrontier,d.line),e.length&&md(a,function(){for(var b=0;b<e.length;b++)rd(a,e[b],"text")})}}function yd(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Nb(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Nb(a)+"px",b.scrollbarsClipped=!0)}function zd(a){if(a.hasFocus())return null;var b=g();if(!b||!f(a.display.lineDiv,b))return null;var c={activeElt:b};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&f(a.display.lineDiv,d.anchorNode)&&(c.anchorNode=d.anchorNode,c.anchorOffset=d.anchorOffset,c.focusNode=d.focusNode,c.focusOffset=d.focusOffset)}return c}function Ad(a){if(a&&a.activeElt&&a.activeElt!=g()&&(a.activeElt.focus(),a.anchorNode&&f(document.body,a.anchorNode)&&f(document.body,a.focusNode))){var b=window.getSelection(),c=document.createRange();c.setEnd(a.anchorNode,a.anchorOffset),c.collapse(!1),b.removeAllRanges(),b.addRange(c),b.extend(a.focusNode,a.focusOffset)}}function Bd(a,c){var d=a.display,e=a.doc;if(c.editorIsHidden)return sd(a),!1;if(!c.force&&c.visible.from>=d.viewFrom&&c.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==vd(a))return!1;Oc(a)&&(sd(a),c.dims=uc(a));var f=e.first+e.size,g=Math.max(c.visible.from-a.options.viewportMargin,e.first),h=Math.min(f,c.visible.to+a.options.viewportMargin);d.viewFrom<g&&g-d.viewFrom<20&&(g=Math.max(e.first,d.viewFrom)),d.viewTo>h&&d.viewTo-h<20&&(h=Math.min(f,d.viewTo)),Yg&&(g=oa(a.doc,g),h=pa(a.doc,h));var i=g!=d.viewFrom||h!=d.viewTo||d.lastWrapHeight!=c.wrapperHeight||d.lastWrapWidth!=c.wrapperWidth;ud(a,g,h),d.viewOffset=sa(B(a.doc,d.viewFrom)),a.display.mover.style.top=d.viewOffset+"px";var j=vd(a);if(!i&&0==j&&!c.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;var k=zd(a);return j>4&&(d.lineDiv.style.display="none"),Ed(a,d.updateLineNumbers,c.dims),j>4&&(d.lineDiv.style.display=""),d.renderedView=d.view,Ad(k),b(d.cursorDiv),b(d.selectionDiv),d.gutters.style.height=d.sizer.style.minHeight=0,i&&(d.lastWrapHeight=c.wrapperHeight,d.lastWrapWidth=c.wrapperWidth,wd(a,400)),d.updateLineNumbers=null,!0}function Cd(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Ob(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Lb(a.display)-Pb(a),c.top)}),b.visible=Mc(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&Bd(a,b);d=!1){Kc(a);var e=ad(a);Ac(a),bd(a,e),Gd(a,e),b.force=!1}b.signal(a,"update",a),a.display.viewFrom==a.display.reportedViewFrom&&a.display.viewTo==a.display.reportedViewTo||(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function Dd(a,b){var c=new yh(a,b);if(Bd(a,c)){Kc(a),Cd(a,c);var d=ad(a);Ac(a),bd(a,d),Gd(a,d),c.finish()}}function Ed(a,c,d){function e(b){var c=b.nextSibling;return tg&&Dg&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var f=a.display,g=a.options.lineNumbers,h=f.lineDiv,i=h.firstChild,j=f.view,k=f.viewFrom,l=0;l<j.length;l++){var n=j[l];if(n.hidden);else if(n.node&&n.node.parentNode==h){for(;i!=n.node;)i=e(i);var o=g&&null!=c&&c<=k&&n.lineNumber;n.changes&&(m(n.changes,"gutter")>-1&&(o=!1),wb(a,n,k,d)),o&&(b(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(I(a.options,k)))),i=n.node.nextSibling}else{var p=Eb(a,n,k,d);h.insertBefore(p,i)}k+=n.size}for(;i;)i=e(i)}function Fd(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px"}function Gd(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+Nb(a)+"px"}function Hd(a){var c=a.display.gutters,e=a.options.gutters;b(c);for(var f=0;f<e.length;++f){var g=e[f],h=c.appendChild(d("div",null,"CodeMirror-gutter "+g));"CodeMirror-linenumbers"==g&&(a.display.lineGutter=h,h.style.width=(a.display.lineNumWidth||1)+"px")}c.style.display=f?"":"none",Fd(a)}function Id(a){var b=m(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function Jd(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}}function Kd(a){var b=Jd(a);return b.x*=Ah,b.y*=Ah,b}function Ld(a,b){var c=Jd(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&Dg&&tg)a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==j){a.display.currentWheelTarget=j;break a}if(d&&!ng&&!wg&&null!=Ah)return e&&i&&Zc(a,Math.max(0,g.scrollTop+e*Ah)),_c(a,Math.max(0,g.scrollLeft+d*Ah)),(!e||e&&i)&&Fa(b),void(f.wheelStartX=null);if(e&&null!=Ah){var m=e*Ah,n=a.doc.scrollTop,o=n+f.wrapper.clientHeight;m<0?n=Math.max(0,n+m-50):o=Math.min(a.doc.height,o+m+50),Dd(a,{top:n,bottom:o})}zh<20&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(Ah=(Ah*zh+c)/(zh+1),++zh)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function Md(a,b){var c=a[b];a.sort(function(a,b){return K(a.from(),b.from())}),b=m(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(K(f.to(),e.from())>=0){var g=O(f.from(),e.from()),h=N(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;d<=b&&--b,a.splice(--d,2,new Ch(i?h:g,i?g:h))}}return new Bh(a,b)}function Nd(a,b){return new Bh([new Ch(a,b||a)],0)}function Od(a){return a.text?J(a.from.line+a.text.length-1,p(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function Pd(a,b){if(K(a,b.from)<0)return a;if(K(a,b.to)<=0)return Od(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Od(b).ch-b.to.ch),J(c,d)}function Qd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new Ch(Pd(e.anchor,b),Pd(e.head,b)))}return Md(c,a.sel.primIndex)}function Rd(a,b,c){return a.line==b.line?J(c.line,a.ch-b.ch+c.ch):J(c.line+(a.line-b.line),a.ch)}function Sd(a,b,c){for(var d=[],e=J(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=Rd(h.from,e,f),j=Rd(Od(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=K(k.head,k.anchor)<0;d[g]=new Ch(l?j:i,l?i:j)}else d[g]=new Ch(i,i)}return new Bh(d,a.sel.primIndex)}function Td(a){a.doc.mode=Ra(a.options,a.doc.modeOption),Ud(a)}function Ud(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,wd(a,100),a.state.modeGen++,a.curOp&&qd(a)}function Vd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==p(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Wd(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){fb(a,c,e,d),ub(a,"change",a,b)}function g(a,b){for(var c=[],f=a;f<b;++f)c.push(new nh(j[f],e(f),d));return c}var h=b.from,i=b.to,j=b.text,k=B(a,h.line),l=B(a,i.line),m=p(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(Vd(a,b)){var q=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),q.length&&a.insert(h.line,q)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var r=g(1,j.length-1);r.push(new nh(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,r)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var s=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,s)}ub(a,"change",a,b)}function Xd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;c&&!i||(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function Yd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,xc(a),Td(a),Zd(a),a.options.lineWrapping||ua(a),a.options.mode=b.modeOption,qd(a)}function Zd(a){("rtl"==a.doc.direction?h:Kg)(a.display.lineDiv,"CodeMirror-rtl")}function $d(a){md(a,function(){Zd(a),qd(a)})}function _d(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function ae(a,b){var c={from:M(b.from),to:Od(b),text:C(a,b.from,b.to)};return he(a,c,b.from.line,b.to.line+1),Xd(a,function(a){return he(a,c,b.from.line,b.to.line+1)},!0),c}function be(a){for(;a.length;){if(!p(a).ranges)break;a.pop()}}function ce(a,b){return b?(be(a.done),p(a.done)):a.done.length&&!p(a.done).ranges?p(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),p(a.done)):void 0}function de(a,b,c,d){var e=a.history;e.undone.length=0;var f,g,h=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>h-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=ce(e,e.lastOp==d)))g=p(f.changes),0==K(b.from,b.to)&&0==K(b.from,g.to)?g.to=Od(b):f.changes.push(ae(a,b));else{var i=p(e.done);for(i&&i.ranges||ge(a.sel,e.done),f={changes:[ae(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=h,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,g||Aa(a,"historyAdded")}function ee(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function fe(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||ee(a,f,p(e.done),b))?e.done[e.done.length-1]=b:ge(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&!1!==d.clearRedo&&be(e.undone)}function ge(a,b){var c=p(b);c&&c.ranges&&c.equals(a)||b.push(a)}function he(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ie(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function je(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=[],e=0;e<b.text.length;++e)d.push(ie(c[e]));return d}function ke(a,b){var c=je(a,b),d=_(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function le(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?Bh.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];d.push({changes:h});for(var i=0;i<g.length;++i){var j=g[i],k=void 0;if(h.push({from:j.from,to:j.to,text:j.text}),b)for(var l in j)(k=l.match(/^spans_(\d+)$/))&&m(b,Number(k[1]))>-1&&(p(h)[l]=j[l],delete j[l])}}}return d}function me(a,b,c,d){if(d){var e=a.anchor;if(c){var f=K(b,e)<0;f!=K(c,e)<0?(e=b,b=c):f!=K(b,c)<0&&(b=c)}return new Ch(e,b)}return new Ch(c||b,b)}function ne(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend)),te(a,new Bh([me(a.sel.primary(),b,c,e)],0),d)}function oe(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=me(a.sel.ranges[f],b[f],null,e);te(a,Md(d,a.sel.primIndex),c)}function pe(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,te(a,Md(e,a.sel.primIndex),d)}function qe(a,b,c,d){te(a,Nd(b,c),d)}function re(a,b,c){var d={
ranges:b.ranges,update:function(b){var c=this;this.ranges=[];for(var d=0;d<b.length;d++)c.ranges[d]=new Ch(Q(a,b[d].anchor),Q(a,b[d].head))},origin:c&&c.origin};return Aa(a,"beforeSelectionChange",a,d),a.cm&&Aa(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=b.ranges?Md(d.ranges,d.ranges.length-1):b}function se(a,b,c){var d=a.history.done,e=p(d);e&&e.ranges?(d[d.length-1]=b,ue(a,b,c)):te(a,b,c)}function te(a,b,c){ue(a,b,c),fe(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function ue(a,b,c){(Da(a,"beforeSelectionChange")||a.cm&&Da(a.cm,"beforeSelectionChange"))&&(b=re(a,b,c)),ve(a,xe(a,b,c&&c.bias||(K(b.primary().head,a.sel.primary().head)<0?-1:1),!0)),c&&!1===c.scroll||!a.cm||Uc(a.cm)}function ve(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ca(a.cm)),ub(a,"cursorActivity",a))}function we(a){ve(a,xe(a,a.sel,null,!1))}function xe(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=ze(a,g.anchor,h&&h.anchor,c,d),j=ze(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new Ch(i,j))}return e?Md(e,b.primIndex):b}function ye(a,b,c,d,e){var f=B(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker;if((null==h.from||(i.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(i.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(Aa(i,"beforeCursorEnter"),i.explicitlyCleared)){if(f.markedSpans){--g;continue}break}if(!i.atomic)continue;if(c){var j=i.find(d<0?1:-1),k=void 0;if((d<0?i.inclusiveRight:i.inclusiveLeft)&&(j=Ae(a,j,-d,j&&j.line==b.line?f:null)),j&&j.line==b.line&&(k=K(j,c))&&(d<0?k<0:k>0))return ye(a,j,b,d,e)}var l=i.find(d<0?-1:1);return(d<0?i.inclusiveLeft:i.inclusiveRight)&&(l=Ae(a,l,d,l.line==b.line?f:null)),l?ye(a,l,b,d,e):null}}return b}function ze(a,b,c,d,e){var f=d||1,g=ye(a,b,c,f,e)||!e&&ye(a,b,c,f,!0)||ye(a,b,c,-f,e)||!e&&ye(a,b,c,-f,!0);return g||(a.cantEdit=!0,J(a.first,0))}function Ae(a,b,c,d){return c<0&&0==b.ch?b.line>a.first?Q(a,J(b.line-1)):null:c>0&&b.ch==(d||B(a,b.line)).text.length?b.line<a.first+a.size-1?J(b.line+1,0):null:new J(b.line,b.ch+c)}function Be(a){a.setSelection(J(a.firstLine(),0),J(a.lastLine()),Rg)}function Ce(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};return c&&(d.update=function(b,c,e,f){b&&(d.from=Q(a,b)),c&&(d.to=Q(a,c)),e&&(d.text=e),void 0!==f&&(d.origin=f)}),Aa(a,"beforeChange",a,d),a.cm&&Aa(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function De(a,b,c){if(a.cm){if(!a.cm.curOp)return nd(a.cm,De)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(Da(a,"beforeChange")||a.cm&&Da(a.cm,"beforeChange"))||(b=Ce(a,b,!0))){var d=Xg&&!c&&ba(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Ee(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text,origin:b.origin});else Ee(a,b)}}function Ee(a,b){if(1!=b.text.length||""!=b.text[0]||0!=K(b.from,b.to)){var c=Qd(a,b);de(a,b,c,a.cm?a.cm.curOp.id:NaN),He(a,b,c,_(a,b));var d=[];Xd(a,function(a,c){c||-1!=m(d,a.history)||(Me(a.history,b),d.push(a.history)),He(a,b,null,_(a,b))})}}function Fe(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e,f=a.history,g=a.sel,h="undo"==b?f.done:f.undone,i="undo"==b?f.undone:f.done,j=0;j<h.length&&(e=h[j],c?!e.ranges||e.equals(a.sel):e.ranges);j++);if(j!=h.length){for(f.lastOrigin=f.lastSelOrigin=null;;){if(e=h.pop(),!e.ranges){if(d)return void h.push(e);break}if(ge(e,i),c&&!e.equals(a.sel))return void te(a,e,{clearRedo:!1});g=e}var k=[];ge(g,i),i.push({changes:k,generation:f.generation}),f.generation=e.generation||++f.maxGeneration;for(var l=Da(a,"beforeChange")||a.cm&&Da(a.cm,"beforeChange"),n=e.changes.length-1;n>=0;--n){var o=function(c){var d=e.changes[c];if(d.origin=b,l&&!Ce(a,d,!1))return h.length=0,{};k.push(ae(a,d));var f=c?Qd(a,d):p(h);He(a,d,f,ke(a,d)),!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:Od(d)});var g=[];Xd(a,function(a,b){b||-1!=m(g,a.history)||(Me(a.history,d),g.push(a.history)),He(a,d,null,ke(a,d))})}(n);if(o)return o.v}}}}function Ge(a,b){if(0!=b&&(a.first+=b,a.sel=new Bh(q(a.sel.ranges,function(a){return new Ch(J(a.anchor.line+b,a.anchor.ch),J(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){qd(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)rd(a.cm,d,"gutter")}}function He(a,b,c,d){if(a.cm&&!a.cm.curOp)return nd(a.cm,He)(a,b,c,d);if(b.to.line<a.first)return void Ge(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Ge(a,e),b={from:J(a.first,0),to:J(b.to.line+e,b.to.ch),text:[p(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:J(f,B(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=C(a,b.from,b.to),c||(c=Qd(a,b)),a.cm?Ie(a.cm,b,d):Wd(a,b,d),ue(a,c,Rg)}}function Ie(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,i=f.line;a.options.lineWrapping||(i=F(la(B(d,f.line))),d.iter(i,g.line+1,function(a){if(a==e.maxLine)return h=!0,!0})),d.sel.contains(b.from,b.to)>-1&&Ca(a),Wd(d,b,c,wc(a)),a.options.lineWrapping||(d.iter(i,f.line+b.text.length,function(a){var b=ta(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0)),eb(d,f.line),wd(a,400);var j=b.text.length-(g.line-f.line)-1;b.full?qd(a):f.line!=g.line||1!=b.text.length||Vd(a.doc,b)?qd(a,f.line,g.line+1,j):rd(a,f.line,"text");var k=Da(a,"changes"),l=Da(a,"change");if(l||k){var m={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin};l&&ub(a,"change",a,m),k&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(m)}a.display.selForContextMenu=null}function Je(a,b,c,d,e){if(d||(d=c),K(d,c)<0){var f;f=[d,c],c=f[0],d=f[1]}"string"==typeof b&&(b=a.splitLines(b)),De(a,{from:c,to:d,text:b,origin:e})}function Ke(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Le(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Ke(f.ranges[h].anchor,b,c,d),Ke(f.ranges[h].head,b,c,d)}else{for(var i=0;i<f.changes.length;++i){var j=f.changes[i];if(c<j.from.line)j.from=J(j.from.line+d,j.from.ch),j.to=J(j.to.line+d,j.to.ch);else if(b<=j.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Me(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Le(a.done,c,d,e),Le(a.undone,c,d,e)}function Ne(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=B(a,P(a,b)):e=F(b),null==e?null:(d(f,e)&&a.cm&&rd(a.cm,e,c),f)}function Oe(a){var b=this;this.lines=a,this.parent=null;for(var c=0,d=0;d<a.length;++d)a[d].parent=b,c+=a[d].height;this.height=c}function Pe(a){var b=this;this.children=a;for(var c=0,d=0,e=0;e<a.length;++e){var f=a[e];c+=f.chunkSize(),d+=f.height,f.parent=b}this.size=c,this.height=d,this.parent=null}function Qe(a,b,c){sa(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Tc(a,c)}function Re(a,b,c,d){var e=new Dh(a,c,d),f=a.cm;return f&&e.noHScroll&&(f.display.alignWidgets=!0),Ne(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,f&&!qa(a,b)){var d=sa(b)<a.scrollTop;E(b,b.height+Ib(e)),d&&Tc(f,e.height),f.curOp.forceUpdate=!0}return!0}),f&&ub(f,"lineWidgetAdded",f,e,"number"==typeof b?b:F(b)),e}function Se(a,b,c,d,f){if(d&&d.shared)return Te(a,b,c,d,f);if(a.cm&&!a.cm.curOp)return nd(a.cm,Se)(a,b,c,d,f);var g=new Fh(a,f),h=K(b,c);if(d&&k(d,g,!1),h>0||0==h&&!1!==g.clearWhenEmpty)return g;if(g.replacedWith&&(g.collapsed=!0,g.widgetNode=e("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(g.widgetNode.insertLeft=!0)),g.collapsed){if(ka(a,b.line,b,c,g)||b.line!=c.line&&ka(a,c.line,b,c,g))throw new Error("Inserting collapsed marker partially overlapping an existing one");U()}g.addToHistory&&de(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var i,j=b.line,l=a.cm;if(a.iter(j,c.line+1,function(a){l&&g.collapsed&&!l.options.lineWrapping&&la(a)==l.display.maxLine&&(i=!0),g.collapsed&&j!=b.line&&E(a,0),Y(a,new V(g,j==b.line?b.ch:null,j==c.line?c.ch:null)),++j}),g.collapsed&&a.iter(b.line,c.line+1,function(b){qa(a,b)&&E(b,0)}),g.clearOnEnter&&ah(g,"beforeCursorEnter",function(){return g.clear()}),g.readOnly&&(T(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),g.collapsed&&(g.id=++Eh,g.atomic=!0),l){if(i&&(l.curOp.updateMaxLine=!0),g.collapsed)qd(l,b.line,c.line+1);else if(g.className||g.title||g.startStyle||g.endStyle||g.css)for(var m=b.line;m<=c.line;m++)rd(l,m,"text");g.atomic&&we(l.doc),ub(l,"markerAdded",l,g)}return g}function Te(a,b,c,d,e){d=k(d),d.shared=!1;var f=[Se(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Xd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Se(a,Q(a,b),Q(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=p(f)}),new Gh(f,g)}function Ue(a){return a.findMarks(J(a.first,0),a.clipPos(J(a.lastLine())),function(a){return a.parent})}function Ve(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(K(f,g)){var h=Se(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function We(a){for(var b=0;b<a.length;b++)!function(b){var c=a[b],d=[c.primary.doc];Xd(c.primary.doc,function(a){return d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==m(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}(b)}function Xe(a){var b=this;if($e(b),!Ba(b,a)&&!Jb(b.display,a)){Fa(a),rg&&(Jh=+new Date);var c=yc(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=0;h<e;++h)!function(a,d){if(!b.options.allowDropFileTypes||-1!=m(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=nd(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e){c=Q(b.doc,c);var i={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};De(b.doc,i),se(b.doc,Nd(c,Od(i)))}}),h.readAsText(a)}}(d[h],h);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(function(){return b.display.input.focus()},20);try{var i=a.dataTransfer.getData("Text");if(i){var j;if(b.state.draggingText&&!b.state.draggingText.copy&&(j=b.listSelections()),ue(b.doc,Nd(c,c)),j)for(var k=0;k<j.length;++k)Je(b.doc,"",j[k].anchor,j[k].head,"drag");b.replaceSelection(i,"around","paste"),b.display.input.focus()}}catch(a){}}}}function Ye(a,b){if(rg&&(!a.state.draggingText||+new Date-Jh<100))return void Ia(b);if(!Ba(a,b)&&!Jb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!xg)){var c=d("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",wg&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),wg&&c.parentNode.removeChild(c)}}function Ze(a,b){var e=yc(a,b);if(e){var f=document.createDocumentFragment();Cc(a,e,f),a.display.dragCursor||(a.display.dragCursor=d("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),c(a.display.dragCursor,f)}}function $e(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function _e(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function af(){Kh||(bf(),Kh=!0)}function bf(){var a;ah(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,_e(cf)},100))}),ah(window,"blur",function(){return _e(Jc)})}function cf(a){var b=a.display;b.lastWrapHeight==b.wrapper.clientHeight&&b.lastWrapWidth==b.wrapper.clientWidth||(b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize())}function df(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);e=!0}}return c&&(a="Alt-"+a),d&&(a="Ctrl-"+a),f&&(a="Cmd-"+a),e&&(a="Shift-"+a),a}function ef(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=q(c.split(" "),df),f=0;f<e.length;f++){var g=void 0,h=void 0;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a}function ff(a,b,c,d){b=kf(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return ff(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=ff(a,b.fallthrough[f],c,d);if(g)return g}}}function gf(a){var b="string"==typeof a?a:Lh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function hf(a,b,c){var d=a;return b.altKey&&"Alt"!=d&&(a="Alt-"+a),(Ig?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a),(Ig?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a),!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a),a}function jf(a,b){if(wg&&34==a.keyCode&&a.char)return!1;var c=Lh[a.keyCode];return null!=c&&!a.altGraphKey&&(3==a.keyCode&&a.code&&(c=a.code),hf(c,a,b))}function kf(a){return"string"==typeof a?Ph[a]:a}function lf(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&K(f.from,p(d).to)<=0;){var g=d.pop();if(K(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}md(a,function(){for(var b=d.length-1;b>=0;b--)Je(a.doc,"",d[b].from,d[b].to,"+delete");Uc(a)})}function mf(a,b,c){var d=y(a.text,b+c,c);return d<0||d>a.text.length?null:d}function nf(a,b,c){var d=mf(a,b.ch,c);return null==d?null:new J(b.line,d,c<0?"after":"before")}function of(a,b,c,d,e){if(a){var f=xa(c,b.doc.direction);if(f){var g,h=e<0?p(f):f[0],i=e<0==(1==h.level),j=i?"after":"before";if(h.level>0||"rtl"==b.doc.direction){var k=Vb(b,c);g=e<0?c.text.length-1:0;var l=Wb(b,k,g).top;g=z(function(a){return Wb(b,k,a).top==l},e<0==(1==h.level)?h.from:h.to-1,g),"before"==j&&(g=mf(c,g,1))}else g=e<0?h.to:h.from;return new J(d,g,j)}}return new J(d,e<0?c.text.length:0,e<0?"before":"after")}function pf(a,b,c,d){var e=xa(b,a.doc.direction);if(!e)return nf(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var f=wa(e,c.ch,c.sticky),g=e[f];if("ltr"==a.doc.direction&&g.level%2==0&&(d>0?g.to>c.ch:g.from<c.ch))return nf(b,c,d);var h,i=function(a,c){return mf(b,a instanceof J?a.ch:a,c)},j=function(c){return a.options.lineWrapping?(h=h||Vb(a,b),nc(a,b,h,c)):{begin:0,end:b.text.length}},k=j("before"==c.sticky?i(c,-1):c.ch);if("rtl"==a.doc.direction||1==g.level){var l=1==g.level==d<0,m=i(c,l?1:-1);if(null!=m&&(l?m<=g.to&&m<=k.end:m>=g.from&&m>=k.begin)){var n=l?"before":"after";return new J(c.line,m,n)}}var o=function(a,b,d){for(var f=function(a,b){return b?new J(c.line,i(a,1),"before"):new J(c.line,a,"after")};a>=0&&a<e.length;a+=b){var g=e[a],h=b>0==(1!=g.level),j=h?d.begin:i(d.end,-1);if(g.from<=j&&j<g.to)return f(j,h);if(j=h?g.from:i(g.to,-1),d.begin<=j&&j<d.end)return f(j,h)}},p=o(f+d,d,k);if(p)return p;var q=d>0?k.end:i(k.begin,-1);return null==q||d>0&&q==b.text.length||!(p=o(d>0?0:e.length-1,d,j(q)))?null:p}function qf(a,b){var c=B(a.doc,b),d=la(c);return d!=c&&(b=F(d)),of(!0,a,d,b,1)}function rf(a,b){var c=B(a.doc,b),d=ma(c);return d!=c&&(b=F(d)),of(!0,a,c,b,-1)}function sf(a,b){var c=qf(a,b.line),d=B(a.doc,c.line),e=xa(d,a.doc.direction);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return J(c.line,g?0:f,c.sticky)}return c}function tf(a,b,c){if("string"==typeof b&&!(b=Qh[b]))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Qg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function uf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=ff(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&ff(b,a.options.extraKeys,c,a)||ff(b,a.options.keyMap,c,a)}function vf(a,b,c,d){var e=a.state.keySeq;if(e){if(gf(b))return"handled";if(/\'$/.test(b)?a.state.keySeq=null:Rh.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),wf(a,e+" "+b,c,d))return!0}return wf(a,b,c,d)}function wf(a,b,c,d){var e=uf(a,b,d);return"multi"==e&&(a.state.keySeq=b),"handled"==e&&ub(a,"keyHandled",a,b,c),"handled"!=e&&"multi"!=e||(Fa(c),Fc(a)),!!e}function xf(a,b){var c=jf(b,!0);return!!c&&(b.shiftKey&&!a.state.keySeq?vf(a,"Shift-"+c,b,function(b){return tf(a,b,!0)})||vf(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return tf(a,b)}):vf(a,c,b,function(b){return tf(a,b)}))}function yf(a,b,c){return vf(a,"'"+c+"'",b,function(b){return tf(a,b,!0)})}function zf(a){var b=this;if(b.curOp.focus=g(),!Ba(b,a)){rg&&sg<11&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=xf(b,a);wg&&(Sh=d?c:null,!d&&88==c&&!eh&&(Dg?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||Af(b)}}function Af(a){function b(a){18!=a.keyCode&&a.altKey||(Kg(c,"CodeMirror-crosshair"),za(document,"keyup",b),za(document,"mouseover",b))}var c=a.display.lineDiv;h(c,"CodeMirror-crosshair"),ah(document,"keyup",b),ah(document,"mouseover",b)}function Bf(a){16==a.keyCode&&(this.doc.sel.shift=!1),Ba(this,a)}function Cf(a){var b=this;if(!(Jb(b.display,a)||Ba(b,a)||a.ctrlKey&&!a.altKey||Dg&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(wg&&c==Sh)return Sh=null,void Fa(a);if(!wg||a.which&&!(a.which<10)||!xf(b,a)){var e=String.fromCharCode(null==d?c:d);"\b"!=e&&(yf(b,a,e)||b.display.input.onKeyPress(a))}}}function Df(a,b){var c=+new Date;return Vh&&Vh.compare(c,a,b)?(Uh=Vh=null,"triple"):Uh&&Uh.compare(c,a,b)?(Vh=new Th(c,a,b),Uh=null,"double"):(Uh=new Th(c,a,b),Vh=null,"single")}function Ef(a){var b=this,c=b.display;if(!(Ba(b,a)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=a.shiftKey,Jb(c,a))return void(tg||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100)));if(!Nf(b,a)){var d=yc(b,a),e=Ka(a),f=d?Df(d,e):"single";window.focus(),1==e&&b.state.selectingText&&b.state.selectingText(a),d&&Ff(b,e,d,f,a)||(1==e?d?Hf(b,d,f,a):Ja(a)==c.scroller&&Fa(a):2==e?(d&&ne(b.doc,d),setTimeout(function(){return c.input.focus()},20)):3==e&&(Jg?Of(b,a):Hc(b)))}}}function Ff(a,b,c,d,e){var f="Click";return"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f),f=(1==b?"Left":2==b?"Middle":"Right")+f,vf(a,hf(f,e),e,function(b){if("string"==typeof b&&(b=Qh[b]),!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=Qg}finally{a.state.suppressEdits=!1}return d})}function Gf(a,b,c){var d=a.getOption("configureMouse"),e=d?d(a,b,c):{};if(null==e.unit){var f=Eg?c.shiftKey&&c.metaKey:c.altKey;e.unit=f?"rectangle":"single"==b?"char":"double"==b?"word":"line"}return(null==e.extend||a.doc.extend)&&(e.extend=a.doc.extend||c.shiftKey),null==e.addNew&&(e.addNew=Dg?c.metaKey:c.ctrlKey),null==e.moveOnDrag&&(e.moveOnDrag=!(Dg?c.altKey:c.ctrlKey)),e}function Hf(a,b,c,d){rg?setTimeout(j(Gc,a),0):a.curOp.focus=g();var e,f=Gf(a,c,d),h=a.doc.sel;a.options.dragDrop&&bh&&!a.isReadOnly()&&"single"==c&&(e=h.contains(b))>-1&&(K((e=h.ranges[e]).from(),b)<0||b.xRel>0)&&(K(e.to(),b)>0||b.xRel<0)?If(a,d,b,f):Kf(a,d,b,f)}function If(a,b,c,d){var e=a.display,f=!1,g=nd(a,function(b){tg&&(e.scroller.draggable=!1),a.state.draggingText=!1,za(document,"mouseup",g),za(document,"mousemove",h),za(e.scroller,"dragstart",i),za(e.scroller,"drop",g),f||(Fa(b),d.addNew||ne(a.doc,c,null,null,d.extend),tg||rg&&9==sg?setTimeout(function(){document.body.focus(),e.input.focus()},20):e.input.focus())}),h=function(a){f=f||Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)>=10},i=function(){return f=!0};tg&&(e.scroller.draggable=!0),a.state.draggingText=g,g.copy=!d.moveOnDrag,e.scroller.dragDrop&&e.scroller.dragDrop(),ah(document,"mouseup",g),ah(document,"mousemove",h),ah(e.scroller,"dragstart",i),ah(e.scroller,"drop",g),Hc(a),setTimeout(function(){return e.input.focus()},20)}function Jf(a,b,c){if("char"==c)return new Ch(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new Ch(J(b.line,0),Q(a.doc,J(b.line+1,0)));var d=c(a,b);return new Ch(d.from,d.to)}function Kf(a,b,c,d){function e(b){if(0!=K(r,b))if(r=b,"rectangle"==d.unit){for(var e=[],f=a.options.tabSize,g=l(B(j,c.line).text,c.ch,f),h=l(B(j,b.line).text,b.ch,f),i=Math.min(g,h),p=Math.max(g,h),q=Math.min(c.line,b.line),s=Math.min(a.lastLine(),Math.max(c.line,b.line));q<=s;q++){var t=B(j,q).text,u=n(t,i,f);i==p?e.push(new Ch(J(q,u),J(q,u))):t.length>u&&e.push(new Ch(J(q,u),J(q,n(t,p,f))))}e.length||e.push(new Ch(c,c)),te(j,Md(o.ranges.slice(0,m).concat(e),m),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var v,w=k,x=Jf(a,b,d.unit),y=w.anchor;K(x.anchor,y)>0?(v=x.head,y=O(w.from(),x.anchor)):(v=x.anchor,y=N(w.to(),x.head));var z=o.ranges.slice(0);z[m]=Lf(a,new Ch(Q(j,y),v)),te(j,Md(z,m),Sg)}}function f(b){var c=++t,h=yc(a,b,!0,"rectangle"==d.unit);if(h)if(0!=K(h,r)){a.curOp.focus=g(),e(h);var k=Mc(i,j);(h.line>=k.to||h.line<k.from)&&setTimeout(nd(a,function(){t==c&&f(b)}),150)}else{var l=b.clientY<s.top?-20:b.clientY>s.bottom?20:0;l&&setTimeout(nd(a,function(){t==c&&(i.scroller.scrollTop+=l,f(b))}),50)}}function h(b){a.state.selectingText=!1,t=1/0,Fa(b),i.input.focus(),za(document,"mousemove",u),za(document,"mouseup",v),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;Fa(b);var k,m,o=j.sel,p=o.ranges;if(d.addNew&&!d.extend?(m=j.sel.contains(c),k=m>-1?p[m]:new Ch(c,c)):(k=j.sel.primary(),m=j.sel.primIndex),"rectangle"==d.unit)d.addNew||(k=new Ch(c,c)),c=yc(a,b,!0,!0),m=-1;else{var q=Jf(a,c,d.unit);k=d.extend?me(k,q.anchor,q.head,d.extend):q}d.addNew?-1==m?(m=p.length,te(j,Md(p.concat([k]),m),{scroll:!1,origin:"*mouse"})):p.length>1&&p[m].empty()&&"char"==d.unit&&!d.extend?(te(j,Md(p.slice(0,m).concat(p.slice(m+1)),0),{scroll:!1,origin:"*mouse"}),o=j.sel):pe(j,m,k,Sg):(m=0,te(j,new Bh([k],0),Sg),o=j.sel);var r=c,s=i.wrapper.getBoundingClientRect(),t=0,u=nd(a,function(a){Ka(a)?f(a):h(a)}),v=nd(a,h);a.state.selectingText=v,ah(document,"mousemove",u),ah(document,"mouseup",v)}function Lf(a,b){var c=b.anchor,d=b.head,e=B(a.doc,c.line);if(0==K(c,d)&&c.sticky==d.sticky)return b;var f=xa(e);if(!f)return b;var g=wa(f,c.ch,c.sticky),h=f[g];if(h.from!=c.ch&&h.to!=c.ch)return b;var i=g+(h.from==c.ch==(1!=h.level)?0:1);if(0==i||i==f.length)return b;var j;if(d.line!=c.line)j=(d.line-c.line)*("ltr"==a.doc.direction?1:-1)>0;else{var k=wa(f,d.ch,d.sticky),l=k-g||(d.ch-c.ch)*(1==h.level?-1:1);j=k==i-1||k==i?l<0:l>0}var m=f[i+(j?-1:0)],n=j==(1==m.level),o=n?m.from:m.to,p=n?"after":"before";return c.ch==o&&c.sticky==p?b:new Ch(new J(c.line,o,p),d)}function Mf(a,b,c,d){var e,f;if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(b){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Fa(b);var g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!Da(a,c))return Ha(b);f-=h.top-g.viewOffset;for(var i=0;i<a.options.gutters.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e){return Aa(a,c,a,G(a.doc,f),a.options.gutters[i],b),Ha(b)}}}function Nf(a,b){return Mf(a,b,"gutterClick",!0)}function Of(a,b){Jb(a.display,b)||Pf(a,b)||Ba(a,b,"contextmenu")||a.display.input.onContextMenu(b)}function Pf(a,b){return!!Da(a,"gutterContextMenu")&&Mf(a,b,"gutterContextMenu",!1)}function Qf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),bc(a)}function Rf(a){Hd(a),qd(a),Nc(a)}function Sf(a,b,c){if(!b!=!(c&&c!=Wh)){var d=a.display.dragFunctions,e=b?ah:za;e(a.display.scroller,"dragstart",d.start),e(a.display.scroller,"dragenter",d.enter),e(a.display.scroller,"dragover",d.over),e(a.display.scroller,"dragleave",d.leave),e(a.display.scroller,"drop",d.drop)}}function Tf(a){a.options.lineWrapping?(h(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Kg(a.display.wrapper,"CodeMirror-wrap"),ua(a)),xc(a),qd(a),bc(a),setTimeout(function(){return bd(a)},100)}function Uf(a,b){var c=this;if(!(this instanceof Uf))return new Uf(a,b);this.options=b=b?k(b):{},k(Xh,b,!1),Id(b);var d=b.value;"string"==typeof d&&(d=new Ih(d,b.mode,null,b.lineSeparator,b.direction)),this.doc=d;var e=new Uf.inputStyles[b.inputStyle](this),f=this.display=new A(a,d,e);f.wrapper.CodeMirror=this,Hd(this),Qf(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),dd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Mg,keySeq:null,specialChars:null},b.autofocus&&!Cg&&f.input.focus(),rg&&sg<11&&setTimeout(function(){return c.display.input.reset(!0)},20),Vf(this),af(),ed(this),this.curOp.forceUpdate=!0,Yd(this,d),b.autofocus&&!Cg||this.hasFocus()?setTimeout(j(Ic,this),20):Jc(this);for(var g in Yh)Yh.hasOwnProperty(g)&&Yh[g](c,b[g],Wh);Oc(this),b.finishInit&&b.finishInit(this);for(var h=0;h<Zh.length;++h)Zh[h](c);fd(this),tg&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(f.lineDiv).textRendering&&(f.lineDiv.style.textRendering="auto")}function Vf(a){function b(){e.activeTouch&&(f=setTimeout(function(){return e.activeTouch=null},1e3),g=e.activeTouch,g.end=+new Date)}function c(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}function d(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}var e=a.display;ah(e.scroller,"mousedown",nd(a,Ef)),rg&&sg<11?ah(e.scroller,"dblclick",nd(a,function(b){if(!Ba(a,b)){var c=yc(a,b);if(c&&!Nf(a,b)&&!Jb(a.display,b)){Fa(b);var d=a.findWordAt(c);ne(a.doc,d.anchor,d.head)}}})):ah(e.scroller,"dblclick",function(b){return Ba(a,b)||Fa(b)}),Jg||ah(e.scroller,"contextmenu",function(b){return Of(a,b)});var f,g={end:0};ah(e.scroller,"touchstart",function(b){if(!Ba(a,b)&&!c(b)&&!Nf(a,b)){e.input.ensurePolled(),clearTimeout(f);var d=+new Date;e.activeTouch={start:d,moved:!1,prev:d-g.end<=300?g:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY)}}),ah(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),ah(e.scroller,"touchend",function(c){var f=e.activeTouch;if(f&&!Jb(e,c)&&null!=f.left&&!f.moved&&new Date-f.start<300){var g,h=a.coordsChar(e.activeTouch,"page");g=!f.prev||d(f,f.prev)?new Ch(h,h):!f.prev.prev||d(f,f.prev.prev)?a.findWordAt(h):new Ch(J(h.line,0),Q(a.doc,J(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),Fa(c)}b()}),ah(e.scroller,"touchcancel",b),ah(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Zc(a,e.scroller.scrollTop),_c(a,e.scroller.scrollLeft,!0),Aa(a,"scroll",a))}),ah(e.scroller,"mousewheel",function(b){return Ld(a,b)}),ah(e.scroller,"DOMMouseScroll",function(b){return Ld(a,b)}),ah(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(b){Ba(a,b)||Ia(b)},over:function(b){Ba(a,b)||(Ze(a,b),Ia(b))},start:function(b){return Ye(a,b)},drop:nd(a,Xe),leave:function(b){Ba(a,b)||$e(a)}};var h=e.input.getField();ah(h,"keyup",function(b){return Bf.call(a,b)}),ah(h,"keydown",nd(a,zf)),ah(h,"keypress",nd(a,Cf)),ah(h,"focus",function(b){return Ic(a,b)}),ah(h,"blur",function(b){return Jc(a,b)})}function Wf(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=Ya(a,b).state:c="prev");var g=a.options.tabSize,h=B(f,b),i=l(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&((j=f.mode.indent(e,h.text.slice(k.length),h.text))==Qg||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?l(B(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var m="",n=0;if(a.options.indentWithTabs)for(var p=Math.floor(j/g);p;--p)n+=g,m+="\t";if(n<j&&(m+=o(j-n)),m!=k)return Je(f,m,J(b,0),J(b,k.length),"+input"),h.stateAfter=null,!0;for(var q=0;q<f.sel.ranges.length;q++){var r=f.sel.ranges[q];if(r.head.line==b&&r.head.ch<k.length){var s=J(b,k.length);pe(f,q,new Ch(s,s));break}}}function Xf(a){$h=a}function Yf(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=ch(b),i=null;if(g&&d.ranges.length>1)if($h&&$h.text.join("\n")==b){if(d.ranges.length%$h.text.length==0){i=[];for(var j=0;j<$h.text.length;j++)i.push(f.splitLines($h.text[j]))}}else h.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(i=q(h,function(a){return[a]}));for(var k,l=d.ranges.length-1;l>=0;l--){var m=d.ranges[l],n=m.from(),o=m.to();m.empty()&&(c&&c>0?n=J(n.line,n.ch-c):a.state.overwrite&&!g?o=J(o.line,Math.min(B(f,o.line).text.length,o.ch+p(h).length)):$h&&$h.lineWise&&$h.text.join("\n")==b&&(n=o=J(n.line,0))),k=a.curOp.updateInput;var r={from:n,to:o,text:i?i[l%i.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};De(a.doc,r),ub(a,"inputRead",a,r)}b&&!g&&$f(a,b),Uc(a),a.curOp.updateInput=k,a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=!1}function Zf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||md(b,function(){return Yf(b,c,0,null,"paste")}),!0}function $f(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=Wf(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(B(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Wf(a,e.head.line,"smart"));g&&ub(a,"electricInput",a,e.head.line)}}}function _f(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:J(e,0),head:J(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function ag(a,b){a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck",!!b)}function bg(){var a=d("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=d("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return tg?a.style.width="1000px":a.setAttribute("wrap","off"),Ag&&(a.style.border="1px solid black"),ag(a),b}function cg(a,b,c,d,e){function f(){var d=b.line+c;return!(d<a.first||d>=a.first+a.size)&&(b=new J(d,b.ch,b.sticky),j=B(a,d))}function g(d){var g;if(null==(g=e?pf(a.cm,j,b,c):nf(j,b,c))){if(d||!f())return!1;b=of(e,a.cm,j,b.line,c)}else b=g;return!0}var h=b,i=c,j=B(a,b.line);if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var k=null,l="group"==d,m=a.cm&&a.cm.getHelper(b,"wordChars"),n=!0;!(c<0)||g(!n);n=!1){var o=j.text.charAt(b.ch)||"\n",p=v(o,m)?"w":l&&"\n"==o?"n":!l||/\s/.test(o)?null:"p";if(!l||n||p||(p="s"),k&&k!=p){c<0&&(c=1,g(),b.sticky="after");break}if(p&&(k=p),c>0&&!g(!n))break}var q=ze(a,b,h,i,!0);return L(h,q)&&(q.hitSide=!0),q}function dg(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){
var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=Math.max(h-.5*sc(a.display),3);e=(c>0?b.bottom:b.top)+c*i}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(var j;j=lc(a,g,e),j.outside;){if(c<0?e<=0:e>=f.height){j.hitSide=!0;break}e+=5*c}return j}function eg(a,b){var c=Ub(a,b.line);if(!c||c.hidden)return null;var d=B(a.doc,b.line),e=Rb(c,d,b.line),f=xa(d,a.doc.direction),g="left";if(f){g=wa(f,b.ch)%2?"right":"left"}var h=Xb(e.map,b.ch,g);return h.offset="right"==h.collapse?h.end:h.start,h}function fg(a){for(var b=a;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}function gg(a,b){return b&&(a.bad=!0),a}function hg(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(){k&&(j+=l,k=!1)}function h(a){a&&(g(),j+=a)}function i(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)return void h(c||b.textContent.replace(/\u200b/g,""));var j,m=b.getAttribute("cm-marker");if(m){var n=a.findMarks(J(d,0),J(e+1,0),f(+m));return void(n.length&&(j=n[0].find(0))&&h(C(a.doc,j.from,j.to).join(l)))}if("false"==b.getAttribute("contenteditable"))return;var o=/^(pre|div|p)$/i.test(b.nodeName);o&&g();for(var p=0;p<b.childNodes.length;p++)i(b.childNodes[p]);o&&(k=!0)}else 3==b.nodeType&&h(b.nodeValue)}for(var j="",k=!1,l=a.doc.lineSeparator();i(b),b!=c;)b=b.nextSibling;return j}function ig(a,b,c){var d;if(b==a.display.lineDiv){if(!(d=a.display.lineDiv.childNodes[c]))return gg(a.clipPos(J(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return jg(f,b,c)}}function jg(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=e<0?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var i=F(e<0?a.line:a.rest[e]),j=f[g]+d;return(d<0||h!=b)&&(j=f[g+(d?1:0)]),J(i,j)}}}var e=a.text.firstChild,g=!1;if(!b||!f(e,b))return gg(J(F(a.line),0),!0);if(b==e&&(g=!0,b=e.childNodes[c],c=0,!b)){var h=a.rest?p(a.rest):a.line;return gg(J(F(h),h.text.length),g)}var i=3==b.nodeType?b:null,j=b;for(i||1!=b.childNodes.length||3!=b.firstChild.nodeType||(i=b.firstChild,c&&(c=i.nodeValue.length));j.parentNode!=e;)j=j.parentNode;var k=a.measure,l=k.maps,m=d(i,j,c);if(m)return gg(m,g);for(var n=j.nextSibling,o=i?i.nodeValue.length-c:0;n;n=n.nextSibling){if(m=d(n,n.firstChild,0))return gg(J(m.line,m.ch-o),g);o+=n.textContent.length}for(var q=j.previousSibling,r=c;q;q=q.previousSibling){if(m=d(q,q.firstChild,-1))return gg(J(m.line,m.ch+r),g);r+=q.textContent.length}}function kg(a,b){function c(){a.value=i.getValue()}if(b=b?k(b):{},b.value=a.value,!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var d=g();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(ah(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form;e=f.submit;try{var h=f.submit=function(){c(),f.submit=e,f.submit(),f.submit=h}}catch(a){}}b.finishInit=function(b){b.save=c,b.getTextArea=function(){return a},b.toTextArea=function(){b.toTextArea=isNaN,c(),a.parentNode.removeChild(b.getWrapperElement()),a.style.display="",a.form&&(za(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=e))}},a.style.display="none";var i=Uf(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return i}var lg=navigator.userAgent,mg=navigator.platform,ng=/gecko\/\d/i.test(lg),og=/MSIE \d/.test(lg),pg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lg),qg=/Edge\/(\d+)/.exec(lg),rg=og||pg||qg,sg=rg&&(og?document.documentMode||6:+(qg||pg)[1]),tg=!qg&&/WebKit\//.test(lg),ug=tg&&/Qt\/\d+\.\d+/.test(lg),vg=!qg&&/Chrome\//.test(lg),wg=/Opera\//.test(lg),xg=/Apple Computer/.test(navigator.vendor),yg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(lg),zg=/PhantomJS/.test(lg),Ag=!qg&&/AppleWebKit/.test(lg)&&/Mobile\/\w+/.test(lg),Bg=/Android/.test(lg),Cg=Ag||Bg||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(lg),Dg=Ag||/Mac/.test(mg),Eg=/\bCrOS\b/.test(lg),Fg=/win/i.test(mg),Gg=wg&&lg.match(/Version\/(\d*\.\d*)/);Gg&&(Gg=Number(Gg[1])),Gg&&Gg>=15&&(wg=!1,tg=!0);var Hg,Ig=Dg&&(ug||wg&&(null==Gg||Gg<12.11)),Jg=ng||rg&&sg>=9,Kg=function(b,c){var d=b.className,e=a(c).exec(d);if(e){var f=d.slice(e.index+e[0].length);b.className=d.slice(0,e.index)+(f?e[1]+f:"")}};Hg=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(a){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var Lg=function(a){a.select()};Ag?Lg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:rg&&(Lg=function(a){try{a.select()}catch(a){}});var Mg=function(){this.id=null};Mg.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var Ng,Og,Pg=30,Qg={toString:function(){return"CodeMirror.Pass"}},Rg={scroll:!1},Sg={origin:"*mouse"},Tg={origin:"+move"},Ug=[""],Vg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Wg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Xg=!1,Yg=!1,Zg=null,$g=function(){function a(a){return a<=247?c.charAt(a):1424<=a&&a<=1524?"R":1536<=a&&a<=1785?d.charAt(a-1536):1774<=a&&a<=2220?"r":8192<=a&&a<=8203?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/;return function(c,d){var j="ltr"==d?"L":"R";if(0==c.length||"ltr"==d&&!e.test(c))return!1;for(var k=c.length,l=[],m=0;m<k;++m)l.push(a(c.charCodeAt(m)));for(var n=0,o=j;n<k;++n){var q=l[n];"m"==q?l[n]=o:o=q}for(var r=0,s=j;r<k;++r){var t=l[r];"1"==t&&"r"==s?l[r]="n":g.test(t)&&(s=t,"r"==t&&(l[r]="R"))}for(var u=1,v=l[0];u<k-1;++u){var w=l[u];"+"==w&&"1"==v&&"1"==l[u+1]?l[u]="1":","!=w||v!=l[u+1]||"1"!=v&&"n"!=v||(l[u]=v),v=w}for(var x=0;x<k;++x){var y=l[x];if(","==y)l[x]="N";else if("%"==y){var z=void 0;for(z=x+1;z<k&&"%"==l[z];++z);for(var A=x&&"!"==l[x-1]||z<k&&"1"==l[z]?"1":"N",B=x;B<z;++B)l[B]=A;x=z-1}}for(var C=0,D=j;C<k;++C){var E=l[C];"L"==D&&"1"==E?l[C]="L":g.test(E)&&(D=E)}for(var F=0;F<k;++F)if(f.test(l[F])){var G=void 0;for(G=F+1;G<k&&f.test(l[G]);++G);for(var H="L"==(F?l[F-1]:j),I="L"==(G<k?l[G]:j),J=H==I?H?"L":"R":j,K=F;K<G;++K)l[K]=J;F=G-1}for(var L,M=[],N=0;N<k;)if(h.test(l[N])){var O=N;for(++N;N<k&&h.test(l[N]);++N);M.push(new b(0,O,N))}else{var P=N,Q=M.length;for(++N;N<k&&"L"!=l[N];++N);for(var R=P;R<N;)if(i.test(l[R])){P<R&&M.splice(Q,0,new b(1,P,R));var S=R;for(++R;R<N&&i.test(l[R]);++R);M.splice(Q,0,new b(2,S,R)),P=R}else++R;P<N&&M.splice(Q,0,new b(1,P,N))}return"ltr"==d&&(1==M[0].level&&(L=c.match(/^\s+/))&&(M[0].from=L[0].length,M.unshift(new b(0,0,L[0].length))),1==p(M).level&&(L=c.match(/\s+$/))&&(p(M).to-=L[0].length,M.push(new b(0,k-L[0].length,k)))),"rtl"==d?M.reverse():M}}(),_g=[],ah=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={});d[b]=(d[b]||_g).concat(c)}},bh=function(){if(rg&&sg<9)return!1;var a=d("div");return"draggable"in a||"dragDrop"in a}(),ch=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},dh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)},eh=function(){var a=d("div");return"oncopy"in a||(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),fh=null,gh={},hh={},ih={},jh=function(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};jh.prototype.eol=function(){return this.pos>=this.string.length},jh.prototype.sol=function(){return this.pos==this.lineStart},jh.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},jh.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},jh.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},jh.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b},jh.prototype.eatSpace=function(){for(var a=this,b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++a.pos;return this.pos>b},jh.prototype.skipToEnd=function(){this.pos=this.string.length},jh.prototype.skipTo=function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},jh.prototype.backUp=function(a){this.pos-=a},jh.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=l(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},jh.prototype.indentation=function(){return l(this.string,null,this.tabSize)-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},jh.prototype.match=function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&!1!==b&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a};if(e(this.string.substr(this.pos,a.length))==e(a))return!1!==b&&(this.pos+=a.length),!0},jh.prototype.current=function(){return this.string.slice(this.start,this.pos)},jh.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}},jh.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)},jh.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var kh=function(a,b){this.state=a,this.lookAhead=b},lh=function(a,b,c,d){this.state=b,this.doc=a,this.line=c,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};lh.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a),b},lh.prototype.baseToken=function(a){var b=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)b.baseTokenPos+=2;var c=this.baseTokens[this.baseTokenPos+1];return{type:c&&c.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},lh.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},lh.fromSaved=function(a,b,c){return b instanceof kh?new lh(a,Ta(a.mode,b.state),c,b.lookAhead):new lh(a,Ta(a.mode,b),c)},lh.prototype.save=function(a){var b=!1!==a?Ta(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new kh(b,this.maxLookAhead):b};var mh=function(a,b,c){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=b||null,this.state=c},nh=function(a,b,c){this.text=a,da(this,b),this.height=c?c(this):1};nh.prototype.lineNo=function(){return F(this)},Ea(nh);var oh,ph={},qh={},rh=null,sh=null,th={left:0,right:0,top:0,bottom:0},uh=function(a,b,c){this.cm=c;var e=this.vert=d("div",[d("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=d("div",[d("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(e),a(f),ah(e,"scroll",function(){e.clientHeight&&b(e.scrollTop,"vertical")}),ah(f,"scroll",function(){f.clientWidth&&b(f.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,rg&&sg<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};uh.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},uh.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},uh.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},uh.prototype.zeroWidthHack=function(){var a=Dg&&!yg?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Mg,this.disableVert=new Mg},uh.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1e3,d)}a.style.pointerEvents="auto",b.set(1e3,d)},uh.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var vh=function(){};vh.prototype.update=function(){return{bottom:0,right:0}},vh.prototype.setScrollLeft=function(){},vh.prototype.setScrollTop=function(){},vh.prototype.clear=function(){};var wh={native:uh,null:vh},xh=0,yh=function(a,b,c){var d=a.display;this.viewport=b,this.visible=Mc(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Ob(a),this.force=c,this.dims=uc(a),this.events=[]};yh.prototype.signal=function(a,b){Da(a,b)&&this.events.push(arguments)},yh.prototype.finish=function(){for(var a=this,b=0;b<this.events.length;b++)Aa.apply(null,a.events[b])};var zh=0,Ah=null;rg?Ah=-.53:ng?Ah=15:vg?Ah=-.7:xg&&(Ah=-1/3);var Bh=function(a,b){this.ranges=a,this.primIndex=b};Bh.prototype.primary=function(){return this.ranges[this.primIndex]},Bh.prototype.equals=function(a){var b=this;if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var c=0;c<this.ranges.length;c++){var d=b.ranges[c],e=a.ranges[c];if(!L(d.anchor,e.anchor)||!L(d.head,e.head))return!1}return!0},Bh.prototype.deepCopy=function(){for(var a=this,b=[],c=0;c<this.ranges.length;c++)b[c]=new Ch(M(a.ranges[c].anchor),M(a.ranges[c].head));return new Bh(b,this.primIndex)},Bh.prototype.somethingSelected=function(){for(var a=this,b=0;b<this.ranges.length;b++)if(!a.ranges[b].empty())return!0;return!1},Bh.prototype.contains=function(a,b){var c=this;b||(b=a);for(var d=0;d<this.ranges.length;d++){var e=c.ranges[d];if(K(b,e.from())>=0&&K(a,e.to())<=0)return d}return-1};var Ch=function(a,b){this.anchor=a,this.head=b};Ch.prototype.from=function(){return O(this.anchor,this.head)},Ch.prototype.to=function(){return N(this.anchor,this.head)},Ch.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Oe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=this,d=a,e=a+b;d<e;++d){var f=c.lines[d];c.height-=f.height,gb(f),ub(f,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){var d=this;this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var e=0;e<b.length;++e)b[e].parent=d},iterN:function(a,b,c){for(var d=this,e=a+b;a<e;++a)if(c(d.lines[a]))return!0}},Pe.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){var c=this;this.size-=b;for(var d=0;d<this.children.length;++d){var e=c.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;if(e.removeInner(a,g),c.height-=h-e.height,f==g&&(c.children.splice(d--,1),e.parent=null),0==(b-=g))break;a=0}else a-=f}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Oe))){var i=[];this.collapse(i),this.children=[new Oe(i)],this.children[0].parent=this}},collapse:function(a){for(var b=this,c=0;c<this.children.length;++c)b.children[c].collapse(a)},insertInner:function(a,b,c){var d=this;this.size+=b.length,this.height+=c;for(var e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(a<=g){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(var h=f.lines.length%25+25,i=h;i<f.lines.length;){var j=new Oe(f.lines.slice(i,i+=25));f.height-=j.height,d.children.splice(++e,0,j),j.parent=d}f.lines=f.lines.slice(0,h),d.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Pe(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=m(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Pe(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=this,e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var Dh=function(a,b,c){var d=this;if(c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);this.doc=a,this.node=b};Dh.prototype.clear=function(){var a=this,b=this.doc.cm,c=this.line.widgets,d=this.line,e=F(d);if(null!=e&&c){for(var f=0;f<c.length;++f)c[f]==a&&c.splice(f--,1);c.length||(d.widgets=null);var g=Ib(this);E(d,Math.max(0,d.height-g)),b&&(md(b,function(){Qe(b,d,-g),rd(b,e,"widget")}),ub(b,"lineWidgetCleared",b,this,e))}},Dh.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Ib(this)-b;e&&(E(d,d.height+e),c&&md(c,function(){c.curOp.forceUpdate=!0,Qe(c,d,e),ub(c,"lineWidgetChanged",c,a,F(d))}))},Ea(Dh);var Eh=0,Fh=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++Eh};Fh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){var b=this.doc.cm,c=b&&!b.curOp;if(c&&ed(b),Da(this,"clear")){var d=this.find();d&&ub(this,"clear",d.from,d.to)}for(var e=null,f=null,g=0;g<this.lines.length;++g){var h=a.lines[g],i=W(h.markedSpans,a);b&&!a.collapsed?rd(b,F(h),"text"):b&&(null!=i.to&&(f=F(h)),null!=i.from&&(e=F(h))),h.markedSpans=X(h.markedSpans,i),null==i.from&&a.collapsed&&!qa(a.doc,h)&&b&&E(h,sc(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(var j=0;j<this.lines.length;++j){var k=la(a.lines[j]),l=ta(k);l>b.display.maxLineLength&&(b.display.maxLine=k,b.display.maxLineLength=l,b.display.maxLineChanged=!0)}null!=e&&b&&this.collapsed&&qd(b,e,f+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&we(b.doc)),b&&ub(b,"markerCleared",b,this,e,f),c&&fd(b),this.parent&&this.parent.clear()}},Fh.prototype.find=function(a,b){var c=this;null==a&&"bookmark"==this.type&&(a=1);for(var d,e,f=0;f<this.lines.length;++f){var g=c.lines[f],h=W(g.markedSpans,c);if(null!=h.from&&(d=J(b?g:F(g),h.from),-1==a))return d;if(null!=h.to&&(e=J(b?g:F(g),h.to),1==a))return e}return d&&{from:d,to:e}},Fh.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&md(d,function(){var e=b.line,f=F(b.line),g=Ub(d,f);if(g&&(_b(g),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!qa(c.doc,e)&&null!=c.height){var h=c.height;c.height=null;var i=Ib(c)-h;i&&E(e,e.height+i)}ub(d,"markerChanged",d,a)})},Fh.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=m(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Fh.prototype.detachLine=function(a){if(this.lines.splice(m(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},Ea(Fh);var Gh=function(a,b){var c=this;this.markers=a,this.primary=b;for(var d=0;d<a.length;++d)a[d].parent=c};Gh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var b=0;b<this.markers.length;++b)a.markers[b].clear();ub(this,"clear")}},Gh.prototype.find=function(a,b){return this.primary.find(a,b)},Ea(Gh);var Hh=0,Ih=function(a,b,c,d,e){if(!(this instanceof Ih))return new Ih(a,b,c,d,e);null==c&&(c=0),Pe.call(this,[new Oe([new nh("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var f=J(c,0);this.sel=Nd(f),this.history=new _d(null),this.id=++Hh,this.modeOption=b,this.lineSep=d,this.direction="rtl"==e?"rtl":"ltr",this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),Wd(this,{from:f,to:f,text:a}),te(this,Nd(f),Rg)};Ih.prototype=t(Pe.prototype,{constructor:Ih,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=D(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:pd(function(a){var b=J(this.first,0),c=this.first+this.size-1;De(this,{from:b,to:J(c,B(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&Vc(this.cm,0,0),te(this,Nd(b),Rg)}),replaceRange:function(a,b,c,d){b=Q(this,b),c=c?Q(this,c):b,Je(this,a,b,c,d)},getRange:function(a,b,c){var d=C(this,Q(this,a),Q(this,b));return!1===c?d:d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){if(H(this,a))return B(this,a)},getLineNumber:function(a){return F(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=B(this,a)),la(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Q(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:pd(function(a,b,c){qe(this,Q(this,"number"==typeof a?J(a,b||0):a),null,c)}),setSelection:pd(function(a,b,c){qe(this,Q(this,a),Q(this,b||a),c)}),extendSelection:pd(function(a,b,c){ne(this,Q(this,a),b&&Q(this,b),c)}),extendSelections:pd(function(a,b){oe(this,S(this,a),b)}),extendSelectionsBy:pd(function(a,b){oe(this,S(this,q(this.sel.ranges,a)),b)}),setSelections:pd(function(a,b,c){var d=this;if(a.length){for(var e=[],f=0;f<a.length;f++)e[f]=new Ch(Q(d,a[f].anchor),Q(d,a[f].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),te(this,Md(e,b),c)}}),addSelection:pd(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new Ch(Q(this,a),Q(this,b||a))),te(this,Md(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this,d=this.sel.ranges,e=0;e<d.length;e++){var f=C(c,d[e].from(),d[e].to());b=b?b.concat(f):f}return!1===a?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=this,c=[],d=this.sel.ranges,e=0;e<d.length;e++){var f=C(b,d[e].from(),d[e].to());!1!==a&&(f=f.join(a||b.lineSeparator())),c[e]=f}return c},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:pd(function(a,b,c){for(var d=this,e=[],f=this.sel,g=0;g<f.ranges.length;g++){var h=f.ranges[g];e[g]={from:h.from(),to:h.to(),text:d.splitLines(a[g]),origin:c}}for(var i=b&&"end"!=b&&Sd(this,e,b),j=e.length-1;j>=0;j--)De(d,e[j]);i?se(this,i):this.cm&&Uc(this.cm)}),undo:pd(function(){Fe(this,"undo")}),redo:pd(function(){Fe(this,"redo")}),undoSelection:pd(function(){Fe(this,"undo",!0)}),redoSelection:pd(function(){Fe(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var e=0;e<a.undone.length;e++)a.undone[e].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new _d(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:le(this.history.done),undone:le(this.history.undone)}},setHistory:function(a){var b=this.history=new _d(this.history.maxGeneration);b.done=le(a.done.slice(0),null,!0),b.undone=le(a.undone.slice(0),null,!0)},setGutterMarker:pd(function(a,b,c){return Ne(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&w(d)&&(a.gutterMarkers=null),!0})}),clearGutter:pd(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Ne(b,c,"gutter",function(){return c.gutterMarkers[a]=null,w(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!H(this,a))return null;if(b=a,!(a=B(this,a)))return null}else if(null==(b=F(a)))return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:pd(function(b,c,d){return Ne(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[e]){if(a(d).test(b[e]))return!1;b[e]+=" "+d}else b[e]=d;return!0})}),removeLineClass:pd(function(b,c,d){return Ne(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",f=b[e];if(!f)return!1;if(null==d)b[e]=null;else{var g=f.match(a(d));if(!g)return!1;var h=g.index+g[0].length;b[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}return!0})}),addLineWidget:pd(function(a,b,c){return Re(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Se(this,Q(this,a),Q(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return a=Q(this,a),Se(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Q(this,a);var b=[],c=B(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=Q(this,a),b=Q(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];null!=i.to&&e==a.line&&a.ch>=i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>=b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;if(f>a)return b=a,!0;a-=f,++c}),Q(this,J(c,b))},indexFromPos:function(a){a=Q(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new Ih(D(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new Ih(D(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Ve(d,Ue(this)),d},unlinkDoc:function(a){var b=this;if(a instanceof Uf&&(a=a.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=b.linked[c];if(d.doc==a){b.linked.splice(c,1),a.unlinkDoc(b),We(Ue(b));break}}if(a.history==this.history){var e=[a.id];Xd(a,function(a){return e.push(a.id)},!0),a.history=new _d(null),a.history.done=le(this.history.done,e),a.history.undone=le(this.history.undone,e)}},iterLinkedDocs:function(a){Xd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):ch(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:pd(function(a){"rtl"!=a&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&$d(this.cm))})}),Ih.prototype.eachLine=Ih.prototype.iter;for(var Jh=0,Kh=!1,Lh={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",
35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Mh=0;Mh<10;Mh++)Lh[Mh+48]=Lh[Mh+96]=String(Mh);for(var Nh=65;Nh<=90;Nh++)Lh[Nh]=String.fromCharCode(Nh);for(var Oh=1;Oh<=12;Oh++)Lh[Oh+111]=Lh[Oh+63235]="F"+Oh;var Ph={};Ph.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ph.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ph.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ph.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ph.default=Dg?Ph.macDefault:Ph.pcDefault;var Qh={selectAll:Be,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Rg)},killLine:function(a){return lf(a,function(b){if(b.empty()){var c=B(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:J(b.head.line+1,0)}:{from:b.head,to:J(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return lf(a,function(b){return{from:J(b.from().line,0),to:Q(a.doc,J(b.to().line+1,0))}})},delLineLeft:function(a){return lf(a,function(a){return{from:J(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return lf(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return lf(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(J(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(J(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return qf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return sf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){return rf(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},Tg)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},Tg)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?sf(a,b.head):d},Tg)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=l(a.getLine(f.line),f.ch,d);b.push(o(d-g%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return md(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=B(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new J(e.line,e.ch-1)),e.ch>0)e=new J(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),J(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=B(a.doc,e.line-1).text;g&&(e=new J(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),J(e.line-1,g.length-1),e,"+transpose"))}c.push(new Ch(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return md(a,function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(var d=0;d<b.length;d++)a.indentLine(b[d].from().line,null,!0);Uc(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Rh=new Mg,Sh=null,Th=function(a,b,c){this.time=a,this.pos=b,this.button=c};Th.prototype.compare=function(a,b,c){return this.time+400>a&&0==K(b,this.pos)&&c==this.button};var Uh,Vh,Wh={toString:function(){return"CodeMirror.Init"}},Xh={},Yh={};Uf.defaults=Xh,Uf.optionHandlers=Yh;var Zh=[];Uf.defineInitHook=function(a){return Zh.push(a)};var $h=null,_h=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mg,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};_h.prototype.init=function(a){function b(a){if(!Ba(e,a)){if(e.somethingSelected())Xf({lineWise:!1,text:e.getSelections()}),"cut"==a.type&&e.replaceSelection("",null,"cut");else{if(!e.options.lineWiseCopyCut)return;var b=_f(e);Xf({lineWise:!0,text:b.text}),"cut"==a.type&&e.operation(function(){e.setSelections(b.ranges,0,Rg),e.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var c=$h.text.join("\n");if(a.clipboardData.setData("Text",c),a.clipboardData.getData("Text")==c)return void a.preventDefault()}var g=bg(),h=g.firstChild;e.display.lineSpace.insertBefore(g,e.display.lineSpace.firstChild),h.value=$h.text.join("\n");var i=document.activeElement;Lg(h),setTimeout(function(){e.display.lineSpace.removeChild(g),i.focus(),i==f&&d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;ag(f,e.options.spellcheck),ah(f,"paste",function(a){Ba(e,a)||Zf(a,e)||sg<=11&&setTimeout(nd(e,function(){return c.updateFromDOM()}),20)}),ah(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}}),ah(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})}),ah(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)}),ah(f,"touchstart",function(){return d.forceCompositionEnd()}),ah(f,"input",function(){c.composing||c.readFromDOMSoon()}),ah(f,"copy",b),ah(f,"cut",b)},_h.prototype.prepareSelection=function(){var a=Bc(this.cm,!1);return a.focus=this.cm.state.focused,a},_h.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},_h.prototype.showPrimarySelection=function(){var a=window.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),e=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||e.line<b.display.viewFrom)return void a.removeAllRanges();var f=ig(b,a.anchorNode,a.anchorOffset),g=ig(b,a.focusNode,a.focusOffset);if(!f||f.bad||!g||g.bad||0!=K(O(f,g),d)||0!=K(N(f,g),e)){var h=b.display.view,i=d.line>=b.display.viewFrom&&eg(b,d)||{node:h[0].measure.map[2],offset:0},j=e.line<b.display.viewTo&&eg(b,e);if(!j){var k=h[h.length-1].measure,l=k.maps?k.maps[k.maps.length-1]:k.map;j={node:l[l.length-1],offset:l[l.length-2]-l[l.length-3]}}if(!i||!j)return void a.removeAllRanges();var m,n=a.rangeCount&&a.getRangeAt(0);try{m=Hg(i.node,i.offset,j.offset,j.node)}catch(a){}m&&(!ng&&b.state.focused?(a.collapse(i.node,i.offset),m.collapsed||(a.removeAllRanges(),a.addRange(m))):(a.removeAllRanges(),a.addRange(m)),n&&null==a.anchorNode?a.addRange(n):ng&&this.startGracePeriod()),this.rememberSelection()}},_h.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},_h.prototype.showMultipleSelections=function(a){c(this.cm.display.cursorDiv,a.cursors),c(this.cm.display.selectionDiv,a.selection)},_h.prototype.rememberSelection=function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},_h.prototype.selectionInEditor=function(){var a=window.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return f(this.div,b)},_h.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},_h.prototype.blur=function(){this.div.blur()},_h.prototype.getField=function(){return this.div},_h.prototype.supportsTouch=function(){return!0},_h.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():md(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,a)},_h.prototype.selectionChanged=function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},_h.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;if(Bg&&vg&&this.cm.options.gutters.length&&fg(a.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=ig(b,a.anchorNode,a.anchorOffset),d=ig(b,a.focusNode,a.focusOffset);c&&d&&md(b,function(){te(b.doc,Nd(c,d),Rg),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}}},_h.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();if(0==d.ch&&d.line>a.firstLine()&&(d=J(d.line-1,B(a.doc,d.line-1).length)),e.ch==B(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=J(e.line+1,0)),d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f,g,h;d.line==b.viewFrom||0==(f=zc(a,d.line))?(g=F(b.view[0].line),h=b.view[0].node):(g=F(b.view[f].line),h=b.view[f-1].node.nextSibling);var i,j,k=zc(a,e.line);if(k==b.view.length-1?(i=b.viewTo-1,j=b.lineDiv.lastChild):(i=F(b.view[k+1].line)-1,j=b.view[k+1].node.previousSibling),!h)return!1;for(var l=a.doc.splitLines(hg(a,h,j,g,i)),m=C(a.doc,J(g,0),J(i,B(a.doc,i).text.length));l.length>1&&m.length>1;)if(p(l)==p(m))l.pop(),m.pop(),i--;else{if(l[0]!=m[0])break;l.shift(),m.shift(),g++}for(var n=0,o=0,q=l[0],r=m[0],s=Math.min(q.length,r.length);n<s&&q.charCodeAt(n)==r.charCodeAt(n);)++n;for(var t=p(l),u=p(m),v=Math.min(t.length-(1==l.length?n:0),u.length-(1==m.length?n:0));o<v&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)++o;if(1==l.length&&1==m.length&&g==d.line)for(;n&&n>d.ch&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)n--,o++;l[l.length-1]=t.slice(0,t.length-o).replace(/^\u200b+/,""),l[0]=l[0].slice(n).replace(/\u200b+$/,"");var w=J(g,n),x=J(i,m.length?p(m).length-o:0);return l.length>1||l[0]||K(w,x)?(Je(a.doc,l,w,x,"+input"),!0):void 0},_h.prototype.ensurePolled=function(){this.forceCompositionEnd()},_h.prototype.reset=function(){this.forceCompositionEnd()},_h.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},_h.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing){if(!a.composing.done)return;a.composing=null}a.updateFromDOM()},80))},_h.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||md(this.cm,function(){return qd(a.cm)})},_h.prototype.setUneditable=function(a){a.contentEditable="false"},_h.prototype.onKeyPress=function(a){0!=a.charCode&&(a.preventDefault(),this.cm.isReadOnly()||nd(this.cm,Yf)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))},_h.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)},_h.prototype.onContextMenu=function(){},_h.prototype.resetPosition=function(){},_h.prototype.needsContentAttribute=!0;var ai=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new Mg,this.hasSelection=!1,this.composing=null};ai.prototype.init=function(a){function b(a){if(!Ba(e,a)){if(e.somethingSelected())Xf({lineWise:!1,text:e.getSelections()});else{if(!e.options.lineWiseCopyCut)return;var b=_f(e);Xf({lineWise:!0,text:b.text}),"cut"==a.type?e.setSelections(b.ranges,null,Rg):(d.prevInput="",g.value=b.text.join("\n"),Lg(g))}"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.cm,f=this.wrapper=bg(),g=this.textarea=f.firstChild;a.wrapper.insertBefore(f,a.wrapper.firstChild),Ag&&(g.style.width="0px"),ah(g,"input",function(){rg&&sg>=9&&c.hasSelection&&(c.hasSelection=null),d.poll()}),ah(g,"paste",function(a){Ba(e,a)||Zf(a,e)||(e.state.pasteIncoming=!0,d.fastPoll())}),ah(g,"cut",b),ah(g,"copy",b),ah(a.scroller,"paste",function(b){Jb(a,b)||Ba(e,b)||(e.state.pasteIncoming=!0,d.focus())}),ah(a.lineSpace,"selectstart",function(b){Jb(a,b)||Fa(b)}),ah(g,"compositionstart",function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear(),d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}}),ah(g,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})},ai.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Bc(a);if(a.options.moveInputWithCursor){var e=ic(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},ai.prototype.showSelection=function(a){var b=this.cm,d=b.display;c(d.cursorDiv,a.cursors),c(d.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},ai.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;if(b.somethingSelected()){this.prevInput="";var c=b.getSelection();this.textarea.value=c,b.state.focused&&Lg(this.textarea),rg&&sg>=9&&(this.hasSelection=c)}else a||(this.prevInput=this.textarea.value="",rg&&sg>=9&&(this.hasSelection=null))}},ai.prototype.getField=function(){return this.textarea},ai.prototype.supportsTouch=function(){return!1},ai.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Cg||g()!=this.textarea))try{this.textarea.focus()}catch(a){}},ai.prototype.blur=function(){this.textarea.blur()},ai.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ai.prototype.receivedFocus=function(){this.slowPoll()},ai.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},ai.prototype.fastPoll=function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0,c.polling.set(20,a)},ai.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||dh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(rg&&sg>=9&&this.hasSelection===e||Dg&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);if(8203!=f||d||(d="​"),8666==f)return this.reset(),this.cm.execCommand("undo")}for(var g=0,h=Math.min(d.length,e.length);g<h&&d.charCodeAt(g)==e.charCodeAt(g);)++g;return md(b,function(){Yf(b,e.slice(g),d.length-g,null,a.composing?"*compose":null),e.length>1e3||e.indexOf("\n")>-1?c.value=a.prevInput="":a.prevInput=e,a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ai.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ai.prototype.onKeyPress=function(){rg&&sg>=9&&(this.hasSelection=null),this.fastPoll()},ai.prototype.onContextMenu=function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="​"+(a?g.value:"");g.value="⇚",g.value=b,d.prevInput=a?"":"​",g.selectionStart=1,g.selectionEnd=b.length,f.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending=!1,d.wrapper.style.cssText=k,g.style.cssText=j,rg&&sg<9&&f.scrollbars.setScrollTop(f.scroller.scrollTop=i),null!=g.selectionStart){(!rg||rg&&sg<9)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&g.selectionEnd>0&&"​"==d.prevInput?nd(e,Be)(e):a++<10?f.detectingSelectAll=setTimeout(c,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=yc(e,a),i=f.scroller.scrollTop;if(h&&!wg){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&nd(e,te)(e.doc,Nd(h),Rg);var j=g.style.cssText,k=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";var l=d.wrapper.getBoundingClientRect();g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-l.top-5)+"px; left: "+(a.clientX-l.left-5)+"px;\n      z-index: 1000; background: "+(rg?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var m;if(tg&&(m=window.scrollY),f.input.focus(),tg&&window.scrollTo(null,m),f.input.reset(),e.somethingSelected()||(g.value=d.prevInput=" "),d.contextMenuPending=!0,f.selForContextMenu=e.doc.sel,clearTimeout(f.detectingSelectAll),rg&&sg>=9&&b(),Jg){Ia(a);var n=function(){za(window,"mouseup",n),setTimeout(c,20)};ah(window,"mouseup",n)}else setTimeout(c,50)}},ai.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled="nocursor"==a},ai.prototype.setUneditable=function(){},ai.prototype.needsContentAttribute=!1,function(a){function b(b,d,e,f){a.defaults[b]=d,e&&(c[b]=f?function(a,b,c){c!=Wh&&e(a,b,c)}:e)}var c=a.optionHandlers;a.defineOption=b,a.Init=Wh,b("value","",function(a,b){return a.setValue(b)},!0),b("mode",null,function(a,b){a.doc.modeOption=b,Td(a)},!0),b("indentUnit",2,Td,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(a){Ud(a),bc(a),qd(a)},!0),b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length,c.push(J(d,f))}d++});for(var e=c.length-1;e>=0;e--)Je(a.doc,b,c[e],J(c[e].line,c[e].ch+b.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g"),c!=Wh&&a.refresh()}),b("specialCharPlaceholder",jb,function(a){return a.refresh()},!0),b("electricChars",!0),b("inputStyle",Cg?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),b("rtlMoveVisually",!Fg),b("wholeLineUpdateBefore",!0),b("theme","default",function(a){Qf(a),Rf(a)},!0),b("keyMap","default",function(a,b,c){var d=kf(b),e=c!=Wh&&kf(c);e&&e.detach&&e.detach(a,d),d.attach&&d.attach(a,e||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,Tf,!0),b("gutters",[],function(a){Id(a.options),Rf(a)},!0),b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?vc(a.display)+"px":"0",a.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(a){return bd(a)},!0),b("scrollbarStyle","native",function(a){dd(a),bd(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),b("lineNumbers",!1,function(a){Id(a.options),Rf(a)},!0),b("firstLineNumber",1,Rf,!0),b("lineNumberFormatter",function(a){return a},Rf,!0),b("showCursorWhenSelecting",!1,Ac,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("readOnly",!1,function(a,b){"nocursor"==b&&(Jc(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),b("dragDrop",!0,Sf),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Ac,!0),b("singleCursorHeightPerLine",!0,Ac,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Ud,!0),b("addModeClass",!1,Ud,!0),b("pollInterval",100),b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),b("historyEventDelay",1250),b("viewportMargin",10,function(a){return a.refresh()},!0),b("maxHighlightLength",1e4,Ud,!0),b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),b("autofocus",null),b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0)}(Uf),function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];d[a]==c&&"mode"!=a||(d[a]=c,b.hasOwnProperty(a)&&nd(this,b[a])(this,c,e),Aa(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](kf(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:od(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");r(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority}),this.state.modeGen++,qd(this)}),removeOverlay:od(function(a){for(var b=this,c=this.state.overlays,d=0;d<c.length;++d){var e=c[d].modeSpec;if(e==a||"string"==typeof a&&e.name==a)return c.splice(d,1),b.state.modeGen++,void qd(b)}}),indentLine:od(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),H(this.doc,a)&&Wf(this,a,b,c)}),indentSelection:od(function(a){for(var b=this,c=this.doc.sel.ranges,d=-1,e=0;e<c.length;e++){var f=c[e];if(f.empty())f.head.line>d&&(Wf(b,f.head.line,a,!0),d=f.head.line,e==b.doc.sel.primIndex&&Uc(b));else{var g=f.from(),h=f.to(),i=Math.max(d,g.line);d=Math.min(b.lastLine(),h.line-(h.ch?0:1))+1;for(var j=i;j<d;++j)Wf(b,j,a);var k=b.doc.sel.ranges;0==g.ch&&c.length==k.length&&k[e].from().ch>0&&pe(b.doc,e,new Ch(g,k[e].to()),Rg)}}}),getTokenAt:function(a,b){return ab(this,a,b)},getLineTokens:function(a,b){return ab(this,J(a),b,!0)},getTokenTypeAt:function(a){a=Q(this.doc,a);var b,c=Xa(this,B(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("overlay "):-1;return h<0?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=this,e=[];if(!c.hasOwnProperty(b))return e;var f=c[b],g=this.getModeAt(a);if("string"==typeof g[b])f[g[b]]&&e.push(f[g[b]]);else if(g[b])for(var h=0;h<g[b].length;h++){var i=f[g[b][h]];i&&e.push(i)}else g.helperType&&f[g.helperType]?e.push(f[g.helperType]):f[g.name]&&e.push(f[g.name]);for(var j=0;j<f._global.length;j++){var k=f._global[j];k.pred(g,d)&&-1==m(e,k.val)&&e.push(k.val)}return e},getStateAfter:function(a,b){var c=this.doc;return a=P(c,null==a?c.first+c.size-1:a),Ya(this,a+1,b).state},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?Q(this.doc,a):a?d.from():d.to(),ic(this,c,b||"page")},charCoords:function(a,b){return hc(this,Q(this.doc,a),b||"page")},coordsChar:function(a,b){return a=gc(this,a,b||"page"),lc(this,a.left,a.top)},lineAtHeight:function(a,b){return a=gc(this,{top:a,left:0},b||"page").top,G(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d,e=!1;if("number"==typeof a){var f=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>f&&(a=f,e=!0),d=B(this.doc,a)}else d=a;return fc(this,d,{top:0,left:0},b||"page",c||e).top+(e?this.doc.height-sa(d):0)},defaultTextHeight:function(){return sc(this.display)},defaultCharWidth:function(){return tc(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ic(this,Q(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Rc(this,{left:h,top:g,right:h+b.offsetWidth,bottom:g+b.offsetHeight})},triggerOnKeyDown:od(zf),triggerOnKeyPress:od(Cf),triggerOnKeyUp:Bf,triggerOnMouseDown:od(Ef),execCommand:function(a){if(Qh.hasOwnProperty(a))return Qh[a].call(null,this)},triggerElectric:od(function(a){$f(this,a)}),findPosH:function(a,b,c,d){var e=this,f=1;b<0&&(f=-1,b=-b);for(var g=Q(this.doc,a),h=0;h<b&&(g=cg(e.doc,g,f,c,d),!g.hitSide);++h);return g},moveH:od(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?cg(c.doc,d.head,a,b,c.options.rtlMoveVisually):a<0?d.from():d.to()},Tg)}),deleteH:od(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):lf(this,function(c){var e=cg(d,c.head,a,b,!1);return a<0?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=this,f=1,g=d;b<0&&(f=-1,b=-b);for(var h=Q(this.doc,a),i=0;i<b;++i){var j=ic(e,h,"div");if(null==g?g=j.left:j.left=g,h=dg(e,j,f,c),h.hitSide)break}return h},moveV:od(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return a<0?g.from():g.to();var h=ic(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=dg(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Tc(c,hc(c,i,"div").top-h.top),i},Tg),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=B(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");"before"!=a.sticky&&e!=c.length||!d?++e:--d;for(var g=c.charAt(d),h=v(g,f)?function(a){return v(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!v(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new Ch(J(a.line,d),J(a.line,e))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?h(this.display.cursorDiv,"CodeMirror-overwrite"):Kg(this.display.cursorDiv,"CodeMirror-overwrite"),Aa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==g()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:od(function(a,b){Vc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Nb(this)-this.display.barHeight,width:a.scrollWidth-Nb(this)-this.display.barWidth,clientHeight:Pb(this),clientWidth:Ob(this)}},scrollIntoView:od(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:J(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line?Wc(this,a):Yc(this,a.from,a.to,a.margin)}),setSize:od(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a)),null!=b&&(this.display.wrapper.style.height=d(b)),this.options.lineWrapping&&ac(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){rd(c,e,"widget");break}++e}),this.curOp.forceUpdate=!0,Aa(this,"refresh",this)}),operation:function(a){return md(this,a)},startOperation:function(){return ed(this)},endOperation:function(){return fd(this)},refresh:od(function(){
var a=this.display.cachedTextHeight;qd(this),this.curOp.forceUpdate=!0,bc(this),Vc(this,this.doc.scrollLeft,this.doc.scrollTop),Fd(this),(null==a||Math.abs(a-sc(this.display))>.5)&&xc(this),Aa(this,"refresh",this)}),swapDoc:od(function(a){var b=this.doc;return b.cm=null,Yd(this,a),bc(this),this.display.input.reset(),Vc(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,ub(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ea(a),a.registerHelper=function(b,d,e){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]}),c[b][d]=e},a.registerGlobalHelper=function(b,d,e,f){a.registerHelper(b,d,f),c[b]._global.push({pred:e,val:f})}}(Uf);var bi="iter insert remove copy getEditor constructor".split(" ");for(var ci in Ih.prototype)Ih.prototype.hasOwnProperty(ci)&&m(bi,ci)<0&&(Uf.prototype[ci]=function(a){return function(){return a.apply(this.doc,arguments)}}(Ih.prototype[ci]));return Ea(Ih),Uf.inputStyles={textarea:ai,contenteditable:_h},Uf.defineMode=function(a){Uf.defaults.mode||"null"==a||(Uf.defaults.mode=a),Oa.apply(this,arguments)},Uf.defineMIME=Pa,Uf.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Uf.defineMIME("text/plain","null"),Uf.defineExtension=function(a,b){Uf.prototype[a]=b},Uf.defineDocExtension=function(a,b){Ih.prototype[a]=b},Uf.fromTextArea=kg,function(a){a.off=za,a.on=ah,a.wheelEventPixels=Kd,a.Doc=Ih,a.splitLines=ch,a.countColumn=l,a.findColumn=n,a.isWordChar=u,a.Pass=Qg,a.signal=Aa,a.Line=nh,a.changeEnd=Od,a.scrollbarModel=wh,a.Pos=J,a.cmpPos=K,a.modes=gh,a.mimeModes=hh,a.resolveMode=Qa,a.getMode=Ra,a.modeExtensions=ih,a.extendMode=Sa,a.copyState=Ta,a.startState=Va,a.innerMode=Ua,a.commands=Qh,a.keyMap=Ph,a.keyName=jf,a.isModifierKey=gf,a.lookupKey=ff,a.normalizeKeyMap=ef,a.StringStream=jh,a.SharedTextMarker=Gh,a.TextMarker=Fh,a.LineWidget=Dh,a.e_preventDefault=Fa,a.e_stopPropagation=Ga,a.e_stop=Ia,a.addClass=h,a.contains=f,a.rmClass=Kg,a.keyNames=Lh}(Uf),Uf.version="5.35.0",Uf})},{}],39:[function(a,b,c){!function(d){"object"==typeof c&&"object"==typeof b?d(a("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)}(function(a){"use strict";a.defineMode("z80",function(a,b){var c,d,e=b.ez80;e?(c=/^(exx?|(ld|cp)([di]r?)?|[lp]ea|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|[de]i|halt|im|in([di]mr?|ir?|irx|2r?)|ot(dmr?|[id]rx|imr?)|out(0?|[di]r?|[di]2r?)|tst(io)?|slp)(\.([sl]?i)?[sl])?\b/i,d=/^(((call|j[pr]|rst|ret[in]?)(\.([sl]?i)?[sl])?)|(rs|st)mix)\b/i):(c=/^(exx?|(ld|cp|in)([di]r?)?|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|rst|[de]i|halt|im|ot[di]r|out[di]?)\b/i,d=/^(call|j[pr]|ret[in]?|b_?(call|jump))\b/i);var f=/^(af?|bc?|c|de?|e|hl?|l|i[xy]?|r|sp)\b/i,g=/^(n?[zc]|p[oe]?|m)\b/i,h=/^([hl][xy]|i[xy][hl]|slia|sll)\b/i,i=/^([\da-f]+h|[0-7]+o|[01]+b|\d+d?)\b/i;return{startState:function(){return{context:0}},token:function(a,b){if(a.column()||(b.context=0),a.eatSpace())return null;var j;if(a.eatWhile(/\w/)){if(e&&a.eat(".")&&a.eatWhile(/\w/),j=a.current(),!a.indentation())return a.match(i)?"number":null;if((1==b.context||4==b.context)&&f.test(j))return b.context=4,"var2";if(2==b.context&&g.test(j))return b.context=4,"var3";if(c.test(j))return b.context=1,"keyword";if(d.test(j))return b.context=2,"keyword";if(4==b.context&&i.test(j))return"number";if(h.test(j))return"error"}else{if(a.eat(";"))return a.skipToEnd(),"comment";if(a.eat('"')){for(;(j=a.next())&&'"'!=j;)"\\"==j&&a.next();return"string"}if(a.eat("'")){if(a.match(/\\?.'/))return"number"}else if(a.eat(".")||a.sol()&&a.eat("#")){if(b.context=5,a.eatWhile(/\w/))return"def"}else if(a.eat("$")){if(a.eatWhile(/[\da-f]/i))return"number"}else if(a.eat("%")){if(a.eatWhile(/[01]/))return"number"}else a.next()}return null}}}),a.defineMIME("text/x-z80","z80"),a.defineMIME("text/x-ez80",{name:"z80",ez80:!0})})},{"../../lib/codemirror":38}],40:[function(a,b,c){!function(){"use strict";function a(){this._numOfTimer=1,this._delay=1,this._iteration=1,this._func=null,this._timerIds=null,this._calcFreq=null,this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime()}a.prototype.setNumOfTimer=function(a){this.updateTimer(function(){this._numOfTimer=a})},a.prototype.setTimerInterval=function(a){this.updateTimer(function(){this._delay=a})},a.prototype.setProcCount=function(a){this.updateTimer(function(){this._iteration=a})},a.prototype.setProc=function(a){this.updateTimer(function(){this._func=a})},a.prototype.isRunning=function(){return null!=this._timerIds},a.prototype.start=function(){if(!this.isRunning()){this._timerIds=[],this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime();for(var a=0;a<this._numOfTimer;a++)this._timerIds.push(setInterval(function(){if(null!=this._timerIds)for(var a=0;a<this._iteration;a++)null!=this._timerIds&&(this._count++,this._func())}.bind(this),this._delay))}},a.prototype.stop=function(){this.isRunning()&&(this._tickEnd=(new Date).getTime(),this._timerIds.forEach(function(a){clearInterval(a)}),this._timerIds=null)},a.prototype.getElapse=function(){return this._tickEnd-this._tickStart},a.prototype.getCalculatedFreq=function(){return this._calcFreq},a.prototype.getActualFreq=function(){var a=this.getElapse();return 0==a?null:this._count/(a/1e3)},a.prototype.getStat=function(){var a=this.getCalculatedFreq(),b=this.getElapse(),c=this.getActualFreq();return{parameter:{numOfTimer:this._numOfTimer,interval:this._delay,iteration:this._iteration,calcFreq:a},result:{elapse:b,actualFreq:c,actParCalc:c/a}}},a.prototype.updateTimer=function(a){var b=this.isRunning();b&&this.stop(),a.call(this),0!=this._delay?this._calcFreq=this._iteration*(1e3/this._delay)*this._numOfTimer:this._calcFreq=null,b&&this.start()},a.setInterval=function(b,c,d,e){if(d=d||0,e=e||0,0==d&&0==e){for(;c*++d<20;);for(c=Math.round(c*d);d/++e>500;);d=Math.round(d/e)}var f=new a;return f.setProc(b),f.setNumOfTimer(d),f.setTimerInterval(c),f.setProcCount(e),f.start(),f},a.clearInterval=function(a){a.stop()};try{b.exports={setInterval:a.setInterval,clearInterval:a.clearInterval}}catch(b){!function(b){b.FractionalTimer=a}(Function("return this;")())}}()},{}],41:[function(a,b,c){!function(a){"use strict";function c(){}var d=a.constructor.name;d||("[object Window]"==a?d="Window":"[object WorkerGlobalScope]"==a&&(d="DedicatedWorkerGlobalScope")),c.context=d,"Window"==c.context?(c.create=function(a,b,d,e){var f=new c;return f.create(a,b,d,e),f},c.prototype.create=function(a,b,c,d){this.worker=new Worker(a),this.createWrappers(Object.keys(b.prototype)),this.callbacks={},this.queryId=0,this.onNotify={},this.worker.onmessage=function(a){return function(b){switch(b.data.type){case"response":try{a.callbacks[b.data.queryId].apply(c,b.data.param)}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}delete a.callbacks[b.data.queryId];break;case"notify":try{a.onNotify[b.data.name](b.data.param)}catch(a){console.warn("*** exception: ",a,"in notify",b.data.name,"params:",JSON.stringify(b.data.param))}}}}(this),d=d||{},Object.keys(d).forEach(function(a){this.onNotify[a]=function(){d[a].apply(c,arguments)}},this)},c.prototype.createWrappers=function(a){a.forEach(function(a){c.prototype[a]=this.wrapper(a)},this)},c.prototype.wrapper=function(a){return function(){var b=function(){},c=[];arguments.length>0&&(b=Array.prototype.slice.call(arguments,-1)[0]||function(){},c=Array.prototype.slice.call(arguments,0,arguments.length-1));var d=this.queryId++;this.callbacks[d]=b,this.worker.postMessage({method:a,param:c,queryId:d})}}):"DedicatedWorkerGlobalScope"!=c.context&&"WorkerGlobalScope"!=c.context||(c.create=function(a){var b=new c;return"function"==typeof a&&(a=new a),b.create(a),b},c.prototype.create=function(b){this.worker=a,this.client=b,this.client._transworker=this,function(a){Object.keys(a.constructor.prototype).forEach(function(b){a.client[b]=function(){a.constructor.prototype[b].apply(a,arguments)}}),a.worker.onmessage=function(b){try{a.worker.postMessage({type:"response",queryId:b.data.queryId,method:b.data.method,param:[a.client[b.data.method].apply(a.client,b.data.param)]})}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}}}(this)},c.prototype.postNotify=function(a,b){this.worker.postMessage({type:"notify",name:a,param:b})});try{b.exports=c}catch(b){a.TransWorker=c}}(Function("return this;")())},{}]},{},[2]);