!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("../lib/ex_number.js");var d=getModule("FractionalTimer")||a("fractional-timer"),e=getModule("MZ_TapeHeader")||a("./mz-tape-header"),f=getModule("MZ_Tape")||a("./mz-tape"),g=getModule("MZ_DataRecorder")||a("./mz-data-recorder"),h=getModule("FTParam")||a("../lib/ft-param"),i=getModule("Intel8253")||a("../lib/intel-8253"),j=getModule("FlipFlopCounter")||a("../lib/flip-flop-counter"),k=getModule("IC556")||a("../lib/ic556"),l=getModule("MZ700KeyMatrix")||a("./mz700-key-matrix"),m=getModule("MZ700_Memory")||a("./memory.js"),n=getModule("Z80")||a("../Z80/emulator"),o=getModule("Z80_assemble")||a("../Z80/assembler.js"),p=function(a){"use strict";var b=this;this._screenUpdateData={},this._vramTxTid=null,this.keymatrix=new l,this.intel8253=new i,this.intel8253.counter[1].counter=15700,this.intel8253.counter[1].value=15700,this.intel8253.counter[1].addEventListener("timeup",function(){this.intel8253.counter[2].count(1)}.bind(this)),this.intel8253.counter[2].counter=43200,this.intel8253.counter[2].value=43200,this.intel8253.counter[2].addEventListener("timeup",function(){console.log("i8253#2 timeup"),this.INTMSK?(console.log("RAISE INTERRUPT"),this.z80.interrupt()):console.log("INTRRUPT MASKED")}.bind(this)),this.hblank=new j(15700),this.hblank.addEventListener("change",function(){this.intel8253.counter[1].count(4)}.bind(this)),this.vblank=new j(50),this.VBLK=!1,this.vblank.addEventListener("change",function(){this.VBLK=!this.VBLK}.bind(this)),this.ic556=new k(3),this.ic556_OUT=!1,this.ic556.addEventListener("change",function(){this.ic556_OUT=!this.ic556_OUT}.bind(this)),this.INTMSK=!1,this.MLDST=!1;var c=null;this.dataRecorder=new g(function(a){a?(null!=c&&(clearTimeout(c),c=null),this.opt.onStartDataRecorder()):c=setTimeout(function(){c=null,this.opt.onStopDataRecorder()}.bind(this),100)}.bind(this)),this.opt={onExecutionParameterUpdate:function(a){try{b._transworker.postNotify("onExecutionParameterUpdate",a)}catch(a){console.error(a)}},onBreak:function(){b._transworker.postNotify("onBreak")},onUpdateScreen:function(){b._transworker.postNotify("onUpdateScreen",b._screenUpdateData)},onVramUpdate:function(a,c,d){b._screenUpdateData[a]={dispcode:c,attr:d},null==b._vramTxTid&&(b._vramTxTid=setTimeout(function(){b.opt.onUpdateScreen(),b._screenUpdateData={},b._vramTxTid=null},100))},onMmioRead:function(a,c){b._transworker.postNotify("onMmioRead",{address:a,value:c})},onMmioWrite:function(a,c){b._transworker.postNotify("onMmioWrite",{address:a,value:c})},onPortRead:function(a,c){b._transworker.postNotify("onPortRead",{port:a,value:c})},onPortWrite:function(a,c){b._transworker.postNotify("onPortWrite",{port:a,value:c})},startSound:function(a){b._transworker.postNotify("startSound",[a])},stopSound:function(){b._transworker.postNotify("stopSound")},onStartDataRecorder:function(){b._transworker.postNotify("onStartDataRecorder")},onStopDataRecorder:function(){b._transworker.postNotify("onStopDataRecorder")}},a=a||{},Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this),this.tid=null,this.execParam=new h(1,1e3,7),this.mmioMap=[];for(var d=57344;d<59392;d++)this.mmioMap.push({r:!1,w:!1});this.memory=new m({onVramUpdate:b.opt.onVramUpdate,onMappedIoRead:function(a,c){switch(b.mmioIsMappedToRead(a)&&b.opt.onMmioRead(a,c),a){case 57345:break;case 57346:c&=15,b.dataRecorder.motor()?c|=16:c&=239,b.dataRecorder_readBit()?c|=32:c&=223,b.ic556_OUT?c|=64:c&=191,b.VBLK?c|=128:c&=127;break;case 57348:c=b.intel8253.counter[0].read();break;case 57349:c=b.intel8253.counter[1].read();break;case 57350:c=b.intel8253.counter[2].read();break;case 57351:break;case 57352:c&=254,b.hblank.readOutput()?c|=1:c&=254}return c},onMappedIoUpdate:function(a,c){switch(b.mmioIsMappedToWrite(a)&&b.opt.onMmioWrite(a,c),a){case 57344:this.poke(57345,b.keymatrix.getKeyData(c)),b.ic556.loadReset(128&c);break;case 57346:break;case 57347:if(0==(128&c)){var d=0!=(1&c);switch((14&c)>>1){case 0:break;case 1:b.dataRecorder_writeBit(d);break;case 2:b.INTMSK=d;break;case 3:b.dataRecorder_motorOn(d)}}break;case 57348:b.intel8253.counter[0].load(c)&&b.MLDST&&b.opt.startSound(895e3/b.intel8253.counter[0].value);break;case 57349:b.intel8253.counter[1].load(c);break;case 57350:b.intel8253.counter[2].load(c);break;case 57351:b.intel8253.setCtrlWord(c);break;case 57352:1==(b.MLDST=0!=(1&c))?b.opt.startSound(895e3/b.intel8253.counter[0].value):b.opt.stopSound()}return c}}),this.z80=new n({memory:b.memory,onReadIoPort:function(a,c){b.opt.onPortRead(a,c)},onWriteIoPort:function(a,c){switch(a){case 224:this.memory.changeBlock0_DRAM();break;case 225:this.memory.changeBlock1_DRAM();break;case 226:this.memory.changeBlock0_MONITOR();break;case 227:this.memory.changeBlock1_VRAM();break;case 228:this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();break;case 229:this.memory.disableBlock1();break;case 230:this.memory.enableBlock1()}b.opt.onPortWrite(a,c)}})};p.prototype.mmioMapToRead=function(a){a.forEach(function(a){this.mmioMap[a-57344].r=!0},this)},p.prototype.mmioMapToWrite=function(a){a.forEach(function(a){this.mmioMap[a-57344].w=!0},this)},p.prototype.mmioIsMappedToRead=function(a){return this.mmioMap[a-57344].r},p.prototype.mmioIsMappedToWrite=function(a){return this.mmioMap[a-57344].w},p.prototype.writeAsmCode=function(a){for(var b=0;b<a.buffer.length;b++)this.memory.poke(a.min_addr+b,a.buffer[b]);return a.min_addr},p.prototype.exec=function(a){a=a||1;try{for(var b=0;b<a;b++)this.z80.exec(),this.clock()}catch(a){return-1}return 0},p.prototype.clock=function(){this.hblank.count(),this.vblank.count(),this.ic556.count()},p.prototype.setCassetteTape=function(a){if(a.length>0){if(this.tape_data=a,a.length<=128)return this.dataRecorder_setCmt([]),console.error("error buf.length <= 128"),null;if(this.mzt_array=p.parseMZT(a),null==this.mzt_array||this.mzt_array.length<1)return console.error("setCassetteTape fail to parse"),null}return this.dataRecorder_setCmt(a),this.mzt_array},p.prototype.loadCassetteTape=function(){for(var a=0;a<this.mzt_array.length;a++)for(var b=this.mzt_array[a],c=0;c<b.header.file_size;c++)this.memory.poke(b.header.addr_load+c,b.body.buffer[c])},p.prototype.reset=function(){this.memory.enableBlock1(),this.memory.enableBlock1(),this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();for(var a=0;a<1e3;a++)this.memory.poke(53248+a,0),this.memory.poke(55296+a,113);return this.z80.reset()},p.prototype.getRegister=function(){return this.z80.reg},p.prototype.getRegisterB=function(){return this.z80.regB},p.prototype.setPC=function(a){this.z80.reg.PC=a},p.prototype.getIFF1=function(){return this.z80.IFF1},p.prototype.getIFF2=function(){return this.z80.IFF2},p.prototype.getIM=function(){return this.z80.IM},p.prototype.getHALT=function(){return this.z80.HALT},p.prototype.readMemory=function(a){return this.memory.peek(a)},p.prototype.setKeyState=function(a,b,c){this.keymatrix.setKeyMatrixState(a,b,c)},p.prototype.clearBreakPoints=function(){this.z80.clearBreakPoints()},p.prototype.getBreakPoints=function(){return this.z80.getBreakPoints()},p.prototype.removeBreak=function(a,b){this.z80.removeBreak(a,b)},p.prototype.addBreak=function(a,b){this.z80.setBreak(a,b)},p.parseMZT=function(a){for(var b=[],c=0;c+128<=a.length;){var d=new e(a,c);c+=128;for(var f=[],g=0;g<d.file_size;g++)f.push(a[c+g]);c+=d.file_size,b.push({header:d,body:{buffer:f}})}return b},p.prototype.start=function(){return"tid"in this&&null!=this.tid?(console.warn("[emulator] MZ700.start(): already started, caller is ",p.prototype.start.caller),!1):(this.tid=d.setInterval(function(){this.run()}.bind(this),this.execParam.timerInterval,this.execParam.numOfTimer,this.execParam.numOfExecInst),!0)},p.prototype.stop=function(){null!=this.tid&&(d.clearInterval(this.tid),this.tid=null)},p.prototype.run=function(){try{this.z80.exec(),this.clock()}catch(a){console.log("Error:",a),console.log(a.stack),this.stop(),this.opt.onBreak()}},p.prototype.assemble=function(a){return new o(a)},p.prototype.disassemble=function(a){var b="",c=[];a.forEach(function(a){b+=e.prototype.getHeadline.apply(a.header)+"\n",c=n.dasm(a.body.buffer,0,a.header.file_size,a.header.addr_load)});var d=n.dasmlines(c);return b+=d.join("\n")+"\n",{outbuf:b,dasmlines:d}},p.prototype.dataRecorder_setCmt=function(a){var b=null;return b=0==a.length?[]:f.fromBytes(a),this.dataRecorder.setCmt(b),b},p.prototype.dataRecorder_ejectCmt=function(){if(this.dataRecorder.isCmtSet()){var a=this.dataRecorder.ejectCmt();if(null!=a){var b=f.toBytes(a);return null==b?console.log("MZ700.dataRecorder_ejectCmt returns null."):console.log("MZ700.dataRecorder_ejectCmt returns "+b.length+" bytes data"),b}console.log("MZ700.dataRecorder_ejectCmt returns 0 bytes data, because NO CMT was set")}return[]},p.prototype.dataRecorder_pushPlay=function(){this.dataRecorder.play()},p.prototype.dataRecorder_pushRec=function(){this.dataRecorder.isCmtSet()&&this.dataRecorder.ejectCmt(),this.dataRecorder.setCmt([]),this.dataRecorder.rec()},p.prototype.dataRecorder_pushStop=function(){this.dataRecorder.stop()},p.prototype.dataRecorder_motorOn=function(a){this.dataRecorder.m_on(a)},p.prototype.dataRecorder_readBit=function(){return this.dataRecorder.rdata(this.z80.tick)},p.prototype.dataRecorder_writeBit=function(a){this.dataRecorder.wdata(a,this.z80.tick)},p.prototype.getExecutionParameter=function(){return this.execParam},p.prototype.setExecutionParameter=function(a){var b=null!=this.tid;b&&this.stop(),this.execParam.set(a),this.opt.onExecutionParameterUpdate(a),b&&this.start()},b.exports=p},{"../Z80/assembler.js":9,"../Z80/emulator":11,"../lib/ex_number.js":18,"../lib/flip-flop-counter":19,"../lib/ft-param":20,"../lib/ic556":21,"../lib/intel-8253":22,"./memory.js":2,"./mz-data-recorder":4,"./mz-tape":6,"./mz-tape-header":5,"./mz700-key-matrix":7,"fractional-timer":23}],2:[function(a,b,c){function d(a){this.create(a)}var e=getModule("MZ700_MonitorRom")||a("./monitor-rom.js"),f=getModule("MemoryBlock")||a("../Z80/memory-block.js"),g=getModule("MemoryBank")||a("../Z80/memory-bank.js");d.prototype=new g,d.prototype.create=function(a){g.prototype.create.call(this,a);var b,c=function(){},d=function(){};if(a.onVramUpdate){var h=a.onVramUpdate,i=new Array(65536),j=new Array(65536),k=new Array(65536);for(b=0;b<1e3;b++)i[53248+b]=[b,0,113],i[55296+b]=[b,0,113],j[53248+b]=function(a,b){return function(c){b[1]=c,h(a[0],c,a[2])}}(i[53248+b],i[55296+b]),k[55296+b]=function(a,b){return function(c){a[2]=c,h(b[0],b[1],c)}}(i[53248+b],i[55296+b]);c=function(a,b){53248<=a&&a<54248&&j[a](b)},d=function(a,b){55296<=a&&a<56296&&k[a](b)}}for(this.memblks={IPL_AREA_ROM:new e,IPL_AREA_RAM:new f({startAddr:0,size:4096}),FREE_RAM:new f({startAddr:4096,size:49152}),TEXT_VRAM:new f({startAddr:53248,size:2048,onPoke:c}),ATTR_VRAM:new f({startAddr:55296,size:2048,onPoke:d}),MMAPED_IO:new f({startAddr:57344,size:2048,onPeek:a.onMappedIoRead||function(){},onPoke:a.onMappedIoUpdate||function(){}}),EXTND_ROM:new f({startAddr:59392,size:6144}),DRAM:new f({startAddr:55296,size:12288})},this._block1VRAM=!0,this._disabledBlock1=!1,this.changeBlock0_MONITOR(),this.setMemoryBlock("FREE_RAM",this.memblks.FREE_RAM),this.changeBlock1_VRAM(),b=0;b<2048;b++)this.memblks.ATTR_VRAM.pokeByte(55296+b,113)},d.prototype.clear=function(){g.prototype.clear.call(this);for(var a in this.memblks)this.memblks[a].clear()},d.prototype.getTextVram=function(){return this.memblks.TEXT_VRAM},d.prototype.getAttrVram=function(){return this.memblks.ATTR_VRAM},d.prototype.changeBlock0_MONITOR=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_ROM)},d.prototype.changeBlock0_DRAM=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_RAM)},d.prototype.changeBlock1_DRAM=function(){this._block1VRAM=!1,this._disabledBlock1=!1,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",this.memblks.DRAM)},d.prototype.changeBlock1_VRAM=function(){this._block1VRAM=!0,this._disabledBlock1=!1,this.setMemoryBlock("DRAM",null),this.setMemoryBlock("TEXT_VRAM",this.memblks.TEXT_VRAM),this.setMemoryBlock("ATTR_VRAM",this.memblks.ATTR_VRAM),this.setMemoryBlock("MMAPED_IO",this.memblks.MMAPED_IO),this.setMemoryBlock("EXTND_ROM",this.memblks.EXTND_ROM)},d.prototype.disableBlock1=function(){this._disabledBlock1||(this._disabledBlock1=!0,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",null))},d.prototype.enableBlock1=function(){this._disabledBlock1&&(this._block1VRAM?this.changeBlock1_VRAM():this.changeBlock1_DRAM(),this._disabledBlock1=!1)},b.exports=d},{"../Z80/memory-bank.js":13,"../Z80/memory-block.js":14,"./monitor-rom.js":3}],3:[function(a,b,c){function d(){this.create()}var e=getModule("MemoryBlock")||a("../Z80/memory-block.js");d.prototype=new e,d.prototype.create=function(){e.prototype.create.call(this,{startAddr:0,size:4096});for(var a=0;a<this.size;a++){var b=this.startAddr+a;e.prototype.pokeByte.call(this,b,f[b])}},d.prototype.pokeByte=function(a){e.prototype.pokeByte.call(this,a,f[a])},b.exports=d;var f=[195,74,0,195,230,7,195,14,9,195,24,9,195,32,9,195,127,0,195,53,9,195,129,9,195,153,9,195,189,8,195,50,10,195,54,4,195,117,4,195,216,4,195,248,4,195,136,5,195,199,1,195,8,3,0,0,195,56,16,195,88,3,195,229,2,195,250,2,195,171,2,195,190,2,49,240,16,237,86,205,201,15,62,22,215,6,60,33,112,17,205,216,15,33,146,3,62,195,50,56,16,34,57,16,33,4,5,34,158,17,205,190,2,17,65,1,223,205,192,10,24,8,17,241,16,24,150,195,38,9,49,240,16,17,130,0,213,205,9,0,62,42,215,17,163,17,205,3,0,26,254,42,194,84,12,19,26,254,71,202,89,1,254,35,202,18,2,254,77,202,15,12,254,83,202,130,12,254,38,202,14,14,254,76,40,31,0,0,0,0,254,82,202,170,1,254,80,202,18,2,195,155,10,205,232,0,205,45,0,56,10,17,196,1,207,223,201,205,232,0,239,218,103,1,42,6,17,124,254,18,216,233,205,39,0,56,149,207,17,56,1,223,24,134,17,0,208,14,25,6,40,26,205,206,11,205,15,1,19,16,246,62,13,205,15,1,13,32,236,201,213,245,219,254,230,13,183,40,7,205,30,0,40,119,24,242,241,211,255,62,128,211,254,219,254,230,13,254,1,32,248,175,211,254,201,70,79,85,78,68,32,13,76,79,46,32,13,195,73,1,0,32,77,90,144,55,48,48,13,211,225,17,240,255,213,33,46,7,1,5,0,237,176,201,0,19,26,254,79,32,4,19,19,19,19,205,192,12,233,254,2,200,207,17,181,1,223,201,62,255,50,157,17,201,175,24,249,33,0,240,126,183,192,233,197,213,229,26,190,32,11,5,40,8,254,13,40,4,19,35,24,241,225,209,193,201,245,195,173,13,62,255,211,224,201,17,49,1,223,17,241,16,223,195,227,15,205,232,0,205,227,15,239,195,209,0,0,67,69,13,54,255,58,112,17,183,32,2,54,239,175,201,79,75,13,197,213,229,62,2,50,160,17,6,1,26,254,13,40,2,254,200,40,46,254,207,40,30,254,215,40,34,254,35,33,113,2,32,3,46,137,19,205,28,2,56,224,205,200,2,56,21,205,171,2,65,24,213,62,3,50,160,17,19,24,205,62,1,24,246,205,200,2,245,205,190,2,241,24,128,19,205,31,4,216,205,15,1,24,246,197,6,8,26,190,40,9,35,35,35,16,248,55,19,193,201,35,213,94,35,86,235,124,183,40,9,58,160,17,61,40,3,41,24,250,34,161,17,62,2,50,160,17,209,19,26,71,230,240,254,48,40,5,58,159,17,24,7,19,120,230,15,50,159,17,79,6,0,33,161,2,9,78,58,158,17,71,175,129,16,253,193,79,175,201,67,119,7,68,167,6,69,237,5,70,152,5,71,252,4,65,113,4,66,245,3,82,0,0,67,12,7,68,71,6,69,152,5,70,72,5,71,180,4,65,49,4,66,187,3,82,0,0,1,2,3,4,6,8,12,16,24,32,42,161,17,124,183,40,12,213,235,33,4,224,115,114,62,1,209,24,6,62,54,50,7,224,175,50,8,224,201,33,0,224,54,248,35,126,230,128,32,2,55,201,58,8,224,15,56,250,58,8,224,15,48,250,16,242,175,201,197,229,33,113,4,205,174,2,6,50,175,205,91,7,16,250,225,193,195,190,2,245,197,230,15,71,62,8,144,50,158,17,193,241,201,243,197,213,229,50,155,17,62,240,50,156,17,33,192,168,175,237,82,229,35,235,62,116,50,7,224,62,176,50,7,224,33,6,224,115,114,43,54,10,54,0,62,128,50,7,224,35,78,126,186,32,251,121,187,32,247,43,0,0,0,54,18,54,122,35,209,78,126,186,32,251,121,187,32,247,225,209,193,251,201,229,62,128,50,7,224,33,6,224,243,94,86,251,123,178,202,121,3,175,33,192,168,237,82,218,131,3,235,58,155,17,225,201,17,192,168,58,155,17,238,1,225,201,243,33,6,224,126,47,95,126,47,87,251,19,195,124,3,245,197,213,229,58,155,17,238,1,50,155,17,62,128,50,7,224,33,6,224,94,86,33,192,168,25,43,43,235,33,6,224,115,114,225,209,193,241,251,201,124,205,195,3,125,205,195,3,201,245,230,240,15,15,15,15,205,218,3,205,18,0,241,230,15,205,218,3,215,62,32,201,213,229,33,233,3,230,15,95,22,0,25,126,225,209,201,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,197,229,1,0,16,33,233,3,190,32,3,121,24,6,35,12,5,32,245,55,225,193,201,213,205,31,4,56,7,103,205,31,4,56,1,111,209,201,197,26,19,195,241,6,56,13,7,7,7,7,79,26,19,205,249,3,56,1,177,193,201,243,213,197,229,22,215,30,204,33,240,16,1,128,0,205,51,7,205,178,6,218,99,5,123,254,204,32,17,205,9,0,213,17,108,4,205,21,0,17,241,16,205,21,0,209,205,184,7,205,141,4,195,99,5,87,82,73,84,73,78,71,32,13,243,213,197,229,22,215,30,83,42,2,17,229,193,42,4,17,120,177,202,212,4,195,68,4,213,197,229,58,55,16,87,62,248,50,0,224,126,205,165,7,58,1,224,230,8,32,3,55,24,45,35,11,120,177,194,153,4,42,151,17,124,205,165,7,125,205,165,7,205,128,7,21,194,196,4,183,195,212,4,6,0,205,103,7,5,194,198,4,225,193,197,229,195,153,4,225,193,209,201,243,213,197,229,22,210,30,204,1,128,0,33,240,16,205,178,6,218,130,5,205,94,6,218,130,5,205,16,5,195,99,5,243,213,197,229,22,210,30,83,42,2,17,229,193,42,4,17,120,177,202,99,5,195,230,4,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,97,205,85,6,26,230,32,40,243,84,33,0,0,34,151,17,225,193,197,229,205,36,6,56,73,119,35,11,120,177,32,244,42,151,17,205,36,6,56,58,95,205,36,6,56,52,189,32,35,123,188,32,31,24,11,62,1,50,55,16,201,62,2,24,248,0,175,225,193,209,205,0,7,245,58,156,17,254,240,32,1,251,241,201,21,202,124,5,98,195,22,5,62,1,55,195,99,5,62,2,55,195,99,5,243,213,197,229,42,2,17,229,193,42,4,17,22,210,30,83,120,177,202,99,5,205,51,7,205,178,6,218,130,5,205,94,6,218,130,5,205,178,5,195,99,5,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,191,205,85,6,26,230,32,40,243,84,225,193,197,229,205,36,6,56,173,190,32,164,35,11,120,177,32,242,42,153,17,205,36,6,188,32,149,205,36,6,189,32,143,21,202,98,5,98,195,184,5,120,6,192,128,48,2,214,64,71,195,58,8,62,249,50,0,224,0,10,230,4,194,15,6,55,201,26,230,32,194,7,6,10,230,8,194,29,6,55,201,26,230,32,202,21,6,201,197,213,229,33,0,8,1,1,224,17,2,224,205,1,6,56,28,205,85,6,26,230,32,40,10,229,42,151,17,35,34,151,17,225,55,125,23,111,37,32,227,205,1,6,125,225,209,193,201,58,53,16,61,32,253,32,0,201,197,213,229,33,40,40,123,254,204,40,3,33,20,20,34,149,17,1,1,224,17,2,224,42,149,17,205,1,6,56,30,205,85,6,26,230,32,40,240,37,32,240,205,1,6,56,14,205,85,6,26,230,32,32,224,45,32,240,205,1,6,225,209,193,201,194,245,5,62,40,42,113,17,149,71,205,177,15,205,216,15,195,238,7,197,213,229,14,10,58,2,224,230,16,40,5,175,225,209,193,201,62,6,33,3,224,119,60,119,13,32,233,207,122,254,215,40,6,17,34,7,223,24,8,17,41,7,223,17,36,7,223,58,2,224,230,16,32,213,205,68,10,32,244,55,24,206,254,47,40,6,205,249,3,195,37,4,26,19,195,52,4,245,197,213,6,10,58,2,224,230,16,32,4,209,193,241,201,62,6,50,3,224,62,7,50,3,224,5,194,5,7,209,193,241,201,127,32,80,76,65,89,13,127,82,69,67,13,211,224,195,0,0,197,213,229,17,0,0,120,177,32,11,235,34,151,17,34,153,17,225,209,193,201,126,229,38,8,7,48,1,19,37,32,249,225,35,11,24,225,58,54,16,61,32,253,201,58,55,0,24,244,0,0,0,245,62,3,50,3,224,205,95,7,62,2,50,3,224,205,95,7,241,201,8,195,228,9,0,0,245,62,3,50,3,224,205,95,7,205,95,7,62,2,50,3,224,205,95,7,205,98,7,241,201,62,0,50,52,16,33,68,46,34,53,16,201,197,6,8,205,128,7,7,220,128,7,212,103,7,5,194,171,7,193,201,197,213,123,1,248,42,17,40,40,254,204,202,204,7,1,190,10,17,20,20,205,103,7,11,120,177,32,248,205,128,7,21,32,250,205,103,7,29,32,250,205,128,7,209,193,201,245,197,229,213,175,50,147,17,205,179,9,71,58,157,17,183,204,109,12,120,230,240,254,192,32,55,120,254,205,40,86,254,201,40,29,254,202,40,20,254,203,202,179,8,254,200,40,11,254,199,40,7,58,147,17,183,32,28,120,205,220,13,24,200,33,112,17,175,190,32,1,60,119,214,6,47,50,3,224,24,183,205,68,10,40,106,120,205,166,13,205,181,13,254,98,32,167,33,147,17,126,47,119,24,159,254,16,202,66,15,254,213,254,5,195,159,6,42,113,17,92,22,0,33,115,17,25,235,26,183,1,40,0,42,113,17,194,122,8,19,26,183,202,125,8,195,123,8,37,14,80,46,0,205,180,15,209,213,197,205,166,13,237,176,193,225,229,65,126,205,206,11,119,35,16,248,54,13,43,126,254,32,40,248,205,6,0,209,225,193,241,201,120,254,18,202,246,13,254,73,202,41,14,24,156,225,229,54,27,35,54,13,24,226,0,205,202,8,254,240,32,2,175,201,205,206,11,201,197,213,229,205,80,10,120,7,56,6,62,240,225,209,193,201,7,210,236,8,6,0,33,8,0,9,17,201,10,25,126,195,214,8,58,112,17,183,194,253,8,6,0,33,201,10,9,126,195,214,8,121,230,240,15,71,121,230,15,128,198,160,111,38,0,195,228,8,175,50,148,17,62,205,205,220,13,201,58,148,17,183,200,195,6,0,62,32,205,53,9,201,205,12,0,58,148,17,183,200,214,10,56,244,32,250,201,254,13,202,14,9,197,79,71,205,150,1,205,70,9,121,193,201,121,205,185,11,79,230,240,254,240,200,254,192,121,194,112,9,254,199,210,112,9,205,220,13,254,195,202,115,9,254,197,202,107,9,254,198,192,175,50,148,17,201,205,181,13,58,148,17,60,254,80,56,2,214,80,50,148,17,201,245,197,213,6,5,205,150,1,26,254,13,202,223,15,79,205,70,9,19,16,243,195,132,9,245,197,213,6,5,205,150,1,26,254,13,202,223,15,205,185,11,205,112,9,19,16,241,195,156,9,197,213,229,205,177,15,205,166,13,126,50,142,17,34,143,17,33,146,17,205,184,1,50,0,224,50,145,17,47,50,0,224,22,20,205,255,9,205,80,10,120,7,218,230,11,21,194,213,9,205,255,9,205,202,8,254,240,202,122,7,245,205,166,13,58,142,17,42,143,17,119,241,225,209,193,201,245,229,58,2,224,7,7,218,37,10,58,145,17,15,218,34,10,58,146,17,42,143,17,205,166,13,119,58,145,17,238,1,50,145,17,225,241,201,58,145,17,15,210,34,10,58,142,17,195,19,10,62,248,50,0,224,0,58,1,224,47,230,33,194,68,10,198,1,201,62,248,50,0,224,0,58,1,224,230,128,201,213,229,6,250,22,0,5,120,50,0,224,254,239,32,4,66,225,209,201,254,248,40,31,58,1,224,47,183,40,232,95,203,250,120,230,15,7,7,7,7,79,62,8,61,40,4,203,3,48,249,129,79,24,208,58,1,224,47,95,230,33,40,2,203,242,123,230,222,40,192,24,214,205,62,0,254,86,202,203,0,254,67,192,19,26,254,65,202,158,7,254,49,202,87,5,254,50,202,93,5,254,66,194,184,12,33,34,21,34,53,16,201,205,153,7,205,93,5,195,118,1,205,79,44,240,201,43,240,202,205,27,57,240,201,62,240,202,240,240,240,105,104,85,26,25,240,240,240,74,54,109,90,61,24,23,22,21,20,19,18,17,83,115,70,112,113,93,51,114,16,15,14,13,12,11,10,9,118,119,67,86,120,94,30,60,8,7,6,5,4,3,2,1,95,31,29,50,28,68,65,92,40,39,38,37,36,35,34,33,82,103,102,101,100,99,98,97,46,47,41,32,0,42,106,107,87,81,84,96,0,221,222,89,45,73,196,195,193,194,199,200,69,64,196,195,193,194,197,198,240,199,240,195,205,240,240,240,240,200,240,196,205,240,240,203,197,0,193,203,240,60,62,220,198,0,194,240,240,124,126,216,205,188,141,240,201,153,240,202,240,240,240,184,180,160,145,134,129,135,151,150,130,132,156,148,170,171,143,140,173,176,142,162,138,131,144,136,146,154,147,152,161,137,149,166,165,164,133,163,172,174,175,139,0,167,168,169,155,191,196,195,193,194,199,200,240,199,240,195,205,240,189,191,197,0,193,240,240,188,190,219,197,229,254,23,56,28,33,198,12,1,224,0,237,177,32,26,62,223,145,24,10,197,229,33,198,12,79,6,0,9,126,225,193,201,254,17,56,4,198,176,24,245,175,24,242,58,52,16,183,194,211,9,121,8,185,202,224,9,6,4,205,202,8,230,63,87,205,255,9,205,202,8,230,63,186,194,231,9,11,120,177,202,228,9,24,236,19,205,16,4,6,16,205,48,12,205,202,8,183,40,5,254,203,200,16,242,205,179,9,254,205,40,233,183,192,6,1,24,229,197,205,186,3,6,8,197,229,175,215,126,205,195,3,35,175,215,16,247,215,225,193,126,205,185,11,205,181,13,35,16,246,193,195,6,0,205,192,12,30,168,205,31,4,56,5,119,19,35,24,246,62,169,187,208,205,186,3,195,142,0,197,229,42,54,16,125,254,16,56,3,46,80,36,205,174,2,6,7,195,239,2,19,26,254,83,202,112,1,254,71,202,118,1,205,192,12,34,4,17,229,30,170,205,16,4,209,237,82,35,34,2,17,17,175,17,205,192,12,34,6,17,17,241,16,33,180,17,1,16,0,237,176,62,13,18,205,159,1,231,210,36,0,201,205,16,4,208,209,201,32,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,251,205,221,203,209,48,49,50,51,52,53,54,55,56,57,45,61,59,47,46,44,229,244,236,218,227,226,215,212,230,232,194,193,196,199,207,202,32,225,254,200,250,95,248,241,247,63,204,219,220,233,245,58,94,60,91,243,93,64,201,62,252,92,198,223,208,206,211,210,255,33,34,35,36,37,38,39,40,41,43,42,222,246,235,234,195,197,239,240,228,231,238,237,224,253,216,213,242,249,217,214,32,161,154,159,156,146,170,151,152,166,175,169,184,179,176,183,158,160,157,164,150,165,171,163,155,189,162,187,153,130,135,140,188,167,172,145,147,148,149,180,181,182,174,173,186,178,185,168,177,131,136,141,134,132,137,142,191,133,138,143,190,129,139,144,127,17,18,19,20,21,22,96,97,98,99,100,101,102,103,104,112,113,17,115,116,117,118,119,120,121,122,123,124,125,126,105,245,58,2,224,7,48,250,58,2,224,7,56,250,241,201,245,197,213,229,71,205,177,15,112,42,113,17,125,254,39,194,144,14,92,22,0,33,115,17,25,126,183,194,144,14,35,54,1,35,54,0,195,144,14,245,197,213,229,71,230,240,254,192,32,127,168,254,13,202,139,15,254,11,48,117,38,14,111,110,233,33,52,16,126,47,119,195,238,7,0,50,116,132,144,174,191,197,248,11,225,242,195,73,15,17,163,17,213,33,27,14,1,12,0,237,176,201,33,2,224,203,158,203,198,203,134,195,128,9,223,0,33,157,17,24,203,0,195,125,8,205,150,1,175,50,3,224,1,192,3,17,0,208,33,40,208,237,176,235,6,40,205,216,15,1,26,0,17,115,17,33,116,17,237,176,54,0,58,115,17,183,194,106,14,205,150,1,62,1,50,3,224,195,222,15,0,42,113,17,37,34,113,17,195,57,14,42,113,17,124,254,24,202,50,14,36,34,113,17,195,222,15,42,113,17,124,183,202,222,15,37,195,126,14,42,113,17,125,254,39,210,157,14,44,195,126,14,46,0,36,124,254,25,218,126,14,38,24,34,113,17,195,50,14,42,113,17,125,183,40,4,45,195,126,14,46,39,37,242,126,14,33,0,0,195,126,14,205,166,13,14,25,33,0,208,6,40,205,216,15,13,194,205,14,33,115,17,6,27,205,216,15,195,191,14,33,112,17,175,190,24,1,60,119,214,6,47,50,3,224,24,143,33,112,17,175,24,240,42,113,17,124,181,202,222,15,125,183,32,22,92,22,0,33,115,17,25,126,183,32,11,205,177,15,205,166,13,43,54,0,24,148,42,113,17,92,28,22,0,33,115,17,25,126,71,183,62,40,40,2,62,80,42,113,17,149,79,6,0,205,177,15,229,209,27,205,166,13,237,176,24,211,205,244,0,195,238,7,0,42,113,17,92,28,22,0,33,115,17,25,126,183,14,0,42,113,17,46,39,40,2,36,12,205,180,15,126,183,194,222,15,229,42,113,17,62,39,149,71,121,183,40,4,62,40,128,71,209,213,225,43,205,166,13,126,18,54,0,43,27,16,248,195,222,15,42,113,17,92,28,22,0,33,115,17,25,126,183,42,113,17,202,157,14,46,0,124,254,23,40,5,36,36,195,126,14,36,34,113,17,195,50,14,42,113,17,197,213,229,193,17,40,0,33,216,207,25,5,242,190,15,6,0,9,209,193,201,33,3,224,54,138,54,7,54,5,62,1,50,3,224,201,175,119,35,16,252,201,225,209,193,241,201,62,58,215,42,4,17,205,186,3,235,42,2,17,25,43,205,248,15,42,6,17,62,45,215,205,186,3,175,201]},{"../Z80/memory-block.js":14}],4:[function(a,b,c){var d=function(a){this._m_on=!1,this._play=!1,this._rec=!1,this._motor=!1,this._wdata=null,this._twdata=null,this._rbit=null,this._trdata=null,this._cmt=null,this._pos=0,this._motorCallback=a,this._readTopBlank=0};d.RDATA_TOP_BLANK_LEN=1,d.RDATA_CYCLE_HI_LONG=1500,d.RDATA_CYCLE_HI_SHORT=700,d.RDATA_CYCLE_LO=700,d.prototype.isCmtSet=function(){return null!=this._cmt},d.prototype.setCmt=function(a){this.motor()&&this.stop(),this._cmt=a,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0},d.prototype.play=function(){var a=this.motor();null!=this._cmt&&(this._play=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.rec=function(){var a=this.motor();null!=this._cmt&&(this._play=!0,this._rec=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.stop=function(){var a=this.motor();this._play=!1,this._rec=!1,a&&!this.motor()&&this._motorCallback(!1)},d.prototype.ejectCmt=function(){this.stop();var a=this._cmt;return this._cmt=null,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0,a},d.prototype.m_on=function(a){var b=this.motor();!this._m_on&&a&&(this._motor=!this._motor),this._m_on=a,!b&&this.motor()&&this._motorCallback(!0),b&&!this.motor()&&this._motorCallback(!1)},d.prototype.motor=function(){return null!=this._cmt&&this._play&&this._motor},d.prototype.wdata=function(a,b){if(this.motor()&&this._rec&&this._wdata!=a)if(this._wdata=a,a)this._twdata=b;else{null==this._twdata&&(this._twdata=b);var c=b-this._twdata>1400;this._pos<this._cmt.length?(this._cmt[this._pos]=c,this._pos++):(this._cmt.push(c),this._pos=this._cmt.length)}},d.prototype.rdata=function(a){if(this.motor()&&this._pos<this._cmt.length){if(0==this._pos&&this._readTopBlank<d.RDATA_TOP_BLANK_LEN)return++this._readTopBlank,!1;if(this._pos>=this._cmt.length)return console.log("MZ_DataRecorder stopped at the end of CMT."),this.stop(),!1;null==this._rbit&&(this._rbit=this._cmt[this._pos],this._pos++,this._trdata=a);var b=this._rbit?d.RDATA_CYCLE_HI_LONG:d.RDATA_CYCLE_HI_SHORT,c=a-this._trdata;c>=b+d.RDATA_CYCLE_LO&&(this._rbit=null);return c<b}return null},b.exports=d},{}],5:[function(a,b,c){var d=function(a,b){var c=function(a,b){return(255&a[b])+256*(255&a[b+1])};this.attr=function(a,b){return 255&a[b]}(a,b+0);var d=function(a,b,c){for(var d="",e=b;e<c&&13!=a[e];e++)0!=a[e]&&(d+=String.fromCharCode(a[e]));return d}(a,b+1,b+18);this.filename=d,this.file_size=c(a,b+18),this.addr_load=c(a,b+20),this.addr_exec=c(a,b+22);for(var e=[],f=0;f<128;f++)e.push(a[b+f]);this.buffer=e};d.createNew=function(){for(var a=new Array(128),b=0;b<128;b++)a[b]=0;return a[0]=1,new d(a,0)},d.prototype.setFilename=function(a){a.length>16&&(a=a.substr(0,16)),this.filename=a;var b;for(b=0;b<=16;b++)this.buffer[1+b]=0;for(a+="\r",b=0;b<a.length;b++)this.buffer[1+b]=255&a.charCodeAt(b)},d.prototype.setFilesize=function(a){this.file_size=a,this.buffer[18]=a>>0&255,this.buffer[19]=a>>8&255},d.prototype.setAddrLoad=function(a){this.addr_load=a,this.buffer[20]=a>>0&255,this.buffer[21]=a>>8&255},d.prototype.setAddrExec=function(a){this.addr_exec=a,this.buffer[22]=a>>0&255,this.buffer[23]=a>>8&255},d.prototype.getHeadline=function(){return[";======================================================","; attribute :   "+this.attr.HEX(2)+"H","; filename  :   '"+this.filename+"'","; filesize  :   "+this.file_size+" bytes","; load addr :   "+this.addr_load.HEX(4)+"H","; start addr:   "+this.addr_exec.HEX(4)+"H",";======================================================"].join("\n")},b.exports=d},{}],6:[function(a,b,c){var d=getModule("MZ_TapeHeader")||a("./mz-tape-header"),e=function(a){this._index=0,this._tapeData=a};e.prototype.isThereSignal=function(a,b){for(var c=0;c<b;c++)if(this._tapeData[this._index+c]!=a)return!1;return this._index+=b,!0},e.prototype.recognizeStartingMark=function(){return!!this.isThereSignal(!1,11e3)&&(!!this.isThereSignal(!0,40)&&(!!this.isThereSignal(!1,40)&&!!this.isThereSignal(!0,1)))},e.prototype.recognizeStarting2Mark=function(){return!!this.isThereSignal(!1,2750)&&(!!this.isThereSignal(!0,20)&&(!!this.isThereSignal(!1,20)&&!!this.isThereSignal(!0,1)))},e.prototype.readSignal=function(){return this._index<this._tapeData.length?this._tapeData[this._index++]:null},e.prototype.writeSignal=function(a){this._tapeData.push(a)},e.prototype.writeByte=function(a){this.writeSignal(!0);for(var b=0;b<8;b++)0!=(a&1<<7-b)?this.writeSignal(!0):this.writeSignal(!1)},e.prototype.writeBlock=function(a){a.forEach(function(a){this.writeByte(a)},this);var b=this.countOnBit(a);this.writeByte(b>>8&255),this.writeByte(b>>0&255),this.writeSignal(!0)},
e.prototype.writeDuplexBlock=function(a){this.writeBlock(a);for(var b=0;b<256;b++)this.writeSignal(!1);this.writeBlock(a)},e.prototype.readByte=function(){var a=null;do{if(null==(a=this.readSignal()))return null;if(!a)throw"NO START BIT"}while(!a);for(var b=0,c=0;c<8;c++){var d=this.readSignal();if(null==d)return null;d&&(b|=1<<7-c)}return b},e.prototype.readBytes=function(a){for(var b=[],c=0;c<a;c++){var d=this.readByte();if(null==d)break;b.push(d)}return b},e.prototype.countOnBit=function(a){var b=0,c=[0,1,2,3,4,5,6,7];return a.forEach(function(a){c.forEach(function(c){0!=(a&1<<c)&&b++})}),b&=65535},e.prototype.readBlock=function(a){var b=this.readBytes(a),c=this.readBytes(2);if(2!=c.length)throw"NO BLOCK CHECKSUM";var d=256*c[0]+c[1];if(!this.isThereSignal(!0,1))throw"NO BLOCK END BIT";if(this.countOnBit(b)!=d)throw"CHECKSUM ERROR";return b},e.prototype.readDuplexBlocks=function(a){var b=this.readBlock(a);if(null==b)throw"FAIL TO READ BLOCK[1]";if(!this.isThereSignal(!1,256))throw"NO DELIMITOR: Short x 256.";var c=this.readBlock(a);if(null==c)throw"FAIL TO READ BLOCK[2]";for(var d=0;d<b.length;d++)if(b[d]!=c[d])throw"FAIL TO VERIFY BLOCK 1 and 2";return b},e.prototype.readHeader=function(){if(!this.recognizeStartingMark())throw"NO STARTING MARK recognized";var a=this.readDuplexBlocks(128);if(null==a)throw"CANNOT READ MZT HEADER";return new d(a,0)},e.prototype.readDataBlock=function(a){if(!this.recognizeStarting2Mark())throw"NO STARTING MARK 2 recognized";return this.readDuplexBlocks(a)},e.toBytes=function(a){try{var b=new e(a),c=b.readHeader();if(null==c)throw"FAIL TO READ HEADER";var d=b.readDataBlock(c.file_size);if(null==d)throw"FAIL TO READ DATA";for(var f,g=[],h=!0;h;)f=b.readByte(),(h=!!f)&&(console.warn("MZ_Tape.toBytes rest bytes["+f.length+"] =",f.HEX(2)),g.push(f));return c.buffer.concat(d)}catch(a){console.log("MZ_Tape.toBytes:Error "+a)}return[]},e.fromBytes=function(a){if(a.length<128)throw"FAIL TO WRITE HEADER";var b=new d(a.slice(0,128),0),c=new e([]);return c.writeHeader(b.buffer),c.writeDataBlock(a.slice(128)),c._tapeData},e.prototype.outputStartingMark=function(){var a;for(a=0;a<11e3;a++)this.writeSignal(!1);for(a=0;a<40;a++)this.writeSignal(!0);for(a=0;a<40;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeHeader=function(a){this.outputStartingMark(),this.writeDuplexBlock(a)},e.prototype.writeStarting2Mark=function(){var a;for(a=0;a<2750;a++)this.writeSignal(!1);for(a=0;a<20;a++)this.writeSignal(!0);for(a=0;a<20;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeDataBlock=function(a){this.writeStarting2Mark(),this.writeDuplexBlock(a)},b.exports=e},{"./mz-tape-header":5}],7:[function(a,b,c){!function(){function a(){this.keymap=new Array(10);for(var a=0;a<this.keymap.length;a++)this.keymap[a]=255}a.prototype.getKeyData=function(a){var b=255;return a&=15,a<this.keymap.length&&(b=this.keymap[a]),b},a.prototype.setKeyMatrixState=function(a,b,c){c?this.keymap[a]&=255&~(1<<b):this.keymap[a]|=1<<b&255},a.KeyCodes={Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Numlock:44,ScrollLock:145,Pause:19,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Subtract:109,Caret:107,Atmark:192,Yen:106,Colon:186,SemiColon:187,Comma:188,Decimal:190,Divide:111,Backslash:226,OpenBrackets:219,CloseBrackets:221,Shift:16,Control:17,Alternate:18,Enter:13,Tab:9,Space:32,Backspace:8,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Left:37,Up:38,Right:39,Down:40,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadDivide:191,NumPadMultiply:220,NumPadSubtract:189,NumPadPlus:222,NumPadDecimal:110,Hankaku:243,Zenkaku:244};var c=function(a,b,c,d,e){this.strobe=a,this.bit=b,this.face=c||"&nbsp;",this.code=d||[],this.strcode=e||c};a.Keys=[new c(0,0,"CR",[a.KeyCodes.Enter]),new c(0,1,":",[a.KeyCodes.Colon]),new c(0,2,";",[a.KeyCodes.SemiColon]),new c(0,3),new c(0,4,"英数",[a.KeyCodes.F10,a.KeyCodes.End],"ALNUM"),new c(0,5,"=",[a.KeyCodes.Backspace]),new c(0,6,"GRAPH",[a.KeyCodes.F12,a.KeyCodes.PageDown,a.KeyCodes.Altername],"GRAPH"),new c(0,7,"カナ",[a.KeyCodes.F11,a.KeyCodes.PageUp],"KANA"),new c(1,0),new c(1,1),new c(1,2),new c(1,3,")",[a.KeyCodes.CloseBrackets]),new c(1,4,"(",[a.KeyCodes.OpenBrackets]),new c(1,5,"@",[a.KeyCodes.Atmark]),new c(1,6,"Z",[a.KeyCodes.Z]),new c(1,7,"Y",[a.KeyCodes.Y]),new c(2,0,"X",[a.KeyCodes.X]),new c(2,1,"W",[a.KeyCodes.W]),new c(2,2,"V",[a.KeyCodes.V]),new c(2,3,"U",[a.KeyCodes.U]),new c(2,4,"T",[a.KeyCodes.T]),new c(2,5,"S",[a.KeyCodes.S]),new c(2,6,"R",[a.KeyCodes.R]),new c(2,7,"Q",[a.KeyCodes.Q]),new c(3,0,"P",[a.KeyCodes.P]),new c(3,1,"O",[a.KeyCodes.O]),new c(3,2,"N",[a.KeyCodes.N]),new c(3,3,"M",[a.KeyCodes.M]),new c(3,4,"L",[a.KeyCodes.L]),new c(3,5,"K",[a.KeyCodes.K]),new c(3,6,"J",[a.KeyCodes.J]),new c(3,7,"I",[a.KeyCodes.I]),new c(4,0,"H",[a.KeyCodes.H]),new c(4,1,"G",[a.KeyCodes.G]),new c(4,2,"F",[a.KeyCodes.F]),new c(4,3,"E",[a.KeyCodes.E]),new c(4,4,"D",[a.KeyCodes.D]),new c(4,5,"C",[a.KeyCodes.C]),new c(4,6,"B",[a.KeyCodes.B]),new c(4,7,"A",[a.KeyCodes.A]),new c(5,0,"8",[a.KeyCodes.D8,a.KeyCodes.NumPad8]),new c(5,1,"7",[a.KeyCodes.D7,a.KeyCodes.NumPad7]),new c(5,2,"6",[a.KeyCodes.D6,a.KeyCodes.NumPad6]),new c(5,3,"5",[a.KeyCodes.D5,a.KeyCodes.NumPad5]),new c(5,4,"4",[a.KeyCodes.D4,a.KeyCodes.NumPad4]),new c(5,5,"3",[a.KeyCodes.D3,a.KeyCodes.NumPad3]),new c(5,6,"2",[a.KeyCodes.D2,a.KeyCodes.NumPad2]),new c(5,7,"1",[a.KeyCodes.D1,a.KeyCodes.NumPad1]),new c(6,0,".",[a.KeyCodes.Decimal,110]),new c(6,1,",",[a.KeyCodes.Comma]),new c(6,2,"9",[a.KeyCodes.D9,a.KeyCodes.NumPad9]),new c(6,3,"0",[a.KeyCodes.D0,a.KeyCodes.NumPad0]),new c(6,4,"SPC",[a.KeyCodes.Space]," "),new c(6,5,"-",[a.KeyCodes.Subtract,a.KeyCodes.NumPadSubtract]),new c(6,6,"+",[a.KeyCodes.Caret,a.KeyCodes.NumPadPlus]),new c(6,7,"*",[a.KeyCodes.Yen,a.KeyCodes.NumPadMultiply]),new c(7,0,"/",[a.KeyCodes.Divide,a.KeyCodes.NumPadDivide]),new c(7,1,"?",[a.KeyCodes.Backslash]),new c(7,2,"←",[a.KeyCodes.Left],"LEFT"),new c(7,3,"→",[a.KeyCodes.Right],"RIGHT"),new c(7,4,"↓",[a.KeyCodes.Down],"DOWN"),new c(7,5,"↑",[a.KeyCodes.Up],"UP"),new c(7,6,"DEL",[a.KeyCodes.Delete]),new c(7,7,"INS",[a.KeyCodes.Insert]),new c(8,0,"SHIFT",[a.KeyCodes.Shift]),new c(8,1,"(BS)"),new c(8,2),new c(8,3,"(→)",[a.KeyCodes.Tab]),new c(8,4,"(CR)"),new c(8,5,"(SHIFT)"),new c(8,6,"CTRL",[a.KeyCodes.Control]),new c(8,7,"BREAK",[a.KeyCodes.Escape,a.KeyCodes.Pause]),new c(9,0,"HOME",[a.KeyCodes.Home]),new c(9,1,"(SPC)"),new c(9,2,"(↓)"),new c(9,3,"F5",[a.KeyCodes.F5]),new c(9,4,"F4",[a.KeyCodes.F4]),new c(9,5,"F3",[a.KeyCodes.F3]),new c(9,6,"F2",[a.KeyCodes.F2]),new c(9,7,"F1",[a.KeyCodes.F1])],a.KeyNames=function(b){return Object.keys(a.KeyCodes).forEach(function(c){var d=a.KeyCodes[c];b[d]=c}),b}({}),a.Code2Key=function(){var b=new Array(256);return a.Keys.forEach(function(a){a.code.forEach(function(c){b[c]=a})}),b}(),a.Str2Key=function(){var b={};return a.Keys.forEach(function(a){b[a.strcode]=a}),b}(),b.exports=context.exportModule("MZ700KeyMatrix",a)}()},{}],8:[function(a,b,c){!function(b){"use strict";if(a("../lib/context.js"),!b.context.webWorker)throw new Error("This script must run on WebWorker context.");var c=a("transworker"),d=a("./emulator");c.create(d)}(Function("return this;")())},{"../lib/context.js":17,"./emulator":1,transworker:24}],9:[function(a,b,c){var d=getModule("Z80BinUtil")||a("./bin-util.js"),e=getModule("Z80LineAssembler")||a("./z80-line-assembler"),f=function(a){var b;if(void 0!=a){this.list=[],this.label2value={},this.address=0;var c=a.split(/\r{0,1}\n/);for(b=0;b<c.length;b++){var d=new e(c[b],this.address,this.label2value);this.address=d.getNextAddress(),this.list.push(d)}for(b=0;b<this.list.length;b++)this.list[b].resolveAddress(this.label2value);var f=null,g=null;this.list.forEach(function(a){"address"in a&&"bytecode"in a&&a.bytecode.length>0&&((null==f||a.address<f)&&(f=a.address),(null==g||a.address+a.bytecode.length-1>g)&&(g=a.address+a.bytecode.length-1))}),this.min_addr=f,this.buffer=new Array(g-f+1),this.list.forEach(function(a){"address"in a&&"bytecode"in a&&a.bytecode.length>0&&Array.prototype.splice.apply(this.buffer,[a.address-f,a.bytecode.length].concat(a.bytecode))},this)}};f.prototype.parseAddress=function(a){var b=e.parseNumLiteralPair(a);if(null==b)return null;var c=b[1];"function"==typeof c&&(c=c(this.label2value));var f=b[0];return"function"==typeof f&&(f=f(this.label2value)),d.pair(c,f)},b.exports=f},{"./bin-util.js":10,"./z80-line-assembler":16}],10:[function(a,b,c){!function(){"use strict";b.exports=context.exportModule("Z80BinUtil",{pair:function(a,b){return 256*(255&a)+(255&b)},hibyte:function(a){return 255&Math.floor(a/256)},lobyte:function(a){return a%256},getSignedByte:function(a){return a&=255,128&a?-(a=1+(255&~a)):a}})}()},{}],11:[function(a,b,c){!function(){var c=getModule("MemoryBlock")||a("./memory-block.js"),d=getModule("Z80_Register")||a("./register.js"),e=getModule("Z80BinUtil")||a("./bin-util.js"),f=function(a){a=a||{memory:null},this.memory=a.memory,this.createOpecodeTable(),null==a.memory&&(this.memory=new c,this.memory.create()),this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.ioPort=new Array(256);for(var b=0;b<256;b++)this.ioPort[b]=0;this.reg=new d,this.regB=new d,this.onReadIoPort=function(){},this.onReadIoPort=a.onReadIoPort||function(){},this.onWriteIoPort=a.onWriteIoPort||function(){},this.bpmap=new Array(65536),this.tick=0};f.prototype.readIoPort=function(a){var b=this.ioPort[a];return this.reg.onReadIoPort(b),this.onReadIoPort(a,b),b},f.prototype.writeIoPort=function(a,b){this.ioPort[a]=b,this.onWriteIoPort(a,b)},f.prototype.reset=function(){this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.reg.clear(),this.regB.clear(),this.exec=f.prototype.exec,this.tick=0},f.prototype.interrupt=function(){this.IFF1&&(this.pushPair(this.reg.PC),this.reg.PC=56)},f.prototype.exec=function(){this.reg.R=this.reg.R+1&255;var a=this.opecodeTable[this.fetch()],b=a.proc()||a.cycle||4;if(this.tick+=b,null!=this.bpmap[this.reg.PC])throw console.log("*** BREAK AT $"+this.reg.PC.HEX(4)),"break"},f.prototype.clearBreakPoints=function(){this.bpmap=new Array(65536);for(var a=0;a<65536;a++)this.bpmap[a]=null},f.prototype.getBreakPoints=function(){return this.bpmap},f.prototype.removeBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=null},f.prototype.setBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=!0},f.prototype.fetch=function(){var a=this.memory.peek(this.reg.PC);return this.reg.PC++,this.reg.PC>65535&&(this.reg.PC=0),a},f.prototype.fetchPair=function(){var a=this.memory.peekPair(this.reg.PC);return this.reg.PC+=2,this.reg.PC>65535&&(this.reg.PC-=65535),a},f.prototype.pushPair=function(a){this.memory.poke(--this.reg.SP,e.hibyte(a)),this.memory.poke(--this.reg.SP,e.lobyte(a))},f.prototype.popPair=function(){var a=this.memory.peek(this.reg.SP++),b=this.memory.peek(this.reg.SP++);return e.pair(b,a)},f.prototype.incrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getINCValue(b);this.memory.poke(a,c)},f.prototype.decrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getDECValue(b);this.memory.poke(a,c)},f.dasm=function(a,b,d,e){if(b=b||0,d=d||a.length-b,(e=e||0)-b<0)return void console.error("Z80.dasm: parameter error : (addr - offset) - out of range");if(d<0||b+d>a.length)return void console.error("Z80.dasm: parameter error : size - out of range");var g=[],h=new c;h.create({startAddr:e-b,size:d}),h.mem=a;var i=new f({memory:h});for(i.reg.PC=h.startAddr,g.push({code:[],mnemonic:["ORG",h.startAddr.HEX(4)+"H"]});i.reg.PC<h.startAddr+h.size;){var j=i.disassemble(i.reg.PC,e-b+d);j.addr=i.reg.PC,j.refs=0,g.push(j),i.reg.PC+=j.code.length}return f.processAddressReference(g)},f.prototype.disassemble=function(a,b){var c=null,d="",e=this.memory.peek(a);try{var f=this.opecodeTable[e];null==f?d="UNKNOWN OPECODE":null==f.disasm?d="NO DISASSEMBLER":null==(c=f.disasm(this.memory,a))?d="NULL RETURNED":a+c.code.length>b&&(c=null)}catch(a){d="EXCEPTION THROWN"}return null==c&&(c={code:[e],mnemonic:["DEFB",e.HEX(2)+"H; *** UNKNOWN OPCODE: "+d]}),c},f.processAddressReference=function(a){var b,c,d,e={};for(b=0;b<a.length;b++)d=a[b],e[d.addr]=b;for(b=0;b<a.length;b++)"ref_addr"in(d=a[b])&&d.ref_addr in e&&(c=e[d.ref_addr],a[c].refs++);return a},f.dasmlines=function(a){var b,c,d=[];for(c=0;c<a.length;c++){var e,f=a[c];e=f.refs>0?"$"+f.addr.HEX(4)+"H:":"       ",e+="   ";var g=f.mnemonic[0];if(f.mnemonic.length>1)for(;g.length<8;)g+=" ";var h="";for(b=1;b<f.mnemonic.length;b++){h+=f.mnemonic[b],b<f.mnemonic.length-1&&(h+=",")}for(var i=e+"      "+g+h;i.length<40;)i+=" ";var j=[];for(b=0;b<f.code.length;b++)j.push(f.code[b].HEX(2));j.length>0&&(i+="; "+f.addr.HEX(4)+"H "+j.join(" ")),d.push(i)}return d},f.prototype.createOpecodeTable=function(){var a=this;this.opecodeTable=new Array(256);for(var b=new Array(256),c=new Array(256),f=new Array(256),g=new Array(256),h=new Array(256),i=new Array(256),j=0;j<256;j++)this.opecodeTable[j]={mnemonic:null,proc:function(){throw"ILLEGAL OPCODE"},disasm:function(a){return function(){return{code:[a],mnemonic:["DEFB",a.HEX(2)+"H; *** UNKNOWN OPCODE"]}}}(j)},b[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD "+a.HEX(2)+" for IX command subset"}}(j),disasm:function(a){return function(){return{code:[221],mnemonic:["DEFB","DDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)},c[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD "+a.HEX(2)+" for IY command subset"}}(j),disasm:function(a){return function(){return{code:[253],mnemonic:["DEFB","FDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)},f[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE CB "+a.HEX(2)+" for Rotate command subset"}}(j),disasm:function(a){return function(){return{code:[203],mnemonic:["DEFB","CBh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)},g[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD CB "+a.HEX(2)+" for Rotate IX command subset"}}(j),disasm:function(a){return function(){return{code:[221,203],mnemonic:["DEFW","CBDDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)},h[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD CB "+a.HEX(2)+" for Rotate IY command subset"}}(j),disasm:function(a){return function(){return{code:[253,203],mnemonic:["DEFW","CBFDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)},i[j]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE ED "+a.HEX(2)+" for Misc command subset"}}(j),disasm:function(a){return function(){return{code:[237],mnemonic:["DEFB","EDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(j)};this.opecodeTable[221]={mnemonic:function(){return b},proc:function(){b[a.fetch()].proc()},disasm:function(a,c){return b[a.peek(c+1)].disasm(a,c)}},this.opecodeTable[253]={mnemonic:function(){return c},proc:function(){c[a.fetch()].proc()},disasm:function(a,b){return c[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[203]={mnemonic:function(){return f},proc:function(){f[a.fetch()].proc()},disasm:function(a,b){return f[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[237]={mnemonic:function(){return i},proc:function(){i[a.fetch()].proc()},disasm:function(a,b){return i[a.peek(b+1)].disasm(a,b)}};var k,l,m,n,o;for(k in d.REG_r_ID2NAME){m=d.REG_r_ID2NAME[k];for(l in d.REG_r_ID2NAME)n=d.REG_r_ID2NAME[l],o=64|k<<3|l,this.opecodeTable[o]={mnemonic:"LD "+m+","+n,proc:function(b,c,d){return function(){a.reg[c]=a.reg[d]}}(0,m,n),cycle:4,disasm:function(a,b,c){return function(){return{code:[a],mnemonic:["LD",b,c]}}}(o,m,n)}}var p=function(a,b){var c,e=a.peek(b),f=[e],g=0!=(64&e)?1:0,h=e>>3&7,i=e>>0&7,j=["???","???"];switch(j[0]=6==h?"(HL)":d.REG_r_ID2NAME[h],g){case 0:c=a.peek(b+1),f.push(c),j[1]=c.HEX(2)+"H";break;case 1:j[1]=6==i?"(HL)":d.REG_r_ID2NAME[i]}return{code:f,mnemonic:["LD",j[0],j[1]]}};this.opecodeTable[6]={mnemonic:"LD B,n",proc:function(){a.reg.B=a.fetch()},cycle:7,disasm:p},this.opecodeTable[14]={mnemonic:"LD C,n",proc:function(){a.reg.C=a.fetch()},cycle:7,disasm:p},this.opecodeTable[22]={mnemonic:"LD D,n",proc:function(){a.reg.D=a.fetch()},cycle:7,disasm:p},this.opecodeTable[30]={mnemonic:"LD E,n",proc:function(){a.reg.E=a.fetch()},cycle:7,disasm:p},this.opecodeTable[38]={mnemonic:"LD H,n",proc:function(){a.reg.H=a.fetch()},cycle:7,disasm:p},this.opecodeTable[46]={mnemonic:"LD L,n",proc:function(){a.reg.L=a.fetch()},cycle:7,disasm:p},this.opecodeTable[62]={mnemonic:"LD A,n",proc:function(){a.reg.A=a.fetch()},cycle:7,disasm:p},this.opecodeTable[70]={mnemonic:"LD B,(HL)",proc:function(){a.reg.B=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[78]={mnemonic:"LD C,(HL)",proc:function(){a.reg.C=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[86]={mnemonic:"LD D,(HL)",proc:function(){a.reg.D=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[94]={mnemonic:"LD E,(HL)",proc:function(){a.reg.E=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[102]={mnemonic:"LD H,(HL)",proc:function(){a.reg.H=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[110]={mnemonic:"LD L,(HL)",proc:function(){a.reg.L=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[126]={mnemonic:"LD A,(HL)",proc:function(){a.reg.A=a.memory.peek(a.reg.getHL())},cycle:7,disasm:p},this.opecodeTable[112]={mnemonic:"LD (HL),B",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.B)},cycle:10,disasm:p},this.opecodeTable[113]={mnemonic:"LD (HL),C",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.C)},cycle:10,disasm:p},this.opecodeTable[114]={mnemonic:"LD (HL),D",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.D)},cycle:10,disasm:p},this.opecodeTable[115]={mnemonic:"LD (HL),E",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.E)},cycle:10,disasm:p},this.opecodeTable[116]={mnemonic:"LD (HL),H",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.H)},cycle:10,disasm:p},this.opecodeTable[117]={mnemonic:"LD (HL),L",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.L)},cycle:10,disasm:p},this.opecodeTable[119]={mnemonic:"LD (HL),A",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.A)},cycle:10,disasm:p},this.opecodeTable[54]={mnemonic:"LD (HL),n",proc:function(){a.memory.poke(a.reg.getHL(),a.fetch())},cycle:10,disasm:p},this.opecodeTable[10]={mnemonic:"LD A,(BC)",proc:function(){a.reg.A=a.memory.peek(a.reg.getBC())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(BC)"]}}},this.opecodeTable[26]={mnemonic:"LD A,(DE)",proc:function(){a.reg.A=a.memory.peek(a.reg.getDE())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(DE)"]}}},this.opecodeTable[58]={mnemonic:"LD A,(nn)",proc:function(){a.reg.A=a.memory.peek(a.fetchPair())},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","A","("+a.peekPair(b+1).HEX(4)+"H)"]}}},this.opecodeTable[2]={mnemonic:"LD (BC),A",proc:function(){a.memory.poke(a.reg.getBC(),a.reg.A)},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(BC)","A"]}}},this.opecodeTable[18]={mnemonic:"LD (DE),A",proc:function(){a.memory.poke(a.reg.getDE(),a.reg.A)},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(DE)","A"]}}},this.opecodeTable[50]={mnemonic:"LD (nn),A",proc:function(){a.memory.poke(a.fetchPair(),a.reg.A)},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","("+a.peekPair(b+1).HEX(4)+"H)","A"]}}},i[87]={mnemonic:"LD A,I",proc:function(){a.reg.LD_A_I(a.IFF2)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","I"]}}},i[95]={mnemonic:"LD A,R",proc:function(){a.reg.LD_A_R(a.IFF2,a.regB.R)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","R"]}}},i[71]={mnemonic:"LD I,A",proc:function(){a.reg.I=a.reg.A},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","I","A"]}}},i[79]={mnemonic:"LD R,A",proc:function(){a.reg.R=a.regB.R=a.reg.A},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","R","A"]}}};var q=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD",c,"("+d+"+"+e.HEX(2)+"H)"]}},r=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD","("+c+"+"+e.HEX(2)+"H)",d]}};b[70]={mnemonic:"LD B,(IX+d)",proc:function(){a.reg.B=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"B","IX")}},b[78]={mnemonic:"LD C,(IX+d)",proc:function(){a.reg.C=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"C","IX")}},b[86]={mnemonic:"LD D,(IX+d)",proc:function(){a.reg.D=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"D","IX")}},b[94]={mnemonic:"LD E,(IX+d)",proc:function(){a.reg.E=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"E","IX")}},b[102]={mnemonic:"LD H,(IX+d)",proc:function(){a.reg.H=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"H","IX")}},b[110]={mnemonic:"LD L,(IX+d)",proc:function(){a.reg.L=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"L","IX")}},b[126]={mnemonic:"LD A,(IX+d)",proc:function(){a.reg.A=a.memory.peek(a.reg.IX+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"A","IX")}},b[112]={mnemonic:"LD (IX+d),B",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.B)},cycle:19,disasm:function(a,b){return r(a,b,"IX","B")}},b[113]={mnemonic:"LD (IX+d),C",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.C)},cycle:19,disasm:function(a,b){return r(a,b,"IX","C")}},b[114]={mnemonic:"LD (IX+d),D",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.D)},cycle:19,disasm:function(a,b){return r(a,b,"IX","D")}},b[115]={mnemonic:"LD (IX+d),E",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.E)},cycle:19,disasm:function(a,b){return r(a,b,"IX","E")}},b[116]={mnemonic:"LD (IX+d),H",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.H)},cycle:19,disasm:function(a,b){return r(a,b,"IX","H")}},b[117]={mnemonic:"LD (IX+d),L",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.L)},cycle:19,disasm:function(a,b){return r(a,b,"IX","L")}},b[119]={mnemonic:"LD (IX+d),A",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.A)},cycle:19,disasm:function(a,b){return r(a,b,"IX","A")}},c[70]={mnemonic:"LD B,(IY+d)",proc:function(){a.reg.B=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"B","IY")}},c[78]={mnemonic:"LD C,(IY+d)",proc:function(){a.reg.C=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"C","IY")}},c[86]={mnemonic:"LD D,(IY+d)",proc:function(){a.reg.D=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"D","IY")}},c[94]={mnemonic:"LD E,(IY+d)",proc:function(){a.reg.E=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"E","IY")}},c[102]={mnemonic:"LD H,(IY+d)",proc:function(){a.reg.H=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"H","IY")}},c[110]={mnemonic:"LD L,(IY+d)",proc:function(){a.reg.L=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"L","IY")}},c[126]={mnemonic:"LD A,(IY+d)",proc:function(){a.reg.A=a.memory.peek(a.reg.IY+a.fetch())},cycle:19,disasm:function(a,b){return q(a,b,"A","IY")}},c[112]={mnemonic:"LD (IY+d),B",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.B)},cycle:19,disasm:function(a,b){return r(a,b,"IY","B")}},c[113]={mnemonic:"LD (IY+d),C",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.C)},cycle:19,disasm:function(a,b){return r(a,b,"IY","C")}},c[114]={mnemonic:"LD (IY+d),D",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.D)},cycle:19,disasm:function(a,b){return r(a,b,"IY","D")}},c[115]={mnemonic:"LD (IY+d),E",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.E)},cycle:19,disasm:function(a,b){return r(a,b,"IY","E")}},c[116]={mnemonic:"LD (IY+d),H",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.H)},cycle:19,disasm:function(a,b){return r(a,b,"IY","H")}},c[117]={mnemonic:"LD (IY+d),L",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.L)},cycle:19,disasm:function(a,b){return r(a,b,"IY","L")}},c[119]={mnemonic:"LD (IY+d),A",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.A)},cycle:19,disasm:function(a,b){return r(a,b,"IY","A")}};var s=function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=e.pair(f,d),h=c>>4&3;switch(h){case 0:h="BC";break;case 1:h="DE";break;case 2:h="HL";break;case 3:h="SP";break;default:throw"*** LD dd,nn; but unknown dd."}return{code:[c,d,f],mnemonic:["LD",h,g.HEX(4)+"H"]}};this.opecodeTable[1]={mnemonic:"LD BC,nn",cycle:10,proc:function(){a.reg.C=a.fetch(),a.reg.B=a.fetch()},disasm:s},this.opecodeTable[17]={mnemonic:"LD DE,nn",cycle:10,proc:function(){a.reg.E=a.fetch(),a.reg.D=a.fetch()},disasm:s},this.opecodeTable[33]={mnemonic:"LD HL,nn",cycle:10,proc:function(){a.reg.L=a.fetch(),a.reg.H=a.fetch()},disasm:s},this.opecodeTable[49]={mnemonic:"LD SP,nn",cycle:10,proc:function(){a.reg.SP=a.fetchPair()},disasm:s},this.opecodeTable[42]={mnemonic:"LD HL,(nn)",cycle:16,proc:function(){var b=a.fetchPair();a.reg.L=a.memory.peek(b+0),a.reg.H=a.memory.peek(b+1)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2);return{code:[c,d,f],mnemonic:["LD","HL","("+e.pair(f,d).HEX(4)+"H)"]}}},i[75]={mnemonic:"LD BC,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.C=a.memory.peek(b+0),a.reg.B=a.memory.peek(b+1)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","BC","("+e.pair(g,f).HEX(4)+"H)"]}}},i[91]={mnemonic:"LD DE,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.E=a.memory.peek(b+0),a.reg.D=a.memory.peek(b+1)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","DE","("+e.pair(g,f).HEX(4)+"H)"]}}},i[107]={mnemonic:"LD HL,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.L=a.memory.peek(b+0),a.reg.H=a.memory.peek(b+1)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","HL","("+e.pair(g,f).HEX(4)+"H)"]}}},i[123]={mnemonic:"LD SP,(nn)",cycle:20,proc:function(){a.reg.SP=a.fetchPair()},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","SP","("+e.pair(g,f).HEX(4)+"H)"]}}},this.opecodeTable[34]={mnemonic:"LD (nn), HL",cycle:16,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.L),a.memory.poke(b+1,a.reg.H)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2);return{code:[c,d,f],mnemonic:["LD","("+e.pair(f,d).HEX(4)+"H)","HL"]}}},i[67]={mnemonic:"LD (nn),BC",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.C),a.memory.poke(b+1,a.reg.B)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","("+e.pair(g,f).HEX(4)+"H)","BC"]}}},i[83]={mnemonic:"LD (nn),DE",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.E),a.memory.poke(b+1,a.reg.D)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","("+e.pair(g,f).HEX(4)+"H)","DE"]}}},i[99]={mnemonic:"LD (nn),HL",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.L),a.memory.poke(b+1,a.reg.H)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","("+e.pair(g,f).HEX(4)+"H)","HL"]}}},i[115]={mnemonic:"LD (nn),SP",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.SP>>0&255),a.memory.poke(b+1,a.reg.SP>>8&255)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),f=a.peek(b+2),g=a.peek(b+3);return{code:[c,d,f,g],mnemonic:["LD","("+e.pair(g,f).HEX(4)+"H)","SP"]}}},this.opecodeTable[249]={mnemonic:"LD SP,HL",cycle:6,proc:function(){a.reg.SP=a.reg.getHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","SP","HL"]}}},this.opecodeTable[197]={mnemonic:"PUSH BC",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.B),a.memory.poke(--a.reg.SP,a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","BC"]}}},this.opecodeTable[213]={mnemonic:"PUSH DE",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.D),a.memory.poke(--a.reg.SP,a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","DE"]}}},this.opecodeTable[229]={mnemonic:"PUSH HL",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.H),a.memory.poke(--a.reg.SP,a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","HL"]}}},this.opecodeTable[245]={mnemonic:"PUSH AF",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.A),a.memory.poke(--a.reg.SP,a.reg.F)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","AF"]}}},this.opecodeTable[193]={mnemonic:"POP BC",cycle:10,proc:function(){a.reg.C=a.memory.peek(a.reg.SP++),a.reg.B=a.memory.peek(a.reg.SP++)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","BC"]}}},this.opecodeTable[209]={mnemonic:"POP DE",cycle:10,proc:function(){a.reg.E=a.memory.peek(a.reg.SP++),a.reg.D=a.memory.peek(a.reg.SP++)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","DE"]}}},this.opecodeTable[225]={mnemonic:"POP HL",cycle:10,proc:function(){a.reg.L=a.memory.peek(a.reg.SP++),a.reg.H=a.memory.peek(a.reg.SP++)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","HL"]}}},this.opecodeTable[241]={mnemonic:"POP AF",cycle:10,proc:function(){a.reg.F=a.memory.peek(a.reg.SP++),a.reg.A=a.memory.peek(a.reg.SP++)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","AF"]}}},b[33]={mnemonic:"LD IX,nn",cycle:14,proc:function(){a.reg.IX=a.fetchPair()},disasm:function(a,b){return{code:[221,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX",a.peekPair(b+2).HEX(4)+"H"]}}},b[42]={mnemonic:"LD IX,(nn)",cycle:20,proc:function(){a.reg.IX=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[221,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX","("+a.peekPair(b+2).HEX(4)+"H)"]}}},b[54]={mnemonic:"LD (IX+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IX+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[221,54,c,d],mnemonic:["LD","(IX + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},b[249]={mnemonic:"LD SP,IX",cycle:10,proc:function(){a.reg.SP=a.reg.IX},disasm:function(){return{code:[221,249],mnemonic:["LD","SP","IX"]}}},b[229]={mnemonic:"PUSH IX",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,e.hibyte(a.reg.IX)),a.memory.poke(--a.reg.SP,e.lobyte(a.reg.IX))},disasm:function(){return{code:[221,229],mnemonic:["PUSH","IX"]}}},b[225]={mnemonic:"POP IX",cycle:14,proc:function(){a.reg.IX=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[221,225],mnemonic:["POP","IX"]}}},b[227]={mnemonic:"EX (SP),IX",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,e.hibyte(a.reg.IX));var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,e.lobyte(a.reg.IX)),a.reg.IX=e.pair(b,c)},disasm:function(){return{code:[221,227],mnemonic:["EX","(SP)","IX"]}}},c[33]={mnemonic:"LD IY,nn",cycle:14,proc:function(){a.reg.IY=a.fetchPair()},disasm:function(a,b){return{code:[253,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY",a.peekPair(b+2).HEX(4)+"H"]}}},c[42]={mnemonic:"LD IY,(nn)",cycle:20,proc:function(){a.reg.IY=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[253,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY","("+a.peekPair(b+2).HEX(4)+"H)"]}}},c[54]={mnemonic:"LD (IY+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IY+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[253,54,c,d],mnemonic:["LD","(IY + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},
c[249]={mnemonic:"LD SP,IY",cycle:10,proc:function(){a.reg.SP=a.reg.IY},disasm:function(){return{code:[253,249],mnemonic:["LD","SP","IY"]}}},c[229]={mnemonic:"PUSH IY",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,e.hibyte(a.reg.IY)),a.memory.poke(--a.reg.SP,e.lobyte(a.reg.IY))},disasm:function(){return{code:[253,229],mnemonic:["PUSH","IY"]}}},c[225]={mnemonic:"POP IY",cycle:14,proc:function(){a.reg.IY=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[253,225],mnemonic:["POP","IY"]}}},c[227]={mnemonic:"EX (SP),IY",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.IY>>8&255);var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,a.reg.IY>>0&255),a.reg.IY=(b<<8)+c},disasm:function(){return{code:[253,227],mnemonic:["EX","(SP)","IY"]}}},this.opecodeTable[235]={mnemonic:"EX DE,HL ",cycle:4,proc:function(){var b=a.reg.D;a.reg.D=a.reg.H,a.reg.H=b,b=a.reg.E,a.reg.E=a.reg.L,a.reg.L=b},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","DE","HL"]}}},this.opecodeTable[8]={mnemonic:"EX AF,AF'",cycle:4,proc:function(){var b=a.reg.A;a.reg.A=a.regB.A,a.regB.A=b,b=a.reg.F,a.reg.F=a.regB.F,a.regB.F=b},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","AF","AF'"]}}},this.opecodeTable[217]={mnemonic:"EXX",cycle:4,proc:function(){var b=a.reg.B;a.reg.B=a.regB.B,a.regB.B=b,b=a.reg.C,a.reg.C=a.regB.C,a.regB.C=b,b=a.reg.D,a.reg.D=a.regB.D,a.regB.D=b,b=a.reg.E,a.reg.E=a.regB.E,a.regB.E=b,b=a.reg.H,a.reg.H=a.regB.H,a.regB.H=b,b=a.reg.L,a.reg.L=a.regB.L,a.regB.L=b},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EXX"]}}},this.opecodeTable[227]={mnemonic:"EX (SP),HL",cycle:19,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.H),a.reg.H=b,b=a.memory.peek(a.reg.SP),a.memory.poke(a.reg.SP,a.reg.L),a.reg.L=b},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","(SP)","HL"]}}},i[160]={mnemonic:"LDI",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDI"]}}},i[176]={mnemonic:"LDIR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDIR"]}}},i[168]={mnemonic:"LDD",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDD"]}}},i[184]={mnemonic:"LDDR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDDR"]}}},i[161]={mnemonic:"CPI",cycle:16,proc:function(){a.reg.CPI(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPI"]}}},i[177]={mnemonic:"CPIR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPI(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPIR"]}}},i[169]={mnemonic:"CPD",cycle:16,proc:function(){a.reg.CPD(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPD"]}}},i[185]={mnemonic:"CPDR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPD(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPDR"]}}},this.opecodeTable[128]={mnemonic:"ADD A,B",cycle:4,proc:function(){a.reg.addAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","B"]}}},this.opecodeTable[129]={mnemonic:"ADD A,C",cycle:4,proc:function(){a.reg.addAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","C"]}}},this.opecodeTable[130]={mnemonic:"ADD A,D",cycle:4,proc:function(){a.reg.addAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","D"]}}},this.opecodeTable[131]={mnemonic:"ADD A,E",cycle:4,proc:function(){a.reg.addAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","E"]}}},this.opecodeTable[132]={mnemonic:"ADD A,H",cycle:4,proc:function(){a.reg.addAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","H"]}}},this.opecodeTable[133]={mnemonic:"ADD A,L",cycle:4,proc:function(){a.reg.addAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","L"]}}},this.opecodeTable[135]={mnemonic:"ADD A,A",cycle:4,proc:function(){a.reg.addAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","A"]}}},this.opecodeTable[198]={mnemonic:"ADD A,n",cycle:7,proc:function(){a.reg.addAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADD","A",c.HEX(2)+"H"]}}},this.opecodeTable[134]={mnemonic:"ADD A,(HL)",cycle:7,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","(HL)"]}}},b[134]={mnemonic:"ADD A,(IX+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IX+"+c.HEX(2)+"H)"]}}},c[134]={mnemonic:"ADD A,(IY+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[136]={mnemonic:"ADC A,B",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","B"]}}},this.opecodeTable[137]={mnemonic:"ADC A,C",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","C"]}}},this.opecodeTable[138]={mnemonic:"ADC A,D",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","D"]}}},this.opecodeTable[139]={mnemonic:"ADC A,E",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","E"]}}},this.opecodeTable[140]={mnemonic:"ADC A,H",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","H"]}}},this.opecodeTable[141]={mnemonic:"ADC A,L",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","L"]}}},this.opecodeTable[143]={mnemonic:"ADC A,A",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","A"]}}},this.opecodeTable[206]={mnemonic:"ADC A,n",cycle:7,proc:function(){a.reg.addAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADC","A",c.HEX(2)+"H"]}}},this.opecodeTable[142]={mnemonic:"ADC A,(HL)",cycle:7,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","(HL)"]}}},b[142]={mnemonic:"ADC A,(IX+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IX+"+c.HEX(2)+"H)"]}}},c[142]={mnemonic:"ADC A,(IY+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[144]={mnemonic:"SUB A,B",cycle:4,proc:function(){a.reg.subAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","B"]}}},this.opecodeTable[145]={mnemonic:"SUB A,C",cycle:4,proc:function(){a.reg.subAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","C"]}}},this.opecodeTable[146]={mnemonic:"SUB A,D",cycle:4,proc:function(){a.reg.subAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","D"]}}},this.opecodeTable[147]={mnemonic:"SUB A,E",cycle:4,proc:function(){a.reg.subAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","E"]}}},this.opecodeTable[148]={mnemonic:"SUB A,H",cycle:4,proc:function(){a.reg.subAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","H"]}}},this.opecodeTable[149]={mnemonic:"SUB A,L",cycle:4,proc:function(){a.reg.subAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","L"]}}},this.opecodeTable[151]={mnemonic:"SUB A,A",cycle:4,proc:function(){a.reg.subAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","A"]}}},this.opecodeTable[214]={mnemonic:"SUB A,n",cycle:7,proc:function(){a.reg.subAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SUB","A",c.HEX(2)+"H"]}}},this.opecodeTable[150]={mnemonic:"SUB A,(HL)",cycle:7,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","(HL)"]}}},b[150]={mnemonic:"SUB A,(IX+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IX+"+c.HEX(2)+"H)"]}}},c[150]={mnemonic:"SUB A,(IY+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[152]={mnemonic:"SBC A,B",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","B"]}}},this.opecodeTable[153]={mnemonic:"SBC A,C",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","C"]}}},this.opecodeTable[154]={mnemonic:"SBC A,D",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","D"]}}},this.opecodeTable[155]={mnemonic:"SBC A,E",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","E"]}}},this.opecodeTable[156]={mnemonic:"SBC A,H",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","H"]}}},this.opecodeTable[157]={mnemonic:"SBC A,L",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","L"]}}},this.opecodeTable[159]={mnemonic:"SBC A,A",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","A"]}}},this.opecodeTable[222]={mnemonic:"SBC A,n",cycle:7,proc:function(){a.reg.subAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SBC","A,"+c.HEX(2)+"H"]}}},this.opecodeTable[158]={mnemonic:"SBC A,(HL)",cycle:7,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","(HL)"]}}},b[158]={mnemonic:"SBC A,(IX+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IX+"+c.HEX(2)+"H)"]}}},c[158]={mnemonic:"SBC A,(IY+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[160]={mnemonic:"AND B",cycle:4,proc:function(){a.reg.andAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","B"]}}},this.opecodeTable[161]={mnemonic:"AND C",cycle:4,proc:function(){a.reg.andAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","C"]}}},this.opecodeTable[162]={mnemonic:"AND D",cycle:4,proc:function(){a.reg.andAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","D"]}}},this.opecodeTable[163]={mnemonic:"AND E",cycle:4,proc:function(){a.reg.andAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","E"]}}},this.opecodeTable[164]={mnemonic:"AND H",cycle:4,proc:function(){a.reg.andAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","H"]}}},this.opecodeTable[165]={mnemonic:"AND L",cycle:4,proc:function(){a.reg.andAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","L"]}}},this.opecodeTable[167]={mnemonic:"AND A",cycle:4,proc:function(){a.reg.andAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","A"]}}},this.opecodeTable[230]={mnemonic:"AND n",cycle:7,proc:function(){a.reg.andAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["AND",c.HEX(2)+"H"]}}},this.opecodeTable[166]={mnemonic:"AND (HL)",cycle:7,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","(HL)"]}}},b[166]={mnemonic:"AND (IX+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IX+"+c.HEX(2)+"H)"]}}},c[166]={mnemonic:"AND (IY+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[176]={mnemonic:"OR B",cycle:4,proc:function(){a.reg.orAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","B"]}}},this.opecodeTable[177]={mnemonic:"OR C",cycle:4,proc:function(){a.reg.orAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","C"]}}},this.opecodeTable[178]={mnemonic:"OR D",cycle:4,proc:function(){a.reg.orAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","D"]}}},this.opecodeTable[179]={mnemonic:"OR E",cycle:4,proc:function(){a.reg.orAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","E"]}}},this.opecodeTable[180]={mnemonic:"OR H",cycle:4,proc:function(){a.reg.orAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","H"]}}},this.opecodeTable[181]={mnemonic:"OR L",cycle:4,proc:function(){a.reg.orAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","L"]}}},this.opecodeTable[183]={mnemonic:"OR A",cycle:4,proc:function(){a.reg.orAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","A"]}}},this.opecodeTable[246]={mnemonic:"OR n",cycle:7,proc:function(){a.reg.orAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["OR",c.HEX(2)+"H"]}}},this.opecodeTable[182]={mnemonic:"OR (HL)",cycle:7,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","(HL)"]}}},b[182]={mnemonic:"OR (IX+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IX+"+c.HEX(2)+"H)"]}}},c[182]={mnemonic:"OR (IY+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[168]={mnemonic:"XOR B",cycle:4,proc:function(){a.reg.xorAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","B"]}}},this.opecodeTable[169]={mnemonic:"XOR C",cycle:4,proc:function(){a.reg.xorAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","C"]}}},this.opecodeTable[170]={mnemonic:"XOR D",cycle:4,proc:function(){a.reg.xorAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","D"]}}},this.opecodeTable[171]={mnemonic:"XOR E",cycle:4,proc:function(){a.reg.xorAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","E"]}}},this.opecodeTable[172]={mnemonic:"XOR H",cycle:4,proc:function(){a.reg.xorAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","H"]}}},this.opecodeTable[173]={mnemonic:"XOR L",cycle:4,proc:function(){a.reg.xorAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","L"]}}},this.opecodeTable[175]={mnemonic:"XOR A",cycle:4,proc:function(){a.reg.xorAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","A"]}}},this.opecodeTable[238]={mnemonic:"XOR n",cycle:7,proc:function(){a.reg.xorAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["XOR",c.HEX(2)+"H"]}}},this.opecodeTable[174]={mnemonic:"XOR (HL)",cycle:7,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","(HL)"]}}},b[174]={mnemonic:"XOR (IX+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IX+"+c.HEX(2)+"H)"]}}},c[174]={mnemonic:"XOR (IY+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[184]={mnemonic:"CP B",cycle:4,proc:function(){a.reg.compareAcc(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","B"]}}},this.opecodeTable[185]={mnemonic:"CP C",cycle:4,proc:function(){a.reg.compareAcc(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","C"]}}},this.opecodeTable[186]={mnemonic:"CP D",cycle:4,proc:function(){a.reg.compareAcc(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","D"]}}},this.opecodeTable[187]={mnemonic:"CP E",cycle:4,proc:function(){a.reg.compareAcc(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","E"]}}},this.opecodeTable[188]={mnemonic:"CP H",cycle:4,proc:function(){a.reg.compareAcc(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","H"]}}},this.opecodeTable[189]={mnemonic:"CP L",cycle:4,proc:function(){a.reg.compareAcc(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","L"]}}},this.opecodeTable[191]={mnemonic:"CP A",cycle:4,proc:function(){a.reg.compareAcc(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","A"]}}},this.opecodeTable[254]={mnemonic:"CP n",cycle:7,proc:function(){a.reg.compareAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["CP",c.HEX(2)+"H"]}}},this.opecodeTable[190]={mnemonic:"CP (HL)",cycle:7,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","(HL)"]}}},b[190]={mnemonic:"CP (IX+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IX+"+c.HEX(2)+"H)"]}}},c[190]={mnemonic:"CP (IY+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[4]={mnemonic:"INC B",cycle:4,proc:function(){a.reg.increment("B")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","B"]}}},this.opecodeTable[12]={mnemonic:"INC C",cycle:4,proc:function(){a.reg.increment("C")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","C"]}}},this.opecodeTable[20]={mnemonic:"INC D",cycle:4,proc:function(){a.reg.increment("D")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","D"]}}},this.opecodeTable[28]={mnemonic:"INC E",cycle:4,proc:function(){a.reg.increment("E")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","E"]}}},this.opecodeTable[36]={mnemonic:"INC H",cycle:4,proc:function(){a.reg.increment("H")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","H"]}}},this.opecodeTable[44]={mnemonic:"INC L",cycle:4,proc:function(){a.reg.increment("L")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","L"]}}},this.opecodeTable[60]={mnemonic:"INC A",cycle:4,proc:function(){a.reg.increment("A")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","A"]}}},this.opecodeTable[52]={mnemonic:"INC (HL)",cycle:11,proc:function(){a.incrementAt(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","(HL)"]}}},b[52]={mnemonic:"INC (IX+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IX+ "+c+")"]}}},c[52]={mnemonic:"INC (IY+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IY+ "+c+")"]}}},this.opecodeTable[5]={mnemonic:"DEC B",proc:function(){a.reg.decrement("B")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","B"]}}},this.opecodeTable[13]={mnemonic:"DEC C",proc:function(){a.reg.decrement("C")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","C"]}}},this.opecodeTable[21]={mnemonic:"DEC D",proc:function(){a.reg.decrement("D")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","D"]}}},this.opecodeTable[29]={mnemonic:"DEC E",proc:function(){a.reg.decrement("E")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","E"]}}},this.opecodeTable[37]={mnemonic:"DEC H",proc:function(){a.reg.decrement("H")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","H"]}}},this.opecodeTable[45]={mnemonic:"DEC L",proc:function(){a.reg.decrement("L")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","L"]}}},this.opecodeTable[61]={mnemonic:"DEC A",proc:function(){a.reg.decrement("A")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","A"]}}},this.opecodeTable[53]={mnemonic:"DEC (HL)",proc:function(){a.decrementAt(a.reg.getHL())},cycle:11,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","(HL)"]}}},b[53]={mnemonic:"DEC (IX+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IX+ "+c+")"]}}},c[53]={mnemonic:"DEC (IY+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IY+ "+c+")"]}}},this.opecodeTable[39]={mnemonic:"DAA",cycle:4,proc:function(){a.reg.DAA()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DAA"]}}},this.opecodeTable[47]={mnemonic:"CPL",cycle:4,proc:function(){a.reg.CPL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CPL"]}}},this.opecodeTable[63]={mnemonic:"CCF",cycle:4,proc:function(){a.reg.flagC()?a.reg.clearFlagC():a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CCF"]}}},this.opecodeTable[55]={mnemonic:"SCF",cycle:4,proc:function(){a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SCF"]}}},this.opecodeTable[0]={mnemonic:"NOP",cycle:4,proc:function(){},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["NOP"]}}},this.opecodeTable[118]={mnemonic:"HALT",cycle:4,proc:function(){throw a.HALT=1,a.reg.PC-=1,a.exec=function(){throw a.reg.R=a.reg.R+1&255,"halt"},"halt"},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["HALT"]}}},this.opecodeTable[243]={mnemonic:"DI",cycle:4,proc:function(){a.IFF1=a.IFF2=0},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DI"]}}},this.opecodeTable[251]={mnemonic:"EI",cycle:4,proc:function(){a.IFF1?a.IFF2=1:(a.IFF1=this.IFF2=1,a.reg.R=a.reg.R+1&255,a.exec())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EI"]}}},i[68]={mnemonic:"NEG",cycle:8,proc:function(){a.reg.NEG()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["NEG"]}}},i[70]={mnemonic:"IM0",cycle:8,proc:function(){a.IM=0},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM0"]}}},i[86]={mnemonic:"IM1",cycle:8,proc:function(){a.IM=1},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM1"]}}},i[94]={mnemonic:"IM2",cycle:8,proc:function(){a.IM=2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM2"]}}},this.opecodeTable[9]={mnemonic:"ADD HL,BC",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","BC"]}}},this.opecodeTable[25]={mnemonic:"ADD HL,DE",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","DE"]}}},this.opecodeTable[41]={mnemonic:"ADD HL,HL",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","HL"]}}},this.opecodeTable[57]={mnemonic:"ADD HL,SP",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getSP())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","SP"]}}},i[74]={mnemonic:"ADC HL,BC",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","BC"]}}},i[90]={mnemonic:"ADC HL,DE",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","DE"]}}},i[106]={mnemonic:"ADC HL,HL",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","HL"]}}},i[122]={mnemonic:"ADC HL,SP",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getSP())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","SP"]}}},i[66]={mnemonic:"SBC HL,BC",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","BC"]}}},i[82]={mnemonic:"SBC HL,DE",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","DE"]}}},i[98]={mnemonic:"SBC HL,HL",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","HL"]}}},i[114]={mnemonic:"SBC HL,SP",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getSP())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","SP"]}}},b[9]={mnemonic:"ADD IX,BC",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getBC())},disasm:function(){return{code:[221,9],mnemonic:["ADD","IX","BC"]}}},b[25]={mnemonic:"ADD IX,DE",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getDE())},disasm:function(){return{code:[221,25],mnemonic:["ADD","IX","DE"]}}},b[41]={mnemonic:"ADD IX,IX",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.IX)},disasm:function(){return{code:[221,41],mnemonic:["ADD","IX","IX"]}}},b[57]={mnemonic:"ADD IX,SP",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.SP)},disasm:function(){return{code:[221,57],mnemonic:["ADD","IX","SP"]}}},c[9]={mnemonic:"ADD IY,BC",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getBC())},disasm:function(){return{code:[253,9],mnemonic:["ADD","IY","BC"]}}},c[25]={mnemonic:"ADD IY,DE",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getDE())},disasm:function(){return{code:[253,25],mnemonic:["ADD","IY","DE"]}}},c[41]={mnemonic:"ADD IY,IY",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.IY)},disasm:function(){return{code:[253,41],mnemonic:["ADD","IY","IY"]}}},c[57]={mnemonic:"ADD IY,SP",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.SP)},disasm:function(){return{code:[253,57],mnemonic:["ADD","IY","SP"]}}},this.opecodeTable[3]={mnemonic:"INC BC",cycle:6,proc:function(){a.reg.incBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","BC"]}}},this.opecodeTable[19]={mnemonic:"INC DE",cycle:6,proc:function(){a.reg.incDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","DE"]}}},this.opecodeTable[35]={mnemonic:"INC HL",cycle:6,proc:function(){a.reg.incHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","HL"]}}},this.opecodeTable[51]={mnemonic:"INC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP+1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","SP"]}}},b[35]={mnemonic:"INC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IX"]}}},c[35]={mnemonic:"INC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IY"]}}},this.opecodeTable[11]={mnemonic:"DEC BC",cycle:6,proc:function(){a.reg.decBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","BC"]}}},this.opecodeTable[27]={mnemonic:"DEC DE",cycle:6,proc:function(){a.reg.decDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","DE"]}}},this.opecodeTable[43]={mnemonic:"DEC HL",cycle:6,proc:function(){a.reg.decHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","HL"]}}},this.opecodeTable[59]={mnemonic:"DEC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP-1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","SP"]}}},b[43]={mnemonic:"DEC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IX"]}}};c[43]={mnemonic:"DEC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IY"]}}},this.opecodeTable[7]={mnemonic:"RLCA",cycle:4,proc:function(){a.reg.RLCA()},disasm:function(){return{code:[7],mnemonic:["RLCA"]}}},this.opecodeTable[23]={mnemonic:"RLA",cycle:4,proc:function(){a.reg.RLA()},disasm:function(){return{code:[23],mnemonic:["RLA"]}}},this.opecodeTable[15]={mnemonic:"RRCA",cycle:4,proc:function(){a.reg.RRCA()},disasm:function(){return{code:[15],mnemonic:["RRCA"]}}},this.opecodeTable[31]={mnemonic:"RRA",cycle:4,proc:function(){a.reg.RRA()},disasm:function(){return{code:[31],mnemonic:["RRA"]}}},b[203]={mnemonic:function(){return g},proc:function(){var b=a.fetch(),c=a.fetch();g[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return g[c].disasm(a,b)}},c[203]={mnemonic:function(){return h},proc:function(){var b=a.fetch(),c=a.fetch();h[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return h[c].disasm(a,b)}},f[0]={mnemonic:"RLC B",cycle:4,proc:function(){a.reg.B=a.reg.RLC(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","B"]}}},f[1]={mnemonic:"RLC C",cycle:4,proc:function(){a.reg.C=a.reg.RLC(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","C"]}}},f[2]={mnemonic:"RLC D",cycle:4,proc:function(){a.reg.D=a.reg.RLC(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","D"]}}},f[3]={mnemonic:"RLC E",cycle:4,proc:function(){a.reg.E=a.reg.RLC(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","E"]}}},f[4]={mnemonic:"RLC H",cycle:4,proc:function(){a.reg.H=a.reg.RLC(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","H"]}}},f[5]={mnemonic:"RLC L",cycle:4,proc:function(){a.reg.L=a.reg.RLC(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","L"]}}},f[7]={mnemonic:"RLC A",cycle:4,proc:function(){a.reg.A=a.reg.RLC(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","A"]}}},f[6]={mnemonic:"RLC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RLC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","(HL)"]}}},g[6]={mnemonic:"RLC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{
code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IX+"+a.peek(b+2)+")"]}}},h[6]={mnemonic:"RLC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IY+"+a.peek(b+2)+")"]}}},f[16]={mnemonic:"RL B",cycle:8,proc:function(){a.reg.B=a.reg.RL(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","B"]}}},f[17]={mnemonic:"RL C",cycle:8,proc:function(){a.reg.C=a.reg.RL(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","C"]}}},f[18]={mnemonic:"RL D",cycle:8,proc:function(){a.reg.D=a.reg.RL(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","D"]}}},f[19]={mnemonic:"RL E",cycle:8,proc:function(){a.reg.E=a.reg.RL(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","E"]}}},f[20]={mnemonic:"RL H",cycle:8,proc:function(){a.reg.H=a.reg.RL(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","H"]}}},f[21]={mnemonic:"RL L",cycle:8,proc:function(){a.reg.L=a.reg.RL(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","L"]}}},f[22]={mnemonic:"RL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","(HL)"]}}},f[23]={mnemonic:"RL A",cycle:8,proc:function(){a.reg.A=a.reg.RL(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","A"]}}},g[22]={mnemonic:"RL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IX+"+a.peek(b+2)+")"]}}},h[22]={mnemonic:"RL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IY+"+a.peek(b+2)+")"]}}},f[8]={mnemonic:"RRC B",cycle:4,proc:function(){a.reg.B=a.reg.RRC(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","B"]}}},f[9]={mnemonic:"RRC C",cycle:4,proc:function(){a.reg.C=a.reg.RRC(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","C"]}}},f[10]={mnemonic:"RRC D",cycle:4,proc:function(){a.reg.D=a.reg.RRC(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","D"]}}},f[11]={mnemonic:"RRC E",cycle:4,proc:function(){a.reg.E=a.reg.RRC(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","E"]}}},f[12]={mnemonic:"RRC H",cycle:4,proc:function(){a.reg.H=a.reg.RRC(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","H"]}}},f[13]={mnemonic:"RRC L",cycle:4,proc:function(){a.reg.L=a.reg.RRC(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","L"]}}},f[15]={mnemonic:"RRC A",cycle:4,proc:function(){a.reg.A=a.reg.RRC(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","A"]}}},f[14]={mnemonic:"RRC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RRC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","(HL)"]}}},g[14]={mnemonic:"RRC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IX+"+a.peek(b+2)+")"]}}},h[14]={mnemonic:"RRC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IY+"+a.peek(b+2)+")"]}}},f[24]={mnemonic:"RR B",cycle:8,proc:function(){a.reg.B=a.reg.RR(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","B"]}}},f[25]={mnemonic:"RR C",cycle:8,proc:function(){a.reg.C=a.reg.RR(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","C"]}}},f[26]={mnemonic:"RR D",cycle:8,proc:function(){a.reg.D=a.reg.RR(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","D"]}}},f[27]={mnemonic:"RR E",cycle:8,proc:function(){a.reg.E=a.reg.RR(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","E"]}}},f[28]={mnemonic:"RR H",cycle:8,proc:function(){a.reg.H=a.reg.RR(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","H"]}}},f[29]={mnemonic:"RR L",cycle:8,proc:function(){a.reg.L=a.reg.RR(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","L"]}}},f[30]={mnemonic:"RR (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RR(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","(HL)"]}}},f[31]={mnemonic:"RR A",cycle:8,proc:function(){a.reg.A=a.reg.RR(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","A"]}}},g[30]={mnemonic:"RR (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IX+"+a.peek(b+2)+")"]}}},h[30]={mnemonic:"RR (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IY+"+a.peek(b+2)+")"]}}},f[32]={mnemonic:"SLA B",cycle:8,proc:function(){a.reg.B=a.reg.SLA(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","B"]}}},f[33]={mnemonic:"SLA C",cycle:8,proc:function(){a.reg.C=a.reg.SLA(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","C"]}}},f[34]={mnemonic:"SLA D",cycle:8,proc:function(){a.reg.D=a.reg.SLA(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","D"]}}},f[35]={mnemonic:"SLA E",cycle:8,proc:function(){a.reg.E=a.reg.SLA(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","E"]}}},f[36]={mnemonic:"SLA H",cycle:8,proc:function(){a.reg.H=a.reg.SLA(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","H"]}}},f[37]={mnemonic:"SLA L",cycle:8,proc:function(){a.reg.L=a.reg.SLA(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","L"]}}},f[39]={mnemonic:"SLA A",cycle:8,proc:function(){a.reg.A=a.reg.SLA(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","A"]}}},f[38]={mnemonic:"SLA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SLA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","(HL)"]}}},g[38]={mnemonic:"SLA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IX+"+a.peek(b+2)+")"]}}},h[38]={mnemonic:"SLA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IY+"+a.peek(b+2)+")"]}}},f[40]={mnemonic:"SRA B",cycle:8,proc:function(){a.reg.B=a.reg.SRA(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","B"]}}},f[41]={mnemonic:"SRA C",cycle:8,proc:function(){a.reg.C=a.reg.SRA(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","C"]}}},f[42]={mnemonic:"SRA D",cycle:8,proc:function(){a.reg.D=a.reg.SRA(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","D"]}}},f[43]={mnemonic:"SRA E",cycle:8,proc:function(){a.reg.E=a.reg.SRA(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","E"]}}},f[44]={mnemonic:"SRA H",cycle:8,proc:function(){a.reg.H=a.reg.SRA(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","H"]}}},f[45]={mnemonic:"SRA L",cycle:8,proc:function(){a.reg.L=a.reg.SRA(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","L"]}}},f[47]={mnemonic:"SRA A",cycle:8,proc:function(){a.reg.A=a.reg.SRA(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","A"]}}},f[46]={mnemonic:"SRA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","(HL)"]}}},g[46]={mnemonic:"SRA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IX+"+a.peek(b+2)+")"]}}},h[46]={mnemonic:"SRA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IY+"+a.peek(b+2)+")"]}}},f[56]={mnemonic:"SRL B",cycle:8,proc:function(){a.reg.B=a.reg.SRL(a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","B"]}}},f[57]={mnemonic:"SRL C",cycle:8,proc:function(){a.reg.C=a.reg.SRL(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","C"]}}},f[58]={mnemonic:"SRL D",cycle:8,proc:function(){a.reg.D=a.reg.SRL(a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","D"]}}},f[59]={mnemonic:"SRL E",cycle:8,proc:function(){a.reg.E=a.reg.SRL(a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","E"]}}},f[60]={mnemonic:"SRL H",cycle:8,proc:function(){a.reg.H=a.reg.SRL(a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","H"]}}},f[61]={mnemonic:"SRL L",cycle:8,proc:function(){a.reg.L=a.reg.SRL(a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","L"]}}},f[63]={mnemonic:"SRL A",cycle:8,proc:function(){a.reg.A=a.reg.SRL(a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","A"]}}},f[62]={mnemonic:"SRL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","(HL)"]}}},g[62]={mnemonic:"SRL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IX+"+a.peek(b+2)+")"]}}},h[62]={mnemonic:"SRL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IY+"+a.peek(b+2)+")"]}}},i[111]={mnemonic:"RLD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.A,e=15&a.reg.A,f=c>>4&15,g=c>>0&15;a.reg.A=d|f,c=g<<4|e,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLD"]}}},i[103]={mnemonic:"RRD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.A,e=15&a.reg.A,f=c>>4&15,g=c>>0&15;a.reg.A=d|g,c=e<<4|f,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRD"]}}};var t,u,v=["B","C","D","E","H","L","(HL)","A"];for(t=0;t<v.length;t++)for(u=0;u<8;u++)f[64|u<<3|t]={mnemonic:"BIT "+u+","+v[t],cycle:function(a){return 6!=a?8:12}(t),proc:function(b,c){return 6!=c?function(){0!=(a.reg[v[c]]&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}:function(){var c=a.reg.getHL();0!=(a.memory.peek(c)&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}}(u,t),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["BIT",a,b]}}}(u,v[t])};var w=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["BIT",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};for(g[70]={mnemonic:"BIT 0,(IX+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,0,"IX")}},g[78]={mnemonic:"BIT 1,(IX+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,1,"IX")}},g[86]={mnemonic:"BIT 2,(IX+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,2,"IX")}},g[94]={mnemonic:"BIT 3,(IX+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,3,"IX")}},g[102]={mnemonic:"BIT 4,(IX+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,4,"IX")}},g[110]={mnemonic:"BIT 5,(IX+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,5,"IX")}},g[118]={mnemonic:"BIT 6,(IX+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,6,"IX")}},g[126]={mnemonic:"BIT 7,(IX+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,7,"IX")}},h[70]={mnemonic:"BIT 0,(IY+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,0,"IY")}},h[78]={mnemonic:"BIT 1,(IY+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,1,"IY")}},h[86]={mnemonic:"BIT 2,(IY+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,2,"IY")}},h[94]={mnemonic:"BIT 3,(IY+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,3,"IY")}},h[102]={mnemonic:"BIT 4,(IY+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,4,"IY")}},h[110]={mnemonic:"BIT 5,(IY+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,5,"IY")}},h[118]={mnemonic:"BIT 6,(IY+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,6,"IY")}},h[126]={mnemonic:"BIT 7,(IY+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return w(0,b,7,"IY")}},t=0;t<v.length;t++)for(u=0;u<8;u++)f[192|u<<3|t]={mnemonic:"SET "+u+","+v[t],cycle:function(a){return 6!=a?4:15}(t),proc:function(b,c){return 6!=c?function(){a.reg[v[c]]|=1<<b}:function(){var c=a.reg.getHL();a.memory.poke(c,a.memory.peek(c)|1<<b)}}(u,t),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["SET",a,b]}}}(u,v[t])};var x=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c+0),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["SET",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};g[198]={mnemonic:"SET 0,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return x(0,b,0,"IX")}},g[206]={mnemonic:"SET 1,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return x(0,b,1,"IX")}},g[214]={mnemonic:"SET 2,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return x(0,b,2,"IX")}},g[222]={mnemonic:"SET 3,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return x(0,b,3,"IX")}},g[230]={mnemonic:"SET 4,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return x(0,b,4,"IX")}},g[238]={mnemonic:"SET 5,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return x(0,b,5,"IX")}},g[246]={mnemonic:"SET 6,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return x(0,b,6,"IX")}},g[254]={mnemonic:"SET 7,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return x(0,b,7,"IX")}},h[198]={mnemonic:"SET 0,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return x(0,b,0,"IY")}},h[206]={mnemonic:"SET 1,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return x(0,b,1,"IY")}},h[214]={mnemonic:"SET 2,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return x(0,b,2,"IY")}},h[222]={mnemonic:"SET 3,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return x(0,b,3,"IY")}},h[230]={mnemonic:"SET 4,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return x(0,b,4,"IY")}},h[238]={mnemonic:"SET 5,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return x(0,b,5,"IY")}},h[246]={mnemonic:"SET 6,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return x(0,b,6,"IY")}},h[254]={mnemonic:"SET 7,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return x(0,b,7,"IY")}};var y=function(b,c){var d=~(1<<b);return function(){a.reg[c]&=d}},z=function(a,b){var c="BCDEHL A".indexOf(b),d=a<<3;return function(){return{code:[203,128|d|c],mnemonic:["RES",a,b]}}},A=function(b){var c=255&~(1<<b);return function(b){return function(){var c=a.reg.getHL(),d=a.memory.peek(c),e=d&b;a.memory.poke(c,e)}}(c)},B=function(a){var b=a<<3;return function(b){return function(){return{code:[203,134|b],mnemonic:["RES",a,"(HL)"]}}}(b)},C=function(b,c){var d=255&~(1<<b);return function(b){return function(d){var e=a.reg[c]+d,f=a.memory.peek(e),g=f&b;a.memory.poke(e,g)}}(d)},D=function(a,b){var c={IX:221,IY:253}[b];return function(c,d){return function(c,e){var f=c.peek(e+2),g=c.peek(e+3);return{code:[d,203,f,g],mnemonic:["RES",a,"("+b+"+"+f.HEX(2)+"H)"]}}}(0,c)};f[128]={mnemonic:"RES 0,B",cycle:8,proc:y(0,"B"),disasm:z(0,"B")},f[136]={mnemonic:"RES 1,B",cycle:8,proc:y(1,"B"),disasm:z(1,"B")},f[144]={mnemonic:"RES 2,B",cycle:8,proc:y(2,"B"),disasm:z(2,"B")},f[152]={mnemonic:"RES 3,B",cycle:8,proc:y(3,"B"),disasm:z(3,"B")},f[160]={mnemonic:"RES 4,B",cycle:8,proc:y(4,"B"),disasm:z(4,"B")},f[168]={mnemonic:"RES 5,B",cycle:8,proc:y(5,"B"),disasm:z(5,"B")},f[176]={mnemonic:"RES 6,B",cycle:8,proc:y(6,"B"),disasm:z(6,"B")},f[184]={mnemonic:"RES 7,B",cycle:8,proc:y(7,"B"),disasm:z(7,"B")},f[129]={mnemonic:"RES 0,C",cycle:8,proc:y(0,"C"),disasm:z(0,"C")},f[137]={mnemonic:"RES 1,C",cycle:8,proc:y(1,"C"),disasm:z(1,"C")},f[145]={mnemonic:"RES 2,C",cycle:8,proc:y(2,"C"),disasm:z(2,"C")},f[153]={mnemonic:"RES 3,C",cycle:8,proc:y(3,"C"),disasm:z(3,"C")},f[161]={mnemonic:"RES 4,C",cycle:8,proc:y(4,"C"),disasm:z(4,"C")},f[169]={mnemonic:"RES 5,C",cycle:8,proc:y(5,"C"),disasm:z(5,"C")},f[177]={mnemonic:"RES 6,C",cycle:8,proc:y(6,"C"),disasm:z(6,"C")},f[185]={mnemonic:"RES 7,C",cycle:8,proc:y(7,"C"),disasm:z(7,"C")},f[130]={mnemonic:"RES 0,D",cycle:8,proc:y(0,"D"),disasm:z(0,"D")},f[138]={mnemonic:"RES 1,D",cycle:8,proc:y(1,"D"),disasm:z(1,"D")},f[146]={mnemonic:"RES 2,D",cycle:8,proc:y(2,"D"),disasm:z(2,"D")},f[154]={mnemonic:"RES 3,D",cycle:8,proc:y(3,"D"),disasm:z(3,"D")},f[162]={mnemonic:"RES 4,D",cycle:8,proc:y(4,"D"),disasm:z(4,"D")},f[170]={mnemonic:"RES 5,D",cycle:8,proc:y(5,"D"),disasm:z(5,"D")},f[178]={mnemonic:"RES 6,D",cycle:8,proc:y(6,"D"),disasm:z(6,"D")},f[186]={mnemonic:"RES 7,D",cycle:8,proc:y(7,"D"),disasm:z(7,"D")},f[131]={mnemonic:"RES 0,E",cycle:8,proc:y(0,"E"),disasm:z(0,"E")},f[139]={mnemonic:"RES 1,E",cycle:8,proc:y(1,"E"),disasm:z(1,"E")},f[147]={mnemonic:"RES 2,E",cycle:8,proc:y(2,"E"),disasm:z(2,"E")},f[155]={mnemonic:"RES 3,E",cycle:8,proc:y(3,"E"),disasm:z(3,"E")},f[163]={mnemonic:"RES 4,E",cycle:8,proc:y(4,"E"),disasm:z(4,"E")},f[171]={mnemonic:"RES 5,E",cycle:8,proc:y(5,"E"),disasm:z(5,"E")},f[179]={mnemonic:"RES 6,E",cycle:8,proc:y(6,"E"),disasm:z(6,"E")},f[187]={mnemonic:"RES 7,E",cycle:8,proc:y(7,"E"),disasm:z(7,"E")},f[132]={mnemonic:"RES 0,H",cycle:8,proc:y(0,"H"),disasm:z(0,"H")},f[140]={mnemonic:"RES 1,H",cycle:8,proc:y(1,"H"),disasm:z(1,"H")},f[148]={mnemonic:"RES 2,H",cycle:8,proc:y(2,"H"),disasm:z(2,"H")},f[156]={mnemonic:"RES 3,H",cycle:8,proc:y(3,"H"),disasm:z(3,"H")},f[164]={mnemonic:"RES 4,H",cycle:8,proc:y(4,"H"),disasm:z(4,"H")},f[172]={mnemonic:"RES 5,H",cycle:8,proc:y(5,"H"),disasm:z(5,"H")},f[180]={mnemonic:"RES 6,H",cycle:8,proc:y(6,"H"),disasm:z(6,"H")},f[188]={mnemonic:"RES 7,H",cycle:8,proc:y(7,"H"),disasm:z(7,"H")},f[133]={mnemonic:"RES 0,L",cycle:8,proc:y(0,"L"),disasm:z(0,"L")},f[141]={mnemonic:"RES 1,L",cycle:8,proc:y(1,"L"),disasm:z(1,"L")},f[149]={mnemonic:"RES 2,L",cycle:8,proc:y(2,"L"),disasm:z(2,"L")},f[157]={mnemonic:"RES 3,L",cycle:8,proc:y(3,"L"),disasm:z(3,"L")},f[165]={mnemonic:"RES 4,L",cycle:8,proc:y(4,"L"),disasm:z(4,"L")},f[173]={mnemonic:"RES 5,L",cycle:8,proc:y(5,"L"),disasm:z(5,"L")},f[181]={mnemonic:"RES 6,L",cycle:8,proc:y(6,"L"),disasm:z(6,"L")},f[189]={mnemonic:"RES 7,L",cycle:8,proc:y(7,"L"),disasm:z(7,"L")},f[135]={mnemonic:"RES 0,A",cycle:8,proc:y(0,"A"),disasm:z(0,"A")},f[143]={mnemonic:"RES 1,A",cycle:8,proc:y(1,"A"),disasm:z(1,"A")},f[151]={mnemonic:"RES 2,A",cycle:8,proc:y(2,"A"),disasm:z(2,"A")},f[159]={mnemonic:"RES 3,A",cycle:8,proc:y(3,"A"),disasm:z(3,"A")},f[167]={mnemonic:"RES 4,A",cycle:8,proc:y(4,"A"),disasm:z(4,"A")},f[175]={mnemonic:"RES 5,A",cycle:8,proc:y(5,"A"),disasm:z(5,"A")},f[183]={mnemonic:"RES 6,A",cycle:8,proc:y(6,"A"),disasm:z(6,"A")},f[191]={mnemonic:"RES 7,A",cycle:8,proc:y(7,"A"),disasm:z(7,"A")},f[134]={mnemonic:"RES 0,(HL)",cycle:15,proc:A(0),disasm:B(0)},f[142]={mnemonic:"RES 1,(HL)",cycle:15,proc:A(1),disasm:B(1)},f[150]={mnemonic:"RES 2,(HL)",cycle:15,proc:A(2),disasm:B(2)},f[158]={mnemonic:"RES 3,(HL)",cycle:15,proc:A(3),disasm:B(3)},f[166]={mnemonic:"RES 4,(HL)",cycle:15,proc:A(4),disasm:B(4)},f[174]={mnemonic:"RES 5,(HL)",cycle:15,proc:A(5),disasm:B(5)},f[182]={mnemonic:"RES 6,(HL)",cycle:15,proc:A(6),disasm:B(6)},f[190]={mnemonic:"RES 7,(HL)",cycle:15,proc:A(7),disasm:B(7)},g[134]={mnemonic:"RES 0,(IX+d)",cycle:23,proc:C(0,"IX"),disasm:D(0,"IX")},g[142]={mnemonic:"RES 1,(IX+d)",cycle:23,proc:C(1,"IX"),disasm:D(1,"IX")},g[150]={mnemonic:"RES 2,(IX+d)",cycle:23,proc:C(2,"IX"),disasm:D(2,"IX")},g[158]={mnemonic:"RES 3,(IX+d)",cycle:23,proc:C(3,"IX"),disasm:D(3,"IX")},g[166]={mnemonic:"RES 4,(IX+d)",cycle:23,proc:C(4,"IX"),disasm:D(4,"IX")},g[174]={mnemonic:"RES 5,(IX+d)",cycle:23,proc:C(5,"IX"),disasm:D(5,"IX")},g[182]={mnemonic:"RES 6,(IX+d)",cycle:23,proc:C(6,"IX"),disasm:D(6,"IX")},g[190]={mnemonic:"RES 7,(IX+d)",cycle:23,proc:C(7,"IX"),disasm:D(7,"IX")},h[134]={mnemonic:"RES 0,(IY+d)",cycle:23,proc:C(0,"IY"),disasm:D(0,"IY")},h[142]={mnemonic:"RES 1,(IY+d)",cycle:23,proc:C(1,"IY"),disasm:D(1,"IY")},h[150]={mnemonic:"RES 2,(IY+d)",cycle:23,proc:C(2,"IY"),disasm:D(2,"IY")},h[158]={mnemonic:"RES 3,(IY+d)",cycle:23,proc:C(3,"IY"),disasm:D(3,"IY")},h[166]={mnemonic:"RES 4,(IY+d)",cycle:23,proc:C(4,"IY"),disasm:D(4,"IY")},h[174]={mnemonic:"RES 5,(IY+d)",cycle:23,proc:C(5,"IY"),disasm:D(5,"IY")},h[182]={mnemonic:"RES 6,(IY+d)",cycle:23,proc:C(6,"IY"),disasm:D(6,"IY")},h[190]={mnemonic:"RES 7,(IY+d)",cycle:23,proc:C(7,"IY"),disasm:D(7,"IY")};var E=function(a,b){var c,d,f,g=a.peek(b),h=[g],i=[],j=null;switch(192&g){case 0:switch(i.push("JR"),c=e.getSignedByte(a.peek(b+1)),j=b+c+2,h.push(255&c),c=c+2>=0?"+"+(c+2):""+(c+2),56&g){case 24:break;case 56:i.push("C");break;case 40:i.push("Z");break;case 48:i.push("NC");break;case 32:i.push("NZ");break;default:throw"UNKNOWN OPCODE"}i.push(j.HEX(4)+"H;("+c+")");break;case 192:switch(i.push("JP"),3&g){case 1:i.push("(HL)");break;case 2:switch(d=a.peek(b+1),f=a.peek(b+2),j=e.pair(f,d),h.push(d),h.push(f),56&g){case 0:i.push("NZ");break;case 8:i.push("Z");break;case 16:i.push("NC");break;case 24:i.push("C");break;case 32:i.push("PO");break;case 40:i.push("PE");break;case 48:i.push("P");break;case 56:i.push("M")}i.push(f.HEX(2)+d.HEX(2)+"H");break;case 3:d=a.peek(b+1),f=a.peek(b+2),j=e.pair(f,d),h.push(d),h.push(f),i.push(f.HEX(2)+d.HEX(2)+"H")}break;default:throw"UNKNOWN OPCODE"}return{code:h,mnemonic:i,ref_addr:j}};this.opecodeTable[195]={mnemonic:"JP nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.PC=b},disasm:E},this.opecodeTable[194]={mnemonic:"JP NZ,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()||(a.reg.PC=b)},disasm:E},this.opecodeTable[202]={mnemonic:"JP Z,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()&&(a.reg.PC=b)},disasm:E},this.opecodeTable[210]={mnemonic:"JP NC,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()||(a.reg.PC=b)},disasm:E},this.opecodeTable[218]={mnemonic:"JP C,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()&&(a.reg.PC=b)},disasm:E},this.opecodeTable[226]={mnemonic:"JP PO,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()||(a.reg.PC=b)},disasm:E},this.opecodeTable[234]={mnemonic:"JP PE,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()&&(a.reg.PC=b)},disasm:E},this.opecodeTable[242]={mnemonic:"JP P,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()||(a.reg.PC=b)},disasm:E},this.opecodeTable[250]={mnemonic:"JP M,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()&&(a.reg.PC=b)},disasm:E},this.opecodeTable[24]={mnemonic:"JR e",cycle:12,proc:function(){var b=a.fetch();a.reg.jumpRel(b)},disasm:E},this.opecodeTable[56]={mnemonic:"JR C,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()&&a.reg.jumpRel(b)},disasm:E},this.opecodeTable[40]={mnemonic:"JR Z,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagZ()&&a.reg.jumpRel(b)},disasm:E},this.opecodeTable[48]={mnemonic:"JR NC,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()||a.reg.jumpRel(b)},disasm:E},this.opecodeTable[32]={mnemonic:"JR NZ,e",proc:function(){var b=a.fetch();a.reg.flagZ()||a.reg.jumpRel(b)},cycle:12,disasm:E},this.opecodeTable[233]={mnemonic:"JP (HL)",cycle:4,proc:function(){a.reg.PC=a.reg.getHL()},disasm:E},b[233]={mnemonic:"JP (IX)",cycle:8,proc:function(){a.reg.PC=a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IX)"]}}},c[233]={mnemonic:"JP (IY)",cycle:8,proc:function(){a.reg.PC=a.reg.IY},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IY)"]}}},b[68]={mnemonic:"LD B,IXH",proc:function(){a.reg.B=a.reg.IX>>8&255},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","B","IXH"]}}},b[77]={mnemonic:"LD C,IXL",proc:function(){a.reg.C=255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","C","IXL"]}}},b[96]={mnemonic:"LD IXH,B",proc:function(){a.reg.IX=65280&a.reg.B<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","B"]}}},b[103]={mnemonic:"LD IXH,A",proc:function(){a.reg.IX=65280&a.reg.A<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","A"]}}},b[105]={mnemonic:"LD IXL,C",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.C},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","C"]}}},b[111]={mnemonic:"LD IXL,A",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.A},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","A"]}}},b[125]={mnemonic:"LD A,IXL",proc:function(){a.reg.A=255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","IXL"]}}},b[132]={mnemonic:"ADD A,IXH",proc:function(){a.reg.addAcc(a.reg.IX>>8&255)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXH"]}}},b[133]={mnemonic:"ADD A,IXL",proc:function(){a.reg.addAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXL"]}}},b[189]={mnemonic:"CP IXL",proc:function(){a.reg.compareAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CP","IXL"]}}},this.opecodeTable[16]={mnemonic:"DJNZ",cycle:13,proc:function(){var b=a.fetch();a.reg.decrement("B"),a.reg.B&&a.reg.jumpRel(b)},disasm:function(a,b){var c=e.getSignedByte(a.peek(b+1)),d=b+c+2;return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DJNZ",d.HEX(4)+"H;("+(c+2>=0?"+":"")+(c+2)+")"],ref_addr:d}}},this.opecodeTable[205]={mnemonic:"CALL nn",cycle:17,proc:function(){var b=a.fetchPair();a.pushPair(a.reg.PC),a.reg.PC=b},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[196]={mnemonic:"CALL NZ,nn",cycle:"NZ→17,Z→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NZ",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[204]={mnemonic:"CALL Z,nn",cycle:"Z→17,NZ→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","Z",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[212]={mnemonic:"CALL NC,nn",cycle:"NC→17, C→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NC",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[220]={mnemonic:"CALL C,nn",cycle:"C→17, NC→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","C",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[228]={mnemonic:"CALL PO,nn",cycle:"Parity Odd→17, Even→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PO",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[236]={mnemonic:"CALL PE,nn",cycle:"Parity Even→17, Odd→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PE",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[244]={mnemonic:"CALL P,nn",cycle:"P→17, M→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c)
;return{code:[a.peek(b),c,d],mnemonic:["CALL","P",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[252]={mnemonic:"CALL M,nn",cycle:"M→17, P→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),f=e.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","M",f.HEX(4)+"H"],ref_addr:f}}},this.opecodeTable[201]={mnemonic:"RET",cycle:10,proc:function(){a.reg.PC=a.popPair()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET"]}}},this.opecodeTable[192]={mnemonic:"RET NZ",cycle:"NZ→11, Z→5",proc:function(){return a.reg.flagZ()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NZ"]}}},this.opecodeTable[200]={mnemonic:"RET Z",cycle:"Z→5, NZ→11",proc:function(){return a.reg.flagZ()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","Z"]}}},this.opecodeTable[208]={mnemonic:"RET NC",cycle:"NC→11,C→5",proc:function(){return a.reg.flagC()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NC"]}}},this.opecodeTable[216]={mnemonic:"RET C",cycle:"C→11,NC→5",proc:function(){return a.reg.flagC()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","C"]}}},this.opecodeTable[224]={mnemonic:"RET PO",cycle:"Parity Odd→11, Parity Even→5",proc:function(){return a.reg.flagP()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PO"]}}},this.opecodeTable[232]={mnemonic:"RET PE",cycle:"Parity Even→11, Parity Odd→5",proc:function(){return a.reg.flagP()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PE"]}}},this.opecodeTable[240]={mnemonic:"RET P",cycle:"P→11, M→5",proc:function(){return a.reg.flagS()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","P"]}}},this.opecodeTable[248]={mnemonic:"RET M",cycle:"M→11, P→5",proc:function(){return a.reg.flagS()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","M"]}}},i[77]={mnemonic:"RETI",cycle:15,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETI"]}}},i[69]={mnemonic:"RETN",cycle:14,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETN"]}}};for(var F=[0,8,16,24,32,40,48,56],G=0;G<F.length;G++)this.opecodeTable[199|G<<3]={mnemonic:"RST "+F[G].HEX(2)+"H",proc:function(b){return function(){a.pushPair(a.reg.PC),a.reg.PC=b}}(F[G]),cycle:12,disasm:function(a){return function(b,c){return{code:[b.peek(c)],mnemonic:["RST",a.HEX(2)+"H"]}}}(F[G])};this.opecodeTable[219]={mnemonic:"IN A,(n)",cycle:11,proc:function(){a.reg.A=a.readIoPort(a.fetch())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","("+a.peek(b+1)+")"]}}},i[64]={mnemonic:"IN B,(C)",cycle:12,proc:function(){a.reg.B=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","B","(C)"]}}},i[72]={mnemonic:"IN C,(C)",cycle:12,proc:function(){a.reg.C=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","C","(C)"]}}},i[80]={mnemonic:"IN D,(C)",cycle:12,proc:function(){a.reg.D=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","D","(C)"]}}},i[88]={mnemonic:"IN E,(C)",cycle:12,proc:function(){a.reg.E=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","E","(C)"]}}},i[96]={mnemonic:"IN H,(C)",cycle:12,proc:function(){a.reg.H=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","H","(C)"]}}},i[104]={mnemonic:"IN L,(C)",cycle:12,proc:function(){a.reg.L=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","L","(C)"]}}},i[120]={mnemonic:"IN A,(C)",cycle:12,proc:function(){a.reg.A=a.readIoPort(a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","(C)"]}}},i[162]={mnemonic:"INI",cycle:16,proc:function(){a.reg.B=a.reg.B-1&255,a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.C)),a.postINI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INI"]}}},i[178]={mnemonic:"INIR",cycle:"21 x reg B",proc:function(){return a.reg.B=a.reg.B-1&255,a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.C)),a.postINI(),0!=a.reg.B&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INIR"]}}},i[170]={mnemonic:"IND",cycle:16,proc:function(){a.reg.B=a.reg.B-1&255,a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.C)),a.postIND()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IND"]}}},i[186]={mnemonic:"INDR",cycle:"21 x reg B",proc:function(){return a.reg.B=a.reg.B-1&255,a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.C)),a.postIND(),0!=a.reg.B&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INDR"]}}},this.opecodeTable[211]={mnemonic:"OUT (n),A",cycle:11,proc:function(){a.writeIoPort(a.fetch(),a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","("+a.peek(b+1)+")","A"]}}},i[65]={mnemonic:"OUT (C),B",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.B)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","B"]}}},i[73]={mnemonic:"OUT (C),C",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.C)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","C"]}}},i[81]={mnemonic:"OUT (C),D",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.D)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","D"]}}},i[89]={mnemonic:"OUT (C),E",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.E)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","E"]}}},i[97]={mnemonic:"OUT (C),H",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.H)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","H"]}}},i[105]={mnemonic:"OUT (C),L",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.L)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","L"]}}},i[121]={mnemonic:"OUT (C),A",cycle:12,proc:function(){a.writeIoPort(a.reg.C,a.reg.A)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","A"]}}},i[163]={mnemonic:"OUTI",cycle:16,proc:function(){a.reg.B=a.reg.B-1&255,a.writeIoPort(a.reg.C,a.memory.peek(a.reg.getHL())),a.postOUTI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTI"]}}},i[179]={mnemonic:"OTIR",cycle:"21 x reg B",proc:function(){return a.reg.B=a.reg.B-1&255,a.writeIoPort(a.reg.C,a.memory.peek(a.reg.getHL())),a.postOUTI(),0!=a.reg.B&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTIR"]}}},i[171]={mnemonic:"OUTD",cycle:16,proc:function(){a.reg.B=a.reg.B-1&255,a.writeIoPort(a.reg.C,a.memory.peek(a.reg.getHL())),a.postOUTD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTD"]}}},i[187]={mnemonic:"OTDR",cycle:"21 x reg B",proc:function(){return a.reg.B=a.reg.B-1&255,a.writeIoPort(a.reg.C,a.memory.peek(a.reg.getHL())),a.postOUTD(),0!=a.reg.B&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTDR"]}}}},b.exports=context.exportModule("Z80",f)}()},{"./bin-util.js":10,"./memory-block.js":14,"./register.js":15}],12:[function(a,b,c){!function(){var c=getModule("Z80BinUtil")||a("./bin-util.js"),d=function(){};d.prototype.create=function(a){a=a||{},this.onPeek=a.onPeek||function(){},this.onPoke=a.onPoke||function(){},this.size=a.size||65536,this.startAddr=a.startAddr||0},d.prototype.peekByte=function(){var a="Error: peekByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.pokeByte=function(){var a="Error: pokeByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.clear=function(){for(var a=0;a<this.size;a++)this.pokeByte(0)},d.prototype.peek=function(a){var b=this.peekByte(a),c=this.onPeek.call(this,a,b);return null!=c&&void 0!=c&&(b=c),b},d.prototype.poke=function(a,b){this.pokeByte(a,b),this.onPoke.call(this,a,this.peekByte(a))},d.prototype.peekPair=function(a){var b=this.peek(a+1),d=this.peek(a+0);return c.pair(b,d)},b.exports=context.exportModule("IMem",d)}()},{"./bin-util.js":10}],13:[function(a,b,c){var d=getModule("IMem")||a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size),this.memblk={}},e.prototype.setMemoryBlock=function(a,b){var c,d,e;if(null==b){if(a in this.memblk){for(c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=null;delete this.memblk[a]}}else for(this.memblk[a]=b,c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=b},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535].peek(a)},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535].poke(a,255&b)},b.exports=e},{"./imem":12}],14:[function(a,b,c){var d=getModule("IMem")||a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size)},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535]},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535]=255&b},b.exports=e},{"./imem":12}],15:[function(a,b,c){!function(){var c=getModule("Z80BinUtil")||a("./bin-util.js"),d=function(){this.B=0,this.C=0,this.D=0,this.E=0,this.H=0,this.L=0,this.A=0,this.F=0,this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0};!function(){var a,b=new Array(512),e=new Array(512),f=new Array(512);for(a=0;a<256;++a){var g=0;0==a&&(g|=64),128&a&&(g|=128);var h=0;1&a&&++h,2&a&&++h,4&a&&++h,8&a&&++h,16&a&&++h,32&a&&++h,64&a&&++h,128&a&&++h,b[a]=1&h?0:4,e[a]=g,f[a]=g|b[a]}for(a=0;a<256;++a)e[a+256]=1|e[a],f[a+256]=1|f[a],b[a+256]=1|b[a];d.prototype.clear=function(){this.B=0,this.C=0,this.D=0,this.E=0,this.H=0,this.L=0,this.A=0,this.F=0,this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0},d.prototype.setFrom=function(a){this.B=a.B,this.C=a.C,this.D=a.D,this.E=a.E,this.H=a.H,this.L=a.L,this.A=a.A,this.F=a.F,this.PC=a.PC,this.SP=a.SP,this.IX=a.IX,this.IY=a.IY,this.R=a.R,this.I=a.I},d.prototype.setPair=function(a,b){"SP"==a||"PC"==a||"IX"==a||"IY"==a?this[a]=b:(this[a.substring(1,2)]=c.lobyte(b),this[a.substring(0,1)]=c.hibyte(b))},d.prototype.debugDump=function(){console.info("B:"+this.B.HEX(2)+"H "+this.B+" C:"+this.C.HEX(2)+"H "+this.C+" / "+this.getBC()),console.info("D:"+this.D.HEX(2)+"H "+this.D+" E:"+this.E.HEX(2)+"H "+this.E+" / "+this.getDE()),console.info("H:"+this.H.HEX(2)+"H "+this.H+" L:"+this.L.HEX(2)+"H "+this.L+" / "+this.getHL()),console.info("A:"+this.A.HEX(2)+"H "+this.A),console.info("SZ-HPN-C"),console.info(this.F.bin(8)),console.info("PC:"+this.PC.HEX(4)+"H "+this.PC.bin(16)+"(2) "+this.PC),console.info("SP:"+this.SP.HEX(4)+"H "+this.SP.bin(16)+"(2) "+this.SP),console.info("I:"+this.I.HEX(2)+"H "+this.I.bin(8)+"(2) "+this.I+" R:"+this.R.HEX(2)+"H "+this.R.bin(8)+"(2) "+this.R)},d.prototype.getHL=function(){return c.pair(this.H,this.L)},d.prototype.getBC=function(){return c.pair(this.B,this.C)},d.prototype.getDE=function(){return c.pair(this.D,this.E)},d.prototype.getAF=function(){return c.pair(this.A,this.F)},d.prototype.setHL=function(a){this.H=c.hibyte(a),this.L=c.lobyte(a)},d.prototype.setBC=function(a){this.B=c.hibyte(a),this.C=c.lobyte(a)},d.prototype.setDE=function(a){this.D=c.hibyte(a),this.E=c.lobyte(a)},d.prototype.setAF=function(a){this.A=c.hibyte(a),this.F=c.lobyte(a)},d.prototype.testFlag=function(a){return 0!=(this.F&a)},d.prototype.flagS=function(){return this.testFlag(128)},d.prototype.flagZ=function(){return this.testFlag(64)},d.prototype.flagH=function(){return this.testFlag(16)},d.prototype.flagP=function(){return this.testFlag(4)},d.prototype.flagN=function(){return this.testFlag(2)},d.prototype.flagC=function(){return this.testFlag(1)},d.prototype.setFlag=function(a){this.F|=a},d.prototype.setFlagS=function(){this.setFlag(128)},d.prototype.setFlagZ=function(){this.setFlag(64)},d.prototype.setFlagH=function(){this.setFlag(16)},d.prototype.setFlagP=function(){this.setFlag(4)},d.prototype.setFlagN=function(){this.setFlag(2)},d.prototype.setFlagC=function(){this.setFlag(1)},d.prototype.clearFlag=function(a){this.F&=~a},d.prototype.clearFlagS=function(){this.clearFlag(128)},d.prototype.clearFlagZ=function(){this.clearFlag(64)},d.prototype.clearFlagH=function(){this.clearFlag(16)},d.prototype.clearFlagP=function(){this.clearFlag(4)},d.prototype.clearFlagN=function(){this.clearFlag(2)},d.prototype.clearFlagC=function(){this.clearFlag(1)},d.prototype.ADD_HL=function(a){this.setHL(this._ADD(this.getHL(),a))},d.prototype.ADC_HL=function(a){var b=this.getHL(),c=b+a+(1&this.F);this.F=(4096&(b^c^a))>>8|c>>16&1|(32768&c)>>8|(65535&c?0:64)|((a^b^32768)&(a^c)&32768)>>13,this.setHL(65535&c)},d.prototype.SBC_HL=function(a){var b=this.getHL(),c=b-a-(1&this.F);this.F=(4096&(b^c^a))>>8|c>>16&1|(32768&c)>>8|(65535&c?0:64)|(a&b&(a^c)&32768)>>13|2,this.setHL(65535&c)},d.prototype.ADD_IX=function(a){this.IX=this._ADD(this.IX,a)},d.prototype.ADD_IY=function(a){this.IY=this._ADD(this.IY,a)},d.prototype._ADD=function(a,b){var c=a+b;return this.F=196&this.F|(4096&(a^c^b))>>8|c>>16&1,65535&c},d.prototype.jumpRel=function(a){this.PC+=c.getSignedByte(a)},d.prototype.CPL=function(){this.A=255&(255^this.A),this.F=18},d.prototype.NEG=function(){var a=this.A;this.A=0,this.subAcc(a)},d.prototype.addAcc=function(a){var b=this.A+a;this.F=e[255&b]|(256&b)>>8|16&(this.A^b^a)|((a^this.A^128)&(a^b)&128)>>5,this.A=255&b},d.prototype.addAccWithCarry=function(a){var b=this.A+a+(1&this.F);this.F=e[255&b]|(256&b)>>8|16&(this.A^b^a)|((a^this.A^128)&(a^b)&128)>>5,this.A=255&b},d.prototype.subAcc=function(a){var b=this.A-a&511;this.F=e[255&b]|(256&b)>>8|2|16&(this.A^b^a)|((a^this.A^128)&(a^b)&128)>>5,this.A=255&b},d.prototype.subAccWithCarry=function(a){var b=this.A-a-(1&this.F)&511;this.F=e[255&b]|(256&b)>>8|2|16&(this.A^b^a)|((a^this.A^128)&(a^b)&128)>>5,this.A=255&b},d.prototype.andAcc=function(a){this.A&=255&a,this.F=16|f[this.A]},d.prototype.orAcc=function(a){this.A|=255&a,this.F=f[this.A]},d.prototype.xorAcc=function(a){this.A^=255&a,this.F=f[this.A]},d.prototype.increment=function(a){this[a]=this.getINCValue(this[a])},d.prototype.getINCValue=function(a){return a=a+1&255,this.F=1&this.F|e[a]|(128==a?4:0)|(15&a?0:16),a},d.prototype.decrement=function(a){this[a]=this.getDECValue(this[a])},d.prototype.getDECValue=function(a){return this.F=1&this.F|2|(128==a?4:0)|(15&a?0:16),a=a-1&255,this.F|=e[a],a},d.prototype.compareAcc=function(a){var b=this.A-a;this.F=e[255&b]|(256&b)>>8|2|16&(this.A^b^a)|((a^this.A)&(a^b)&128)>>5},d.prototype.CPI=function(a){var b=this.A-a;this.incHL(),this.decBC(),this.F=1&this.F|e[255&b]|16&(this.A^a^b)|(this.getBC()?4:0)|2},d.prototype.CPD=function(a){var b=this.A-a;this.decHL(),this.decBC(),this.F=1&this.F|e[255&b]|16&(this.A^a^b)|(this.getBC()?4:0)|2},d.prototype.RLCA=function(){this.A=255&(this.A<<1|(128&this.A)>>7),this.F=236&this.F|1&this.A},d.prototype.RLC=function(a){var b=a>>7;return a=255&(a<<1|b),this.F=f[a]|b,a},d.prototype.RLA=function(){var a=1&this.F;this.F=236&this.F|(128&this.A)>>7,this.A=255&(this.A<<1|a)},d.prototype.RL=function(a){var b=a>>7;return a=255&(a<<1|1&this.F),this.F=f[a]|b,a},d.prototype.RRCA=function(){this.F=236&this.F|1&this.A,this.A=this.A>>1|this.A<<7&255},d.prototype.RRC=function(a){var b=1&a;return a=a>>1|b<<7&255,this.F=f[a]|b,a},d.prototype.RRA=function(){var a=1&this.F;this.F=236&this.F|1&this.A,this.A=this.A>>1|a<<7},d.prototype.RR=function(a){var b=1&a;return a=a>>1|this.F<<7&255,this.F=f[a]|b,a},d.prototype.SLA=function(a){var b=a>>7;return a=a<<1&255,this.F=f[a]|b,a},d.prototype.SRA=function(a){var b=1&a;return a=a>>1|128&a,this.F=f[a]|b,a},d.prototype.SRL=function(a){var b=1&a;return a>>=1,this.F=f[a]|b,a},d.prototype.onReadIoPort=function(a){this.F=1&this.F|f[a]},d.prototype.postIND=function(){this.decHL(),this.F=this.B?2:66},d.prototype.postINI=function(){this.incHL(),this.F=this.B?2:66},d.prototype.postOUTD=function(){this.decHL(),this.F=this.B?2:66},d.prototype.postOUTI=function(){this.incHL(),this.F=this.B?2:66},d.prototype.LD_A_I=function(a){this.A=this.I,this.F=1&this.F|e[this.I]|a<<2},d.prototype.LD_A_R=function(a,b){this.A=127&this.R|128&b,this.F=1&this.F|e[this.A]|a<<2},d.prototype.incBC=function(){this.setBC(this.getBC()+1&65535)},d.prototype.decBC=function(){this.setBC(this.getBC()-1&65535)},d.prototype.incHL=function(){this.setHL(this.getHL()+1&65535)},d.prototype.decHL=function(){this.setHL(this.getHL()-1&65535)},d.prototype.incDE=function(){this.setDE(this.getDE()+1&65535)},d.prototype.decDE=function(){this.setDE(this.getDE()-1&65535)},d.prototype.onLDD=function(){this.decDE(),this.decHL(),this.decBC(),this.F=233&this.F|(this.getBC()?4:0)},d.prototype.onLDI=function(){this.incDE(),this.incHL(),this.decBC(),this.F=233&this.F|(this.getBC()?4:0)},d.REG_r_ID2NAME={0:"B",1:"C",2:"D",3:"E",4:"H",5:"L",7:"A"},d.CONDITION_INDEX={NZ:0,Z:1,NC:2,C:3,PO:4,PE:5,P:6,N:7},d.prototype.DAA=function(){var a=this.A;1&this.F&&(a|=256),16&this.F&&(a|=512),2&this.F&&(a|=1024);var b=65535&i[a];this.A=b>>8&255,this.F=b>>0&255};var i=[68,256,512,772,1024,1284,1540,1792,2056,2316,4112,4372,4628,4880,5140,5392,4096,4356,4612,4864,5124,5376,5632,5892,6156,6408,8240,8500,8756,9008,9268,9520,8224,8484,8740,8992,9252,9504,9760,10020,10284,10536,12340,12592,12848,13108,13360,13620,12324,12576,12832,13092,13344,13604,13860,14112,14376,14636,16400,16660,16916,17168,17428,17680,16384,16644,16900,17152,17412,17664,17920,18180,18444,18696,20500,20752,21008,21268,21520,21780,20484,20736,20992,21252,21504,21764,22020,22272,22536,22796,24628,24880,25136,25396,25648,25908,24612,24864,25120,25380,25632,25892,26148,26400,26664,26924,28720,28980,29236,29488,29748,3e4,28704,28964,29220,29472,29732,29984,30240,30500,30764,31016,-32624,-32364,-32108,-31856,-31596,-31344,-32640,-32380,-32124,-31872,-31612,-31360,-31104,-30844,-30580,-30328,-28524,-28272,-28016,-27756,-27504,-27244,-28540,-28288,-28032,-27772,-27520,-27260,-27004,-26752,-26488,-26228,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,24613,24865,25121,25381,25633,25893,26149,26401,26665,26925,28721,28981,29237,29489,29749,30001,28705,28965,29221,29473,29733,29985,30241,30501,30765,31017,-32623,-32363,-32107,-31855,-31595,-31343,-32639,-32379,-32123,-31871,-31611,-31359,-31103,-30843,-30579,-30327,-28523,-28271,-28015,-27755,-27503,-27243,-28539,-28287,-28031,-27771,-27519,-27259,-27003,-26751,-26487,-26227,-24395,-24143,-23887,-23627,-23375,-23115,-24411,-24159,-23903,-23643,-23391,-23131,-22875,-22623,-22359,-22099,-20303,-20043,-19787,-19535,-19275,-19023,-20319,-20059,-19803,-19551,-19291,-19039,-18783,-18523,-18259,-18007,-16235,-15983,-15727,-15467,-15215,-14955,-16251,-15999,-15743,-15483,-15231,-14971,-14715,-14463,-14199,-13939,-12143,-11883,-11627,-11375,-11115,-10863,-12159,-11899,-11643,-11391,-11131,-10879,-10623,-10363,-10099,-9847,-8015,-7755,-7499,-7247,-6987,-6735,-8031,-7771,-7515,-7263,-7003,-6751,-6495,-6235,-5971,-5719,-3915,-3663,-3407,-3147,-2895,-2635,-3931,-3679,-3423,-3163,-2911,-2651,-2395,-2143,-1879,-1619,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,1540,1792,2056,2316,2572,2824,3084,3336,3592,3852,4112,4372,4628,4880,5140,5392,5632,5892,6156,6408,6664,6924,7176,7436,7692,7944,8240,8500,8756,9008,9268,9520,9760,10020,10284,10536,10792,11052,11304,11564,11820,12072,12340,12592,12848,13108,13360,13620,13860,14112,14376,14636,14892,15144,15404,15656,15912,16172,16400,16660,16916,17168,17428,17680,17920,18180,18444,18696,18952,19212,19464,19724,19980,20232,20500,20752,21008,21268,21520,21780,22020,22272,22536,22796,23052,23304,23564,23816,24072,24332,24628,24880,25136,25396,25648,25908,26148,26400,26664,26924,27180,27432,27692,27944,28200,28460,28720,28980,29236,29488,29748,3e4,30240,30500,30764,31016,31272,31532,31784,32044,32300,32552,-32624,-32364,-32108,-31856,-31596,-31344,-31104,-30844,-30580,-30328,-30072,-29812,-29560,-29300,-29044,-28792,-28524,-28272,-28016,-27756,-27504,-27244,-27004,-26752,-26488,-26228,-25972,-25720,-25460,-25208,-24952,-24692,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,26149,26401,26665,26925,27181,27433,27693,27945,28201,28461,28721,28981,29237,29489,29749,30001,30241,30501,30765,31017,31273,31533,31785,32045,32301,32553,-32623,-32363,-32107,-31855,-31595,-31343,-31103,-30843,-30579,-30327,-30071,-29811,-29559,-29299,-29043,-28791,-28523,-28271,-28015,-27755,-27503,-27243,-27003,-26751,-26487,-26227,-25971,-25719,-25459,-25207,-24951,-24691,-24395,-24143,-23887,-23627,-23375,-23115,-22875,-22623,-22359,-22099,-21843,-21591,-21331,-21079,-20823,-20563,-20303,-20043,-19787,-19535,-19275,-19023,-18783,-18523,-18259,-18007,-17751,-17491,-17239,-16979,-16723,-16471,-16235,-15983,-15727,-15467,-15215,-14955,-14715,-14463,-14199,-13939,-13683,-13431,-13171,-12919,-12663,-12403,-12143,-11883,-11627,-11375,-11115,-10863,-10623,-10363,-10099,-9847,-9591,-9331,-9079,-8819,-8563,-8311,-8015,-7755,-7499,-7247,-6987,-6735,-6495,-6235,-5971,-5719,-5463,-5203,-4951,-4691,-4435,-4183,-3915,-3663,-3407,-3147,-2895,-2635,-2395,-2143,-1879,-1619,-1363,-1111,-851,-599,-343,-83,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,70,258,514,774,1026,1286,1542,1794,2058,2318,1026,1286,1542,1794,2058,2318,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,5126,5378,5634,5894,6158,6410,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,9254,9506,9762,10022,10286,10538,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,13346,13606,13862,14114,14378,14638,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,17414,17666,17922,18182,18446,18698,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,21506,21766,22022,22274,22538,22798,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,25634,25894,26150,26402,26666,26926,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,29734,29986,30242,30502,30766,31018,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-31610,-31358,-31102,-30842,-30578,-30326,-28538,-28286,-28030,-27770,-27518,-27258,-27002,-26750,-26486,-26226,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-23389,-23129,-22873,-22621,-22357,-22097,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-19289,-19037,-18781,-18521,-18257,-18005,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-15229,-14969,-14713,-14461,-14197,-13937,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-11129,-10877,-10621,-10361,-10097,-9845,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-7001,-6749,-6493,-6233,-5969,-5717,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-2909,-2649,-2393,-2141,-1877,-1617,71,259,515,775,1027,1287,1543,1795,2059,2319,1027,1287,1543,1795,2059,2319,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,5127,5379,5635,5895,6159,6411,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,9255,9507,9763,10023,10287,10539,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-1346,-1094,-834,-582,-326,-66,70,258,514,774,1026,1286,1542,1794,2058,2318,2590,2842,3102,3354,3610,3870,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,6682,6942,7194,7454,7710,7962,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,10810,11070,11322,11582,11838,12090,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,14910,15162,15422,15674,15930,16190,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,18970,19230,19482,19742,19998,20250,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,23070,23322,23582,23834,24090,24350,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,27198,27450,27710,27962,28218,28478,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,31290,31550,31802,32062,32318,32570,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-30054,-29794,-29542,-29282,-29026,-28774,-28538,-28286,-28030,-27770,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-25953,-25701,-25441,-25189,-24933,-24673,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-21825,-21573,-21313,-21061,-20805,-20545,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-17733,-17473,-17221,-16961,-16705,-16453,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-13665,-13413,-13153,-12901,-12645,-12385,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-9573,-9313,-9061,-8801,-8545,-8293,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-5445,-5185,-4933,-4673,-4417,-4165,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-1345,-1093,-833,-581,-325,-65,71,259,515,775,1027,1287,1543,1795,2059,2319,2591,2843,3103,3355,3611,3871,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,6683,6943,7195,7455,7711,7963,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,10811,11071,11323,11583,11839,12091,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225]}(),b.exports=context.exportModule("Z80_Register",d)}()},{"./bin-util.js":10}],16:[function(a,b,c){function d(a){var b=0;switch(a){case"IX":b=221;break;case"IY":b=253}return b}function e(a){var b=0;switch(a){case"ADD":b=0;break;case"ADC":b=1;break;case"SUB":b=2;break;case"SBC":b=3;break;case"AND":b=4;break;case"OR":b=6;break;case"XOR":b=5;break;case"CP":b=7}return b}function f(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"SP":b=3}return b}function g(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"AF":b=3}return b}function h(a){var b=null;switch(a){case"B":b=0;break;case"C":b=1;break;case"D":b=2;break;case"E":b=3;break;case"H":b=4;break;case"L":b=5;break;case"A":b=7}return b}function i(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(null!=b[c])if("string"==typeof b[c]){if(a[c]!=b[c])return!1}else if("object"==typeof b[c]&&"RegExp"==b[c].constructor.name&&!b[c].test(a[c]))return!1;return!0}var j=function(a,b,c){this.address=b,this.bytecode=[],this.label=null,this.mnemonic=null,this.operand=[],this.comment=null;for(var d=j.tokenize(a),e=-1,f=-1,g=0;g<d.length;g++)switch(d[g]){case":":e<0&&f<0&&(e=g);break;case";":f<0&&(f=g)}if(e>=0&&(this.label=d.slice(0,e).join(""),d.splice(0,e+1),f-=e+1),f>=0&&(this.comment=d.slice(f).join(""),d.splice(f)),d.length>0&&(this.mnemonic=d[0],this.operand=d.slice(1).join("")),d.length>0)try{this.bytecode=this.assembleMnemonic(d,this.label,c)}catch(a){this.comment+="*** ASSEMBLE ERROR - "+a}};j.prototype.getNextAddress=function(){var a=this.address;return null!=this.bytecode&&(a+=this.bytecode.length),a},j.prototype.resolveAddress=function(a){for(var b=0;b<this.bytecode.length;b++)"function"==typeof this.bytecode[b]&&(this.bytecode[b]=this.bytecode[b](a))},j.tokenize=function(a){var b=0,c=a.length,d=0,e=[],f="";for(a=a.toUpperCase();d<c;){var g=a.charAt(d);switch(b){case 0:if(/\s/.test(g))d++;else if("-"==g||"+"==g)f+=g,d++,
b=2;else if(/[0-9]/.test(g))b=2;else if(/[A-Z_\?\.\*#!\$]/.test(g))f+=g,d++,b=3;else if("'"==g)f+=g,d++,b=4;else if("("==g||")"==g||","==g||"+"==g||":"==g)e.push(g),d++;else{if(";"!=g)throw"unrecognized char "+g+" at column "+d;e.push(g),d++;var h=a.substr(d);e.push(h),d+=h.length,f=""}break;case 2:/[0-9A-F]/.test(g)?(f+=g,d++):"H"==g?(f+=g,d++,e.push(f),f="",b=0):(e.push(f),f="",b=0);break;case 3:/[A-Z_0-9\?\.\*#!\$']/.test(g)?(f+=g,d++):(e.push(f),f="",b=0);break;case 4:"\\"==g?++d<c&&(g=a.charAt(d),f+=g,d++):"'"!=g?(f+=g,d++):(f+=g,d++,e.push(f),f="",b=0);break;default:throw"unrecognized status "}}return""!=f&&e.push(f),e},j.prototype.assembleMnemonic=function(a,b,c){if(i(a,["ORG",null]))return this.address=j._parseNumLiteral(a[1]),[];if(i(a,["ENT"]))return c[b]=this.address,[];if(i(a,["EQU",null])){if(null==b||""==b)throw"empty label for EQU";return c[b]=j._parseNumLiteral(a[1]),[]}if(i(a,["DEFB",null]))return[j.parseNumLiteral(a[1])];if(i(a,["DEFW",null]))return j.parseNumLiteralPair(a[1]);if(i(a,["DEFS",null])){var k=j._parseNumLiteral(a[1]);if(k<0)throw"negative DEFS number "+a[1];for(var l=[],m=0;m<k;m++)l.push(0);return l}if(i(a,["LD","A",",","I"]))return[237,87];if(i(a,["LD","A",",","R"]))return[237,95];if(i(a,["LD","I",",","A"]))return[237,71];if(i(a,["LD","R",",","A"]))return[237,79];if(i(a,["LD","B",",","IXH"]))return[221,68];if(i(a,["LD","C",",","IXL"]))return[221,77];if(i(a,["LD","A",",","IXL"]))return[221,125];if(i(a,["ADD","A",",","IXH"]))return[221,132];if(i(a,["ADD","A",",","IXL"]))return[221,133];if(i(a,["LD",/^[BCDEHLA]$/,",",/^[BCDEHLA]$/])){return[64|h(a[1])<<3|h(a[3])<<0]}if(i(a,["LD",/^[BCDEHLA]$/,",",null]))return function(){return[6|h(a[1])<<3,j.parseNumLiteral(a[3])]}();if(i(a,["LD",/^[BCDEHLA]$/,",","(","HL",")"]))return function(){return[70|h(a[1])<<3]}();if(i(a,["LD","(","HL",")",",",/^[BCDEHLA]$/]))return function(){return[112|h(a[5])]}();if(i(a,["LD","(","HL",")",",",null]))return function(){return[54,j.parseNumLiteral(a[5])]}();if(i(a,["LD","A",",","(",/^(BC|DE)$/,")"]))return function(){return[10|f(a[4])<<4]}();if(i(a,["LD","A",",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[58,b[0],b[1]]}();if(i(a,["LD","(",/^(BC|DE)$/,")",",","A"]))return function(){return[2|f(a[2])<<4]}();if(i(a,["LD","(",null,")",",","A"]))return function(){var b=j.parseNumLiteralPair(a[2]);return[50,b[0],b[1]]}();if(i(a,["LD","SP",",","HL"]))return[249];if(i(a,["LD","SP",",","IX"]))return[221,249];if(i(a,["LD","SP",",","IY"]))return[253,249];if(i(a,["LD",/^(BC|DE|HL|SP)$/,",",null]))return function(){var b=f(a[1]),c=j.parseNumLiteralPair(a[3]);return[1|b<<4,c[0],c[1]]}();if(i(a,["LD","HL",",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[42,b[0],b[1]]}();if(i(a,["LD","BC",",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[237,75,b[0],b[1]]}();if(i(a,["LD","DE",",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[237,91,b[0],b[1]]}();if(i(a,["LD","SP",",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[237,123,b[0],b[1]]}();if(i(a,["LD","(",null,")",",","HL"]))return function(){var b=j.parseNumLiteralPair(a[2]);return[34,b[0],b[1]]}();if(i(a,["LD","(",null,")",",","BC"]))return function(){var b=j.parseNumLiteralPair(a[2]);return[237,67,b[0],b[1]]}();if(i(a,["LD","(",null,")",",","DE"]))return function(){var b=j.parseNumLiteralPair(a[2]);return[237,83,b[0],b[1]]}();if(i(a,["LD","(",null,")",",","SP"]))return function(){var b=j.parseNumLiteralPair(a[2]);return[237,115,b[0],b[1]]}();if(i(a,["PUSH",/^(BC|DE|HL|AF)$/]))return function(){return[197|g(a[1])<<4]}();if(i(a,["POP",/^(BC|DE|HL|AF)$/]))return function(){return[193|g(a[1])<<4]}();if(i(a,["LD","IXH",",","B"]))return[221,96];if(i(a,["LD","IXL",",","C"]))return[221,105];if(i(a,["LD","IXH",",","A"]))return[221,103];if(i(a,["LD","IXL",",","A"]))return[221,111];if(i(a,["CP","IXL"]))return[221,189];if(i(a,["EX","DE",",","HL"]))return[235];if(i(a,["EX","AF",",","AF'"]))return[8];if(i(a,["EXX"]))return[217];if(i(a,["EX","(","SP",")",",","HL"]))return[227];if(i(a,["LDI"]))return[237,160];if(i(a,["LDIR"]))return[237,176];if(i(a,["LDD"]))return[237,168];if(i(a,["LDDR"]))return[237,184];if(i(a,["CPI"]))return[237,161];if(i(a,["CPIR"]))return[237,177];if(i(a,["CPD"]))return[237,169];if(i(a,["CPDR"]))return[237,185];if(i(a,["DAA"]))return[39];if(i(a,["CPL"]))return[47];if(i(a,["NEG"]))return[237,68];if(i(a,["CCF"]))return[63];if(i(a,["SCF"]))return[55];if(i(a,["NOP"]))return[0];if(i(a,["HALT"]))return[118];if(i(a,["DI"]))return[243];if(i(a,["EI"]))return[251];if(i(a,["IM0"]))return[237,70];if(i(a,["IM1"]))return[237,86];if(i(a,["IM2"]))return[237,94];if(i(a,["IM","0"]))return[237,70];if(i(a,["IM","1"]))return[237,86];if(i(a,["IM","2"]))return[237,94];if(i(a,[/^(ADD|ADC|SBC)$/,"HL",",",/^(BC|DE|HL|SP)$/])){var n=0;switch(a[3]){case"BC":n=0;break;case"DE":n=1;break;case"HL":n=2;break;case"SP":n=3}switch(a[0]){case"ADD":return[9|n<<4];case"ADC":return[237,74|n<<4];case"SBC":return[237,66|n<<4]}return[]}if(i(a,["ADD","IX",",",/^(BC|DE|IX|SP)$/])){switch(a[3]){case"BC":return[221,9];case"DE":return[221,25];case"IX":return[221,41];case"SP":return[221,57]}return[]}if(i(a,["ADD","IY",",",/^(BC|DE|IY|SP)$/])){switch(a[3]){case"BC":return[253,9];case"DE":return[253,25];case"IY":return[253,41];case"SP":return[253,57]}return[]}if(i(a,[/^(INC|DEC)$/,/^(BC|DE|HL|SP|IX|IY)$/])){switch(a[0]){case"INC":switch(a[1]){case"BC":return[3];case"DE":return[19];case"HL":return[35];case"SP":return[51];case"IX":return[221,35];case"IY":return[253,35]}break;case"DEC":switch(a[1]){case"BC":return[11];case"DE":return[27];case"HL":return[43];case"SP":return[59];case"IX":return[221,43];case"IY":return[253,43]}}return[]}if(i(a,["RLCA"]))return[7];if(i(a,["RLA"]))return[23];if(i(a,["RRCA"]))return[15];if(i(a,["RRA"]))return[31];if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,/^[BCDEHLA]$/])){switch(a[0]){case"RLC":return[203,0|h(a[1])];case"RL":return[203,16|h(a[1])];case"RRC":return[203,8|h(a[1])];case"RR":return[203,24|h(a[1])];case"SLA":return[203,32|h(a[1])];case"SRA":return[203,40|h(a[1])];case"SRL":return[203,56|h(a[1])]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(","HL",")"])){switch(a[0]){case"RLC":return[203,6];case"RL":return[203,22];case"RRC":return[203,14];case"RR":return[203,30];case"SLA":return[203,38];case"SRA":return[203,46];case"SRL":return[203,62]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[3]?4:3,c=0;switch(a[2]){case"IX":c=221;break;case"IY":c=253}var d=j.parseNumLiteral(a[b]);switch(a[0]){case"RLC":return[c,203,d,6];case"RL":return[c,203,d,22];case"RRC":return[c,203,d,14];case"RR":return[c,203,d,30];case"SLA":return[c,203,d,38];case"SRA":return[c,203,d,46];case"SRL":return[c,203,d,62]}return[]}();if(i(a,["RLD"]))return[237,111];if(i(a,["RRD"]))return[237,103];if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",",/^[BCDEHLA]$/])){switch(a[0]){case"BIT":return[203,64|a[1]<<3|h(a[3])];case"SET":return[203,192|a[1]<<3|h(a[3])];case"RES":return[203,128|a[1]<<3|h(a[3])]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(","HL",")"])){switch(a[0]){case"BIT":return[203,70|a[1]<<3];case"SET":return[203,198|a[1]<<3];case"RES":return[203,134|a[1]<<3]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[5]?6:5,c=0;switch(a[4]){case"IX":c=221;break;case"IY":c=253}var d=j.parseNumLiteral(a[b]);switch(a[0]){case"BIT":return[c,203,d,70|a[1]<<3];case"SET":return[c,203,d,198|a[1]<<3];case"RES":return[c,203,d,134|a[1]<<3]}return[]}();if(i(a,["JP",null]))return function(){var b=j.parseNumLiteralPair(a[1]);return[195,b[0],b[1]]}();if(i(a,["JP",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=j.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[194,b[0],b[1]];case"Z":return[202,b[0],b[1]];case"NC":return[210,b[0],b[1]];case"C":return[218,b[0],b[1]];case"PO":return[226,b[0],b[1]];case"PE":return[234,b[0],b[1]];case"P":return[242,b[0],b[1]];case"M":return[250,b[0],b[1]]}return[]}();if(i(a,["JR",null]))return function(){return[24,j.parseRelAddr(a[1],this.address+2)]}.bind(this)();if(i(a,["JR",/^(NZ|Z|NC|C)$/,",",null]))return function(){var b=j.parseRelAddr(a[3],this.address+2);switch(a[1]){case"NZ":return[32,b];case"Z":return[40,b];case"NC":return[48,b];case"C":return[56,b]}return[]}.bind(this)();if(i(a,["JP","(",/^(HL|IX|IY)$/,")"])){switch(a[2]){case"HL":return[233];case"IX":return[221,233];case"IY":return[253,233]}return[]}if(i(a,["DJNZ",null]))return function(){return[16,j.parseRelAddr(a[1],this.address+2)]}.bind(this)();if(i(a,["CALL",null]))return function(){var b=j.parseNumLiteralPair(a[1]);return[205,b[0],b[1]]}();if(i(a,["CALL",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=j.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[196,b[0],b[1]];case"Z":return[204,b[0],b[1]];case"NC":return[212,b[0],b[1]];case"C":return[220,b[0],b[1]];case"PO":return[228,b[0],b[1]];case"PE":return[236,b[0],b[1]];case"P":return[244,b[0],b[1]];case"M":return[252,b[0],b[1]]}return[]}();if(i(a,["RET"]))return[201];if(i(a,["RET",/^(NZ|Z|NC|C|PO|PE|P|M)$/])){switch(a[1]){case"NZ":return[192];case"Z":return[200];case"NC":return[208];case"C":return[216];case"PO":return[224];case"PE":return[232];case"P":return[240];case"M":return[248]}return[]}if(i(a,["RETI"]))return[237,77];if(i(a,["RETN"]))return[237,69];if(i(a,["RST",/^(00H|08H|10H|18H|20H|28H|30H|38H)$/])){switch(a[1]){case"00H":return[199];case"08H":return[207];case"10H":return[215];case"18H":return[223];case"20H":return[231];case"28H":return[239];case"30H":return[247];case"38H":return[255]}return[]}if(i(a,["IN",/^[BCDEHLA]$/,",","(","C",")"]))return function(){return[237,64|h(a[1])<<3]}();if(i(a,["IN","A",",","(",null,")"]))return function(){return[219,j.parseNumLiteral(a[4])]}();if(i(a,["OUT","(","C",")",",",/^[BCDEHLA]$/]))return function(){return[237,65|h(a[5])<<3]}();if(i(a,["OUT","(",null,")",",","A"]))return function(){return[211,j.parseNumLiteral(a[2])]}();if(i(a,["INI"]))return[237,162];if(i(a,["INIR"]))return[237,178];if(i(a,["IND"]))return[237,170];if(i(a,["INDR"]))return[237,186];if(i(a,["OUTI"]))return[237,163];if(i(a,["OTIR"]))return[237,179];if(i(a,["OUTD"]))return[237,171];if(i(a,["OTDR"]))return[237,187];if(i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,null,")"]))return function(){var b="+"==a[5]?6:5,c=h(a[1]),e=j.parseNumLiteral(a[b]);return[d(a[4]),70|c<<3,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",/^[BCDEHLA]$/])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",/^[BCDEHLA]$/]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=j.parseNumLiteral(a[b]),f=h(a[c]);return[d(a[2]),112|f,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",null])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",null]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=j.parseNumLiteral(a[b]),f=j.parseNumLiteral(a[c]);return[d(a[2]),54,e,f]}();if(i(a,["LD",/^(IX|IY)$/,",",null]))return function(){var b=j.parseNumLiteralPair(a[3]);return[d(a[1]),33,b[0],b[1]]}();if(i(a,["LD",/^(IX|IY)$/,",","(",null,")"]))return function(){var b=j.parseNumLiteralPair(a[4]);return[d(a[1]),42,b[0],b[1]]}();if(i(a,["PUSH",/^(IX|IY)$/]))return function(){return[d(a[1]),229]}();if(i(a,["POP",/^(IX|IY)$/]))return function(){return[d(a[1]),225]}();if(i(a,["EX","(","SP",")",",",/^(IX|IY)$/]))return function(){return[d(a[5]),227]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",/^[BCDEHLA]$/]))return function(){return[128|e(a[0])<<3|h(a[3])]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",null]))return function(){return[198|e(a[0])<<3,j.parseNumLiteral(a[3])]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(","HL",")"]))return function(){return[134|e(a[0])<<3]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[5]?6:5,c=e(a[0]),f=j.parseNumLiteral(a[b]);return[d(a[4]),134|c<<3,f]}();if(i(a,[/^(AND|OR|XOR|CP)$/,/^[BCDEHLA]$/]))return function(){return[128|e(a[0])<<3|h(a[1])]}();if(i(a,[/^(AND|OR|XOR|CP)$/,null]))return function(){return[198|e(a[0])<<3,j.parseNumLiteral(a[1])]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(","HL",")"]))return function(){return[134|e(a[0])<<3]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[3]?4:3,c=e(a[0]),f=j.parseNumLiteral(a[b]);return[d(a[2]),134|c<<3,f]}();if(i(a,[/^(INC|DEC)$/,/^[BCDEHLA]$/]))return function(){var b=h(a[1]);switch(a[0]){case"INC":return[4|b<<3];case"DEC":return[5|b<<3]}}();if(i(a,[/^(INC|DEC)$/,"(","HL",")"]))switch(a[0]){case"INC":return[52];case"DEC":return[53]}return i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"])?function(){var b=d(a[2]),c="+"==a[3]?4:3,e=j.parseNumLiteral(a[c]);switch(a[0]){case"INC":return[b,52,e];case"DEC":return[b,53,e]}}():(console.warn("**** ERROR: CANNOT ASSEMBLE:"+a.join(" / ")),[])},j.parseNumLiteral=function(a){var b=j._parseNumLiteral(a);if("number"==typeof b){if(b<-128||256<=b)throw"operand "+a+" out of range";return 255&b}return function(b){return j.dereferLowByte(a,b)}},j.parseNumLiteralPair=function(a){var b=j._parseNumLiteral(a);if("number"==typeof b){if(b<-32768||65535<b)throw"operand "+a+" out of range";return[255&b,b>>8&255]}return[function(b){return j.dereferLowByte(a,b)},function(b){return j.dereferHighByte(a,b)}]},j.parseRelAddr=function(a,b){var c=j._parseNumLiteral(a);if("number"==typeof c){var d=a.charAt(0);if("+"!=d&&"-"!=d&&(c=c-b+2),(c-=2)<-128||256<=c)throw"operand "+a+" out of range";return 255&c}return function(c){return j.derefer(a,c)-b&255}},j.dereferLowByte=function(a,b){return 255&j.derefer(a,b)},j.dereferHighByte=function(a,b){return j.derefer(a,b)>>8&255},j.derefer=function(a,b){return a in b?b[a]:0},j._parseNumLiteral=function(a){if(/^[\+\-]?[0-9]+$/.test(a)||/^[\+\-]?[0-9A-F]+H$/i.test(a)){var b,c=0,d=/^\-/.test(a)?-1:1;return/[hH]$/.test(a)?(b=a.match(/^[\+\-]?([0-9a-fA-F]+)[hH]$/),c=parseInt(b[1],16)):/^[\+\-]?0/.test(a)?(b=a.match(/^[\+\-]?([0-7]+)$/),c=parseInt(b[1],8)):(b=a.match(/^[\+\-]?([0-9]+)$/),c=parseInt(b[1],10)),d*c}return a},b.exports=j},{}],17:[function(a,b,c){!function(c){var d=null;if("context"in c)d=c.context;else{d={webMain:!1,webWorker:!1,nodeJs:!1,ie11:!1,requirable:!1};try{a&&(d.requirable=!0)}catch(a){}}var e=c.constructor.name;e?"window"in c?d.webMain=!0:"DedicatedWorkerGlobalScope"==e||"WorkerGlobalScope"==e?d.webWorker=!0:d.nodeJs=!0:(d.ie11=!0,"[object Window]"==c?d.webMain=!0:"[object WorkerGlobalScope]"==c&&(d.webWorker=!0)),d.nodeJs?b.exports=d:d.webWorker&&(c.module={exports:null},c.require=function(){}),d.exportModule=function(a,b){return d.requirable||(a in c&&b!==c[a]&&(console.log("context.exports: "+a+" is already exported."),console.log("predecessor: "+JSON.stringify(c[a])),console.log("override with: "+JSON.stringify(b))),c[a]=b),b},c.getModule=function(a){if(!("context"in c)||d.nodeJs||d.requirable)return!1;if(!(a in c&&c[a]))throw new Error(["module ",a,"not found"].join(" "));return c[a]},c.context=d}(Function("return this;")())},{}],18:[function(a,b,c){!function(){Number.prototype.round=function(a){void 0==a&&(a=0);var b=Math.pow(10,-a);return Math.round(this*b)/b},Number.prototype.bin=function(a){for(var b="",c=this;c>0;){var d=c%2,e="";e=d?"1":"0",b=e+b,c=Math.floor(c/2)}return a&&(b=new Array(a+1).join("0")+b,b=b.substring(b.length-a)),b},Number.prototype.hex=function(a){var b=this.toString(16);return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.HEX=function(a){var b=this.toString(16).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.BIN=function(a){var b=this.toString(2).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)}}()},{}],19:[function(a,b,c){!function(){"use strict";function a(a){this.initialize(),this.setFrequency(a),this._handlers={change:[]}}a.SPEED_FACTOR=1.5,a.CPU_CLOCK=4e6,a.MNEMONIC_AVE_CYCLE=6,a.prototype.initialize=function(){this._out=!1,this._counter=0},a.prototype.setFrequency=function(b){this._counter_max=a.CPU_CLOCK/a.MNEMONIC_AVE_CYCLE/b},a.prototype.readOutput=function(){return this._out},a.prototype.count=function(){return this._counter+=a.SPEED_FACTOR,this._counter>=this._counter_max/2&&(this._out=!this._out,this._counter=0,this.fireEvent("change"),!0)},a.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},a.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=context.exportModule("FlipFlopCounter",a)}()},{}],20:[function(a,b,c){!function(){"use strict";function a(a,b,c){this.numOfTimer=a,this.numOfExecInst=b,this.timerInterval=c}a.prototype.get=function(){return{numOfTimer:this.numOfTimer,numOfExecInst:this.numOfExecInst,timerInterval:this.timerInterval}},a.prototype.set=function(a){this.numOfTimer=a.numOfTimer,this.numOfExecInst=a.numOfExecInst,this.timerInterval=a.timerInterval},b.exports=context.exportModule("FTParam",a)}()},{}],21:[function(a,b,c){!function(){"use strict";function c(a){this._reset=!1,this.initialize(),this.setFrequency(a)}var d=getModule("FlipFlopCounter")||a("../lib/flip-flop-counter");c.prototype=new d,c.prototype.count=function(){return!!this._reset&&d.prototype.count.call(this)},c.prototype.loadReset=function(a){a?this._reset||(this._reset=!0):this._reset&&(this._reset=!1,this.initialize())},b.exports=context.exportModule("IC556",c)}()},{"../lib/flip-flop-counter":19}],22:[function(a,b,c){!function(){"use strict";function a(){this.counter=[new c("#0"),new c("#1"),new c("#2")]}function c(a){this._name=a,this.RL=3,this.MODE=3,this.BCD=0,this.value=65535,this.counter=65535,this._written=!0,this._read=!0,this.out=!0,this.gate=!1,this._handlers={timeup:[]}}a.prototype.setCtrlWord=function(a){var b=(192&a)>>6;this.counter[b].setCtrlWord(63&a)},c.prototype.setCtrlWord=function(a){this.RL=(48&a)>>4,this.MODE=(14&a)>>1,this.BCD=0!=(1&a),this.value=0,this.counter=0,this._written=!0,this._read=!0,this.out=!1,this.gate=!1},c.prototype.load=function(a){this.counter=0;var b=!1;switch(this.RL){case 0:break;case 1:this.value=255&a,this.counter=this.value,this.out=!1,b=!0;break;case 2:this.value=(255&a)<<8,this.counter=this.value,b=!0;break;case 3:this._written?(this._written=!1,this.value=65280&this.value|255&a,this.counter=this.value,b=!1):(this._written=!0,this.value=255&this.value|(255&a)<<8,this.counter=this.value,this.out=!1,b=!0)}if(b)switch(this.MODE){case 0:this.out=!1;break;case 1:break;case 2:case 6:this.out=!0;break;case 3:case 7:this.out=!0}return b},c.prototype.read=function(){switch(this.RL){case 0:break;case 1:return 255&this.counter;case 2:return this.counter>>8&255;case 3:return this._read?(this._read=!1,255&this.counter):(this._read=!0,this.counter>>8&255)}return null},c.prototype.setGate=function(a){this.gate=a},c.prototype.count=function(a){var b=this.out;switch(this.MODE){case 0:this.counter>0?(this.counter-=a,this.counter<=0&&(this.counter=0,this.out||(this.out=!0))):this.counter=this.value;break;case 1:break;case 2:case 6:this.counter-=a,this.out&&this.counter<=0?(this.out=!1,this.counter=this.value):this.out||(this.out=!0);break;case 3:case 7:this.counter-=a,this.counter>=this.value/2?this.out=!0:this.counter>0?this.out=!1:(this.out=!0,this.counter=this.value)}!b&&this.out&&this.fireEvent("timeup")},c.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},c.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=context.exportModule("Intel8253",a)}()},{}],23:[function(a,b,c){!function(){"use strict";function a(){this._numOfTimer=1,this._delay=1,this._iteration=1,this._func=null,this._timerIds=null,this._calcFreq=null,this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime()}a.prototype.setNumOfTimer=function(a){this.updateTimer(function(){this._numOfTimer=a})},a.prototype.setTimerInterval=function(a){this.updateTimer(function(){this._delay=a})},a.prototype.setProcCount=function(a){this.updateTimer(function(){this._iteration=a})},a.prototype.setProc=function(a){this.updateTimer(function(){this._func=a})},a.prototype.isRunning=function(){return null!=this._timerIds},a.prototype.start=function(){if(!this.isRunning()){this._timerIds=[],this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime();for(var a=0;a<this._numOfTimer;a++)this._timerIds.push(setInterval(function(){if(null!=this._timerIds)for(var a=0;a<this._iteration;a++)null!=this._timerIds&&(this._count++,this._func())}.bind(this),this._delay))}},a.prototype.stop=function(){this.isRunning()&&(this._tickEnd=(new Date).getTime(),this._timerIds.forEach(function(a){clearInterval(a)}),this._timerIds=null)},a.prototype.getElapse=function(){return this._tickEnd-this._tickStart},a.prototype.getCalculatedFreq=function(){return this._calcFreq},a.prototype.getActualFreq=function(){var a=this.getElapse();return 0==a?null:this._count/(a/1e3)},a.prototype.getStat=function(){var a=this.getCalculatedFreq(),b=this.getElapse(),c=this.getActualFreq();return{parameter:{numOfTimer:this._numOfTimer,interval:this._delay,iteration:this._iteration,calcFreq:a},result:{elapse:b,actualFreq:c,actParCalc:c/a}}},a.prototype.updateTimer=function(a){var b=this.isRunning();b&&this.stop(),a.call(this),0!=this._delay?this._calcFreq=this._iteration*(1e3/this._delay)*this._numOfTimer:this._calcFreq=null,b&&this.start()},a.setInterval=function(b,c,d,e){if(d=d||0,e=e||0,0==d&&0==e){for(;c*++d<20;);for(c=Math.round(c*d);d/++e>500;);d=Math.round(d/e)}var f=new a;return f.setProc(b),f.setNumOfTimer(d),f.setTimerInterval(c),f.setProcCount(e),f.start(),f},a.clearInterval=function(a){a.stop()};try{b.exports={setInterval:a.setInterval,clearInterval:a.clearInterval}}catch(b){!function(b){b.FractionalTimer=a}(Function("return this;")())}}()},{}],24:[function(a,b,c){!function(a){"use strict";function c(){}var d=a.constructor.name;d||("[object Window]"==a?d="Window":"[object WorkerGlobalScope]"==a&&(d="DedicatedWorkerGlobalScope")),c.context=d,"Window"==c.context?(c.create=function(a,b,d,e){var f=new c;return f.create(a,b,d,e),f},c.prototype.create=function(a,b,c,d){this.worker=new Worker(a),this.createWrappers(Object.keys(b.prototype)),this.callbacks={},this.queryId=0,this.onNotify={},this.worker.onmessage=function(a){return function(b){switch(b.data.type){case"response":try{a.callbacks[b.data.queryId].apply(c,b.data.param)}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}delete a.callbacks[b.data.queryId];break;case"notify":try{a.onNotify[b.data.name](b.data.param)}catch(a){console.warn("*** exception: ",a,"in notify",b.data.name,"params:",JSON.stringify(b.data.param))}}}}(this),d=d||{},Object.keys(d).forEach(function(a){this.onNotify[a]=function(){d[a].apply(c,arguments)}},this)},c.prototype.createWrappers=function(a){a.forEach(function(a){c.prototype[a]=this.wrapper(a)},this)},c.prototype.wrapper=function(a){return function(){var b=function(){},c=[];arguments.length>0&&(b=Array.prototype.slice.call(arguments,-1)[0]||function(){},c=Array.prototype.slice.call(arguments,0,arguments.length-1));var d=this.queryId++;this.callbacks[d]=b,this.worker.postMessage({method:a,param:c,queryId:d})}}):"DedicatedWorkerGlobalScope"!=c.context&&"WorkerGlobalScope"!=c.context||(c.create=function(a){var b=new c;return"function"==typeof a&&(a=new a),b.create(a),b},c.prototype.create=function(b){this.worker=a,this.client=b,this.client._transworker=this,function(a){Object.keys(a.constructor.prototype).forEach(function(b){a.client[b]=function(){a.constructor.prototype[b].apply(a,arguments)}}),a.worker.onmessage=function(b){try{a.worker.postMessage({type:"response",queryId:b.data.queryId,method:b.data.method,param:[a.client[b.data.method].apply(a.client,b.data.param)]})}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}}}(this)},c.prototype.postNotify=function(a,b){this.worker.postMessage({type:"notify",name:a,param:b})});try{b.exports=c}catch(b){a.TransWorker=c}}(Function("return this;")())},{}]},{},[8]);