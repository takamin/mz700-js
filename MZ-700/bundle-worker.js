!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("../lib/ex_number.js");var d=a("fractional-timer"),e=a("./mz-tape-header"),f=a("./mz-tape"),g=a("./mz-data-recorder"),h=a("../lib/intel-8253"),i=a("../lib/flip-flop-counter"),j=a("../lib/ic556"),k=a("./mz700-key-matrix"),l=a("./memory.js"),m=a("../Z80/emulator"),n=a("../Z80/assembler.js"),o=a("../Z80/z80-line-assembler"),p=function(a){"use strict";var b=this;this._screenUpdateData={},this._vramTxTid=null,this.keymatrix=new k,this.intel8253=new h,this.intel8253.counter[1].counter=15700,this.intel8253.counter[1].value=15700,this.intel8253.counter[1].addEventListener("timeup",function(){this.intel8253.counter[2].count(1)}.bind(this)),this.intel8253.counter[2].counter=43200,this.intel8253.counter[2].value=43200,this.intel8253.counter[2].addEventListener("timeup",function(){this.INTMSK&&this.z80.interrupt()}.bind(this)),this.hblank=new i(15700),this.hblank.addEventListener("change",function(){this.intel8253.counter[1].count(4)}.bind(this)),this.vblank=new i(50),this.VBLK=!1,this.vblank.addEventListener("change",function(){this.VBLK=!this.VBLK}.bind(this)),this.ic556=new j(3),this.ic556_OUT=!1,this.ic556.addEventListener("change",function(){this.ic556_OUT=!this.ic556_OUT}.bind(this)),this.INTMSK=!1,this.MLDST=!1;var c=null;this.dataRecorder=new g(function(a){a?(null!=c&&(clearTimeout(c),c=null),this.opt.onStartDataRecorder()):c=setTimeout(function(){c=null,this.opt.onStopDataRecorder()}.bind(this),100)}.bind(this)),this.opt={onExecutionParameterUpdate:function(){},started:function(){},stopped:function(){},notifyClockFreq:function(){},onBreak:function(){},onUpdateScreen:function(){},onVramUpdate:function(a,c,d){b._screenUpdateData[a]={dispcode:c,attr:d},null==b._vramTxTid&&(b._vramTxTid=setTimeout(function(){b.opt.onUpdateScreen(b._screenUpdateData),b._screenUpdateData={},b._vramTxTid=null},100))},onMmioRead:function(){},onMmioWrite:function(){},onPortRead:function(){},onPortWrite:function(){},startSound:function(){},stopSound:function(){},onStartDataRecorder:function(){},onStopDataRecorder:function(){}},a=a||{},Object.keys(this.opt).forEach(function(b){b in a&&(this.opt[b]=a[b])},this),this.tid=null,this.timerInterval=p.DEFAULT_TIMER_INTERVAL,this.tidMeasClock=null,this.mmioMap=[];for(var d=57344;d<59392;d++)this.mmioMap.push({r:!1,w:!1});this.memory=new l({onVramUpdate:b.opt.onVramUpdate,onMappedIoRead:function(a,c){switch(b.mmioIsMappedToRead(a)&&b.opt.onMmioRead(a,c),a){case 57345:break;case 57346:c&=15,b.dataRecorder.motor()?c|=16:c&=239,b.dataRecorder_readBit()?c|=32:c&=223,b.ic556_OUT?c|=64:c&=191,b.VBLK?c|=128:c&=127;break;case 57348:c=b.intel8253.counter[0].read();break;case 57349:c=b.intel8253.counter[1].read();break;case 57350:c=b.intel8253.counter[2].read();break;case 57351:break;case 57352:c&=254,b.hblank.readOutput()?c|=1:c&=254}return c},onMappedIoUpdate:function(a,c){switch(b.mmioIsMappedToWrite(a)&&b.opt.onMmioWrite(a,c),a){case 57344:this.poke(57345,b.keymatrix.getKeyData(c)),b.ic556.loadReset(128&c);break;case 57346:break;case 57347:if(0==(128&c)){var d=0!=(1&c);switch((14&c)>>1){case 0:break;case 1:b.dataRecorder_writeBit(d);break;case 2:b.INTMSK=d;break;case 3:b.dataRecorder_motorOn(d)}}break;case 57348:b.intel8253.counter[0].load(c)&&b.MLDST&&b.opt.startSound(895e3/b.intel8253.counter[0].value);break;case 57349:b.intel8253.counter[1].load(c);break;case 57350:b.intel8253.counter[2].load(c);break;case 57351:b.intel8253.setCtrlWord(c);break;case 57352:1==(b.MLDST=0!=(1&c))?b.opt.startSound(895e3/b.intel8253.counter[0].value):b.opt.stopSound()}return c}}),this.z80=new m({memory:b.memory,onReadIoPort:function(a,c){b.opt.onPortRead(a,c)},onWriteIoPort:function(a,c){switch(a){case 224:this.memory.changeBlock0_DRAM();break;case 225:this.memory.changeBlock1_DRAM();break;case 226:this.memory.changeBlock0_MONITOR();break;case 227:this.memory.changeBlock1_VRAM();break;case 228:this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();break;case 229:this.memory.disableBlock1();break;case 230:this.memory.enableBlock1()}b.opt.onPortWrite(a,c)}})};p.AVG_CYCLE=40,p.Z80_CLOCK=3579545,p.DEFAULT_TIMER_INTERVAL=p.AVG_CYCLE*(1e3/p.Z80_CLOCK),p.prototype.mmioMapToRead=function(a){a.forEach(function(a){this.mmioMap[a-57344].r=!0},this)},p.prototype.mmioMapToWrite=function(a){a.forEach(function(a){this.mmioMap[a-57344].w=!0},this)},p.prototype.mmioIsMappedToRead=function(a){return this.mmioMap[a-57344].r},p.prototype.mmioIsMappedToWrite=function(a){return this.mmioMap[a-57344].w},p.prototype.writeAsmCode=function(a){for(var b=0;b<a.buffer.length;b++)this.memory.poke(a.min_addr+b,a.buffer[b]);return a.min_addr},p.prototype.exec=function(a){a=a||1;try{for(var b=0;b<a;b++)this.z80.exec(),this.clock()}catch(a){return-1}return 0},p.prototype.clock=function(){this.hblank.count(),this.vblank.count(),this.ic556.count()},p.prototype.setCassetteTape=function(a){if(a.length>0){if(a.length<=128)return this.dataRecorder_setCmt([]),console.error("error buf.length <= 128"),null;if(this.mzt_array=p.parseMZT(a),null==this.mzt_array||this.mzt_array.length<1)return console.error("setCassetteTape fail to parse"),null}return this.dataRecorder_setCmt(a),this.mzt_array},p.prototype.getCassetteTape=function(){var a=this.dataRecorder.getCmt();return null==a?null:f.toBytes(a)},p.prototype.loadCassetteTape=function(){for(var a=0;a<this.mzt_array.length;a++)for(var b=this.mzt_array[a],c=0;c<b.header.file_size;c++)this.memory.poke(b.header.addr_load+c,b.body.buffer[c])},p.prototype.reset=function(){this.memory.enableBlock1(),this.memory.enableBlock1(),this.memory.changeBlock0_MONITOR(),this.memory.changeBlock1_VRAM();for(var a=0;a<1e3;a++)this.memory.poke(53248+a,0),this.memory.poke(55296+a,113);return this.z80.reset()},p.prototype.getRegister=function(){return this.z80.reg.cloneRaw()},p.prototype.getRegisterB=function(){return this.z80.regB.cloneRaw()},p.prototype.setPC=function(a){this.z80.reg.PC=a},p.prototype.getIFF1=function(){return this.z80.IFF1},p.prototype.getIFF2=function(){return this.z80.IFF2},p.prototype.getIM=function(){return this.z80.IM},p.prototype.getHALT=function(){return this.z80.HALT},p.prototype.readMemory=function(a){return this.memory.peek(a)},p.prototype.setKeyState=function(a,b,c){this.keymatrix.setKeyMatrixState(a,b,c)},p.prototype.clearBreakPoints=function(){this.z80.clearBreakPoints()},p.prototype.getBreakPoints=function(){return this.z80.getBreakPoints()},p.prototype.removeBreak=function(a,b){this.z80.removeBreak(a,b)},p.prototype.addBreak=function(a,b){this.z80.setBreak(a,b)},p.parseMZT=function(a){for(var b=[],c=0;c+128<=a.length;){var d=new e(a,c);c+=128;for(var f=[],g=0;g<d.file_size;g++)f.push(a[c+g]);c+=d.file_size,b.push({header:d,body:{buffer:f}})}return b},p.prototype.start=function(){if("tid"in this&&null!=this.tid)return console.warn("[emulator] MZ700.start(): already started, caller is ",p.prototype.start.caller),!1;this.tid=d.setInterval(this.run.bind(this),this.timerInterval),this.opt.started();var a=0;return this.tidMeasClock=setInterval(function(){this.opt.notifyClockFreq(this.z80.tick-a),a=this.z80.tick}.bind(this),1e3),!0},p.prototype.stop=function(){null!=this.tid&&(d.clearInterval(this.tid),this.tid=null,this.opt.stopped()),null!=this.tidMeasClock&&(clearInterval(this.tidMeasClock),this.tidMeasClock=null)},p.prototype.run=function(){try{this.z80.exec(),this.clock()}catch(a){console.log("Error:",a),console.log(a.stack),this.stop(),this.opt.onBreak()}},p.prototype.assemble=function(a){return new n(a)},p.prototype.disassemble=function(a){var b="",c=[],d=null;a.forEach(function(a){console.assert(a.header.constructor===e,"No MZT-header");var f=a.header.getHeadline();b+=f+"\n",c=m.dasm(a.body.buffer,0,a.header.file_size,a.header.addr_load),d=f.split("\n").map(function(a){var b=new o;return b.setComment(a),b})});var f=m.dasmlines(c);return b+=f.join("\n")+"\n",Array.prototype.splice.apply(c,[0,0].concat(d)),{outbuf:b,dasmlines:f,asmlist:c}},p.disassemble=p.prototype.disassemble,p.prototype.dataRecorder_setCmt=function(a){var b=null;return b=0==a.length?[]:f.fromBytes(a),this.dataRecorder.setCmt(b),b},p.prototype.dataRecorder_ejectCmt=function(){if(this.dataRecorder.isCmtSet()){var a=this.dataRecorder.ejectCmt();if(null!=a)return f.toBytes(a)}return[]},p.prototype.dataRecorder_pushPlay=function(){this.dataRecorder.play()},p.prototype.dataRecorder_pushRec=function(){this.dataRecorder.isCmtSet()&&this.dataRecorder.ejectCmt(),this.dataRecorder.setCmt([]),this.dataRecorder.rec()},p.prototype.dataRecorder_pushStop=function(){this.dataRecorder.stop()},p.prototype.dataRecorder_motorOn=function(a){this.dataRecorder.m_on(a)},p.prototype.dataRecorder_readBit=function(){return this.dataRecorder.rdata(this.z80.tick)},p.prototype.dataRecorder_writeBit=function(a){this.dataRecorder.wdata(a,this.z80.tick)},p.prototype.getExecutionParameter=function(){return this.timerInterval},p.prototype.setExecutionParameter=function(a){var b=null!=this.tid;b&&this.stop(),this.timerInterval=a,this.opt.onExecutionParameterUpdate(a),b&&this.start()},b.exports=p},{"../Z80/assembler.js":9,"../Z80/emulator":11,"../Z80/z80-line-assembler":16,"../lib/ex_number.js":18,"../lib/flip-flop-counter":19,"../lib/ic556":20,"../lib/intel-8253":21,"./memory.js":2,"./mz-data-recorder":4,"./mz-tape":6,"./mz-tape-header":5,"./mz700-key-matrix":7,"fractional-timer":23}],2:[function(a,b,c){function d(a){this.create(a)}var e=a("./monitor-rom.js"),f=a("../Z80/memory-block.js"),g=a("../Z80/memory-bank.js");d.prototype=new g,d.prototype.create=function(a){g.prototype.create.call(this,a);var b,c=function(){},d=function(){};if(a.onVramUpdate){var h=a.onVramUpdate,i=new Array(65536),j=new Array(65536),k=new Array(65536);for(b=0;b<1e3;b++)i[53248+b]=[b,0,113],i[55296+b]=[b,0,113],j[53248+b]=function(a,b){return function(c){b[1]=c,h(a[0],c,a[2])}}(i[53248+b],i[55296+b]),k[55296+b]=function(a,b){return function(c){a[2]=c,h(b[0],b[1],c)}}(i[53248+b],i[55296+b]);c=function(a,b){53248<=a&&a<54248&&j[a](b)},d=function(a,b){55296<=a&&a<56296&&k[a](b)}}for(this.memblks={IPL_AREA_ROM:new e,IPL_AREA_RAM:new f({startAddr:0,size:4096}),FREE_RAM:new f({startAddr:4096,size:49152}),TEXT_VRAM:new f({startAddr:53248,size:2048,onPoke:c}),ATTR_VRAM:new f({startAddr:55296,size:2048,onPoke:d}),MMAPED_IO:new f({startAddr:57344,size:2048,onPeek:a.onMappedIoRead||function(){},onPoke:a.onMappedIoUpdate||function(){}}),EXTND_ROM:new f({startAddr:59392,size:6144}),DRAM:new f({startAddr:55296,size:12288})},this._block1VRAM=!0,this._disabledBlock1=!1,this.changeBlock0_MONITOR(),this.setMemoryBlock("FREE_RAM",this.memblks.FREE_RAM),this.changeBlock1_VRAM(),b=0;b<2048;b++)this.memblks.ATTR_VRAM.pokeByte(55296+b,113)},d.prototype.clear=function(){g.prototype.clear.call(this);for(var a in this.memblks)this.memblks[a].clear()},d.prototype.getTextVram=function(){return this.memblks.TEXT_VRAM},d.prototype.getAttrVram=function(){return this.memblks.ATTR_VRAM},d.prototype.changeBlock0_MONITOR=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_ROM)},d.prototype.changeBlock0_DRAM=function(){this.setMemoryBlock("IPL_AREA",this.memblks.IPL_AREA_RAM)},d.prototype.changeBlock1_DRAM=function(){this._block1VRAM=!1,this._disabledBlock1=!1,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",this.memblks.DRAM)},d.prototype.changeBlock1_VRAM=function(){this._block1VRAM=!0,this._disabledBlock1=!1,this.setMemoryBlock("DRAM",null),this.setMemoryBlock("TEXT_VRAM",this.memblks.TEXT_VRAM),this.setMemoryBlock("ATTR_VRAM",this.memblks.ATTR_VRAM),this.setMemoryBlock("MMAPED_IO",this.memblks.MMAPED_IO),this.setMemoryBlock("EXTND_ROM",this.memblks.EXTND_ROM)},d.prototype.disableBlock1=function(){this._disabledBlock1||(this._disabledBlock1=!0,this.setMemoryBlock("TEXT_VRAM",null),this.setMemoryBlock("ATTR_VRAM",null),this.setMemoryBlock("MMAPED_IO",null),this.setMemoryBlock("EXTND_ROM",null),this.setMemoryBlock("DRAM",null))},d.prototype.enableBlock1=function(){this._disabledBlock1&&(this._block1VRAM?this.changeBlock1_VRAM():this.changeBlock1_DRAM(),this._disabledBlock1=!1)},b.exports=d},{"../Z80/memory-bank.js":13,"../Z80/memory-block.js":14,"./monitor-rom.js":3}],3:[function(a,b,c){function d(){this.create()}var e=a("../Z80/memory-block.js");d.prototype=new e,d.prototype.create=function(){e.prototype.create.call(this,{startAddr:0,size:4096});for(var a=0;a<this.size;a++){var b=this.startAddr+a;e.prototype.pokeByte.call(this,b,f[b])}},d.prototype.pokeByte=function(a){e.prototype.pokeByte.call(this,a,f[a])},b.exports=d;var f=[195,74,0,195,230,7,195,14,9,195,24,9,195,32,9,195,127,0,195,53,9,195,129,9,195,153,9,195,189,8,195,50,10,195,54,4,195,117,4,195,216,4,195,248,4,195,136,5,195,199,1,195,8,3,0,0,195,56,16,195,88,3,195,229,2,195,250,2,195,171,2,195,190,2,49,240,16,237,86,205,201,15,62,22,215,6,60,33,112,17,205,216,15,33,146,3,62,195,50,56,16,34,57,16,33,4,5,34,158,17,205,190,2,17,65,1,223,205,192,10,24,8,17,241,16,24,150,195,38,9,49,240,16,17,130,0,213,205,9,0,62,42,215,17,163,17,205,3,0,26,254,42,194,84,12,19,26,254,71,202,89,1,254,35,202,18,2,254,77,202,15,12,254,83,202,130,12,254,38,202,14,14,254,76,40,31,0,0,0,0,254,82,202,170,1,254,80,202,18,2,195,155,10,205,232,0,205,45,0,56,10,17,196,1,207,223,201,205,232,0,239,218,103,1,42,6,17,124,254,18,216,233,205,39,0,56,149,207,17,56,1,223,24,134,17,0,208,14,25,6,40,26,205,206,11,205,15,1,19,16,246,62,13,205,15,1,13,32,236,201,213,245,219,254,230,13,183,40,7,205,30,0,40,119,24,242,241,211,255,62,128,211,254,219,254,230,13,254,1,32,248,175,211,254,201,70,79,85,78,68,32,13,76,79,46,32,13,195,73,1,0,32,77,90,144,55,48,48,13,211,225,17,240,255,213,33,46,7,1,5,0,237,176,201,0,19,26,254,79,32,4,19,19,19,19,205,192,12,233,254,2,200,207,17,181,1,223,201,62,255,50,157,17,201,175,24,249,33,0,240,126,183,192,233,197,213,229,26,190,32,11,5,40,8,254,13,40,4,19,35,24,241,225,209,193,201,245,195,173,13,62,255,211,224,201,17,49,1,223,17,241,16,223,195,227,15,205,232,0,205,227,15,239,195,209,0,0,67,69,13,54,255,58,112,17,183,32,2,54,239,175,201,79,75,13,197,213,229,62,2,50,160,17,6,1,26,254,13,40,2,254,200,40,46,254,207,40,30,254,215,40,34,254,35,33,113,2,32,3,46,137,19,205,28,2,56,224,205,200,2,56,21,205,171,2,65,24,213,62,3,50,160,17,19,24,205,62,1,24,246,205,200,2,245,205,190,2,241,24,128,19,205,31,4,216,205,15,1,24,246,197,6,8,26,190,40,9,35,35,35,16,248,55,19,193,201,35,213,94,35,86,235,124,183,40,9,58,160,17,61,40,3,41,24,250,34,161,17,62,2,50,160,17,209,19,26,71,230,240,254,48,40,5,58,159,17,24,7,19,120,230,15,50,159,17,79,6,0,33,161,2,9,78,58,158,17,71,175,129,16,253,193,79,175,201,67,119,7,68,167,6,69,237,5,70,152,5,71,252,4,65,113,4,66,245,3,82,0,0,67,12,7,68,71,6,69,152,5,70,72,5,71,180,4,65,49,4,66,187,3,82,0,0,1,2,3,4,6,8,12,16,24,32,42,161,17,124,183,40,12,213,235,33,4,224,115,114,62,1,209,24,6,62,54,50,7,224,175,50,8,224,201,33,0,224,54,248,35,126,230,128,32,2,55,201,58,8,224,15,56,250,58,8,224,15,48,250,16,242,175,201,197,229,33,113,4,205,174,2,6,50,175,205,91,7,16,250,225,193,195,190,2,245,197,230,15,71,62,8,144,50,158,17,193,241,201,243,197,213,229,50,155,17,62,240,50,156,17,33,192,168,175,237,82,229,35,235,62,116,50,7,224,62,176,50,7,224,33,6,224,115,114,43,54,10,54,0,62,128,50,7,224,35,78,126,186,32,251,121,187,32,247,43,0,0,0,54,18,54,122,35,209,78,126,186,32,251,121,187,32,247,225,209,193,251,201,229,62,128,50,7,224,33,6,224,243,94,86,251,123,178,202,121,3,175,33,192,168,237,82,218,131,3,235,58,155,17,225,201,17,192,168,58,155,17,238,1,225,201,243,33,6,224,126,47,95,126,47,87,251,19,195,124,3,245,197,213,229,58,155,17,238,1,50,155,17,62,128,50,7,224,33,6,224,94,86,33,192,168,25,43,43,235,33,6,224,115,114,225,209,193,241,251,201,124,205,195,3,125,205,195,3,201,245,230,240,15,15,15,15,205,218,3,205,18,0,241,230,15,205,218,3,215,62,32,201,213,229,33,233,3,230,15,95,22,0,25,126,225,209,201,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,197,229,1,0,16,33,233,3,190,32,3,121,24,6,35,12,5,32,245,55,225,193,201,213,205,31,4,56,7,103,205,31,4,56,1,111,209,201,197,26,19,195,241,6,56,13,7,7,7,7,79,26,19,205,249,3,56,1,177,193,201,243,213,197,229,22,215,30,204,33,240,16,1,128,0,205,51,7,205,178,6,218,99,5,123,254,204,32,17,205,9,0,213,17,108,4,205,21,0,17,241,16,205,21,0,209,205,184,7,205,141,4,195,99,5,87,82,73,84,73,78,71,32,13,243,213,197,229,22,215,30,83,42,2,17,229,193,42,4,17,120,177,202,212,4,195,68,4,213,197,229,58,55,16,87,62,248,50,0,224,126,205,165,7,58,1,224,230,8,32,3,55,24,45,35,11,120,177,194,153,4,42,151,17,124,205,165,7,125,205,165,7,205,128,7,21,194,196,4,183,195,212,4,6,0,205,103,7,5,194,198,4,225,193,197,229,195,153,4,225,193,209,201,243,213,197,229,22,210,30,204,1,128,0,33,240,16,205,178,6,218,130,5,205,94,6,218,130,5,205,16,5,195,99,5,243,213,197,229,22,210,30,83,42,2,17,229,193,42,4,17,120,177,202,99,5,195,230,4,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,97,205,85,6,26,230,32,40,243,84,33,0,0,34,151,17,225,193,197,229,205,36,6,56,73,119,35,11,120,177,32,244,42,151,17,205,36,6,56,58,95,205,36,6,56,52,189,32,35,123,188,32,31,24,11,62,1,50,55,16,201,62,2,24,248,0,175,225,193,209,205,0,7,245,58,156,17,254,240,32,1,251,241,201,21,202,124,5,98,195,22,5,62,1,55,195,99,5,62,2,55,195,99,5,243,213,197,229,42,2,17,229,193,42,4,17,22,210,30,83,120,177,202,99,5,205,51,7,205,178,6,218,130,5,205,94,6,218,130,5,205,178,5,195,99,5,213,197,229,42,54,16,1,1,224,17,2,224,205,1,6,56,191,205,85,6,26,230,32,40,243,84,225,193,197,229,205,36,6,56,173,190,32,164,35,11,120,177,32,242,42,153,17,205,36,6,188,32,149,205,36,6,189,32,143,21,202,98,5,98,195,184,5,120,6,192,128,48,2,214,64,71,195,58,8,62,249,50,0,224,0,10,230,4,194,15,6,55,201,26,230,32,194,7,6,10,230,8,194,29,6,55,201,26,230,32,202,21,6,201,197,213,229,33,0,8,1,1,224,17,2,224,205,1,6,56,28,205,85,6,26,230,32,40,10,229,42,151,17,35,34,151,17,225,55,125,23,111,37,32,227,205,1,6,125,225,209,193,201,58,53,16,61,32,253,32,0,201,197,213,229,33,40,40,123,254,204,40,3,33,20,20,34,149,17,1,1,224,17,2,224,42,149,17,205,1,6,56,30,205,85,6,26,230,32,40,240,37,32,240,205,1,6,56,14,205,85,6,26,230,32,32,224,45,32,240,205,1,6,225,209,193,201,194,245,5,62,40,42,113,17,149,71,205,177,15,205,216,15,195,238,7,197,213,229,14,10,58,2,224,230,16,40,5,175,225,209,193,201,62,6,33,3,224,119,60,119,13,32,233,207,122,254,215,40,6,17,34,7,223,24,8,17,41,7,223,17,36,7,223,58,2,224,230,16,32,213,205,68,10,32,244,55,24,206,254,47,40,6,205,249,3,195,37,4,26,19,195,52,4,245,197,213,6,10,58,2,224,230,16,32,4,209,193,241,201,62,6,50,3,224,62,7,50,3,224,5,194,5,7,209,193,241,201,127,32,80,76,65,89,13,127,82,69,67,13,211,224,195,0,0,197,213,229,17,0,0,120,177,32,11,235,34,151,17,34,153,17,225,209,193,201,126,229,38,8,7,48,1,19,37,32,249,225,35,11,24,225,58,54,16,61,32,253,201,58,55,0,24,244,0,0,0,245,62,3,50,3,224,205,95,7,62,2,50,3,224,205,95,7,241,201,8,195,228,9,0,0,245,62,3,50,3,224,205,95,7,205,95,7,62,2,50,3,224,205,95,7,205,98,7,241,201,62,0,50,52,16,33,68,46,34,53,16,201,197,6,8,205,128,7,7,220,128,7,212,103,7,5,194,171,7,193,201,197,213,123,1,248,42,17,40,40,254,204,202,204,7,1,190,10,17,20,20,205,103,7,11,120,177,32,248,205,128,7,21,32,250,205,103,7,29,32,250,205,128,7,209,193,201,245,197,229,213,175,50,147,17,205,179,9,71,58,157,17,183,204,109,12,120,230,240,254,192,32,55,120,254,205,40,86,254,201,40,29,254,202,40,20,254,203,202,179,8,254,200,40,11,254,199,40,7,58,147,17,183,32,28,120,205,220,13,24,200,33,112,17,175,190,32,1,60,119,214,6,47,50,3,224,24,183,205,68,10,40,106,120,205,166,13,205,181,13,254,98,32,167,33,147,17,126,47,119,24,159,254,16,202,66,15,254,213,254,5,195,159,6,42,113,17,92,22,0,33,115,17,25,235,26,183,1,40,0,42,113,17,194,122,8,19,26,183,202,125,8,195,123,8,37,14,80,46,0,205,180,15,209,213,197,205,166,13,237,176,193,225,229,65,126,205,206,11,119,35,16,248,54,13,43,126,254,32,40,248,205,6,0,209,225,193,241,201,120,254,18,202,246,13,254,73,202,41,14,24,156,225,229,54,27,35,54,13,24,226,0,205,202,8,254,240,32,2,175,201,205,206,11,201,197,213,229,205,80,10,120,7,56,6,62,240,225,209,193,201,7,210,236,8,6,0,33,8,0,9,17,201,10,25,126,195,214,8,58,112,17,183,194,253,8,6,0,33,201,10,9,126,195,214,8,121,230,240,15,71,121,230,15,128,198,160,111,38,0,195,228,8,175,50,148,17,62,205,205,220,13,201,58,148,17,183,200,195,6,0,62,32,205,53,9,201,205,12,0,58,148,17,183,200,214,10,56,244,32,250,201,254,13,202,14,9,197,79,71,205,150,1,205,70,9,121,193,201,121,205,185,11,79,230,240,254,240,200,254,192,121,194,112,9,254,199,210,112,9,205,220,13,254,195,202,115,9,254,197,202,107,9,254,198,192,175,50,148,17,201,205,181,13,58,148,17,60,254,80,56,2,214,80,50,148,17,201,245,197,213,6,5,205,150,1,26,254,13,202,223,15,79,205,70,9,19,16,243,195,132,9,245,197,213,6,5,205,150,1,26,254,13,202,223,15,205,185,11,205,112,9,19,16,241,195,156,9,197,213,229,205,177,15,205,166,13,126,50,142,17,34,143,17,33,146,17,205,184,1,50,0,224,50,145,17,47,50,0,224,22,20,205,255,9,205,80,10,120,7,218,230,11,21,194,213,9,205,255,9,205,202,8,254,240,202,122,7,245,205,166,13,58,142,17,42,143,17,119,241,225,209,193,201,245,229,58,2,224,7,7,218,37,10,58,145,17,15,218,34,10,58,146,17,42,143,17,205,166,13,119,58,145,17,238,1,50,145,17,225,241,201,58,145,17,15,210,34,10,58,142,17,195,19,10,62,248,50,0,224,0,58,1,224,47,230,33,194,68,10,198,1,201,62,248,50,0,224,0,58,1,224,230,128,201,213,229,6,250,22,0,5,120,50,0,224,254,239,32,4,66,225,209,201,254,248,40,31,58,1,224,47,183,40,232,95,203,250,120,230,15,7,7,7,7,79,62,8,61,40,4,203,3,48,249,129,79,24,208,58,1,224,47,95,230,33,40,2,203,242,123,230,222,40,192,24,214,205,62,0,254,86,202,203,0,254,67,192,19,26,254,65,202,158,7,254,49,202,87,5,254,50,202,93,5,254,66,194,184,12,33,34,21,34,53,16,201,205,153,7,205,93,5,195,118,1,205,79,44,240,201,43,240,202,205,27,57,240,201,62,240,202,240,240,240,105,104,85,26,25,240,240,240,74,54,109,90,61,24,23,22,21,20,19,18,17,83,115,70,112,113,93,51,114,16,15,14,13,12,11,10,9,118,119,67,86,120,94,30,60,8,7,6,5,4,3,2,1,95,31,29,50,28,68,65,92,40,39,38,37,36,35,34,33,82,103,102,101,100,99,98,97,46,47,41,32,0,42,106,107,87,81,84,96,0,221,222,89,45,73,196,195,193,194,199,200,69,64,196,195,193,194,197,198,240,199,240,195,205,240,240,240,240,200,240,196,205,240,240,203,197,0,193,203,240,60,62,220,198,0,194,240,240,124,126,216,205,188,141,240,201,153,240,202,240,240,240,184,180,160,145,134,129,135,151,150,130,132,156,148,170,171,143,140,173,176,142,162,138,131,144,136,146,154,147,152,161,137,149,166,165,164,133,163,172,174,175,139,0,167,168,169,155,191,196,195,193,194,199,200,240,199,240,195,205,240,189,191,197,0,193,240,240,188,190,219,197,229,254,23,56,28,33,198,12,1,224,0,237,177,32,26,62,223,145,24,10,197,229,33,198,12,79,6,0,9,126,225,193,201,254,17,56,4,198,176,24,245,175,24,242,58,52,16,183,194,211,9,121,8,185,202,224,9,6,4,205,202,8,230,63,87,205,255,9,205,202,8,230,63,186,194,231,9,11,120,177,202,228,9,24,236,19,205,16,4,6,16,205,48,12,205,202,8,183,40,5,254,203,200,16,242,205,179,9,254,205,40,233,183,192,6,1,24,229,197,205,186,3,6,8,197,229,175,215,126,205,195,3,35,175,215,16,247,215,225,193,126,205,185,11,205,181,13,35,16,246,193,195,6,0,205,192,12,30,168,205,31,4,56,5,119,19,35,24,246,62,169,187,208,205,186,3,195,142,0,197,229,42,54,16,125,254,16,56,3,46,80,36,205,174,2,6,7,195,239,2,19,26,254,83,202,112,1,254,71,202,118,1,205,192,12,34,4,17,229,30,170,205,16,4,209,237,82,35,34,2,17,17,175,17,205,192,12,34,6,17,17,241,16,33,180,17,1,16,0,237,176,62,13,18,205,159,1,231,210,36,0,201,205,16,4,208,209,201,32,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,251,205,221,203,209,48,49,50,51,52,53,54,55,56,57,45,61,59,47,46,44,229,244,236,218,227,226,215,212,230,232,194,193,196,199,207,202,32,225,254,200,250,95,248,241,247,63,204,219,220,233,245,58,94,60,91,243,93,64,201,62,252,92,198,223,208,206,211,210,255,33,34,35,36,37,38,39,40,41,43,42,222,246,235,234,195,197,239,240,228,231,238,237,224,253,216,213,242,249,217,214,32,161,154,159,156,146,170,151,152,166,175,169,184,179,176,183,158,160,157,164,150,165,171,163,155,189,162,187,153,130,135,140,188,167,172,145,147,148,149,180,181,182,174,173,186,178,185,168,177,131,136,141,134,132,137,142,191,133,138,143,190,129,139,144,127,17,18,19,20,21,22,96,97,98,99,100,101,102,103,104,112,113,17,115,116,117,118,119,120,121,122,123,124,125,126,105,245,58,2,224,7,48,250,58,2,224,7,56,250,241,201,245,197,213,229,71,205,177,15,112,42,113,17,125,254,39,194,144,14,92,22,0,33,115,17,25,126,183,194,144,14,35,54,1,35,54,0,195,144,14,245,197,213,229,71,230,240,254,192,32,127,168,254,13,202,139,15,254,11,48,117,38,14,111,110,233,33,52,16,126,47,119,195,238,7,0,50,116,132,144,174,191,197,248,11,225,242,195,73,15,17,163,17,213,33,27,14,1,12,0,237,176,201,33,2,224,203,158,203,198,203,134,195,128,9,223,0,33,157,17,24,203,0,195,125,8,205,150,1,175,50,3,224,1,192,3,17,0,208,33,40,208,237,176,235,6,40,205,216,15,1,26,0,17,115,17,33,116,17,237,176,54,0,58,115,17,183,194,106,14,205,150,1,62,1,50,3,224,195,222,15,0,42,113,17,37,34,113,17,195,57,14,42,113,17,124,254,24,202,50,14,36,34,113,17,195,222,15,42,113,17,124,183,202,222,15,37,195,126,14,42,113,17,125,254,39,210,157,14,44,195,126,14,46,0,36,124,254,25,218,126,14,38,24,34,113,17,195,50,14,42,113,17,125,183,40,4,45,195,126,14,46,39,37,242,126,14,33,0,0,195,126,14,205,166,13,14,25,33,0,208,6,40,205,216,15,13,194,205,14,33,115,17,6,27,205,216,15,195,191,14,33,112,17,175,190,24,1,60,119,214,6,47,50,3,224,24,143,33,112,17,175,24,240,42,113,17,124,181,202,222,15,125,183,32,22,92,22,0,33,115,17,25,126,183,32,11,205,177,15,205,166,13,43,54,0,24,148,42,113,17,92,28,22,0,33,115,17,25,126,71,183,62,40,40,2,62,80,42,113,17,149,79,6,0,205,177,15,229,209,27,205,166,13,237,176,24,211,205,244,0,195,238,7,0,42,113,17,92,28,22,0,33,115,17,25,126,183,14,0,42,113,17,46,39,40,2,36,12,205,180,15,126,183,194,222,15,229,42,113,17,62,39,149,71,121,183,40,4,62,40,128,71,209,213,225,43,205,166,13,126,18,54,0,43,27,16,248,195,222,15,42,113,17,92,28,22,0,33,115,17,25,126,183,42,113,17,202,157,14,46,0,124,254,23,40,5,36,36,195,126,14,36,34,113,17,195,50,14,42,113,17,197,213,229,193,17,40,0,33,216,207,25,5,242,190,15,6,0,9,209,193,201,33,3,224,54,138,54,7,54,5,62,1,50,3,224,201,175,119,35,16,252,201,225,209,193,241,201,62,58,215,42,4,17,205,186,3,235,42,2,17,25,43,205,248,15,42,6,17,62,45,215,205,186,3,175,201]},{"../Z80/memory-block.js":14}],4:[function(a,b,c){var d=function(a){this._m_on=!1,this._play=!1,this._rec=!1,this._motor=!1,this._wdata=null,this._twdata=null,this._rbit=null,this._trdata=null,this._cmt=null,this._pos=0,this._motorCallback=a,this._readTopBlank=0};d.RDATA_TOP_BLANK_LEN=1,d.RDATA_CYCLE_HI_LONG=1500,d.RDATA_CYCLE_HI_SHORT=700,d.RDATA_CYCLE_LO=700,d.prototype.isCmtSet=function(){return null!=this._cmt},d.prototype.getCmt=function(){return this._cmt},d.prototype.setCmt=function(a){this.motor()&&this.stop(),this._cmt=a,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0},d.prototype.play=function(){var a=this.motor();null!=this._cmt&&(this._play=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.rec=function(){var a=this.motor();null!=this._cmt&&(this._play=!0,this._rec=!0),!a&&this.motor()&&this._motorCallback(!0)},d.prototype.stop=function(){var a=this.motor();this._play=!1,this._rec=!1,a&&!this.motor()&&this._motorCallback(!1)},d.prototype.ejectCmt=function(){this.stop();var a=this._cmt;return this._cmt=null,this._pos=0,this._twdata=null,this._rbit=null,this._trdata=null,this._readTopBlank=0,a},d.prototype.m_on=function(a){var b=this.motor();!this._m_on&&a&&(this._motor=!this._motor),this._m_on=a,!b&&this.motor()&&this._motorCallback(!0),b&&!this.motor()&&this._motorCallback(!1)},d.prototype.motor=function(){return null!=this._cmt&&this._play&&this._motor},d.prototype.wdata=function(a,b){if(this.motor()&&this._rec&&this._wdata!=a)if(this._wdata=a,a)this._twdata=b;else{null==this._twdata&&(this._twdata=b);var c=b-this._twdata>1400;this._pos<this._cmt.length?(this._cmt[this._pos]=c,this._pos++):(this._cmt.push(c),this._pos=this._cmt.length)}},d.prototype.rdata=function(a){if(this.motor()&&this._pos<this._cmt.length){if(0==this._pos&&this._readTopBlank<d.RDATA_TOP_BLANK_LEN)return++this._readTopBlank,!1;if(this._pos>=this._cmt.length)return console.log("MZ_DataRecorder stopped at the end of CMT."),this.stop(),!1;null==this._rbit&&(this._rbit=this._cmt[this._pos],this._pos++,this._trdata=a);var b=this._rbit?d.RDATA_CYCLE_HI_LONG:d.RDATA_CYCLE_HI_SHORT,c=a-this._trdata;c>=b+d.RDATA_CYCLE_LO&&(this._rbit=null);return c<b}return null},b.exports=d},{}],5:[function(a,b,c){var d=function(a,b){var c=function(a,b){return(255&a[b])+256*(255&a[b+1])};this.attr=function(a,b){return 255&a[b]}(a,b+0);var d=function(a,b,c){for(var d="",e=b;e<c&&13!=a[e];e++)0!=a[e]&&(d+=String.fromCharCode(a[e]));return d}(a,b+1,b+18);this.filename=d,this.file_size=c(a,b+18),this.addr_load=c(a,b+20),this.addr_exec=c(a,b+22);for(var e=[],f=0;f<128;f++)e.push(a[b+f]);this.buffer=e};d.createNew=function(){for(var a=new Array(128),b=0;b<128;b++)a[b]=0;return a[0]=1,new d(a,0)},d.prototype.setFilename=function(a){a.length>16&&(a=a.substr(0,16)),this.filename=a;var b;for(b=0;b<=16;b++)this.buffer[1+b]=0;for(a+="\r",b=0;b<a.length;b++)this.buffer[1+b]=255&a.charCodeAt(b)},d.prototype.setFilesize=function(a){this.file_size=a,this.buffer[18]=a>>0&255,this.buffer[19]=a>>8&255},d.prototype.setAddrLoad=function(a){this.addr_load=a,this.buffer[20]=a>>0&255,this.buffer[21]=a>>8&255},d.prototype.setAddrExec=function(a){this.addr_exec=a,this.buffer[22]=a>>0&255,this.buffer[23]=a>>8&255},d.prototype.getHeadline=function(){return[";======================================================","; attribute :   "+this.attr.HEX(2)+"H","; filename  :   '"+this.filename+"'","; filesize  :   "+this.file_size+" bytes","; load addr :   "+this.addr_load.HEX(4)+"H","; start addr:   "+this.addr_exec.HEX(4)+"H",";======================================================"].join("\n")},b.exports=d},{}],6:[function(a,b,c){var d=a("./mz-tape-header"),e=function(a){this._index=0,this._tapeData=a};e.prototype.isThereSignal=function(a,b){for(var c=0;c<b;c++)if(this._tapeData[this._index+c]!=a)return!1;return this._index+=b,!0},e.prototype.recognizeStartingMark=function(){return!!this.isThereSignal(!1,11e3)&&(!!this.isThereSignal(!0,40)&&(!!this.isThereSignal(!1,40)&&!!this.isThereSignal(!0,1)))},e.prototype.recognizeStarting2Mark=function(){return!!this.isThereSignal(!1,2750)&&(!!this.isThereSignal(!0,20)&&(!!this.isThereSignal(!1,20)&&!!this.isThereSignal(!0,1)))},e.prototype.readSignal=function(){return this._index<this._tapeData.length?this._tapeData[this._index++]:null},e.prototype.writeSignal=function(a){this._tapeData.push(a)},e.prototype.writeByte=function(a){this.writeSignal(!0);for(var b=0;b<8;b++)0!=(a&1<<7-b)?this.writeSignal(!0):this.writeSignal(!1)},e.prototype.writeBlock=function(a){a.forEach(function(a){this.writeByte(a)},this);var b=this.countOnBit(a);this.writeByte(b>>8&255),this.writeByte(b>>0&255),this.writeSignal(!0)},e.prototype.writeDuplexBlock=function(a){this.writeBlock(a);for(var b=0;b<256;b++)this.writeSignal(!1);this.writeBlock(a)},e.prototype.readByte=function(){var a=null;do{if(null==(a=this.readSignal()))return null;if(!a)throw"NO START BIT"}while(!a);for(var b=0,c=0;c<8;c++){var d=this.readSignal();if(null==d)return null;d&&(b|=1<<7-c)}return b},e.prototype.readBytes=function(a){for(var b=[],c=0;c<a;c++){var d=this.readByte();if(null==d)break;b.push(d)}return b},e.prototype.countOnBit=function(a){var b=0,c=[0,1,2,3,4,5,6,7];return a.forEach(function(a){c.forEach(function(c){0!=(a&1<<c)&&b++})}),
b&=65535},e.prototype.readBlock=function(a){var b=this.readBytes(a),c=this.readBytes(2);if(2!=c.length)throw"NO BLOCK CHECKSUM";var d=256*c[0]+c[1];if(!this.isThereSignal(!0,1))throw"NO BLOCK END BIT";if(this.countOnBit(b)!=d)throw"CHECKSUM ERROR";return b},e.prototype.readDuplexBlocks=function(a){var b=this.readBlock(a);if(null==b)throw"FAIL TO READ BLOCK[1]";if(!this.isThereSignal(!1,256))throw"NO DELIMITOR: Short x 256.";var c=this.readBlock(a);if(null==c)throw"FAIL TO READ BLOCK[2]";for(var d=0;d<b.length;d++)if(b[d]!=c[d])throw"FAIL TO VERIFY BLOCK 1 and 2";return b},e.prototype.readHeader=function(){if(!this.recognizeStartingMark())throw"NO STARTING MARK recognized";var a=this.readDuplexBlocks(128);if(null==a)throw"CANNOT READ MZT HEADER";return new d(a,0)},e.prototype.readDataBlock=function(a){if(!this.recognizeStarting2Mark())throw"NO STARTING MARK 2 recognized";return this.readDuplexBlocks(a)},e.toBytes=function(a){try{var b=new e(a),c=b.readHeader();if(null==c)throw"FAIL TO READ HEADER";var d=b.readDataBlock(c.file_size);if(null==d)throw"FAIL TO READ DATA";for(var f,g=[],h=!0;h;)f=b.readByte(),(h=!!f)&&(console.warn("MZ_Tape.toBytes rest bytes["+f.length+"] =",f.HEX(2)),g.push(f));return c.buffer.concat(d)}catch(a){console.log("MZ_Tape.toBytes:Error "+a)}return[]},e.fromBytes=function(a){if(a.length<128)throw"FAIL TO WRITE HEADER";var b=new d(a.slice(0,128),0),c=new e([]);return c.writeHeader(b.buffer),c.writeDataBlock(a.slice(128)),c._tapeData},e.prototype.outputStartingMark=function(){var a;for(a=0;a<11e3;a++)this.writeSignal(!1);for(a=0;a<40;a++)this.writeSignal(!0);for(a=0;a<40;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeHeader=function(a){this.outputStartingMark(),this.writeDuplexBlock(a)},e.prototype.writeStarting2Mark=function(){var a;for(a=0;a<2750;a++)this.writeSignal(!1);for(a=0;a<20;a++)this.writeSignal(!0);for(a=0;a<20;a++)this.writeSignal(!1);this.writeSignal(!0)},e.prototype.writeDataBlock=function(a){this.writeStarting2Mark(),this.writeDuplexBlock(a)},b.exports=e},{"./mz-tape-header":5}],7:[function(a,b,c){!function(){function a(){this.keymap=new Array(10);for(var a=0;a<this.keymap.length;a++)this.keymap[a]=255}a.prototype.getKeyData=function(a){var b=255;return a&=15,a<this.keymap.length&&(b=this.keymap[a]),b},a.prototype.setKeyMatrixState=function(a,b,c){c?this.keymap[a]&=255&~(1<<b):this.keymap[a]|=1<<b&255},a.KeyCodes={Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Numlock:44,ScrollLock:145,Pause:19,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Subtract:109,Caret:107,Atmark:192,Yen:106,Colon:186,SemiColon:187,Comma:188,Decimal:190,Divide:111,Backslash:226,OpenBrackets:219,CloseBrackets:221,Shift:16,Control:17,Alternate:18,Enter:13,Tab:9,Space:32,Backspace:8,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,Left:37,Up:38,Right:39,Down:40,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,NumPadDivide:191,NumPadMultiply:220,NumPadSubtract:189,NumPadPlus:222,NumPadDecimal:110,Hankaku:243,Zenkaku:244};var c=function(a,b,c,d,e){this.strobe=a,this.bit=b,this.face=c||"&nbsp;",this.code=d||[],this.strcode=e||c};a.Keys=[new c(0,0,"CR",[a.KeyCodes.Enter]),new c(0,1,":",[a.KeyCodes.Colon]),new c(0,2,";",[a.KeyCodes.SemiColon]),new c(0,3),new c(0,4,"英数",[a.KeyCodes.F10,a.KeyCodes.End],"ALNUM"),new c(0,5,"=",[a.KeyCodes.Backspace]),new c(0,6,"GRAPH",[a.KeyCodes.F12,a.KeyCodes.PageDown,a.KeyCodes.Altername],"GRAPH"),new c(0,7,"カナ",[a.KeyCodes.F11,a.KeyCodes.PageUp],"KANA"),new c(1,0),new c(1,1),new c(1,2),new c(1,3,")",[a.KeyCodes.CloseBrackets]),new c(1,4,"(",[a.KeyCodes.OpenBrackets]),new c(1,5,"@",[a.KeyCodes.Atmark]),new c(1,6,"Z",[a.KeyCodes.Z]),new c(1,7,"Y",[a.KeyCodes.Y]),new c(2,0,"X",[a.KeyCodes.X]),new c(2,1,"W",[a.KeyCodes.W]),new c(2,2,"V",[a.KeyCodes.V]),new c(2,3,"U",[a.KeyCodes.U]),new c(2,4,"T",[a.KeyCodes.T]),new c(2,5,"S",[a.KeyCodes.S]),new c(2,6,"R",[a.KeyCodes.R]),new c(2,7,"Q",[a.KeyCodes.Q]),new c(3,0,"P",[a.KeyCodes.P]),new c(3,1,"O",[a.KeyCodes.O]),new c(3,2,"N",[a.KeyCodes.N]),new c(3,3,"M",[a.KeyCodes.M]),new c(3,4,"L",[a.KeyCodes.L]),new c(3,5,"K",[a.KeyCodes.K]),new c(3,6,"J",[a.KeyCodes.J]),new c(3,7,"I",[a.KeyCodes.I]),new c(4,0,"H",[a.KeyCodes.H]),new c(4,1,"G",[a.KeyCodes.G]),new c(4,2,"F",[a.KeyCodes.F]),new c(4,3,"E",[a.KeyCodes.E]),new c(4,4,"D",[a.KeyCodes.D]),new c(4,5,"C",[a.KeyCodes.C]),new c(4,6,"B",[a.KeyCodes.B]),new c(4,7,"A",[a.KeyCodes.A]),new c(5,0,"8",[a.KeyCodes.D8,a.KeyCodes.NumPad8]),new c(5,1,"7",[a.KeyCodes.D7,a.KeyCodes.NumPad7]),new c(5,2,"6",[a.KeyCodes.D6,a.KeyCodes.NumPad6]),new c(5,3,"5",[a.KeyCodes.D5,a.KeyCodes.NumPad5]),new c(5,4,"4",[a.KeyCodes.D4,a.KeyCodes.NumPad4]),new c(5,5,"3",[a.KeyCodes.D3,a.KeyCodes.NumPad3]),new c(5,6,"2",[a.KeyCodes.D2,a.KeyCodes.NumPad2]),new c(5,7,"1",[a.KeyCodes.D1,a.KeyCodes.NumPad1]),new c(6,0,".",[a.KeyCodes.Decimal,110]),new c(6,1,",",[a.KeyCodes.Comma]),new c(6,2,"9",[a.KeyCodes.D9,a.KeyCodes.NumPad9]),new c(6,3,"0",[a.KeyCodes.D0,a.KeyCodes.NumPad0]),new c(6,4,"SPC",[a.KeyCodes.Space]," "),new c(6,5,"-",[a.KeyCodes.Subtract,a.KeyCodes.NumPadSubtract]),new c(6,6,"+",[a.KeyCodes.Caret,a.KeyCodes.NumPadPlus]),new c(6,7,"*",[a.KeyCodes.Yen,a.KeyCodes.NumPadMultiply]),new c(7,0,"/",[a.KeyCodes.Divide,a.KeyCodes.NumPadDivide]),new c(7,1,"?",[a.KeyCodes.Backslash]),new c(7,2,"←",[a.KeyCodes.Left],"LEFT"),new c(7,3,"→",[a.KeyCodes.Right],"RIGHT"),new c(7,4,"↓",[a.KeyCodes.Down],"DOWN"),new c(7,5,"↑",[a.KeyCodes.Up],"UP"),new c(7,6,"DEL",[a.KeyCodes.Delete]),new c(7,7,"INS",[a.KeyCodes.Insert]),new c(8,0,"SHIFT",[a.KeyCodes.Shift]),new c(8,1,"(BS)"),new c(8,2),new c(8,3,"(→)",[a.KeyCodes.Tab]),new c(8,4,"(CR)"),new c(8,5,"(SHIFT)"),new c(8,6,"CTRL",[a.KeyCodes.Control]),new c(8,7,"BREAK",[a.KeyCodes.Escape,a.KeyCodes.Pause]),new c(9,0,"HOME",[a.KeyCodes.Home]),new c(9,1,"(SPC)"),new c(9,2,"(↓)"),new c(9,3,"F5",[a.KeyCodes.F5]),new c(9,4,"F4",[a.KeyCodes.F4]),new c(9,5,"F3",[a.KeyCodes.F3]),new c(9,6,"F2",[a.KeyCodes.F2]),new c(9,7,"F1",[a.KeyCodes.F1])],a.KeyNames=function(b){return Object.keys(a.KeyCodes).forEach(function(c){var d=a.KeyCodes[c];b[d]=c}),b}({}),a.Code2Key=function(){var b=new Array(256);return a.Keys.forEach(function(a){a.code.forEach(function(c){b[c]=a})}),b}(),a.Str2Key=function(){var b={};return a.Keys.forEach(function(a){b[a.strcode]=a}),b}(),b.exports=a}()},{}],8:[function(a,b,c){!function(b){"use strict";if(a("../lib/context.js"),!b.context.webWorker)throw new Error("This script must run on WebWorker context.");var c=a("transworker"),d=a("./emulator"),e=new c;e.create(new d({onExecutionParameterUpdate:function(a){try{e.postNotify("onExecutionParameterUpdate",a)}catch(a){console.error(a)}},started:function(){e.postNotify("start")},stopped:function(){e.postNotify("stop")},notifyClockFreq:function(a){e.postNotify("onNotifyClockFreq",[a])},onBreak:function(){e.postNotify("onBreak")},onUpdateScreen:function(a){e.postNotify("onUpdateScreen",a)},onMmioRead:function(a,b){e.postNotify("onMmioRead",{address:a,value:b})},onMmioWrite:function(a,b){e.postNotify("onMmioWrite",{address:a,value:b})},onPortRead:function(a,b){e.postNotify("onPortRead",{port:a,value:b})},onPortWrite:function(a,b){e.postNotify("onPortWrite",{port:a,value:b})},startSound:function(a){e.postNotify("startSound",[a])},stopSound:function(){e.postNotify("stopSound")},onStartDataRecorder:function(){e.postNotify("onStartDataRecorder")},onStopDataRecorder:function(){e.postNotify("onStopDataRecorder")}}))}(Function("return this;")())},{"../lib/context.js":17,"./emulator":1,transworker:24}],9:[function(a,b,c){var d=a("./bin-util.js"),e=a("./z80-line-assembler"),f=function(a){var b;if(void 0!=a){this.list=[],this.label2value={};var c=0,d=a.split(/\r{0,1}\n/);for(b=0;b<d.length;b++){var f=e.assemble(d[b],c,this.label2value);c=f.getNextAddress(),this.list.push(f)}for(b=0;b<this.list.length;b++)this.list[b].resolveAddress(this.label2value);var g=null,h=null;this.list.forEach(function(a){if(a.bytecode.length>0){(null==g||a.address<g)&&(g=a.address);var b=a.getLastAddress();(null==h||b>h)&&(h=b)}}),this.min_addr=g,this.buffer=new Array(h-g+1),this.list.forEach(function(a){a.bytecode.length>0&&Array.prototype.splice.apply(this.buffer,[a.address-g,a.bytecode.length].concat(a.bytecode))},this)}};f.prototype.parseAddress=function(a){var b=e.parseNumLiteralPair(a);if(null==b)return null;var c=b[1];"function"==typeof c&&(c=c(this.label2value));var f=b[0];return"function"==typeof f&&(f=f(this.label2value)),d.pair(c,f)},f.prototype.getMap=function(){return Object.keys(this.label2value).map(function(a){return{label:a,address:this.label2value[a]}},this).sort(function(a,b){return a.address-b.address})},b.exports=f},{"./bin-util.js":10,"./z80-line-assembler":16}],10:[function(a,b,c){"use strict";b.exports=function(a,b,c){"use asm";function d(a,b){a=a|0;b=b|0;return((255&a)<<8)+(255&b)|0}function e(a){a=a|0;return a>>8&255|0}function f(a){a=a|0;return a&255|0}function g(a){a=a|0;a=a&255;if(a&128){a=(~a&255)+1|0;return-a|0}return a|0}return{pair:d,hibyte:e,lobyte:f,getSignedByte:g}}(Function("return this;")())},{}],11:[function(a,b,c){"use strict";var d=a("../lib/oct"),e=a("./memory-block.js"),f=a("./register.js"),g=a("./bin-util.js"),h=a("./z80-line-assembler"),i=function(a){a=a||{memory:null},this.memory=a.memory,this.createOpecodeTable(),null==a.memory&&(this.memory=new e,this.memory.create()),this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.ioPort=new Array(256);for(var b=0;b<256;b++)this.ioPort[b]=0;this.reg=new f,this.regB=new f,this.onReadIoPort=function(){},this.onReadIoPort=a.onReadIoPort||function(){},this.onWriteIoPort=a.onWriteIoPort||function(){},this.bpmap=new Array(65536),this.tick=0};i.prototype.readIoPort=function(a){var b=this.ioPort[a];return this.reg.onReadIoPort(b),this.onReadIoPort(a,b),b},i.prototype.writeIoPort=function(a,b){this.ioPort[a]=b,this.onWriteIoPort(a,b)},i.prototype.reset=function(){this.IFF1=0,this.IFF2=0,this.IM=0,this.HALT=0,this.reg.clear(),this.regB.clear(),this.exec=i.prototype.exec,this.tick=0},i.prototype.interrupt=function(){this.IFF1&&(this.pushPair(this.reg.PC),this.reg.PC=56)},i.prototype.exec=function(){this.reg.R=this.reg.R+1&255;var a=this.opecodeTable[this.fetch()],b=a.proc()||a.cycle||4;if(this.tick+=b,null!=this.bpmap[this.reg.PC])throw console.log("*** BREAK AT $"+this.reg.PC.HEX(4)),"break"},i.prototype.clearBreakPoints=function(){this.bpmap=new Array(65536);for(var a=0;a<65536;a++)this.bpmap[a]=null},i.prototype.getBreakPoints=function(){return this.bpmap},i.prototype.removeBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=null},i.prototype.setBreak=function(a,b){for(var c=0;c<b;c++)this.bpmap[a+c]=!0},i.prototype.fetch=function(){var a=this.memory.peek(this.reg.PC);return this.reg.PC++,this.reg.PC>65535&&(this.reg.PC=0),a},i.prototype.fetchPair=function(){var a=this.memory.peekPair(this.reg.PC);return this.reg.PC+=2,this.reg.PC>65535&&(this.reg.PC-=65535),a},i.prototype.pushPair=function(a){this.memory.poke(--this.reg.SP,g.hibyte(a)),this.memory.poke(--this.reg.SP,g.lobyte(a))},i.prototype.popPair=function(){var a=this.memory.peek(this.reg.SP++),b=this.memory.peek(this.reg.SP++);return g.pair(b,a)},i.prototype.incrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getINCValue(b);this.memory.poke(a,c)},i.prototype.decrementAt=function(a){var b=this.memory.peek(a),c=this.reg.getDECValue(b);this.memory.poke(a,c)},i.dasm=function(a,b,c,d){if(b=b||0,c=c||a.length-b,(d=d||0)-b<0)return void console.error("Z80.dasm: parameter error : (addr - offset) - out of range");if(c<0||b+c>a.length)return void console.error("Z80.dasm: parameter error : size - out of range");var f=[],g=new e;g.create({startAddr:d-b,size:c}),g.mem=a;var j=new i({memory:g});j.reg.PC=g.startAddr;var k=h.create("ORG",g.startAddr.HEX(4)+"H");for(k.setAddress(g.startAddr),f.push(k);j.reg.PC<g.startAddr+g.size;){var l=j.disassemble(j.reg.PC,d-b+c);l.setAddress(j.reg.PC),l.bytecode.length>0&&l.setComment("; "+l.address.HEX(4)+"H "+l.bytecode.map(function(a){return a.HEX(2)}).join(" ")),f.push(l),j.reg.PC+=l.bytecode.length}return i.processAddressReference(f)},i.prototype.disassemble=function(a,b){var c=null,d="",e=this.memory.peek(a);try{var f=this.opecodeTable[e];if(null==f)d="UNKNOWN OPECODE";else if(null==f.disasm)d="NO DISASSEMBLER";else{var g=f.disasm(this.memory,a);null==g?d="NULL RETURNED":a+g.code.length>b?c=null:(c=h.create(g.mnemonic[0],g.mnemonic.slice(1).join(","),g.code),"ref_addr_to"in g&&c.setRefAddrTo(g.ref_addr_to))}}catch(a){d="EXCEPTION THROWN"}return null==c&&(c=h.create("DEFB",e.HEX(2)+"H",[e]),c.setComment(";*** DISASSEMBLE FAIL: "+d)),c},i.processAddressReference=function(a){var b={};return a.forEach(function(a,c){b[a.address]=c}),a.forEach(function(a,c,d){if(null!=a.ref_addr_to&&a.ref_addr_to in b){d[b[a.ref_addr_to]].referenced_count++}}),a.forEach(function(a,b,c){a.referenced_count>0&&c[b].setLabel("$"+a.address.HEX(4)+"H")}),a},i.dasmlines=function(a){return a.map(function(a){var b;b=a.referenced_count>0?"$"+a.address.HEX(4)+"H:":"       ",b+="   ";var c=a.mnemonic;if(c&&a.operand)for(;c.length<8;)c+=" ";for(var d=b+"      "+c+a.operand;d.length<40;)d+=" ";return""!=a.comment&&(d+=a.comment),d})},i.prototype.createOpecodeTable=function(){var a=this;this.opecodeTable=new Array(256);for(var b=new Array(256),c=new Array(256),e=new Array(256),h=new Array(256),i=new Array(256),j=new Array(256),k=0;k<256;k++)this.opecodeTable[k]={mnemonic:null,proc:function(){throw"ILLEGAL OPCODE"},disasm:function(a){return function(){return{code:[a],mnemonic:["DEFB",a.HEX(2)+"H; *** UNKNOWN OPCODE"]}}}(k)},b[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD "+a.HEX(2)+" for IX command subset"}}(k),disasm:function(a){return function(){return{code:[221],mnemonic:["DEFB","DDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},c[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD "+a.HEX(2)+" for IY command subset"}}(k),disasm:function(a){return function(){return{code:[253],mnemonic:["DEFB","FDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},e[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE CB "+a.HEX(2)+" for Rotate command subset"}}(k),disasm:function(a){return function(){return{code:[203],mnemonic:["DEFB","CBh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},h[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE DD CB "+a.HEX(2)+" for Rotate IX command subset"}}(k),disasm:function(a){return function(){return{code:[221,203],mnemonic:["DEFW","CBDDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},i[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE FD CB "+a.HEX(2)+" for Rotate IY command subset"}}(k),disasm:function(a){return function(){return{code:[253,203],mnemonic:["DEFW","CBFDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)},j[k]={mnemonic:null,proc:function(a){return function(){throw"ILLEGAL OPCODE ED "+a.HEX(2)+" for Misc command subset"}}(k),disasm:function(a){return function(){return{code:[237],mnemonic:["DEFB","EDh; *** UNKNOWN OPCODE "+a.HEX(2)+"H"]}}}(k)};this.opecodeTable[221]={mnemonic:function(){return b},proc:function(){b[a.fetch()].proc()},disasm:function(a,c){return b[a.peek(c+1)].disasm(a,c)}},this.opecodeTable[253]={mnemonic:function(){return c},proc:function(){c[a.fetch()].proc()},disasm:function(a,b){return c[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[203]={mnemonic:function(){return e},proc:function(){e[a.fetch()].proc()},disasm:function(a,b){return e[a.peek(b+1)].disasm(a,b)}},this.opecodeTable[237]={mnemonic:function(){return j},proc:function(){j[a.fetch()].proc()},disasm:function(a,b){return j[a.peek(b+1)].disasm(a,b)}};var l,m,n,o,p;for(l in f.REG_r_ID2NAME){n=f.REG_r_ID2NAME[l];for(m in f.REG_r_ID2NAME)o=f.REG_r_ID2NAME[m],p=64|l<<3|m,this.opecodeTable[p]={mnemonic:"LD "+n+","+o,proc:function(b,c,d){return function(){a.reg["set"+c](a.reg["get"+d]())}}(0,n,o),cycle:4,disasm:function(a,b,c){return function(){return{code:[a],mnemonic:["LD",b,c]}}}(p,n,o)}}var q=function(a,b){var c,d=a.peek(b),e=[d],g=0!=(64&d)?1:0,h=d>>3&7,i=d>>0&7,j=["???","???"];switch(j[0]=6==h?"(HL)":f.REG_r_ID2NAME[h],g){case 0:c=a.peek(b+1),e.push(c),j[1]=c.HEX(2)+"H";break;case 1:j[1]=6==i?"(HL)":f.REG_r_ID2NAME[i]}return{code:e,mnemonic:["LD",j[0],j[1]]}};this.opecodeTable[d("0006")]={mnemonic:"LD B,n",proc:function(){a.reg.setB(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0016")]={mnemonic:"LD C,n",proc:function(){a.reg.setC(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0026")]={mnemonic:"LD D,n",proc:function(){a.reg.setD(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0036")]={mnemonic:"LD E,n",proc:function(){a.reg.setE(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0046")]={mnemonic:"LD H,n",proc:function(){a.reg.setH(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0056")]={mnemonic:"LD L,n",proc:function(){a.reg.setL(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0076")]={mnemonic:"LD A,n",proc:function(){a.reg.setA(a.fetch())},cycle:7,disasm:q},this.opecodeTable[d("0106")]={mnemonic:"LD B,(HL)",proc:function(){a.reg.setB(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0116")]={mnemonic:"LD C,(HL)",proc:function(){a.reg.setC(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0126")]={mnemonic:"LD D,(HL)",proc:function(){a.reg.setD(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0136")]={mnemonic:"LD E,(HL)",proc:function(){a.reg.setE(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0146")]={mnemonic:"LD H,(HL)",proc:function(){a.reg.setH(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0156")]={mnemonic:"LD L,(HL)",proc:function(){a.reg.setL(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0176")]={mnemonic:"LD A,(HL)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getHL()))},cycle:7,disasm:q},this.opecodeTable[d("0160")]={mnemonic:"LD (HL),B",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getB())},cycle:10,disasm:q},this.opecodeTable[d("0161")]={mnemonic:"LD (HL),C",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getC())},cycle:10,disasm:q},this.opecodeTable[d("0162")]={mnemonic:"LD (HL),D",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getD())},cycle:10,disasm:q},this.opecodeTable[d("0163")]={mnemonic:"LD (HL),E",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getE())},cycle:10,disasm:q},this.opecodeTable[d("0164")]={mnemonic:"LD (HL),H",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getH())},cycle:10,disasm:q},this.opecodeTable[d("0165")]={mnemonic:"LD (HL),L",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getL())},cycle:10,disasm:q},this.opecodeTable[d("0167")]={mnemonic:"LD (HL),A",proc:function(){a.memory.poke(a.reg.getHL(),a.reg.getA())},cycle:10,disasm:q},this.opecodeTable[d("0066")]={mnemonic:"LD (HL),n",proc:function(){a.memory.poke(a.reg.getHL(),a.fetch())},cycle:10,disasm:q},this.opecodeTable[d("0012")]={mnemonic:"LD A,(BC)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getBC()))},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(BC)"]}}},this.opecodeTable[d("0032")]={mnemonic:"LD A,(DE)",proc:function(){a.reg.setA(a.memory.peek(a.reg.getDE()))},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","A","(DE)"]}}},this.opecodeTable[d("0072")]={mnemonic:"LD A,(nn)",proc:function(){a.reg.setA(a.memory.peek(a.fetchPair()))},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","A","("+a.peekPair(b+1).HEX(4)+"H)"]}}},this.opecodeTable[d("0002")]={mnemonic:"LD (BC),A",proc:function(){a.memory.poke(a.reg.getBC(),a.reg.getA())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(BC)","A"]}}},this.opecodeTable[d("0022")]={mnemonic:"LD (DE),A",proc:function(){a.memory.poke(a.reg.getDE(),a.reg.getA())},cycle:7,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","(DE)","A"]}}},this.opecodeTable[d("0062")]={mnemonic:"LD (nn),A",proc:function(){a.memory.poke(a.fetchPair(),a.reg.getA())},cycle:13,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2)],mnemonic:["LD","("+a.peekPair(b+1).HEX(4)+"H)","A"]}}},j[d("0127")]={mnemonic:"LD A,I",proc:function(){a.reg.LD_A_I(a.IFF2)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","I"]}}},j[d("0137")]={mnemonic:"LD A,R",proc:function(){a.reg.LD_A_R(a.IFF2,a.regB.R)},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","R"]}}},j[d("0107")]={mnemonic:"LD I,A",proc:function(){a.reg.I=a.reg.getA()},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","I","A"]}}},j[d("0117")]={mnemonic:"LD R,A",proc:function(){a.reg.R=a.regB.R=a.reg.getA()},cycle:9,disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","R","A"]}}};var r=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD",c,"("+d+"+"+e.HEX(2)+"H)"]}},s=function(a,b,c,d){var e=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),e],mnemonic:["LD","("+c+"+"+e.HEX(2)+"H)",d]}};b[d("0106")]={mnemonic:"LD B,(IX+d)",proc:function(){a.reg.setB(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"B","IX")}},b[d("0116")]={mnemonic:"LD C,(IX+d)",proc:function(){a.reg.setC(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"C","IX")}},b[d("0126")]={mnemonic:"LD D,(IX+d)",proc:function(){a.reg.setD(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"D","IX")}},b[d("0136")]={mnemonic:"LD E,(IX+d)",proc:function(){a.reg.setE(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"E","IX")}},b[d("0146")]={mnemonic:"LD H,(IX+d)",proc:function(){a.reg.setH(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"H","IX")}},b[d("0156")]={mnemonic:"LD L,(IX+d)",proc:function(){a.reg.setL(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"L","IX")}},b[d("0176")]={mnemonic:"LD A,(IX+d)",proc:function(){a.reg.setA(a.memory.peek(a.reg.IX+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"A","IX")}},b[d("0160")]={mnemonic:"LD (IX+d),B",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getB())},cycle:19,disasm:function(a,b){return s(a,b,"IX","B")}},b[d("0161")]={mnemonic:"LD (IX+d),C",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getC())},cycle:19,disasm:function(a,b){return s(a,b,"IX","C")}},b[d("0162")]={mnemonic:"LD (IX+d),D",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getD())},cycle:19,disasm:function(a,b){return s(a,b,"IX","D")}},b[d("0163")]={mnemonic:"LD (IX+d),E",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getE())},cycle:19,disasm:function(a,b){return s(a,b,"IX","E")}},b[d("0164")]={mnemonic:"LD (IX+d),H",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getH())},cycle:19,disasm:function(a,b){return s(a,b,"IX","H")}},b[d("0165")]={mnemonic:"LD (IX+d),L",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getL())},cycle:19,disasm:function(a,b){return s(a,b,"IX","L")}},b[d("0167")]={mnemonic:"LD (IX+d),A",proc:function(){a.memory.poke(a.reg.IX+a.fetch(),a.reg.getA())},cycle:19,disasm:function(a,b){return s(a,b,"IX","A")}},c[d("0106")]={mnemonic:"LD B,(IY+d)",proc:function(){a.reg.setB(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"B","IY")}},c[d("0116")]={mnemonic:"LD C,(IY+d)",proc:function(){a.reg.setC(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"C","IY")}},c[d("0126")]={mnemonic:"LD D,(IY+d)",proc:function(){a.reg.setD(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"D","IY")}},c[d("0136")]={mnemonic:"LD E,(IY+d)",proc:function(){a.reg.setE(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"E","IY")}},c[d("0146")]={mnemonic:"LD H,(IY+d)",proc:function(){a.reg.setH(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"H","IY")}},c[d("0156")]={mnemonic:"LD L,(IY+d)",proc:function(){a.reg.setL(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"L","IY")}},c[d("0176")]={mnemonic:"LD A,(IY+d)",proc:function(){a.reg.setA(a.memory.peek(a.reg.IY+a.fetch()))},cycle:19,disasm:function(a,b){return r(a,b,"A","IY")}},c[d("0160")]={mnemonic:"LD (IY+d),B",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getB())},cycle:19,disasm:function(a,b){return s(a,b,"IY","B")}},c[d("0161")]={mnemonic:"LD (IY+d),C",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getC())},cycle:19,disasm:function(a,b){return s(a,b,"IY","C")}},c[d("0162")]={mnemonic:"LD (IY+d),D",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getD())},cycle:19,disasm:function(a,b){return s(a,b,"IY","D")}},c[d("0163")]={mnemonic:"LD (IY+d),E",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getE())},cycle:19,disasm:function(a,b){return s(a,b,"IY","E")}},c[d("0164")]={mnemonic:"LD (IY+d),H",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getH())},cycle:19,disasm:function(a,b){return s(a,b,"IY","H")}},c[d("0165")]={mnemonic:"LD (IY+d),L",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getL())},cycle:19,disasm:function(a,b){return s(a,b,"IY","L")}},c[d("0167")]={mnemonic:"LD (IY+d),A",proc:function(){a.memory.poke(a.reg.IY+a.fetch(),a.reg.getA())},cycle:19,disasm:function(a,b){return s(a,b,"IY","A")}};var t=function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=g.pair(e,d),h=c>>4&3;switch(h){case 0:h="BC";break;case 1:h="DE";break;case 2:h="HL";break;case 3:h="SP";break;default:throw"*** LD dd,nn; but unknown dd."}return{code:[c,d,e],mnemonic:["LD",h,f.HEX(4)+"H"]}};this.opecodeTable[d("0001")]={mnemonic:"LD BC,nn",cycle:10,proc:function(){a.reg.setC(a.fetch()),a.reg.setB(a.fetch())},disasm:t},this.opecodeTable[d("0021")]={mnemonic:"LD DE,nn",cycle:10,proc:function(){a.reg.setE(a.fetch()),a.reg.setD(a.fetch())},disasm:t},this.opecodeTable[d("0041")]={mnemonic:"LD HL,nn",cycle:10,proc:function(){a.reg.setL(a.fetch()),a.reg.setH(a.fetch())},disasm:t},this.opecodeTable[d("0061")]={mnemonic:"LD SP,nn",cycle:10,proc:function(){a.reg.SP=a.fetchPair()},disasm:t},this.opecodeTable[d("0052")]={mnemonic:"LD HL,(nn)",cycle:16,proc:function(){var b=a.fetchPair();a.reg.setL(a.memory.peek(b+0)),a.reg.setH(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2);return{code:[c,d,e],mnemonic:["LD","HL","("+g.pair(e,d).HEX(4)+"H)"]}}},j[d("0113")]={mnemonic:"LD BC,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setC(a.memory.peek(b+0)),a.reg.setB(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","BC","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0133")]={mnemonic:"LD DE,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setE(a.memory.peek(b+0)),a.reg.setD(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","DE","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0153")]={mnemonic:"LD HL,(nn)",cycle:20,proc:function(){var b=a.fetchPair();a.reg.setL(a.memory.peek(b+0)),a.reg.setH(a.memory.peek(b+1))},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","HL","("+g.pair(f,e).HEX(4)+"H)"]}}},j[d("0173")]={mnemonic:"LD SP,(nn)",cycle:20,proc:function(){a.reg.SP=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","SP","("+g.pair(f,e).HEX(4)+"H)"]}}},this.opecodeTable[d("0042")]={mnemonic:"LD (nn), HL",cycle:16,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getL()),a.memory.poke(b+1,a.reg.getH())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2);return{code:[c,d,e],mnemonic:["LD","("+g.pair(e,d).HEX(4)+"H)","HL"]}}},j[d("0103")]={mnemonic:"LD (nn),BC",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getC()),a.memory.poke(b+1,a.reg.getB())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","BC"]}}},j[d("0123")]={mnemonic:"LD (nn),DE",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getE()),a.memory.poke(b+1,a.reg.getD())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","DE"]}}},j[d("0143")]={mnemonic:"LD (nn),HL",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.getL()),a.memory.poke(b+1,a.reg.getH())},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","HL"]}}},j[d("0163")]={mnemonic:"LD (nn),SP",cycle:20,proc:function(){var b=a.fetchPair();a.memory.poke(b+0,a.reg.SP>>0&255),a.memory.poke(b+1,a.reg.SP>>8&255)},disasm:function(a,b){var c=a.peek(b),d=a.peek(b+1),e=a.peek(b+2),f=a.peek(b+3);return{code:[c,d,e,f],mnemonic:["LD","("+g.pair(f,e).HEX(4)+"H)","SP"]}}},this.opecodeTable[d("0371")]={mnemonic:"LD SP,HL",cycle:6,proc:function(){a.reg.SP=a.reg.getHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["LD","SP","HL"]}}},this.opecodeTable[197]={mnemonic:"PUSH BC",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getB()),a.memory.poke(--a.reg.SP,a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","BC"]}}},this.opecodeTable[213]={mnemonic:"PUSH DE",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getD()),a.memory.poke(--a.reg.SP,a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","DE"]}}},this.opecodeTable[229]={mnemonic:"PUSH HL",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getH()),a.memory.poke(--a.reg.SP,a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","HL"]}}},this.opecodeTable[245]={mnemonic:"PUSH AF",cycle:11,proc:function(){a.memory.poke(--a.reg.SP,a.reg.getA()),a.memory.poke(--a.reg.SP,a.reg.getF())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["PUSH","AF"]}}},this.opecodeTable[193]={mnemonic:"POP BC",cycle:10,proc:function(){a.reg.setC(a.memory.peek(a.reg.SP++)),a.reg.setB(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","BC"]}}},this.opecodeTable[209]={mnemonic:"POP DE",cycle:10,proc:function(){a.reg.setE(a.memory.peek(a.reg.SP++)),a.reg.setD(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","DE"]}}},this.opecodeTable[225]={mnemonic:"POP HL",cycle:10,proc:function(){a.reg.setL(a.memory.peek(a.reg.SP++)),a.reg.setH(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","HL"]}}},this.opecodeTable[241]={mnemonic:"POP AF",cycle:10,proc:function(){a.reg.setF(a.memory.peek(a.reg.SP++)),a.reg.setA(a.memory.peek(a.reg.SP++))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["POP","AF"]}}},b[33]={mnemonic:"LD IX,nn",cycle:14,proc:function(){a.reg.IX=a.fetchPair()},disasm:function(a,b){return{code:[221,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX",a.peekPair(b+2).HEX(4)+"H"]}}},b[42]={mnemonic:"LD IX,(nn)",cycle:20,proc:function(){a.reg.IX=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[221,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IX","("+a.peekPair(b+2).HEX(4)+"H)"]}}},b[54]={mnemonic:"LD (IX+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IX+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[221,54,c,d],mnemonic:["LD","(IX + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},b[249]={
mnemonic:"LD SP,IX",cycle:10,proc:function(){a.reg.SP=a.reg.IX},disasm:function(){return{code:[221,249],mnemonic:["LD","SP","IX"]}}},b[229]={mnemonic:"PUSH IX",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,g.hibyte(a.reg.IX)),a.memory.poke(--a.reg.SP,g.lobyte(a.reg.IX))},disasm:function(){return{code:[221,229],mnemonic:["PUSH","IX"]}}},b[225]={mnemonic:"POP IX",cycle:14,proc:function(){a.reg.IX=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[221,225],mnemonic:["POP","IX"]}}},b[227]={mnemonic:"EX (SP),IX",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,g.hibyte(a.reg.IX));var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,g.lobyte(a.reg.IX)),a.reg.IX=g.pair(b,c)},disasm:function(){return{code:[221,227],mnemonic:["EX","(SP)","IX"]}}},c[33]={mnemonic:"LD IY,nn",cycle:14,proc:function(){a.reg.IY=a.fetchPair()},disasm:function(a,b){return{code:[253,33,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY",a.peekPair(b+2).HEX(4)+"H"]}}},c[42]={mnemonic:"LD IY,(nn)",cycle:20,proc:function(){a.reg.IY=a.memory.peekPair(a.fetchPair())},disasm:function(a,b){return{code:[253,42,a.peek(b+2),a.peek(b+3)],mnemonic:["LD","IY","("+a.peekPair(b+2).HEX(4)+"H)"]}}},c[54]={mnemonic:"LD (IY+d),n",cycle:19,proc:function(){var b=a.fetch(),c=a.fetch();a.memory.poke(a.reg.IY+b,c)},disasm:function(a,b){var c=a.peek(b+2),d=a.peek(b+3);return{code:[253,54,c,d],mnemonic:["LD","(IY + "+c.HEX(2)+"H)",d.HEX(2)+"H"]}}},c[249]={mnemonic:"LD SP,IY",cycle:10,proc:function(){a.reg.SP=a.reg.IY},disasm:function(){return{code:[253,249],mnemonic:["LD","SP","IY"]}}},c[229]={mnemonic:"PUSH IY",cycle:15,proc:function(){a.memory.poke(--a.reg.SP,g.hibyte(a.reg.IY)),a.memory.poke(--a.reg.SP,g.lobyte(a.reg.IY))},disasm:function(){return{code:[253,229],mnemonic:["PUSH","IY"]}}},c[225]={mnemonic:"POP IY",cycle:14,proc:function(){a.reg.IY=a.memory.peekPair(a.reg.SP),a.reg.SP+=2},disasm:function(){return{code:[253,225],mnemonic:["POP","IY"]}}},c[227]={mnemonic:"EX (SP),IY",cycle:23,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.IY>>8&255);var c=a.memory.peek(a.reg.SP);a.memory.poke(a.reg.SP,a.reg.IY>>0&255),a.reg.IY=(b<<8)+c},disasm:function(){return{code:[253,227],mnemonic:["EX","(SP)","IY"]}}},this.opecodeTable[235]={mnemonic:"EX DE,HL ",cycle:4,proc:function(){var b=a.reg.getD();a.reg.setD(a.reg.getH()),a.reg.setH(b),b=a.reg.getE(),a.reg.setE(a.reg.getL()),a.reg.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","DE","HL"]}}},this.opecodeTable[8]={mnemonic:"EX AF,AF'",cycle:4,proc:function(){var b=a.reg.getA();a.reg.setA(a.regB.getA()),a.regB.setA(b),b=a.reg.getF(),a.reg.setF(a.regB.getF()),a.regB.setF(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","AF","AF'"]}}},this.opecodeTable[217]={mnemonic:"EXX",cycle:4,proc:function(){var b=a.reg.getB();a.reg.setB(a.regB.getB()),a.regB.setB(b),b=a.reg.getC(),a.reg.setC(a.regB.getC()),a.regB.setC(b),b=a.reg.getD(),a.reg.setD(a.regB.getD()),a.regB.setD(b),b=a.reg.getE(),a.reg.setE(a.regB.getE()),a.regB.setE(b),b=a.reg.getH(),a.reg.setH(a.regB.getH()),a.regB.setH(b),b=a.reg.getL(),a.reg.setL(a.regB.getL()),a.regB.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EXX"]}}},this.opecodeTable[227]={mnemonic:"EX (SP),HL",cycle:19,proc:function(){var b=a.memory.peek(a.reg.SP+1);a.memory.poke(a.reg.SP+1,a.reg.getH()),a.reg.setH(b),b=a.memory.peek(a.reg.SP),a.memory.poke(a.reg.SP,a.reg.getL()),a.reg.setL(b)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EX","(SP)","HL"]}}},j[d("0240")]={mnemonic:"LDI",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDI"]}}},j[d("0260")]={mnemonic:"LDIR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDI(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDIR"]}}},j[d("0250")]={mnemonic:"LDD",cycle:16,proc:function(){a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDD"]}}},j[d("0270")]={mnemonic:"LDDR",cycle:"BC≠0→21, BC=0→16",proc:function(){return a.memory.poke(a.reg.getDE(),a.memory.peek(a.reg.getHL())),a.reg.onLDD(),0!=a.reg.getBC()?(a.reg.PC-=2,21):16},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LDDR"]}}},j[d("0241")]={mnemonic:"CPI",cycle:16,proc:function(){a.reg.CPI(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPI"]}}},j[d("0261")]={mnemonic:"CPIR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPI(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPIR"]}}},j[d("0251")]={mnemonic:"CPD",cycle:16,proc:function(){a.reg.CPD(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPD"]}}},j[d("0271")]={mnemonic:"CPDR",cycle:"{BC≠0 && A≠(HL)}→21, {BC=0 || A=(HL)}→16",proc:function(){return a.reg.CPD(a.memory.peek(a.reg.getHL())),0==a.reg.getBC()||a.reg.flagZ()?16:(a.reg.PC-=2,21)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CPDR"]}}},this.opecodeTable[d("0200")]={mnemonic:"ADD A,B",cycle:4,proc:function(){a.reg.addAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","B"]}}},this.opecodeTable[d("0201")]={mnemonic:"ADD A,C",cycle:4,proc:function(){a.reg.addAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","C"]}}},this.opecodeTable[d("0202")]={mnemonic:"ADD A,D",cycle:4,proc:function(){a.reg.addAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","D"]}}},this.opecodeTable[d("0203")]={mnemonic:"ADD A,E",cycle:4,proc:function(){a.reg.addAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","E"]}}},this.opecodeTable[d("0204")]={mnemonic:"ADD A,H",cycle:4,proc:function(){a.reg.addAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","H"]}}},this.opecodeTable[d("0205")]={mnemonic:"ADD A,L",cycle:4,proc:function(){a.reg.addAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","L"]}}},this.opecodeTable[d("0207")]={mnemonic:"ADD A,A",cycle:4,proc:function(){a.reg.addAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","A"]}}},this.opecodeTable[d("0306")]={mnemonic:"ADD A,n",cycle:7,proc:function(){a.reg.addAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADD","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0206")]={mnemonic:"ADD A,(HL)",cycle:7,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","A","(HL)"]}}},b[d("0206")]={mnemonic:"ADD A,(IX+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0206")]={mnemonic:"ADD A,(IY+d)",cycle:19,proc:function(){a.reg.addAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADD","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0210")]={mnemonic:"ADC A,B",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","B"]}}},this.opecodeTable[d("0211")]={mnemonic:"ADC A,C",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","C"]}}},this.opecodeTable[d("0212")]={mnemonic:"ADC A,D",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","D"]}}},this.opecodeTable[d("0213")]={mnemonic:"ADC A,E",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","E"]}}},this.opecodeTable[d("0214")]={mnemonic:"ADC A,H",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","H"]}}},this.opecodeTable[d("0215")]={mnemonic:"ADC A,L",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","L"]}}},this.opecodeTable[d("0217")]={mnemonic:"ADC A,A",cycle:4,proc:function(){a.reg.addAccWithCarry(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","A"]}}},this.opecodeTable[d("0316")]={mnemonic:"ADC A,n",cycle:7,proc:function(){a.reg.addAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["ADC","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0216")]={mnemonic:"ADC A,(HL)",cycle:7,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADC","A","(HL)"]}}},b[d("0216")]={mnemonic:"ADC A,(IX+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0216")]={mnemonic:"ADC A,(IY+d)",cycle:19,proc:function(){a.reg.addAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["ADC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0220")]={mnemonic:"SUB A,B",cycle:4,proc:function(){a.reg.subAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","B"]}}},this.opecodeTable[d("0221")]={mnemonic:"SUB A,C",cycle:4,proc:function(){a.reg.subAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","C"]}}},this.opecodeTable[d("0222")]={mnemonic:"SUB A,D",cycle:4,proc:function(){a.reg.subAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","D"]}}},this.opecodeTable[d("0223")]={mnemonic:"SUB A,E",cycle:4,proc:function(){a.reg.subAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","E"]}}},this.opecodeTable[d("0224")]={mnemonic:"SUB A,H",cycle:4,proc:function(){a.reg.subAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","H"]}}},this.opecodeTable[d("0225")]={mnemonic:"SUB A,L",cycle:4,proc:function(){a.reg.subAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","L"]}}},this.opecodeTable[d("0227")]={mnemonic:"SUB A,A",cycle:4,proc:function(){a.reg.subAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","A"]}}},this.opecodeTable[d("0326")]={mnemonic:"SUB A,n",cycle:7,proc:function(){a.reg.subAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SUB","A",c.HEX(2)+"H"]}}},this.opecodeTable[d("0226")]={mnemonic:"SUB A,(HL)",cycle:7,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SUB","A","(HL)"]}}},b[d("0226")]={mnemonic:"SUB A,(IX+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0226")]={mnemonic:"SUB A,(IY+d)",cycle:19,proc:function(){a.reg.subAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SUB","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0230")]={mnemonic:"SBC A,B",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","B"]}}},this.opecodeTable[d("0231")]={mnemonic:"SBC A,C",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","C"]}}},this.opecodeTable[d("0232")]={mnemonic:"SBC A,D",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","D"]}}},this.opecodeTable[d("0233")]={mnemonic:"SBC A,E",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","E"]}}},this.opecodeTable[d("0234")]={mnemonic:"SBC A,H",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","H"]}}},this.opecodeTable[d("0235")]={mnemonic:"SBC A,L",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","L"]}}},this.opecodeTable[d("0237")]={mnemonic:"SBC A,A",cycle:4,proc:function(){a.reg.subAccWithCarry(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","A"]}}},this.opecodeTable[d("0336")]={mnemonic:"SBC A,n",cycle:7,proc:function(){a.reg.subAccWithCarry(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["SBC","A,"+c.HEX(2)+"H"]}}},this.opecodeTable[d("0236")]={mnemonic:"SBC A,(HL)",cycle:7,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SBC","A","(HL)"]}}},b[d("0236")]={mnemonic:"SBC A,(IX+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IX+"+c.HEX(2)+"H)"]}}},c[d("0236")]={mnemonic:"SBC A,(IY+d)",cycle:19,proc:function(){a.reg.subAccWithCarry(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["SBC","A","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0240")]={mnemonic:"AND B",cycle:4,proc:function(){a.reg.andAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","B"]}}},this.opecodeTable[d("0241")]={mnemonic:"AND C",cycle:4,proc:function(){a.reg.andAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","C"]}}},this.opecodeTable[d("0242")]={mnemonic:"AND D",cycle:4,proc:function(){a.reg.andAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","D"]}}},this.opecodeTable[d("0243")]={mnemonic:"AND E",cycle:4,proc:function(){a.reg.andAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","E"]}}},this.opecodeTable[d("0244")]={mnemonic:"AND H",cycle:4,proc:function(){a.reg.andAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","H"]}}},this.opecodeTable[d("0245")]={mnemonic:"AND L",cycle:4,proc:function(){a.reg.andAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","L"]}}},this.opecodeTable[d("0247")]={mnemonic:"AND A",cycle:4,proc:function(){a.reg.andAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","A"]}}},this.opecodeTable[d("0346")]={mnemonic:"AND n",cycle:7,proc:function(){a.reg.andAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["AND",c.HEX(2)+"H"]}}},this.opecodeTable[d("0246")]={mnemonic:"AND (HL)",cycle:7,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["AND","(HL)"]}}},b[d("0246")]={mnemonic:"AND (IX+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IX+"+c.HEX(2)+"H)"]}}},c[d("0246")]={mnemonic:"AND (IY+d)",cycle:19,proc:function(){a.reg.andAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["AND","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0260")]={mnemonic:"OR B",cycle:4,proc:function(){a.reg.orAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","B"]}}},this.opecodeTable[d("0261")]={mnemonic:"OR C",cycle:4,proc:function(){a.reg.orAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","C"]}}},this.opecodeTable[d("0262")]={mnemonic:"OR D",cycle:4,proc:function(){a.reg.orAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","D"]}}},this.opecodeTable[d("0263")]={mnemonic:"OR E",cycle:4,proc:function(){a.reg.orAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","E"]}}},this.opecodeTable[d("0264")]={mnemonic:"OR H",cycle:4,proc:function(){a.reg.orAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","H"]}}},this.opecodeTable[d("0265")]={mnemonic:"OR L",cycle:4,proc:function(){a.reg.orAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","L"]}}},this.opecodeTable[d("0267")]={mnemonic:"OR A",cycle:4,proc:function(){a.reg.orAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","A"]}}},this.opecodeTable[d("0366")]={mnemonic:"OR n",cycle:7,proc:function(){a.reg.orAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["OR",c.HEX(2)+"H"]}}},this.opecodeTable[d("0266")]={mnemonic:"OR (HL)",cycle:7,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["OR","(HL)"]}}},b[d("0266")]={mnemonic:"OR (IX+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IX+"+c.HEX(2)+"H)"]}}},c[d("0266")]={mnemonic:"OR (IY+d)",cycle:19,proc:function(){a.reg.orAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["OR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0250")]={mnemonic:"XOR B",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","B"]}}},this.opecodeTable[d("0251")]={mnemonic:"XOR C",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","C"]}}},this.opecodeTable[d("0252")]={mnemonic:"XOR D",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","D"]}}},this.opecodeTable[d("0253")]={mnemonic:"XOR E",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","E"]}}},this.opecodeTable[d("0254")]={mnemonic:"XOR H",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","H"]}}},this.opecodeTable[d("0255")]={mnemonic:"XOR L",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","L"]}}},this.opecodeTable[d("0257")]={mnemonic:"XOR A",cycle:4,proc:function(){a.reg.xorAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","A"]}}},this.opecodeTable[d("0356")]={mnemonic:"XOR n",cycle:7,proc:function(){a.reg.xorAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["XOR",c.HEX(2)+"H"]}}},this.opecodeTable[d("0256")]={mnemonic:"XOR (HL)",cycle:7,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["XOR","(HL)"]}}},b[d("0256")]={mnemonic:"XOR (IX+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IX+"+c.HEX(2)+"H)"]}}},c[d("0256")]={mnemonic:"XOR (IY+d)",cycle:19,proc:function(){a.reg.xorAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["XOR","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0270")]={mnemonic:"CP B",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","B"]}}},this.opecodeTable[d("0271")]={mnemonic:"CP C",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","C"]}}},this.opecodeTable[d("0272")]={mnemonic:"CP D",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","D"]}}},this.opecodeTable[d("0273")]={mnemonic:"CP E",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","E"]}}},this.opecodeTable[d("0274")]={mnemonic:"CP H",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","H"]}}},this.opecodeTable[d("0275")]={mnemonic:"CP L",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","L"]}}},this.opecodeTable[d("0277")]={mnemonic:"CP A",cycle:4,proc:function(){a.reg.compareAcc(a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","A"]}}},this.opecodeTable[d("0376")]={mnemonic:"CP n",cycle:7,proc:function(){a.reg.compareAcc(a.fetch())},disasm:function(a,b){var c=a.peek(b+1);return{code:[a.peek(b),c],mnemonic:["CP",c.HEX(2)+"H"]}}},this.opecodeTable[d("0276")]={mnemonic:"CP (HL)",cycle:7,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.getHL()))},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CP","(HL)"]}}},b[d("0276")]={mnemonic:"CP (IX+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IX+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IX+"+c.HEX(2)+"H)"]}}},c[d("0276")]={mnemonic:"CP (IY+d)",cycle:19,proc:function(){a.reg.compareAcc(a.memory.peek(a.reg.IY+a.fetch()))},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["CP","(IY+"+c.HEX(2)+"H)"]}}},this.opecodeTable[d("0004")]={mnemonic:"INC B",cycle:4,proc:function(){a.reg.increment("B")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","B"]}}},this.opecodeTable[d("0014")]={mnemonic:"INC C",cycle:4,proc:function(){a.reg.increment("C")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","C"]}}},this.opecodeTable[d("0024")]={mnemonic:"INC D",cycle:4,proc:function(){a.reg.increment("D")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","D"]}}},this.opecodeTable[d("0034")]={mnemonic:"INC E",cycle:4,proc:function(){a.reg.increment("E")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","E"]}}},this.opecodeTable[d("0044")]={mnemonic:"INC H",cycle:4,proc:function(){a.reg.increment("H")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","H"]}}},this.opecodeTable[d("0054")]={mnemonic:"INC L",cycle:4,proc:function(){a.reg.increment("L")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","L"]}}},this.opecodeTable[d("0074")]={mnemonic:"INC A",cycle:4,proc:function(){a.reg.increment("A")},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","A"]}}},this.opecodeTable[d("0064")]={mnemonic:"INC (HL)",cycle:11,proc:function(){a.incrementAt(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","(HL)"]}}},b[d("0064")]={mnemonic:"INC (IX+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IX+ "+c+")"]}}},c[d("0064")]={mnemonic:"INC (IY+d)",cycle:23,proc:function(){a.incrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["INC","(IY+ "+c+")"]}}},this.opecodeTable[d("0005")]={mnemonic:"DEC B",proc:function(){a.reg.decrement("B")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","B"]}}},this.opecodeTable[d("0015")]={mnemonic:"DEC C",proc:function(){a.reg.decrement("C")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","C"]}}},this.opecodeTable[d("0025")]={mnemonic:"DEC D",proc:function(){a.reg.decrement("D")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","D"]}}},this.opecodeTable[d("0035")]={mnemonic:"DEC E",proc:function(){a.reg.decrement("E")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","E"]}}},this.opecodeTable[d("0045")]={mnemonic:"DEC H",proc:function(){a.reg.decrement("H")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","H"]}}},this.opecodeTable[d("0055")]={mnemonic:"DEC L",proc:function(){a.reg.decrement("L")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","L"]}}},this.opecodeTable[d("0075")]={mnemonic:"DEC A",proc:function(){a.reg.decrement("A")},cycle:4,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","A"]}}},this.opecodeTable[d("0065")]={mnemonic:"DEC (HL)",proc:function(){a.decrementAt(a.reg.getHL())},cycle:11,disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","(HL)"]}}},b[d("0065")]={mnemonic:"DEC (IX+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IX+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IX+ "+c+")"]}}},c[d("0065")]={mnemonic:"DEC (IY+d)",cycle:23,proc:function(){a.decrementAt(a.reg.IY+a.fetch())},disasm:function(a,b){var c=a.peek(b+2);return{code:[a.peek(b),a.peek(b+1),c],mnemonic:["DEC","(IY+ "+c+")"]}}},this.opecodeTable[d("0047")]={mnemonic:"DAA",cycle:4,proc:function(){a.reg.DAA()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DAA"]}}},this.opecodeTable[d("0057")]={mnemonic:"CPL",cycle:4,proc:function(){a.reg.CPL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CPL"]}}},this.opecodeTable[d("0077")]={mnemonic:"CCF",cycle:4,proc:function(){a.reg.flagC()?a.reg.clearFlagC():a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["CCF"]}}},this.opecodeTable[d("0067")]={mnemonic:"SCF",cycle:4,proc:function(){a.reg.setFlagC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["SCF"]}}},this.opecodeTable[d("0000")]={mnemonic:"NOP",cycle:4,proc:function(){},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["NOP"]}}},this.opecodeTable[d("0166")]={mnemonic:"HALT",cycle:4,proc:function(){throw a.HALT=1,a.reg.PC-=1,a.exec=function(){throw a.reg.R=a.reg.R+1&255,"halt"},"halt"},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["HALT"]}}},this.opecodeTable[d("0363")]={mnemonic:"DI",cycle:4,proc:function(){a.IFF1=a.IFF2=0},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DI"]}}},this.opecodeTable[d("0373")]={mnemonic:"EI",cycle:4,proc:function(){a.IFF1?a.IFF2=1:(a.IFF1=this.IFF2=1,a.reg.R=a.reg.R+1&255,a.exec())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["EI"]}}},j[d("0104")]={mnemonic:"NEG",cycle:8,proc:function(){a.reg.NEG()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["NEG"]}}},j[d("0106")]={mnemonic:"IM0",cycle:8,proc:function(){a.IM=0},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM0"]}}},j[d("0126")]={mnemonic:"IM1",cycle:8,proc:function(){a.IM=1},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM1"]}}},j[d("0136")]={mnemonic:"IM2",cycle:8,proc:function(){a.IM=2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IM2"]}}},this.opecodeTable[d("0011")]={mnemonic:"ADD HL,BC",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","BC"]}}},this.opecodeTable[d("0031")]={mnemonic:"ADD HL,DE",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","DE"]}}},this.opecodeTable[d("0051")]={mnemonic:"ADD HL,HL",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","HL"]}}},this.opecodeTable[d("0071")]={mnemonic:"ADD HL,SP",cycle:11,proc:function(){a.reg.ADD_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["ADD","HL","SP"]}}},j[d("0112")]={mnemonic:"ADC HL,BC",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","BC"]}}},j[d("0132")]={mnemonic:"ADC HL,DE",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","DE"]}}},j[d("0152")]={mnemonic:"ADC HL,HL",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","HL"]}}},j[d("0172")]={mnemonic:"ADC HL,SP",cycle:15,proc:function(){a.reg.ADC_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADC","HL","SP"]}}},j[d("0102")]={mnemonic:"SBC HL,BC",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getBC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","BC"]}}},j[d("0122")]={mnemonic:"SBC HL,DE",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getDE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","DE"]}}},j[d("0142")]={mnemonic:"SBC HL,HL",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.getHL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","HL"]}}},j[d("0162")]={mnemonic:"SBC HL,SP",cycle:15,proc:function(){a.reg.SBC_HL(a.reg.SP)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SBC","HL","SP"]}}},b[d("0011")]={mnemonic:"ADD IX,BC",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getBC())},disasm:function(){return{code:[221,9],mnemonic:["ADD","IX","BC"]}}},b[d("0031")]={mnemonic:"ADD IX,DE",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.getDE())},disasm:function(){return{code:[221,25],mnemonic:["ADD","IX","DE"]}}},b[d("0051")]={mnemonic:"ADD IX,IX",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.IX)},disasm:function(){return{code:[221,41],mnemonic:["ADD","IX","IX"]}}},b[d("0071")]={mnemonic:"ADD IX,SP",cycle:15,proc:function(){a.reg.ADD_IX(a.reg.SP)},disasm:function(){return{code:[221,57],mnemonic:["ADD","IX","SP"]}}},c[d("0011")]={mnemonic:"ADD IY,BC",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getBC())},disasm:function(){return{code:[253,9],mnemonic:["ADD","IY","BC"]}}},c[d("0031")]={mnemonic:"ADD IY,DE",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.getDE())},disasm:function(){return{code:[253,25],mnemonic:["ADD","IY","DE"]}}},c[d("0051")]={mnemonic:"ADD IY,IY",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.IY)},disasm:function(){return{code:[253,41],mnemonic:["ADD","IY","IY"]}}},c[d("0071")]={mnemonic:"ADD IY,SP",cycle:15,proc:function(){a.reg.ADD_IY(a.reg.SP)},disasm:function(){return{code:[253,57],mnemonic:["ADD","IY","SP"]}}},this.opecodeTable[d("0003")]={mnemonic:"INC BC",cycle:6,proc:function(){a.reg.incBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","BC"]}}},this.opecodeTable[d("0023")]={mnemonic:"INC DE",cycle:6,proc:function(){a.reg.incDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","DE"]}}},this.opecodeTable[d("0043")]={mnemonic:"INC HL",cycle:6,proc:function(){a.reg.incHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","HL"]}}},this.opecodeTable[d("0063")]={mnemonic:"INC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP+1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["INC","SP"]}}},b[d("0043")]={mnemonic:"INC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IX"]}}},c[d("0043")]={mnemonic:"INC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY+1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INC","IY"]}}},this.opecodeTable[d("0013")]={mnemonic:"DEC BC",cycle:6,proc:function(){a.reg.decBC()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","BC"]}}},this.opecodeTable[d("0033")]={mnemonic:"DEC DE",cycle:6,proc:function(){a.reg.decDE()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","DE"]}}},this.opecodeTable[d("0053")]={
mnemonic:"DEC HL",cycle:6,proc:function(){a.reg.decHL()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","HL"]}}},this.opecodeTable[d("0073")]={mnemonic:"DEC SP",cycle:6,proc:function(){a.reg.SP=a.reg.SP-1&65535},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["DEC","SP"]}}},b[d("0053")]={mnemonic:"DEC IX",cycle:10,proc:function(){a.reg.IX=a.reg.IX-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IX"]}}};c[d("0053")]={mnemonic:"DEC IY",cycle:10,proc:function(){a.reg.IY=a.reg.IY-1&65535},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DEC","IY"]}}},this.opecodeTable[d("0007")]={mnemonic:"RLCA",cycle:4,proc:function(){a.reg.RLCA()},disasm:function(){return{code:[d("0007")],mnemonic:["RLCA"]}}},this.opecodeTable[d("0027")]={mnemonic:"RLA",cycle:4,proc:function(){a.reg.RLA()},disasm:function(){return{code:[d("0027")],mnemonic:["RLA"]}}},this.opecodeTable[d("0017")]={mnemonic:"RRCA",cycle:4,proc:function(){a.reg.RRCA()},disasm:function(){return{code:[d("0017")],mnemonic:["RRCA"]}}},this.opecodeTable[d("0037")]={mnemonic:"RRA",cycle:4,proc:function(){a.reg.RRA()},disasm:function(){return{code:[d("0037")],mnemonic:["RRA"]}}},b[d("0313")]={mnemonic:function(){return h},proc:function(){var b=a.fetch(),c=a.fetch();h[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return h[c].disasm(a,b)}},c[d("0313")]={mnemonic:function(){return i},proc:function(){var b=a.fetch(),c=a.fetch();i[c].proc(b)},disasm:function(a,b){var c=a.peek(b+3);return i[c].disasm(a,b)}},e[d("0000")]={mnemonic:"RLC B",cycle:4,proc:function(){a.reg.setB(a.reg.RLC(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","B"]}}},e[d("0001")]={mnemonic:"RLC C",cycle:4,proc:function(){a.reg.setC(a.reg.RLC(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","C"]}}},e[d("0002")]={mnemonic:"RLC D",cycle:4,proc:function(){a.reg.setD(a.reg.RLC(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","D"]}}},e[d("0003")]={mnemonic:"RLC E",cycle:4,proc:function(){a.reg.setE(a.reg.RLC(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","E"]}}},e[d("0004")]={mnemonic:"RLC H",cycle:4,proc:function(){a.reg.setH(a.reg.RLC(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","H"]}}},e[d("0005")]={mnemonic:"RLC L",cycle:4,proc:function(){a.reg.setL(a.reg.RLC(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","L"]}}},e[d("0007")]={mnemonic:"RLC A",cycle:4,proc:function(){a.reg.setA(a.reg.RLC(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","A"]}}},e[d("0006")]={mnemonic:"RLC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RLC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLC","(HL)"]}}},h[d("0006")]={mnemonic:"RLC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IX+"+a.peek(b+2)+")"]}}},i[d("0006")]={mnemonic:"RLC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RLC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RLC","(IY+"+a.peek(b+2)+")"]}}},e[d("0020")]={mnemonic:"RL B",cycle:8,proc:function(){a.reg.setB(a.reg.RL(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","B"]}}},e[d("0021")]={mnemonic:"RL C",cycle:8,proc:function(){a.reg.setC(a.reg.RL(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","C"]}}},e[d("0022")]={mnemonic:"RL D",cycle:8,proc:function(){a.reg.setD(a.reg.RL(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","D"]}}},e[d("0023")]={mnemonic:"RL E",cycle:8,proc:function(){a.reg.setE(a.reg.RL(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","E"]}}},e[d("0024")]={mnemonic:"RL H",cycle:8,proc:function(){a.reg.setH(a.reg.RL(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","H"]}}},e[d("0025")]={mnemonic:"RL L",cycle:8,proc:function(){a.reg.setL(a.reg.RL(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","L"]}}},e[d("0026")]={mnemonic:"RL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","(HL)"]}}},e[d("0027")]={mnemonic:"RL A",cycle:8,proc:function(){a.reg.setA(a.reg.RL(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RL","A"]}}},h[d("0026")]={mnemonic:"RL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IX+"+a.peek(b+2)+")"]}}},i[d("0026")]={mnemonic:"RL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RL","(IY+"+a.peek(b+2)+")"]}}},e[d("0010")]={mnemonic:"RRC B",cycle:4,proc:function(){a.reg.setB(a.reg.RRC(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","B"]}}},e[d("0011")]={mnemonic:"RRC C",cycle:4,proc:function(){a.reg.setC(a.reg.RRC(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","C"]}}},e[d("0012")]={mnemonic:"RRC D",cycle:4,proc:function(){a.reg.setD(a.reg.RRC(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","D"]}}},e[d("0013")]={mnemonic:"RRC E",cycle:4,proc:function(){a.reg.setE(a.reg.RRC(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","E"]}}},e[d("0014")]={mnemonic:"RRC H",cycle:4,proc:function(){a.reg.setH(a.reg.RRC(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","H"]}}},e[d("0015")]={mnemonic:"RRC L",cycle:4,proc:function(){a.reg.setL(a.reg.RRC(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","L"]}}},e[d("0017")]={mnemonic:"RRC A",cycle:4,proc:function(){a.reg.setA(a.reg.RRC(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","A"]}}},e[d("0016")]={mnemonic:"RRC (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RRC(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRC","(HL)"]}}},h[d("0016")]={mnemonic:"RRC (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IX+"+a.peek(b+2)+")"]}}},i[d("0016")]={mnemonic:"RRC (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RRC(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RRC","(IY+"+a.peek(b+2)+")"]}}},e[d("0030")]={mnemonic:"RR B",cycle:8,proc:function(){a.reg.setB(a.reg.RR(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","B"]}}},e[d("0031")]={mnemonic:"RR C",cycle:8,proc:function(){a.reg.setC(a.reg.RR(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","C"]}}},e[d("0032")]={mnemonic:"RR D",cycle:8,proc:function(){a.reg.setD(a.reg.RR(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","D"]}}},e[d("0033")]={mnemonic:"RR E",cycle:8,proc:function(){a.reg.setE(a.reg.RR(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","E"]}}},e[d("0034")]={mnemonic:"RR H",cycle:8,proc:function(){a.reg.setH(a.reg.RR(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","H"]}}},e[d("0035")]={mnemonic:"RR L",cycle:8,proc:function(){a.reg.setL(a.reg.RR(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","L"]}}},e[d("0036")]={mnemonic:"RR (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.RR(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","(HL)"]}}},e[d("0037")]={mnemonic:"RR A",cycle:8,proc:function(){a.reg.setA(a.reg.RR(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RR","A"]}}},h[d("0036")]={mnemonic:"RR (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IX+"+a.peek(b+2)+")"]}}},i[d("0036")]={mnemonic:"RR (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.RR(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["RR","(IY+"+a.peek(b+2)+")"]}}},e[d("0040")]={mnemonic:"SLA B",cycle:8,proc:function(){a.reg.setB(a.reg.SLA(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","B"]}}},e[d("0041")]={mnemonic:"SLA C",cycle:8,proc:function(){a.reg.setC(a.reg.SLA(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","C"]}}},e[d("0042")]={mnemonic:"SLA D",cycle:8,proc:function(){a.reg.setD(a.reg.SLA(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","D"]}}},e[d("0043")]={mnemonic:"SLA E",cycle:8,proc:function(){a.reg.setE(a.reg.SLA(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","E"]}}},e[d("0044")]={mnemonic:"SLA H",cycle:8,proc:function(){a.reg.setH(a.reg.SLA(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","H"]}}},e[d("0045")]={mnemonic:"SLA L",cycle:8,proc:function(){a.reg.setL(a.reg.SLA(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","L"]}}},e[d("0047")]={mnemonic:"SLA A",cycle:8,proc:function(){a.reg.setA(a.reg.SLA(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","A"]}}},e[d("0046")]={mnemonic:"SLA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SLA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SLA","(HL)"]}}},h[d("0046")]={mnemonic:"SLA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IX+"+a.peek(b+2)+")"]}}},i[d("0046")]={mnemonic:"SLA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SLA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SLA","(IY+"+a.peek(b+2)+")"]}}},e[d("0050")]={mnemonic:"SRA B",cycle:8,proc:function(){a.reg.setB(a.reg.SRA(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","B"]}}},e[d("0051")]={mnemonic:"SRA C",cycle:8,proc:function(){a.reg.setC(a.reg.SRA(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","C"]}}},e[d("0052")]={mnemonic:"SRA D",cycle:8,proc:function(){a.reg.setD(a.reg.SRA(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","D"]}}},e[d("0053")]={mnemonic:"SRA E",cycle:8,proc:function(){a.reg.setE(a.reg.SRA(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","E"]}}},e[d("0054")]={mnemonic:"SRA H",cycle:8,proc:function(){a.reg.setH(a.reg.SRA(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","H"]}}},e[d("0055")]={mnemonic:"SRA L",cycle:8,proc:function(){a.reg.setL(a.reg.SRA(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","L"]}}},e[d("0057")]={mnemonic:"SRA A",cycle:8,proc:function(){a.reg.setA(a.reg.SRA(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","A"]}}},e[d("0056")]={mnemonic:"SRA (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRA(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRA","(HL)"]}}},h[d("0056")]={mnemonic:"SRA (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IX+"+a.peek(b+2)+")"]}}},i[d("0056")]={mnemonic:"SRA (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRA(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRA","(IY+"+a.peek(b+2)+")"]}}},e[d("0070")]={mnemonic:"SRL B",cycle:8,proc:function(){a.reg.setB(a.reg.SRL(a.reg.getB()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","B"]}}},e[d("0071")]={mnemonic:"SRL C",cycle:8,proc:function(){a.reg.setC(a.reg.SRL(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","C"]}}},e[d("0072")]={mnemonic:"SRL D",cycle:8,proc:function(){a.reg.setD(a.reg.SRL(a.reg.getD()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","D"]}}},e[d("0073")]={mnemonic:"SRL E",cycle:8,proc:function(){a.reg.setE(a.reg.SRL(a.reg.getE()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","E"]}}},e[d("0074")]={mnemonic:"SRL H",cycle:8,proc:function(){a.reg.setH(a.reg.SRL(a.reg.getH()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","H"]}}},e[d("0075")]={mnemonic:"SRL L",cycle:8,proc:function(){a.reg.setL(a.reg.SRL(a.reg.getL()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","L"]}}},e[d("0077")]={mnemonic:"SRL A",cycle:8,proc:function(){a.reg.setA(a.reg.SRL(a.reg.getA()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","A"]}}},e[d("0076")]={mnemonic:"SRL (HL)",cycle:15,proc:function(){var b=a.reg.getHL();a.memory.poke(b,a.reg.SRL(a.memory.peek(b)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["SRL","(HL)"]}}},h[d("0076")]={mnemonic:"SRL (IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IX+"+a.peek(b+2)+")"]}}},i[d("0076")]={mnemonic:"SRL (IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,a.reg.SRL(a.memory.peek(c)))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1),a.peek(b+2),a.peek(b+3)],mnemonic:["SRL","(IY+"+a.peek(b+2)+")"]}}},j[d("0157")]={mnemonic:"RLD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.getA(),e=15&a.reg.getA(),f=c>>4&15,g=c>>0&15;a.reg.setA(d|f),c=g<<4|e,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RLD"]}}},j[d("0147")]={mnemonic:"RRD",cycle:18,proc:function(){var b=a.reg.getHL(),c=a.memory.peek(b),d=240&a.reg.getA(),e=15&a.reg.getA(),f=c>>4&15,g=c>>0&15;a.reg.setA(d|g),c=e<<4|f,a.memory.poke(b,c)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RRD"]}}};var u,v,w=["B","C","D","E","H","L","(HL)","A"];for(u=0;u<w.length;u++)for(v=0;v<8;v++)e[d("0100")|v<<3|u]={mnemonic:"BIT "+v+","+w[u],cycle:function(a){return 6!=a?8:12}(u),proc:function(b,c){return 6!=c?function(){0!=(a.reg["get"+w[c]]()&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}:function(){var c=a.reg.getHL();0!=(a.memory.peek(c)&1<<b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()}}(v,u),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["BIT",a,b]}}}(v,w[u])};var x=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["BIT",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};for(h[d("0106")]={mnemonic:"BIT 0,(IX+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,0,"IX")}},h[d("0116")]={mnemonic:"BIT 1,(IX+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,1,"IX")}},h[d("0126")]={mnemonic:"BIT 2,(IX+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,2,"IX")}},h[d("0136")]={mnemonic:"BIT 3,(IX+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,3,"IX")}},h[d("0146")]={mnemonic:"BIT 4,(IX+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,4,"IX")}},h[d("0156")]={mnemonic:"BIT 5,(IX+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,5,"IX")}},h[d("0166")]={mnemonic:"BIT 6,(IX+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,6,"IX")}},h[d("0176")]={mnemonic:"BIT 7,(IX+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IX+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,7,"IX")}},i[d("0106")]={mnemonic:"BIT 0,(IY+d)",cycle:20,proc:function(b){1&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,0,"IY")}},i[d("0116")]={mnemonic:"BIT 1,(IY+d)",cycle:20,proc:function(b){2&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,1,"IY")}},i[d("0126")]={mnemonic:"BIT 2,(IY+d)",cycle:20,proc:function(b){4&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,2,"IY")}},i[d("0136")]={mnemonic:"BIT 3,(IY+d)",cycle:20,proc:function(b){8&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,3,"IY")}},i[d("0146")]={mnemonic:"BIT 4,(IY+d)",cycle:20,proc:function(b){16&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,4,"IY")}},i[d("0156")]={mnemonic:"BIT 5,(IY+d)",cycle:20,proc:function(b){32&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,5,"IY")}},i[d("0166")]={mnemonic:"BIT 6,(IY+d)",cycle:20,proc:function(b){64&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,6,"IY")}},i[d("0176")]={mnemonic:"BIT 7,(IY+d)",cycle:20,proc:function(b){128&a.memory.peek(a.reg.IY+b)?a.reg.clearFlagZ():a.reg.setFlagZ(),a.reg.setFlagH(),a.reg.clearFlagN()},disasm:function(a,b){return x(0,b,7,"IY")}},u=0;u<w.length;u++)for(v=0;v<8;v++)e[d("0300")|v<<3|u]={mnemonic:"SET "+v+","+w[u],cycle:function(a){return 6!=a?4:15}(u),proc:function(b,c){return 6!=c?function(){a.reg["set"+w[c]](a.reg["get"+w[c]]()|1<<b)}:function(){var c=a.reg.getHL();a.memory.poke(c,a.memory.peek(c)|1<<b)}}(v,u),disasm:function(a,b){return function(c,d){return{code:[c.peek(d),c.peek(d+1)],mnemonic:["SET",a,b]}}}(v,w[u])};var y=function(b,c,d,e){var f=a.memory.peek(c+2);return{code:[a.memory.peek(c+0),a.memory.peek(c+1),f,a.memory.peek(c+3)],mnemonic:["SET",""+d,"("+e+"+"+f.HEX(2)+"H)"]}};h[d("0306")]={mnemonic:"SET 0,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return y(0,b,0,"IX")}},h[d("0316")]={mnemonic:"SET 1,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return y(0,b,1,"IX")}},h[d("0326")]={mnemonic:"SET 2,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return y(0,b,2,"IX")}},h[d("0336")]={mnemonic:"SET 3,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return y(0,b,3,"IX")}},h[d("0346")]={mnemonic:"SET 4,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return y(0,b,4,"IX")}},h[d("0356")]={mnemonic:"SET 5,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return y(0,b,5,"IX")}},h[d("0366")]={mnemonic:"SET 6,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return y(0,b,6,"IX")}},h[d("0376")]={mnemonic:"SET 7,(IX+d)",cycle:23,proc:function(b){var c=a.reg.IX+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return y(0,b,7,"IX")}},i[d("0306")]={mnemonic:"SET 0,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,1|a.memory.peek(c))},disasm:function(a,b){return y(0,b,0,"IY")}},i[d("0316")]={mnemonic:"SET 1,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,2|a.memory.peek(c))},disasm:function(a,b){return y(0,b,1,"IY")}},i[d("0326")]={mnemonic:"SET 2,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,4|a.memory.peek(c))},disasm:function(a,b){return y(0,b,2,"IY")}},i[d("0336")]={mnemonic:"SET 3,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,8|a.memory.peek(c))},disasm:function(a,b){return y(0,b,3,"IY")}},i[d("0346")]={mnemonic:"SET 4,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,16|a.memory.peek(c))},disasm:function(a,b){return y(0,b,4,"IY")}},i[d("0356")]={mnemonic:"SET 5,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,32|a.memory.peek(c))},disasm:function(a,b){return y(0,b,5,"IY")}},i[d("0366")]={mnemonic:"SET 6,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,64|a.memory.peek(c))},disasm:function(a,b){return y(0,b,6,"IY")}},i[d("0376")]={mnemonic:"SET 7,(IY+d)",cycle:23,proc:function(b){var c=a.reg.IY+b;a.memory.poke(c,128|a.memory.peek(c))},disasm:function(a,b){return y(0,b,7,"IY")}};var z=function(b,c){var d=~(1<<b);return function(){a.reg["set"+c](a.reg["get"+c]()&d)}},A=function(a,b){var c="BCDEHL A".indexOf(b),e=a<<3;return function(){return{code:[203,d("0200")|e|c],mnemonic:["RES",a,b]}}},B=function(b){var c=255&~(1<<b);return function(b){return function(){var c=a.reg.getHL(),d=a.memory.peek(c),e=d&b;a.memory.poke(c,e)}}(c)},C=function(a){var b=a<<3;return function(b){return function(){return{code:[203,d("0200")|b|6],mnemonic:["RES",a,"(HL)"]}}}(b)},D=function(b,c){var d=255&~(1<<b);return function(b){return function(d){var e=a.reg[c]+d,f=a.memory.peek(e),g=f&b;a.memory.poke(e,g)}}(d)},E=function(a,b){var c={IX:221,IY:253}[b];return function(c,d){return function(c,e){var f=c.peek(e+2),g=c.peek(e+3);return{code:[d,203,f,g],mnemonic:["RES",a,"("+b+"+"+f.HEX(2)+"H)"]}}}(0,c)};e[d("0200")]={mnemonic:"RES 0,B",cycle:8,proc:z(0,"B"),disasm:A(0,"B")},e[d("0210")]={mnemonic:"RES 1,B",cycle:8,proc:z(1,"B"),disasm:A(1,"B")},e[d("0220")]={mnemonic:"RES 2,B",cycle:8,proc:z(2,"B"),disasm:A(2,"B")},e[d("0230")]={mnemonic:"RES 3,B",cycle:8,proc:z(3,"B"),disasm:A(3,"B")},e[d("0240")]={mnemonic:"RES 4,B",cycle:8,proc:z(4,"B"),disasm:A(4,"B")},e[d("0250")]={mnemonic:"RES 5,B",cycle:8,proc:z(5,"B"),disasm:A(5,"B")},e[d("0260")]={mnemonic:"RES 6,B",cycle:8,proc:z(6,"B"),disasm:A(6,"B")},e[d("0270")]={mnemonic:"RES 7,B",cycle:8,proc:z(7,"B"),disasm:A(7,"B")},e[d("0201")]={mnemonic:"RES 0,C",cycle:8,proc:z(0,"C"),disasm:A(0,"C")},e[d("0211")]={mnemonic:"RES 1,C",cycle:8,proc:z(1,"C"),disasm:A(1,"C")},e[d("0221")]={mnemonic:"RES 2,C",cycle:8,proc:z(2,"C"),disasm:A(2,"C")},e[d("0231")]={mnemonic:"RES 3,C",cycle:8,proc:z(3,"C"),disasm:A(3,"C")},e[d("0241")]={mnemonic:"RES 4,C",cycle:8,proc:z(4,"C"),disasm:A(4,"C")},e[d("0251")]={mnemonic:"RES 5,C",cycle:8,proc:z(5,"C"),disasm:A(5,"C")},e[d("0261")]={mnemonic:"RES 6,C",cycle:8,proc:z(6,"C"),disasm:A(6,"C")},e[d("0271")]={mnemonic:"RES 7,C",cycle:8,proc:z(7,"C"),disasm:A(7,"C")},e[d("0202")]={mnemonic:"RES 0,D",cycle:8,proc:z(0,"D"),disasm:A(0,"D")},e[d("0212")]={mnemonic:"RES 1,D",cycle:8,proc:z(1,"D"),disasm:A(1,"D")},e[d("0222")]={mnemonic:"RES 2,D",cycle:8,proc:z(2,"D"),disasm:A(2,"D")},e[d("0232")]={mnemonic:"RES 3,D",cycle:8,proc:z(3,"D"),disasm:A(3,"D")},e[d("0242")]={mnemonic:"RES 4,D",cycle:8,proc:z(4,"D"),disasm:A(4,"D")},e[d("0252")]={mnemonic:"RES 5,D",cycle:8,proc:z(5,"D"),disasm:A(5,"D")},e[d("0262")]={mnemonic:"RES 6,D",cycle:8,proc:z(6,"D"),disasm:A(6,"D")},e[d("0272")]={mnemonic:"RES 7,D",cycle:8,proc:z(7,"D"),disasm:A(7,"D")},e[d("0203")]={mnemonic:"RES 0,E",cycle:8,proc:z(0,"E"),disasm:A(0,"E")},e[d("0213")]={mnemonic:"RES 1,E",cycle:8,proc:z(1,"E"),disasm:A(1,"E")},e[d("0223")]={mnemonic:"RES 2,E",cycle:8,proc:z(2,"E"),disasm:A(2,"E")},e[d("0233")]={mnemonic:"RES 3,E",cycle:8,proc:z(3,"E"),disasm:A(3,"E")},e[d("0243")]={mnemonic:"RES 4,E",cycle:8,proc:z(4,"E"),disasm:A(4,"E")},e[d("0253")]={mnemonic:"RES 5,E",cycle:8,proc:z(5,"E"),disasm:A(5,"E")},e[d("0263")]={mnemonic:"RES 6,E",cycle:8,proc:z(6,"E"),disasm:A(6,"E")},e[d("0273")]={mnemonic:"RES 7,E",cycle:8,proc:z(7,"E"),disasm:A(7,"E")},e[d("0204")]={mnemonic:"RES 0,H",cycle:8,proc:z(0,"H"),disasm:A(0,"H")},e[d("0214")]={mnemonic:"RES 1,H",cycle:8,proc:z(1,"H"),disasm:A(1,"H")},e[d("0224")]={mnemonic:"RES 2,H",cycle:8,proc:z(2,"H"),disasm:A(2,"H")},e[d("0234")]={mnemonic:"RES 3,H",cycle:8,proc:z(3,"H"),disasm:A(3,"H")},e[d("0244")]={mnemonic:"RES 4,H",cycle:8,proc:z(4,"H"),disasm:A(4,"H")},e[d("0254")]={mnemonic:"RES 5,H",cycle:8,proc:z(5,"H"),disasm:A(5,"H")},e[d("0264")]={mnemonic:"RES 6,H",cycle:8,proc:z(6,"H"),disasm:A(6,"H")},e[d("0274")]={mnemonic:"RES 7,H",cycle:8,proc:z(7,"H"),disasm:A(7,"H")},e[d("0205")]={mnemonic:"RES 0,L",cycle:8,proc:z(0,"L"),disasm:A(0,"L")},e[d("0215")]={mnemonic:"RES 1,L",cycle:8,proc:z(1,"L"),disasm:A(1,"L")},e[d("0225")]={mnemonic:"RES 2,L",cycle:8,proc:z(2,"L"),disasm:A(2,"L")},e[d("0235")]={mnemonic:"RES 3,L",cycle:8,proc:z(3,"L"),disasm:A(3,"L")},e[d("0245")]={mnemonic:"RES 4,L",cycle:8,proc:z(4,"L"),disasm:A(4,"L")},e[d("0255")]={mnemonic:"RES 5,L",cycle:8,proc:z(5,"L"),disasm:A(5,"L")},e[d("0265")]={mnemonic:"RES 6,L",cycle:8,proc:z(6,"L"),disasm:A(6,"L")},e[d("0275")]={mnemonic:"RES 7,L",cycle:8,proc:z(7,"L"),disasm:A(7,"L")},e[d("0207")]={mnemonic:"RES 0,A",cycle:8,proc:z(0,"A"),disasm:A(0,"A")},e[d("0217")]={mnemonic:"RES 1,A",cycle:8,proc:z(1,"A"),disasm:A(1,"A")},e[d("0227")]={mnemonic:"RES 2,A",cycle:8,proc:z(2,"A"),disasm:A(2,"A")},e[d("0237")]={mnemonic:"RES 3,A",cycle:8,proc:z(3,"A"),disasm:A(3,"A")},e[d("0247")]={mnemonic:"RES 4,A",cycle:8,proc:z(4,"A"),disasm:A(4,"A")},e[d("0257")]={mnemonic:"RES 5,A",cycle:8,proc:z(5,"A"),disasm:A(5,"A")},e[d("0267")]={mnemonic:"RES 6,A",cycle:8,proc:z(6,"A"),disasm:A(6,"A")},e[d("0277")]={mnemonic:"RES 7,A",cycle:8,proc:z(7,"A"),disasm:A(7,"A")},e[d("0206")]={mnemonic:"RES 0,(HL)",cycle:15,proc:B(0),disasm:C(0)},e[d("0216")]={mnemonic:"RES 1,(HL)",cycle:15,proc:B(1),disasm:C(1)},e[d("0226")]={mnemonic:"RES 2,(HL)",cycle:15,proc:B(2),disasm:C(2)},e[d("0236")]={mnemonic:"RES 3,(HL)",cycle:15,proc:B(3),disasm:C(3)},e[d("0246")]={mnemonic:"RES 4,(HL)",cycle:15,proc:B(4),disasm:C(4)},e[d("0256")]={mnemonic:"RES 5,(HL)",cycle:15,proc:B(5),disasm:C(5)},e[d("0266")]={mnemonic:"RES 6,(HL)",cycle:15,proc:B(6),disasm:C(6)},e[d("0276")]={mnemonic:"RES 7,(HL)",cycle:15,proc:B(7),disasm:C(7)},h[d("0206")]={mnemonic:"RES 0,(IX+d)",cycle:23,proc:D(0,"IX"),disasm:E(0,"IX")},h[d("0216")]={mnemonic:"RES 1,(IX+d)",cycle:23,proc:D(1,"IX"),disasm:E(1,"IX")},h[d("0226")]={mnemonic:"RES 2,(IX+d)",cycle:23,proc:D(2,"IX"),disasm:E(2,"IX")},h[d("0236")]={mnemonic:"RES 3,(IX+d)",cycle:23,proc:D(3,"IX"),disasm:E(3,"IX")},h[d("0246")]={mnemonic:"RES 4,(IX+d)",cycle:23,proc:D(4,"IX"),disasm:E(4,"IX")},h[d("0256")]={mnemonic:"RES 5,(IX+d)",cycle:23,proc:D(5,"IX"),disasm:E(5,"IX")},h[d("0266")]={mnemonic:"RES 6,(IX+d)",cycle:23,proc:D(6,"IX"),disasm:E(6,"IX")},h[d("0276")]={mnemonic:"RES 7,(IX+d)",cycle:23,proc:D(7,"IX"),disasm:E(7,"IX")},i[d("0206")]={mnemonic:"RES 0,(IY+d)",cycle:23,proc:D(0,"IY"),disasm:E(0,"IY")},i[d("0216")]={mnemonic:"RES 1,(IY+d)",cycle:23,proc:D(1,"IY"),disasm:E(1,"IY")},i[d("0226")]={mnemonic:"RES 2,(IY+d)",cycle:23,proc:D(2,"IY"),disasm:E(2,"IY")},i[d("0236")]={mnemonic:"RES 3,(IY+d)",cycle:23,proc:D(3,"IY"),disasm:E(3,"IY")},i[d("0246")]={mnemonic:"RES 4,(IY+d)",cycle:23,proc:D(4,"IY"),disasm:E(4,"IY")},i[d("0256")]={mnemonic:"RES 5,(IY+d)",cycle:23,proc:D(5,"IY"),disasm:E(5,"IY")},i[d("0266")]={mnemonic:"RES 6,(IY+d)",cycle:23,proc:D(6,"IY"),disasm:E(6,"IY")},i[d("0276")]={mnemonic:"RES 7,(IY+d)",cycle:23,proc:D(7,"IY"),disasm:E(7,"IY")};var F=function(a,b){var c,e,f,h=a.peek(b),i=[h],j=[],k=null;switch(h&d("0300")){case d("0000"):switch(j.push("JR"),c=g.getSignedByte(a.peek(b+1)),k=b+c+2,i.push(255&c),c=c+2>=0?"+"+(c+2):""+(c+2),h&d("0070")){case d("0030"):break;case d("0070"):j.push("C");break;case d("0050"):j.push("Z");break;case d("0060"):j.push("NC");break;case d("0040"):j.push("NZ");break;default:throw"UNKNOWN OPCODE"}j.push(k.HEX(4)+"H;("+c+")");break;case d("0300"):switch(j.push("JP"),h&d("0003")){case 1:j.push("(HL)");break;case 2:switch(e=a.peek(b+1),f=a.peek(b+2),k=g.pair(f,e),i.push(e),i.push(f),h&d("0070")){case d("0000"):j.push("NZ");break;case d("0010"):j.push("Z");break;case d("0020"):j.push("NC");break;case d("0030"):j.push("C");break;case d("0040"):j.push("PO");break;case d("0050"):j.push("PE");break;case d("0060"):j.push("P");break;case d("0070"):j.push("M")}j.push(f.HEX(2)+e.HEX(2)+"H");break;case 3:e=a.peek(b+1),f=a.peek(b+2),k=g.pair(f,e),i.push(e),i.push(f),j.push(f.HEX(2)+e.HEX(2)+"H")}break;default:throw"UNKNOWN OPCODE"}return{code:i,mnemonic:j,ref_addr_to:k}};this.opecodeTable[d("0303")]={mnemonic:"JP nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.PC=b},disasm:F},this.opecodeTable[d("0302")]={mnemonic:"JP NZ,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0312")]={mnemonic:"JP Z,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagZ()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0322")]={mnemonic:"JP NC,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0332")]={mnemonic:"JP C,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagC()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0342")]={mnemonic:"JP PO,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0352")]={mnemonic:"JP PE,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagP()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0362")]={mnemonic:"JP P,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()||(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0372")]={mnemonic:"JP M,nn",cycle:10,proc:function(){var b=a.fetchPair();a.reg.flagS()&&(a.reg.PC=b)},disasm:F},this.opecodeTable[d("0030")]={mnemonic:"JR e",cycle:12,proc:function(){var b=a.fetch();a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0070")]={mnemonic:"JR C,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()&&a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0050")]={mnemonic:"JR Z,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagZ()&&a.reg.jumpRel(b)},
disasm:F},this.opecodeTable[d("0060")]={mnemonic:"JR NC,e",cycle:12,proc:function(){var b=a.fetch();a.reg.flagC()||a.reg.jumpRel(b)},disasm:F},this.opecodeTable[d("0040")]={mnemonic:"JR NZ,e",proc:function(){var b=a.fetch();a.reg.flagZ()||a.reg.jumpRel(b)},cycle:12,disasm:F},this.opecodeTable[d("0351")]={mnemonic:"JP (HL)",cycle:4,proc:function(){a.reg.PC=a.reg.getHL()},disasm:F},b[d("0351")]={mnemonic:"JP (IX)",cycle:8,proc:function(){a.reg.PC=a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IX)"]}}},c[d("0351")]={mnemonic:"JP (IY)",cycle:8,proc:function(){a.reg.PC=a.reg.IY},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["JP","(IY)"]}}},b[d("0104")]={mnemonic:"LD B,IXH",proc:function(){a.reg.setB(a.reg.IX>>8&255)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","B","IXH"]}}},b[d("0115")]={mnemonic:"LD C,IXL",proc:function(){a.reg.setC(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","C","IXL"]}}},b[d("0140")]={mnemonic:"LD IXH,B",proc:function(){a.reg.IX=65280&a.reg.getB()<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","B"]}}},b[d("0147")]={mnemonic:"LD IXH,A",proc:function(){a.reg.IX=65280&a.reg.getA()<<8|255&a.reg.IX},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXH","A"]}}},b[d("0151")]={mnemonic:"LD IXL,C",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.getC()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","C"]}}},b[d("0157")]={mnemonic:"LD IXL,A",proc:function(){a.reg.IX=65280&a.reg.IX|255&a.reg.getA()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","IXL","A"]}}},b[d("0175")]={mnemonic:"LD A,IXL",proc:function(){a.reg.setA(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["LD","A","IXL"]}}},b[d("0204")]={mnemonic:"ADD A,IXH",proc:function(){a.reg.addAcc(a.reg.IX>>8&255)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXH"]}}},b[d("0205")]={mnemonic:"ADD A,IXL",proc:function(){a.reg.addAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["ADD","A","IXL"]}}},b[d("0275")]={mnemonic:"CP IXL",proc:function(){a.reg.compareAcc(255&a.reg.IX)},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["CP","IXL"]}}},this.opecodeTable[d("0020")]={mnemonic:"DJNZ",cycle:13,proc:function(){var b=a.fetch();a.reg.decrement("B"),a.reg.getB()&&a.reg.jumpRel(b)},disasm:function(a,b){var c=g.getSignedByte(a.peek(b+1)),d=b+c+2;return{code:[a.peek(b),a.peek(b+1)],mnemonic:["DJNZ",d.HEX(4)+"H;("+(c+2>=0?"+":"")+(c+2)+")"],ref_addr_to:d}}},this.opecodeTable[d("0315")]={mnemonic:"CALL nn",cycle:17,proc:function(){var b=a.fetchPair();a.pushPair(a.reg.PC),a.reg.PC=b},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0304")]={mnemonic:"CALL NZ,nn",cycle:"NZ→17,Z→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NZ",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0314")]={mnemonic:"CALL Z,nn",cycle:"Z→17,NZ→10",proc:function(){var b=a.fetchPair();return a.reg.flagZ()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","Z",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0324")]={mnemonic:"CALL NC,nn",cycle:"NC→17, C→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","NC",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0334")]={mnemonic:"CALL C,nn",cycle:"C→17, NC→10",proc:function(){var b=a.fetchPair();return a.reg.flagC()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","C",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0344")]={mnemonic:"CALL PO,nn",cycle:"Parity Odd→17, Even→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PO",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0354")]={mnemonic:"CALL PE,nn",cycle:"Parity Even→17, Odd→10",proc:function(){var b=a.fetchPair();return a.reg.flagP()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","PE",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0364")]={mnemonic:"CALL P,nn",cycle:"P→17, M→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?10:(a.pushPair(a.reg.PC),a.reg.PC=b,17)},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","P",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0374")]={mnemonic:"CALL M,nn",cycle:"M→17, P→10",proc:function(){var b=a.fetchPair();return a.reg.flagS()?(a.pushPair(a.reg.PC),a.reg.PC=b,17):10},disasm:function(a,b){var c=a.peek(b+1),d=a.peek(b+2),e=g.pair(d,c);return{code:[a.peek(b),c,d],mnemonic:["CALL","M",e.HEX(4)+"H"],ref_addr_to:e}}},this.opecodeTable[d("0311")]={mnemonic:"RET",cycle:10,proc:function(){a.reg.PC=a.popPair()},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET"]}}},this.opecodeTable[d("0300")]={mnemonic:"RET NZ",cycle:"NZ→11, Z→5",proc:function(){return a.reg.flagZ()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NZ"]}}},this.opecodeTable[d("0310")]={mnemonic:"RET Z",cycle:"Z→5, NZ→11",proc:function(){return a.reg.flagZ()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","Z"]}}},this.opecodeTable[d("0320")]={mnemonic:"RET NC",cycle:"NC→11,C→5",proc:function(){return a.reg.flagC()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","NC"]}}},this.opecodeTable[d("0330")]={mnemonic:"RET C",cycle:"C→11,NC→5",proc:function(){return a.reg.flagC()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","C"]}}},this.opecodeTable[d("0340")]={mnemonic:"RET PO",cycle:"Parity Odd→11, Parity Even→5",proc:function(){return a.reg.flagP()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PO"]}}},this.opecodeTable[d("0350")]={mnemonic:"RET PE",cycle:"Parity Even→11, Parity Odd→5",proc:function(){return a.reg.flagP()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","PE"]}}},this.opecodeTable[d("0360")]={mnemonic:"RET P",cycle:"P→11, M→5",proc:function(){return a.reg.flagS()?5:(a.reg.PC=a.popPair(),11)},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","P"]}}},this.opecodeTable[d("0370")]={mnemonic:"RET M",cycle:"M→11, P→5",proc:function(){return a.reg.flagS()?(a.reg.PC=a.popPair(),11):5},disasm:function(a,b){return{code:[a.peek(b)],mnemonic:["RET","M"]}}},j[d("0115")]={mnemonic:"RETI",cycle:15,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETI"]}}},j[d("0105")]={mnemonic:"RETN",cycle:14,proc:function(){a.reg.PC=a.popPair(),a.IFF1=a.IFF2},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["RETN"]}}};for(var G=[0,8,16,24,32,40,48,56],H=0;H<G.length;H++)this.opecodeTable[d("0307")|H<<3]={mnemonic:"RST "+G[H].HEX(2)+"H",proc:function(b){return function(){a.pushPair(a.reg.PC),a.reg.PC=b}}(G[H]),cycle:12,disasm:function(a){return function(b,c){return{code:[b.peek(c)],mnemonic:["RST",a.HEX(2)+"H"]}}}(G[H])};this.opecodeTable[d("0333")]={mnemonic:"IN A,(n)",cycle:11,proc:function(){a.reg.setA(a.readIoPort(a.fetch()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","("+a.peek(b+1)+")"]}}},j[d("0100")]={mnemonic:"IN B,(C)",cycle:12,proc:function(){a.reg.setB(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","B","(C)"]}}},j[d("0110")]={mnemonic:"IN C,(C)",cycle:12,proc:function(){a.reg.setC(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","C","(C)"]}}},j[d("0120")]={mnemonic:"IN D,(C)",cycle:12,proc:function(){a.reg.setD(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","D","(C)"]}}},j[d("0130")]={mnemonic:"IN E,(C)",cycle:12,proc:function(){a.reg.setE(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","E","(C)"]}}},j[d("0140")]={mnemonic:"IN H,(C)",cycle:12,proc:function(){a.reg.setH(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","H","(C)"]}}},j[d("0150")]={mnemonic:"IN L,(C)",cycle:12,proc:function(){a.reg.setL(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","L","(C)"]}}},j[d("0170")]={mnemonic:"IN A,(C)",cycle:12,proc:function(){a.reg.setA(a.readIoPort(a.reg.getC()))},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IN","A","(C)"]}}},j[d("0242")]={mnemonic:"INI",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postINI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INI"]}}},j[d("0262")]={mnemonic:"INIR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postINI(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INIR"]}}},j[d("0252")]={mnemonic:"IND",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postIND()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["IND"]}}},j[d("0272")]={mnemonic:"INDR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.memory.poke(a.reg.getHL(),a.readIoPort(a.reg.getC())),a.postIND(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["INDR"]}}},this.opecodeTable[d("0323")]={mnemonic:"OUT (n),A",cycle:11,proc:function(){a.writeIoPort(a.fetch(),a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","("+a.peek(b+1)+")","A"]}}},j[d("0101")]={mnemonic:"OUT (C),B",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getB())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","B"]}}},j[d("0111")]={mnemonic:"OUT (C),C",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getC())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","C"]}}},j[d("0121")]={mnemonic:"OUT (C),D",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getD())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","D"]}}},j[d("0131")]={mnemonic:"OUT (C),E",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getE())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","E"]}}},j[d("0141")]={mnemonic:"OUT (C),H",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getH())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","H"]}}},j[d("0151")]={mnemonic:"OUT (C),L",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getL())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","L"]}}},j[d("0171")]={mnemonic:"OUT (C),A",cycle:12,proc:function(){a.writeIoPort(a.reg.getC(),a.reg.getA())},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUT","(C)","A"]}}},j[d("0243")]={mnemonic:"OUTI",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTI()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTI"]}}},j[d("0263")]={mnemonic:"OTIR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTI(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTIR"]}}},j[d("0253")]={mnemonic:"OUTD",cycle:16,proc:function(){a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTD()},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OUTD"]}}},j[d("0273")]={mnemonic:"OTDR",cycle:"21 x reg B",proc:function(){return a.reg.setB(a.reg.getB()-1&255),a.writeIoPort(a.reg.getC(),a.memory.peek(a.reg.getHL())),a.postOUTD(),0!=a.reg.getB()&&(a.reg.PC-=2),21},disasm:function(a,b){return{code:[a.peek(b),a.peek(b+1)],mnemonic:["OTDR"]}}}},b.exports=i},{"../lib/oct":22,"./bin-util.js":10,"./memory-block.js":14,"./register.js":15,"./z80-line-assembler":16}],12:[function(a,b,c){!function(){var c=a("./bin-util.js"),d=function(){};d.prototype.create=function(a){a=a||{},this.onPeek=a.onPeek||function(){},this.onPoke=a.onPoke||function(){},this.size=a.size||65536,this.startAddr=a.startAddr||0},d.prototype.peekByte=function(){var a="Error: peekByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.pokeByte=function(){var a="Error: pokeByte was not overrided and supported in class of this:"+JSON.stringify(this,null,"    ");throw console.error(a),new Error(a)},d.prototype.clear=function(){for(var a=0;a<this.size;a++)this.pokeByte(0)},d.prototype.peek=function(a){var b=this.peekByte(a),c=this.onPeek.call(this,a,b);return null!=c&&void 0!=c&&(b=c),b},d.prototype.poke=function(a,b){this.pokeByte(a,b),this.onPoke.call(this,a,this.peekByte(a))},d.prototype.peekPair=function(a){var b=this.peek(a+1),d=this.peek(a+0);return c.pair(b,d)},b.exports=d}()},{"./bin-util.js":10}],13:[function(a,b,c){var d=a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size),this.memblk={}},e.prototype.setMemoryBlock=function(a,b){var c,d,e;if(null==b){if(a in this.memblk){for(c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=null;delete this.memblk[a]}}else for(this.memblk[a]=b,c=this.memblk[a].size,d=this.memblk[a].startAddr,e=0;e<c;e++)this.mem[d+e]=b},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535].peek(a)},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535].poke(a,255&b)},b.exports=e},{"./imem":12}],14:[function(a,b,c){var d=a("./imem"),e=function(a){this.create(a)};e.prototype=new d,e.prototype.create=function(a){d.prototype.create.call(this,a),this.mem=new Array(this.size)},e.prototype.peekByte=function(a){return 255&this.mem[a-this.startAddr&65535]},e.prototype.pokeByte=function(a,b){this.mem[a-this.startAddr&65535]=255&b},b.exports=e},{"./imem":12}],15:[function(a,b,c){!function(){"use strict";function c(a,b,c){"use asm";var d=0x80;var e=0x40;var f=0x10;var g=0x04;var h=0x02;var i=0x01;var j=0;var k=0;var l=0;var m=0;var n=0;var o=0;var p=0;var q=0;var r=new a.Uint8Array(c);var s=0;var t=512;var u=1024;function v(a){a=a|0;return r[s|0+a]|0}function w(a,b){a=a|0;b=b|0;r[s|0+a]=b}function x(a){a=a|0;return r[t|0+a]|0}function y(a,b){a=a|0;b=b|0;r[t|0+a]=b}function z(a){a=a|0;return r[u|0+a]|0}function A(a,b){a=a|0;b=b|0;r[u|0+a]=b}function B(){var a=0;var b=0;var c=0;for(a=0;(a|0)<256;a=(a|0)+1|0){b=0;if((a|0)==0){b=b|e}if(a&0x80){b=b|d}c=0;if((a&1|0)!=0){c=c+1|0}if((a&2|0)!=0){c=c+1|0}if((a&4|0)!=0){c=c+1|0}if((a&8|0)!=0){c=c+1|0}if((a&16|0)!=0){c=c+1|0}if((a&32|0)!=0){c=c+1|0}if((a&64|0)!=0){c=c+1|0}if((a&128|0)!=0){c=c+1|0}w(a,(c&1?0:g)|0);y(a,b|0);A(a,b|(v(a)|0)|0)}for(a=0;(a|0)<256;a=(a|0)+1|0){y(a+256|0,x(a|0)|0|i|0);A(a+256|0,z(a|0)|0|i|0);w(a+256|0,v(a|0)|0|i|0)}}function C(a,b){a=a|0;b=b|0;return((0xff&a)<<8)+(0xff&b)|0}function D(a){a=a|0;return a>>8&0xff|0}function E(a){a=a|0;return a&0xff|0}function F(){j=0;k=0;l=0;m=0;n=0;o=0;p=0;q=0}function G(a){a=a|0;j=a&0xff|0}function H(){return j|0}function I(a){a=a|0;k=a&0xff|0}function J(){return k|0}function K(a){a=a|0;l=a&0xff|0}function L(){return l|0}function M(a){a=a|0;m=a&0xff|0}function N(){return m|0}function O(a){a=a|0;n=a&0xff|0}function P(){return n|0}function Q(a){a=a|0;o=a&0xff|0}function R(){return o|0}function S(a){a=a|0;p=a&0xff|0}function T(){return p|0}function U(a){a=a|0;q=a&0xff|0}function V(){return q|0}function W(a){a=a|0;j=D(a)|0;k=E(a)|0}function X(){return C(j,k)|0}function Y(a){a=a|0;l=D(a)|0;m=E(a)|0}function Z(){return C(l,m)|0}function $(a){a=a|0;n=D(a)|0;o=E(a)|0}function _(){return C(n,o)|0}function aa(a){a=a|0;p=D(a)|0;q=E(a)|0}function ba(){return C(p,q)|0}function ca(a){a=a|0;return(q&a?1:0)|0}function da(a){a=a|0;q=q|a}function ea(a){a=a|0;q=q&(~a&0xff)}function fa(){return(q&d?1:0)|0}function ga(){return(q&e?1:0)|0}function ha(){return(q&f?1:0)|0}function ia(){return(q&g?1:0)|0}function ja(){return(q&h?1:0)|0}function ka(){return(q&i?1:0)|0}function la(){q=q|d}function ma(){q=q|e}function na(){q=q|f}function oa(){q=q|g}function pa(){q=q|h}function qa(){q=q|i}function ra(){q=q&(~d&0xff)}function sa(){q=q&(~e&0xff)}function ta(){q=q&(~f&0xff)}function ua(){q=q&(~g&0xff)}function va(){q=q&(~h&0xff)}function wa(){q=q&(~i&0xff)}function xa(a,b){a=a|0;b=b|0;var c=0;c=a+b|0;U((V()|0)&(d|e|g)|((a^c^b)&0x1000)>>8|c>>16&1);return c&0xffff|0}function ya(a){a=a|0;$(xa(_()|0,a)|0)}function za(a){a=a|0;var b=0;var c=0;b=_()|0;c=b+a+((V()|0)&i)|0;U(((b^c^a)&0x1000)>>8|c>>16&1|(c&0x8000)>>8|(c&0xffff?0:e)|((a^b^0x8000)&(a^c)&0x8000)>>13);$(c)}function Aa(a){a=a|0;var b=0;var c=0;b=_()|0;c=b-a-((V()|0)&1)|0;U(((b^c^a)&0x1000)>>8|c>>16&1|(c&0x8000)>>8|(c&0xffff?0:e)|(a&b&(a^c)&0x8000)>>13|h);$(c)}function Ba(){W((X()|0)+1|0)}function Ca(){W((X()|0)-1|0)}function Da(){$((_()|0)+1|0)}function Ea(){$((_()|0)-1|0)}function Fa(){Y((Z()|0)+1|0)}function Ga(){Y((Z()|0)-1|0)}function Ha(){var a=0;a=T()|0;S((a<<1|(a&0x80)>>7)&255|0);U((V()|0)&0xEC|(T()|0)&0x01|0)}function Ia(){var a=0;var b=0;a=(V()|0)&i;b=T()|0;U((V()|0)&0xEC|(b&0x80)>>7|0);S((b<<1|a)&255|0)}function Ja(){var a=0;a=T()|0;U((V()|0)&0xEC|a&0x01|0);S(a>>1|a<<7&255|0)}function Ka(){var a=0;var b=0;a=(V()|0)&i;b=T()|0;U((V()|0)&0xEC|b&0x01|0);S(b>>1|a<<7|0)}function La(){Ea();U((H()|0?h:h|e)|0)}function Ma(){Da();U((H()|0?h:h|e)|0)}function Na(){Ea();U((H()|0?h:h|e)|0)}function Oa(){Da();U((H()|0?h:h|e)|0)}function Pa(){Ga();Ea();Ca();U((V()|0)&0xE9|(X()|0?g:0)|0)}function Qa(){Fa();Da();Ca();U((V()|0)&0xE9|(X()|0?g:0)|0)}function Ra(a){a=a|0;var b=0;b=(T()|0)+a|0;U(x(b&255|0)|0|(b&256)>>8|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Sa(a){a=a|0;var b=0;b=(T()|0)+a+((V()|0)&i)|0;U(x(b&255|0)|0|(b&256)>>8|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Ta(a){a=a|0;var b=0;b=(T()|0)-a&0x1ff|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Ua(a){a=a|0;var b=0;b=(T()|0)-a-((V()|0)&i)&0x1ff|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0)^0x80)&(a^b)&0x80)>>5|0);S(b&255|0)}function Va(a){a=a|0;S((T()|0)&(a&0xff)|0);U(z(T()|0)|0|f|0)}function Wa(a){a=a|0;S(T()|0|a&0xff|0);U(z(T()|0)|0)}function Xa(a){a=a|0;S((T()|0)^a&0xff|0);U(z(T()|0)|0)}function Ya(){S(((T()|0)^0xff)&255|0);U(f|h|0)}function Za(){var a=0;a=T()|0;S(0);Ta(a)}function $a(a){a=a|0;a=(a+1|0)&255;U((V()|0)&i|(x(a)|0)|((a|0)==0x80?g:0)|(a&0x0F?0:f)|0);return a|0}function _a(a){a=a|0;U((V()|0)&i|h|((a|0)==0x80?g:0)|(a&0x0F?0:f)|0);a=(a-1|0)&255;U(V()|0|(x(a)|0));return a|0}function ab(a){a=a|0;var b=0;b=(T()|0)-a|0;U(x(b&255|0)|0|(b&256)>>8|h|((T()|0)^b^a)&f|((a^(T()|0))&(a^b)&0x80)>>5|0)}function bb(a){a=a|0;var b=0;b=(T()|0)-a|0;Da();Ca();U((V()|0)&i|(x(b&255|0)|0)|((T()|0)^a^b)&f|(X()|0?g:0)|h|0)}function cb(a){a=a|0;var b=0;b=(T()|0)-a|0;Ea();Ca();U((V()|0)&i|(x(b&255|0)|0)|((T()|0)^a^b)&f|(X()|0?g:0)|h|0)}function db(a){a=a|0;var b=0;b=a>>7|0;a=(a<<1|b)&255|0;U(z(a|0)|0|b|0);return a|0}function eb(a){a=a|0;var b=0;b=a>>7|0;a=(a<<1|(V()|0)&1)&255;U(z(a|0)|0|b|0);return a|0}function fb(a){a=a|0;var b=0;b=a&1|0;a=a>>1|b<<7&255;U(z(a|0)|0|b|0);return a|0}function gb(a){a=a|0;var b=0;b=a&1|0;a=a>>1|(V()|0)<<7&255;U(z(a|0)|0|b|0);return a|0}function hb(a){a=a|0;var b=0;b=a>>7|0;a=a<<1&255;U(z(a|0)|0|b|0);return a|0}function ib(a){a=a|0;var b=0;b=a&1|0;a=a>>1|a&0x80;U(z(a|0)|0|b|0);return a|0}function jb(a){a=a|0;var b=0;b=a&1|0;a=a>>1;U(z(a|0)|0|b|0);return a|0}function kb(a){a=a|0;U((V()|0)&i|(z(a|0)|0)|0)}function lb(a,b){a=a|0;b=b|0;S(b);U((V()|0)&i|(x(b)|0)|a<<2|0)}function mb(a,b,c){a=a|0;b=b|0;c=c|0;S(c&127|b&128);U((V()|0)&i|(x(T()|0)|0)|a<<2|0)}return{getPTable:v,setPTable:w,getZSTable:x,setZSTable:y,getZSPTable:z,setZSPTable:A,initialize:B,clear:F,setB:G,getB:H,setC:I,getC:J,setD:K,getD:L,setE:M,getE:N,setH:O,getH:P,setL:Q,getL:R,setA:S,getA:T,setF:U,getF:V,setBC:W,getBC:X,setDE:Y,getDE:Z,setHL:$,getHL:_,setAF:aa,getAF:ba,testFlag:ca,setFlag:da,clearFlag:ea,flagS:fa,flagZ:ga,flagH:ha,flagP:ia,flagN:ja,flagC:ka,setFlagS:la,setFlagZ:ma,setFlagH:na,setFlagP:oa,setFlagN:pa,setFlagC:qa,clearFlagS:ra,clearFlagZ:sa,clearFlagH:ta,clearFlagP:ua,clearFlagN:va,clearFlagC:wa,ADDW:xa,ADD_HL:ya,ADC_HL:za,SBC_HL:Aa,incBC:Ba,decBC:Ca,incHL:Da,decHL:Ea,incDE:Fa,decDE:Ga,RLCA:Ha,RLA:Ia,RRCA:Ja,RRA:Ka,postIND:La,postINI:Ma,postOUTD:Na,postOUTI:Oa,onLDD:Pa,onLDI:Qa,addAcc:Ra,addAccWithCarry:Sa,subAcc:Ta,subAccWithCarry:Ua,andAcc:Va,orAcc:Wa,xorAcc:Xa,CPL:Ya,NEG:Za,getINCValue:$a,getDECValue:_a,compareAcc:ab,CPI:bb,CPD:cb,RLC:db,RL:eb,RRC:fb,RR:gb,SLA:hb,SRA:ib,SRL:jb,onReadIoPort:kb,LD_A_I:lb,LD_A_R:mb}}var d=a("./bin-util.js"),e=function(){var a=Function("return this;")(),b=d,e=new ArrayBuffer(65536);this._reg8=c(a,b,e),this._reg8.initialize(),this.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0,this.getB=this._reg8.getB,this.getC=this._reg8.getC,this.getD=this._reg8.getD,this.getE=this._reg8.getE,this.getH=this._reg8.getH,this.getL=this._reg8.getL,this.getA=this._reg8.getA,this.getF=this._reg8.getF,this.setB=this._reg8.setB,this.setC=this._reg8.setC,this.setD=this._reg8.setD,this.setE=this._reg8.setE,this.setH=this._reg8.setH,this.setL=this._reg8.setL,this.setA=this._reg8.setA,this.setF=this._reg8.setF,this.testFlag=this._reg8.testFlag,this.flagS=this._reg8.flagS,this.flagZ=this._reg8.flagZ,this.flagH=this._reg8.flagH,this.flagP=this._reg8.flagP,this.flagN=this._reg8.flagN,this.flagC=this._reg8.flagC,this.setFlag=this._reg8.setFlag,this.setFlagS=this._reg8.setFlagS,this.setFlagZ=this._reg8.setFlagZ,this.setFlagH=this._reg8.setFlagH,this.setFlagP=this._reg8.setFlagP,this.setFlagN=this._reg8.setFlagN,this.setFlagC=this._reg8.setFlagC,this.clearFlag=this._reg8.clearFlag,this.clearFlagS=this._reg8.clearFlagS,this.clearFlagZ=this._reg8.clearFlagZ,this.clearFlagH=this._reg8.clearFlagH,this.clearFlagP=this._reg8.clearFlagP,this.clearFlagN=this._reg8.clearFlagN,this.clearFlagC=this._reg8.clearFlagC,this.getHL=this._reg8.getHL,this.getBC=this._reg8.getBC,this.getDE=this._reg8.getDE,this.getAF=this._reg8.getAF,this.setHL=this._reg8.setHL,this.setBC=this._reg8.setBC,this.setDE=this._reg8.setDE,this.setAF=this._reg8.setAF,this.ADD_HL=this._reg8.ADD_HL,this.ADC_HL=this._reg8.ADC_HL,this.SBC_HL=this._reg8.SBC_HL,this.incBC=this._reg8.incBC,this.decBC=this._reg8.decBC,this.incHL=this._reg8.incHL,this.decHL=this._reg8.decHL,this.incDE=this._reg8.incDE,this.decDE=this._reg8.decDE,this.RLCA=this._reg8.RLCA,this.RLA=this._reg8.RLA,this.RRCA=this._reg8.RRCA,this.RRA=this._reg8.RRA,this.postIND=this._reg8.postIND,this.postINI=this._reg8.postINI,this.postOUTD=this._reg8.postOUTD,this.postOUTI=this._reg8.postOUTI,this.onLDD=this._reg8.onLDD,this.onLDI=this._reg8.onLDI,this.addAcc=this._reg8.addAcc,this.addAccWithCarry=this._reg8.addAccWithCarry,this.subAcc=this._reg8.subAcc,this.subAccWithCarry=this._reg8.subAccWithCarry,this.andAcc=this._reg8.andAcc,this.orAcc=this._reg8.orAcc,this.xorAcc=this._reg8.xorAcc,this.CPL=this._reg8.CPL,this.NEG=this._reg8.NEG,this.getINCValue=this._reg8.getINCValue,this.getDECValue=this._reg8.getDECValue,this.compareAcc=this._reg8.compareAcc,this.CPI=this._reg8.CPI,this.CPD=this._reg8.CPD,this.RLC=this._reg8.RLC,this.RL=this._reg8.RL,this.RRC=this._reg8.RRC,this.RR=this._reg8.RR,this.SLA=this._reg8.SLA,this.SRA=this._reg8.SRA,this.SRL=this._reg8.SRL,this.onReadIoPort=this._reg8.onReadIoPort};e.prototype.cloneRaw=function(){return{B:this.getB(),C:this.getC(),D:this.getD(),E:this.getE(),H:this.getH(),L:this.getL(),A:this.getA(),F:this.getF(),PC:this.PC,SP:this.SP,IX:this.IX,IY:this.IY,R:this.R,I:this.I}},e.prototype.clear=function(){this._reg8.clear(),this.PC=0,this.SP=0,this.IX=0,this.IY=0,this.R=0,this.I=0},e.prototype.setFrom=function(a){this.setB(a.getB()),this.setC(a.getC()),this.setD(a.getD()),this.setE(a.getE()),this.setH(a.getH()),this.setL(a.getL()),this.setA(a.getA()),this.setF(a.getF()),this.PC=a.PC,this.SP=a.SP,this.IX=a.IX,this.IY=a.IY,this.R=a.R,this.I=a.I},e.prototype.setPair=function(a,b){switch(a){case"SP":this.SP=b;break;case"PC":this.PC=b;break;case"IX":this.IX=b;break;case"IY":this.IY=b;break;case"BC":this.setBC(b);break;case"DE":this.setDE(b);break;case"HL":this.setHL(b);break;case"AF":this.setAF(b)}},e.prototype.debugDump=function(){console.info("B:"+this.getB().HEX(2)+"H "+this.getB()+" C:"+this.getC().HEX(2)+"H "+this.getC()+" / "+this.getBC()),console.info("D:"+this.getD().HEX(2)+"H "+this.getD()+" E:"+this.getE().HEX(2)+"H "+this.getE()+" / "+this.getDE()),console.info("H:"+this.getH().HEX(2)+"H "+this.getH()+" L:"+this.getL().HEX(2)+"H "+this.getL()+" / "+this.getHL()),console.info("A:"+this.getA().HEX(2)+"H "+this.getA()),console.info("SZ-HPN-C"),console.info(this.getF().bin(8)),console.info("PC:"+this.PC.HEX(4)+"H "+this.PC.bin(16)+"(2) "+this.PC),console.info("SP:"+this.SP.HEX(4)+"H "+this.SP.bin(16)+"(2) "+this.SP),console.info("I:"+this.I.HEX(2)+"H "+this.I.bin(8)+"(2) "+this.I+" R:"+this.R.HEX(2)+"H "+this.R.bin(8)+"(2) "+this.R)},e.prototype.ADD_IX=function(a){this.IX=this._reg8.ADDW(this.IX,a)},e.prototype.ADD_IY=function(a){this.IY=this._reg8.ADDW(this.IY,a)},e.prototype.jumpRel=function(a){this.PC+=d.getSignedByte(a)},e.prototype.increment=function(a){this["set"+a](this.getINCValue(this["get"+a]()))},e.prototype.decrement=function(a){this["set"+a](this.getDECValue(this["get"+a]()))},e.prototype.LD_A_I=function(a){this._reg8.LD_A_I(a,this.I)},e.prototype.LD_A_R=function(a,b){this._reg8.LD_A_R(a,b,this.R)},e.REG_r_ID2NAME={0:"B",1:"C",2:"D",3:"E",4:"H",5:"L",7:"A"},e.CONDITION_INDEX={NZ:0,Z:1,NC:2,C:3,PO:4,PE:5,P:6,N:7};e.prototype.DAA=function(){var a=this.getA(),b=this.getF();1&b&&(a|=256),16&b&&(a|=512),2&b&&(a|=1024),this.setAF(f[a])}
;var f=[68,256,512,772,1024,1284,1540,1792,2056,2316,4112,4372,4628,4880,5140,5392,4096,4356,4612,4864,5124,5376,5632,5892,6156,6408,8240,8500,8756,9008,9268,9520,8224,8484,8740,8992,9252,9504,9760,10020,10284,10536,12340,12592,12848,13108,13360,13620,12324,12576,12832,13092,13344,13604,13860,14112,14376,14636,16400,16660,16916,17168,17428,17680,16384,16644,16900,17152,17412,17664,17920,18180,18444,18696,20500,20752,21008,21268,21520,21780,20484,20736,20992,21252,21504,21764,22020,22272,22536,22796,24628,24880,25136,25396,25648,25908,24612,24864,25120,25380,25632,25892,26148,26400,26664,26924,28720,28980,29236,29488,29748,3e4,28704,28964,29220,29472,29732,29984,30240,30500,30764,31016,-32624,-32364,-32108,-31856,-31596,-31344,-32640,-32380,-32124,-31872,-31612,-31360,-31104,-30844,-30580,-30328,-28524,-28272,-28016,-27756,-27504,-27244,-28540,-28288,-28032,-27772,-27520,-27260,-27004,-26752,-26488,-26228,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,24613,24865,25121,25381,25633,25893,26149,26401,26665,26925,28721,28981,29237,29489,29749,30001,28705,28965,29221,29473,29733,29985,30241,30501,30765,31017,-32623,-32363,-32107,-31855,-31595,-31343,-32639,-32379,-32123,-31871,-31611,-31359,-31103,-30843,-30579,-30327,-28523,-28271,-28015,-27755,-27503,-27243,-28539,-28287,-28031,-27771,-27519,-27259,-27003,-26751,-26487,-26227,-24395,-24143,-23887,-23627,-23375,-23115,-24411,-24159,-23903,-23643,-23391,-23131,-22875,-22623,-22359,-22099,-20303,-20043,-19787,-19535,-19275,-19023,-20319,-20059,-19803,-19551,-19291,-19039,-18783,-18523,-18259,-18007,-16235,-15983,-15727,-15467,-15215,-14955,-16251,-15999,-15743,-15483,-15231,-14971,-14715,-14463,-14199,-13939,-12143,-11883,-11627,-11375,-11115,-10863,-12159,-11899,-11643,-11391,-11131,-10879,-10623,-10363,-10099,-9847,-8015,-7755,-7499,-7247,-6987,-6735,-8031,-7771,-7515,-7263,-7003,-6751,-6495,-6235,-5971,-5719,-3915,-3663,-3407,-3147,-2895,-2635,-3931,-3679,-3423,-3163,-2911,-2651,-2395,-2143,-1879,-1619,85,273,529,789,1041,1301,69,257,513,773,1025,1285,1541,1793,2057,2317,4113,4373,4629,4881,5141,5393,4097,4357,4613,4865,5125,5377,5633,5893,6157,6409,8241,8501,8757,9009,9269,9521,8225,8485,8741,8993,9253,9505,9761,10021,10285,10537,12341,12593,12849,13109,13361,13621,12325,12577,12833,13093,13345,13605,13861,14113,14377,14637,16401,16661,16917,17169,17429,17681,16385,16645,16901,17153,17413,17665,17921,18181,18445,18697,20501,20753,21009,21269,21521,21781,20485,20737,20993,21253,21505,21765,22021,22273,22537,22797,24629,24881,25137,25397,25649,25909,1540,1792,2056,2316,2572,2824,3084,3336,3592,3852,4112,4372,4628,4880,5140,5392,5632,5892,6156,6408,6664,6924,7176,7436,7692,7944,8240,8500,8756,9008,9268,9520,9760,10020,10284,10536,10792,11052,11304,11564,11820,12072,12340,12592,12848,13108,13360,13620,13860,14112,14376,14636,14892,15144,15404,15656,15912,16172,16400,16660,16916,17168,17428,17680,17920,18180,18444,18696,18952,19212,19464,19724,19980,20232,20500,20752,21008,21268,21520,21780,22020,22272,22536,22796,23052,23304,23564,23816,24072,24332,24628,24880,25136,25396,25648,25908,26148,26400,26664,26924,27180,27432,27692,27944,28200,28460,28720,28980,29236,29488,29748,3e4,30240,30500,30764,31016,31272,31532,31784,32044,32300,32552,-32624,-32364,-32108,-31856,-31596,-31344,-31104,-30844,-30580,-30328,-30072,-29812,-29560,-29300,-29044,-28792,-28524,-28272,-28016,-27756,-27504,-27244,-27004,-26752,-26488,-26228,-25972,-25720,-25460,-25208,-24952,-24692,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,26149,26401,26665,26925,27181,27433,27693,27945,28201,28461,28721,28981,29237,29489,29749,30001,30241,30501,30765,31017,31273,31533,31785,32045,32301,32553,-32623,-32363,-32107,-31855,-31595,-31343,-31103,-30843,-30579,-30327,-30071,-29811,-29559,-29299,-29043,-28791,-28523,-28271,-28015,-27755,-27503,-27243,-27003,-26751,-26487,-26227,-25971,-25719,-25459,-25207,-24951,-24691,-24395,-24143,-23887,-23627,-23375,-23115,-22875,-22623,-22359,-22099,-21843,-21591,-21331,-21079,-20823,-20563,-20303,-20043,-19787,-19535,-19275,-19023,-18783,-18523,-18259,-18007,-17751,-17491,-17239,-16979,-16723,-16471,-16235,-15983,-15727,-15467,-15215,-14955,-14715,-14463,-14199,-13939,-13683,-13431,-13171,-12919,-12663,-12403,-12143,-11883,-11627,-11375,-11115,-10863,-10623,-10363,-10099,-9847,-9591,-9331,-9079,-8819,-8563,-8311,-8015,-7755,-7499,-7247,-6987,-6735,-6495,-6235,-5971,-5719,-5463,-5203,-4951,-4691,-4435,-4183,-3915,-3663,-3407,-3147,-2895,-2635,-2395,-2143,-1879,-1619,-1363,-1111,-851,-599,-343,-83,85,273,529,789,1041,1301,1541,1793,2057,2317,2573,2825,3085,3337,3593,3853,4113,4373,4629,4881,5141,5393,5633,5893,6157,6409,6665,6925,7177,7437,7693,7945,8241,8501,8757,9009,9269,9521,9761,10021,10285,10537,10793,11053,11305,11565,11821,12073,12341,12593,12849,13109,13361,13621,13861,14113,14377,14637,14893,15145,15405,15657,15913,16173,16401,16661,16917,17169,17429,17681,17921,18181,18445,18697,18953,19213,19465,19725,19981,20233,20501,20753,21009,21269,21521,21781,22021,22273,22537,22797,23053,23305,23565,23817,24073,24333,24629,24881,25137,25397,25649,25909,70,258,514,774,1026,1286,1542,1794,2058,2318,1026,1286,1542,1794,2058,2318,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,5126,5378,5634,5894,6158,6410,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,9254,9506,9762,10022,10286,10538,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,13346,13606,13862,14114,14378,14638,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,17414,17666,17922,18182,18446,18698,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,21506,21766,22022,22274,22538,22798,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,25634,25894,26150,26402,26666,26926,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,29734,29986,30242,30502,30766,31018,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-31610,-31358,-31102,-30842,-30578,-30326,-28538,-28286,-28030,-27770,-27518,-27258,-27002,-26750,-26486,-26226,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-23389,-23129,-22873,-22621,-22357,-22097,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-19289,-19037,-18781,-18521,-18257,-18005,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-15229,-14969,-14713,-14461,-14197,-13937,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-11129,-10877,-10621,-10361,-10097,-9845,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-7001,-6749,-6493,-6233,-5969,-5717,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-2909,-2649,-2393,-2141,-1877,-1617,71,259,515,775,1027,1287,1543,1795,2059,2319,1027,1287,1543,1795,2059,2319,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,5127,5379,5635,5895,6159,6411,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,9255,9507,9763,10023,10287,10539,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,13347,13607,13863,14115,14379,14639,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,17415,17667,17923,18183,18447,18699,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,21507,21767,22023,22275,22539,22799,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,25635,25895,26151,26403,26667,26927,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,29735,29987,30243,30503,30767,31019,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-31609,-31357,-31101,-30841,-30577,-30325,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-27517,-27257,-27001,-26749,-26485,-26225,-1346,-1094,-834,-582,-326,-66,70,258,514,774,1026,1286,1542,1794,2058,2318,2590,2842,3102,3354,3610,3870,4098,4358,4614,4866,5126,5378,5634,5894,6158,6410,6682,6942,7194,7454,7710,7962,8226,8486,8742,8994,9254,9506,9762,10022,10286,10538,10810,11070,11322,11582,11838,12090,12326,12578,12834,13094,13346,13606,13862,14114,14378,14638,14910,15162,15422,15674,15930,16190,16386,16646,16902,17154,17414,17666,17922,18182,18446,18698,18970,19230,19482,19742,19998,20250,20486,20738,20994,21254,21506,21766,22022,22274,22538,22798,23070,23322,23582,23834,24090,24350,24614,24866,25122,25382,25634,25894,26150,26402,26666,26926,27198,27450,27710,27962,28218,28478,28706,28966,29222,29474,29734,29986,30242,30502,30766,31018,31290,31550,31802,32062,32318,32570,-32638,-32378,-32122,-31870,-31610,-31358,-31102,-30842,-30578,-30326,-30054,-29794,-29542,-29282,-29026,-28774,-28538,-28286,-28030,-27770,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225,-25953,-25701,-25441,-25189,-24933,-24673,-24409,-24157,-23901,-23641,-23389,-23129,-22873,-22621,-22357,-22097,-21825,-21573,-21313,-21061,-20805,-20545,-20317,-20057,-19801,-19549,-19289,-19037,-18781,-18521,-18257,-18005,-17733,-17473,-17221,-16961,-16705,-16453,-16249,-15997,-15741,-15481,-15229,-14969,-14713,-14461,-14197,-13937,-13665,-13413,-13153,-12901,-12645,-12385,-12157,-11897,-11641,-11389,-11129,-10877,-10621,-10361,-10097,-9845,-9573,-9313,-9061,-8801,-8545,-8293,-8029,-7769,-7513,-7261,-7001,-6749,-6493,-6233,-5969,-5717,-5445,-5185,-4933,-4673,-4417,-4165,-3929,-3677,-3421,-3161,-2909,-2649,-2393,-2141,-1877,-1617,-1345,-1093,-833,-581,-325,-65,71,259,515,775,1027,1287,1543,1795,2059,2319,2591,2843,3103,3355,3611,3871,4099,4359,4615,4867,5127,5379,5635,5895,6159,6411,6683,6943,7195,7455,7711,7963,8227,8487,8743,8995,9255,9507,9763,10023,10287,10539,10811,11071,11323,11583,11839,12091,12327,12579,12835,13095,13347,13607,13863,14115,14379,14639,14911,15163,15423,15675,15931,16191,16387,16647,16903,17155,17415,17667,17923,18183,18447,18699,18971,19231,19483,19743,19999,20251,20487,20739,20995,21255,21507,21767,22023,22275,22539,22799,23071,23323,23583,23835,24091,24351,24615,24867,25123,25383,25635,25895,26151,26403,26667,26927,27199,27451,27711,27963,28219,28479,28707,28967,29223,29475,29735,29987,30243,30503,30767,31019,31291,31551,31803,32063,32319,32571,-32637,-32377,-32121,-31869,-31609,-31357,-31101,-30841,-30577,-30325,-30053,-29793,-29541,-29281,-29025,-28773,-28537,-28285,-28029,-27769,-27517,-27257,-27001,-26749,-26485,-26225];b.exports=e}()},{"./bin-util.js":10}],16:[function(a,b,c){"use strict";function d(a){var b=0;switch(a){case"IX":b=j("0335");break;case"IY":b=j("0375")}return b}function e(a){var b=0;switch(a){case"ADD":b=0;break;case"ADC":b=1;break;case"SUB":b=2;break;case"SBC":b=3;break;case"AND":b=4;break;case"OR":b=6;break;case"XOR":b=5;break;case"CP":b=7}return b}function f(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"SP":b=3}return b}function g(a){var b=null;switch(a){case"BC":b=0;break;case"DE":b=1;break;case"HL":b=2;break;case"AF":b=3}return b}function h(a){var b=null;switch(a){case"B":b=0;break;case"C":b=1;break;case"D":b=2;break;case"E":b=3;break;case"H":b=4;break;case"L":b=5;break;case"A":b=7}return b}function i(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(null!=b[c])if("string"==typeof b[c]){if(a[c]!=b[c])return!1}else if("object"==typeof b[c]&&"RegExp"==b[c].constructor.name&&!b[c].test(a[c]))return!1;return!0}var j=a("../lib/oct"),k=function(){this.address=null,this.bytecode=[],this.label=null,this.mnemonic=null,this.operand=null,this.comment="",this.ref_addr_to=null,this.referenced_count=0};k.prototype.setAddress=function(a){this.address=a},k.prototype.setRefAddrTo=function(a){this.ref_addr_to=a},k.prototype.setLabel=function(a){this.label=a},k.prototype.setComment=function(a){this.address=this.address||0,this.comment=a},k.create=function(a,b,c){var d=new k;return d.mnemonic=a,d.operand=b||"",d.bytecode=c||[],d},k.assemble=function(a,b,c){var d=new k;d.address=b;for(var e=k.tokenize(a),f=-1,g=-1,h=0;h<e.length;h++)switch(e[h]){case":":f<0&&g<0&&(f=h);break;case";":g<0&&(g=h)}if(f>=0&&(d.label=e.slice(0,f).join(""),e.splice(0,f+1),g-=f+1),g>=0&&(d.comment=e.slice(g).join(""),e.splice(g)),e.length>0&&(d.mnemonic=e[0],d.operand=e.slice(1).join("")),e.length>0)try{d.bytecode=d.assembleMnemonic(e,c)}catch(a){d.comment+="*** ASSEMBLE ERROR - "+a}return d},k.prototype.getNextAddress=function(){return this.address+this.bytecode.length},k.prototype.getLastAddress=function(){return this.address+this.bytecode.length-1},k.prototype.resolveAddress=function(a){for(var b=0;b<this.bytecode.length;b++)"function"==typeof this.bytecode[b]&&(this.bytecode[b]=this.bytecode[b](a))},k.tokenize=function(a){var b=0,c=a.length,d=0,e=[],f="";for(a=a.toUpperCase();d<c;){var g=a.charAt(d);switch(b){case 0:if(/\s/.test(g))d++;else if("-"==g||"+"==g)f+=g,d++,b=2;else if(/[0-9]/.test(g))b=2;else if(/[A-Z_\?\.\*#!\$]/.test(g))f+=g,d++,b=3;else if("'"==g)f+=g,d++,b=4;else if("("==g||")"==g||","==g||"+"==g||":"==g)e.push(g),d++;else{if(";"!=g)throw"unrecognized char "+g+" at column "+d;e.push(g),d++;var h=a.substr(d);e.push(h),d+=h.length,f=""}break;case 2:/[0-9A-F]/.test(g)?(f+=g,d++):"H"==g?(f+=g,d++,e.push(f),f="",b=0):(e.push(f),f="",b=0);break;case 3:/[A-Z_0-9\?\.\*#!\$']/.test(g)?(f+=g,d++):(e.push(f),f="",b=0);break;case 4:"\\"==g?++d<c&&(g=a.charAt(d),f+=g,d++):"'"!=g?(f+=g,d++):(f+=g,d++,e.push(f),f="",b=0);break;default:throw"unrecognized status "}}return""!=f&&e.push(f),e},k.prototype.assembleMnemonic=function(a,b){var c=this.label;if(i(a,["ORG",null]))return this.address=k._parseNumLiteral(a[1]),[];if(i(a,["ENT"]))return b[c]=this.address,[];if(i(a,["EQU",null])){if(null==c||""==c)throw"empty label for EQU";return b[c]=k._parseNumLiteral(a[1]),[]}if(i(a,["DEFB",null]))return[k.parseNumLiteral(a[1])];if(i(a,["DEFW",null]))return k.parseNumLiteralPair(a[1]);if(i(a,["DEFS",null])){var l=k._parseNumLiteral(a[1]);if(l<0)throw"negative DEFS number "+a[1];for(var m=[],n=0;n<l;n++)m.push(0);return m}if(i(a,["LD","A",",","I"]))return[j("0355"),j("0127")];if(i(a,["LD","A",",","R"]))return[j("0355"),j("0137")];if(i(a,["LD","I",",","A"]))return[j("0355"),j("0107")];if(i(a,["LD","R",",","A"]))return[j("0355"),j("0117")];if(i(a,["LD","B",",","IXH"]))return[221,68];if(i(a,["LD","C",",","IXL"]))return[221,77];if(i(a,["LD","A",",","IXL"]))return[221,125];if(i(a,["ADD","A",",","IXH"]))return[221,132];if(i(a,["ADD","A",",","IXL"]))return[221,133];if(i(a,["LD",/^[BCDEHLA]$/,",",/^[BCDEHLA]$/])){var o=h(a[1]),p=h(a[3]);return[j("0100")|o<<3|p<<0]}if(i(a,["LD",/^[BCDEHLA]$/,",",null]))return function(){var b=h(a[1]),c=k.parseNumLiteral(a[3]);return[j("0006")|b<<3,c]}();if(i(a,["LD",/^[BCDEHLA]$/,",","(","HL",")"]))return function(){var b=h(a[1]);return[j("0106")|b<<3]}();if(i(a,["LD","(","HL",")",",",/^[BCDEHLA]$/]))return function(){var b=h(a[5]);return[j("0160")|b]}();if(i(a,["LD","(","HL",")",",",null]))return function(){var b=k.parseNumLiteral(a[5]);return[j("0066"),b]}();if(i(a,["LD","A",",","(",/^(BC|DE)$/,")"]))return function(){var b=f(a[4]);return[j("0012")|b<<4]}();if(i(a,["LD","A",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0072"),b[0],b[1]]}();if(i(a,["LD","(",/^(BC|DE)$/,")",",","A"]))return function(){var b=f(a[2]);return[j("0002")|b<<4]}();if(i(a,["LD","(",null,")",",","A"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0062"),b[0],b[1]]}();if(i(a,["LD","SP",",","HL"]))return[j("0371")];if(i(a,["LD","SP",",","IX"]))return[221,249];if(i(a,["LD","SP",",","IY"]))return[253,249];if(i(a,["LD",/^(BC|DE|HL|SP)$/,",",null]))return function(){var b=f(a[1]),c=k.parseNumLiteralPair(a[3]);return[j("0001")|b<<4,c[0],c[1]]}();if(i(a,["LD","HL",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0052"),b[0],b[1]]}();if(i(a,["LD","BC",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0113"),b[0],b[1]]}();if(i(a,["LD","DE",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0133"),b[0],b[1]]}();if(i(a,["LD","SP",",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[j("0355"),j("0173"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","HL"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0042"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","BC"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0103"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","DE"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0123"),b[0],b[1]]}();if(i(a,["LD","(",null,")",",","SP"]))return function(){var b=k.parseNumLiteralPair(a[2]);return[j("0355"),j("0163"),b[0],b[1]]}();if(i(a,["PUSH",/^(BC|DE|HL|AF)$/]))return function(){var b=g(a[1]);return[j("0305")|b<<4]}();if(i(a,["POP",/^(BC|DE|HL|AF)$/]))return function(){var b=g(a[1]);return[j("0301")|b<<4]}();if(i(a,["LD","IXH",",","B"]))return[221,96];if(i(a,["LD","IXL",",","C"]))return[221,105];if(i(a,["LD","IXH",",","A"]))return[221,103];if(i(a,["LD","IXL",",","A"]))return[221,111];if(i(a,["CP","IXL"]))return[221,189];if(i(a,["EX","DE",",","HL"]))return[235];if(i(a,["EX","AF",",","AF'"]))return[8];if(i(a,["EXX"]))return[217];if(i(a,["EX","(","SP",")",",","HL"]))return[227];if(i(a,["LDI"]))return[j("0355"),j("0240")];if(i(a,["LDIR"]))return[j("0355"),j("0260")];if(i(a,["LDD"]))return[j("0355"),j("0250")];if(i(a,["LDDR"]))return[j("0355"),j("0270")];if(i(a,["CPI"]))return[j("0355"),j("0241")];if(i(a,["CPIR"]))return[j("0355"),j("0261")];if(i(a,["CPD"]))return[j("0355"),j("0251")];if(i(a,["CPDR"]))return[j("0355"),j("0271")];if(i(a,["DAA"]))return[j("0047")];if(i(a,["CPL"]))return[j("0057")];if(i(a,["NEG"]))return[j("0355"),j("0104")];if(i(a,["CCF"]))return[j("0077")];if(i(a,["SCF"]))return[j("0067")];if(i(a,["NOP"]))return[j("0000")];if(i(a,["HALT"]))return[j("0166")];if(i(a,["DI"]))return[j("0363")];if(i(a,["EI"]))return[j("0373")];if(i(a,["IM0"]))return[j("0355"),j("0106")];if(i(a,["IM1"]))return[j("0355"),j("0126")];if(i(a,["IM2"]))return[j("0355"),j("0136")];if(i(a,["IM","0"]))return[j("0355"),j("0106")];if(i(a,["IM","1"]))return[j("0355"),j("0126")];if(i(a,["IM","2"]))return[j("0355"),j("0136")];if(i(a,[/^(ADD|ADC|SBC)$/,"HL",",",/^(BC|DE|HL|SP)$/])){var q=0;switch(a[3]){case"BC":q=0;break;case"DE":q=1;break;case"HL":q=2;break;case"SP":q=3}switch(a[0]){case"ADD":return[j("0011")|q<<4];case"ADC":return[j("0355"),j("0112")|q<<4];case"SBC":return[j("0355"),j("0102")|q<<4]}return[]}if(i(a,["ADD","IX",",",/^(BC|DE|IX|SP)$/])){switch(a[3]){case"BC":return[j("0335"),j("0011")];case"DE":return[j("0335"),j("0031")];case"IX":return[j("0335"),j("0051")];case"SP":return[j("0335"),j("0071")]}return[]}if(i(a,["ADD","IY",",",/^(BC|DE|IY|SP)$/])){switch(a[3]){case"BC":return[j("0375"),j("0011")];case"DE":return[j("0375"),j("0031")];case"IY":return[j("0375"),j("0051")];case"SP":return[j("0375"),j("0071")]}return[]}if(i(a,[/^(INC|DEC)$/,/^(BC|DE|HL|SP|IX|IY)$/])){switch(a[0]){case"INC":switch(a[1]){case"BC":return[j("0003")];case"DE":return[j("0023")];case"HL":return[j("0043")];case"SP":return[j("0063")];case"IX":return[j("0335"),j("0043")];case"IY":return[j("0375"),j("0043")]}break;case"DEC":switch(a[1]){case"BC":return[j("0013")];case"DE":return[j("0033")];case"HL":return[j("0053")];case"SP":return[j("0073")];case"IX":return[j("0335"),j("0053")];case"IY":return[j("0375"),j("0053")]}}return[]}if(i(a,["RLCA"]))return[j("0007")];if(i(a,["RLA"]))return[j("0027")];if(i(a,["RRCA"]))return[j("0017")];if(i(a,["RRA"]))return[j("0037")];if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,/^[BCDEHLA]$/])){switch(a[0]){case"RLC":return[j("0313"),j("0000")|h(a[1])];case"RL":return[j("0313"),j("0020")|h(a[1])];case"RRC":return[j("0313"),j("0010")|h(a[1])];case"RR":return[j("0313"),j("0030")|h(a[1])];case"SLA":return[j("0313"),j("0040")|h(a[1])];case"SRA":return[j("0313"),j("0050")|h(a[1])];case"SRL":return[j("0313"),j("0070")|h(a[1])]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(","HL",")"])){switch(a[0]){case"RLC":return[j("0313"),j("0006")];case"RL":return[j("0313"),j("0026")];case"RRC":return[j("0313"),j("0016")];case"RR":return[j("0313"),j("0036")];case"SLA":return[j("0313"),j("0046")];case"SRA":return[j("0313"),j("0056")];case"SRL":return[j("0313"),j("0076")]}return[]}if(i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(RLC|RL|RRC|RR|SLA|SRA|SRL)$/,"(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[3]?4:3,c=0;switch(a[2]){case"IX":c=j("0335");break;case"IY":c=j("0375")}var d=k.parseNumLiteral(a[b]);switch(a[0]){case"RLC":return[c,j("0313"),d,j("0006")];case"RL":return[c,j("0313"),d,j("0026")];case"RRC":return[c,j("0313"),d,j("0016")];case"RR":return[c,j("0313"),d,j("0036")];case"SLA":return[c,j("0313"),d,j("0046")];case"SRA":return[c,j("0313"),d,j("0056")];case"SRL":return[c,j("0313"),d,j("0076")]}return[]}();if(i(a,["RLD"]))return[j("0355"),j("0157")];if(i(a,["RRD"]))return[j("0355"),j("0147")];if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",",/^[BCDEHLA]$/])){switch(a[0]){case"BIT":return[j("0313"),j("0100")|a[1]<<3|h(a[3])];case"SET":return[j("0313"),j("0300")|a[1]<<3|h(a[3])];case"RES":return[j("0313"),j("0200")|a[1]<<3|h(a[3])]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(","HL",")"])){switch(a[0]){case"BIT":return[j("0313"),j("0106")|a[1]<<3];case"SET":return[j("0313"),j("0306")|a[1]<<3];case"RES":return[j("0313"),j("0206")|a[1]<<3]}return[]}if(i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(BIT|SET|RES)$/,/^[0-7]$/,",","(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[5]?6:5,c=0;switch(a[4]){case"IX":c=j("0335");break;case"IY":c=j("0375")}var d=k.parseNumLiteral(a[b]);switch(a[0]){case"BIT":return[c,j("0313"),d,j("0106")|a[1]<<3];case"SET":return[c,j("0313"),d,j("0306")|a[1]<<3];case"RES":return[c,j("0313"),d,j("0206")|a[1]<<3]}return[]}();if(i(a,["JP",null]))return function(){var b=k.parseNumLiteralPair(a[1]);return[j("0303"),b[0],b[1]]}();if(i(a,["JP",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[j("0302"),b[0],b[1]];case"Z":return[j("0312"),b[0],b[1]];case"NC":return[j("0322"),b[0],b[1]];case"C":return[j("0332"),b[0],b[1]];case"PO":return[j("0342"),b[0],b[1]];case"PE":return[j("0352"),b[0],b[1]];case"P":return[j("0362"),b[0],b[1]];case"M":return[j("0372"),b[0],b[1]]}return[]}();if(i(a,["JR",null]))return function(){var b=k.parseRelAddr(a[1],this.address+2);return[j("0030"),b]}.bind(this)();if(i(a,["JR",/^(NZ|Z|NC|C)$/,",",null]))return function(){var b=k.parseRelAddr(a[3],this.address+2);switch(a[1]){case"NZ":return[j("0040"),b];case"Z":return[j("0050"),b];case"NC":return[j("0060"),b];case"C":return[j("0070"),b]}return[]}.bind(this)();if(i(a,["JP","(",/^(HL|IX|IY)$/,")"])){switch(a[2]){case"HL":return[j("0351")];case"IX":return[j("0335"),j("0351")];case"IY":return[j("0375"),j("0351")]}return[]}if(i(a,["DJNZ",null]))return function(){var b=k.parseRelAddr(a[1],this.address+2);return[j("0020"),b]}.bind(this)();if(i(a,["CALL",null]))return function(){var b=k.parseNumLiteralPair(a[1]);return[j("0315"),b[0],b[1]]}();if(i(a,["CALL",/^(NZ|Z|NC|C|PO|PE|P|M)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);switch(a[1]){case"NZ":return[j("0304"),b[0],b[1]];case"Z":return[j("0314"),b[0],b[1]];case"NC":return[j("0324"),b[0],b[1]];case"C":return[j("0334"),b[0],b[1]];case"PO":return[j("0344"),b[0],b[1]];case"PE":return[j("0354"),b[0],b[1]];case"P":return[j("0364"),b[0],b[1]];case"M":return[j("0374"),b[0],b[1]]}return[]}();if(i(a,["RET"]))return[j("0311")];if(i(a,["RET",/^(NZ|Z|NC|C|PO|PE|P|M)$/])){switch(a[1]){case"NZ":return[j("0300")];case"Z":return[j("0310")];case"NC":return[j("0320")];case"C":return[j("0330")];case"PO":return[j("0340")];case"PE":return[j("0350")];case"P":return[j("0360")];case"M":return[j("0370")]}return[]}if(i(a,["RETI"]))return[j("0355"),j("0115")];if(i(a,["RETN"]))return[j("0355"),j("0105")];if(i(a,["RST",/^(00H|08H|10H|18H|20H|28H|30H|38H)$/])){switch(a[1]){case"00H":return[j("0307")];case"08H":return[j("0317")];case"10H":return[j("0327")];case"18H":return[j("0337")];case"20H":return[j("0347")];case"28H":return[j("0357")];case"30H":return[j("0367")];case"38H":return[j("0377")]}return[]}if(i(a,["IN",/^[BCDEHLA]$/,",","(","C",")"]))return function(){var b=h(a[1]);return[j("0355"),j("0100")|b<<3]}();if(i(a,["IN","A",",","(",null,")"]))return function(){var b=k.parseNumLiteral(a[4]);return[j("0333"),b]}();if(i(a,["OUT","(","C",")",",",/^[BCDEHLA]$/]))return function(){var b=h(a[5]);return[j("0355"),j("0101")|b<<3]}();if(i(a,["OUT","(",null,")",",","A"]))return function(){var b=k.parseNumLiteral(a[2]);return[j("0323"),b]}();if(i(a,["INI"]))return[j("0355"),j("0242")];if(i(a,["INIR"]))return[j("0355"),j("0262")];if(i(a,["IND"]))return[j("0355"),j("0252")];if(i(a,["INDR"]))return[j("0355"),j("0272")];if(i(a,["OUTI"]))return[j("0355"),j("0243")];if(i(a,["OTIR"]))return[j("0355"),j("0263")];if(i(a,["OUTD"]))return[j("0355"),j("0253")];if(i(a,["OTDR"]))return[j("0355"),j("0273")];if(i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,"+",null,")"])||i(a,["LD",/^[BCDEHLA]$/,",","(",/^(IX|IY)$/,null,")"]))return function(){var b="+"==a[5]?6:5,c=h(a[1]),e=k.parseNumLiteral(a[b]);return[d(a[4]),j("0106")|c<<3,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",/^[BCDEHLA]$/])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",/^[BCDEHLA]$/]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=k.parseNumLiteral(a[b]),f=h(a[c]);return[d(a[2]),j("0160")|f,e]}();if(i(a,["LD","(",/^(IX|IY)$/,"+",null,")",",",null])||i(a,["LD","(",/^(IX|IY)$/,/^\+.*$/,")",",",null]))return function(){var b="+"==a[3]?4:3,c="+"==a[3]?7:6,e=k.parseNumLiteral(a[b]),f=k.parseNumLiteral(a[c]);return[d(a[2]),54,e,f]}();if(i(a,["LD",/^(IX|IY)$/,",",null]))return function(){var b=k.parseNumLiteralPair(a[3]);return[d(a[1]),33,b[0],b[1]]}();if(i(a,["LD",/^(IX|IY)$/,",","(",null,")"]))return function(){var b=k.parseNumLiteralPair(a[4]);return[d(a[1]),42,b[0],b[1]]}();if(i(a,["PUSH",/^(IX|IY)$/]))return function(){return[d(a[1]),229]}();if(i(a,["POP",/^(IX|IY)$/]))return function(){return[d(a[1]),225]}();if(i(a,["EX","(","SP",")",",",/^(IX|IY)$/]))return function(){return[d(a[5]),227]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",/^[BCDEHLA]$/]))return function(){var b=e(a[0]),c=h(a[3]);return[j("0200")|b<<3|c]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",",null]))return function(){var b=e(a[0]),c=k.parseNumLiteral(a[3]);return[j("0306")|b<<3,c]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(","HL",")"]))return function(){var b=e(a[0]);return[j("0206")|b<<3]}();if(i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(ADD|ADC|SUB|SBC)$/,"A",",","(",/^(IX|IY)$/,/^\+.*/,")"]))return function(){var b="+"==a[5]?6:5,c=e(a[0]),f=k.parseNumLiteral(a[b]);return[d(a[4]),j("0206")|c<<3,f]}();if(i(a,[/^(AND|OR|XOR|CP)$/,/^[BCDEHLA]$/]))return function(){var b=e(a[0]),c=h(a[1]);return[j("0200")|b<<3|c]}();if(i(a,[/^(AND|OR|XOR|CP)$/,null]))return function(){var b=e(a[0]),c=k.parseNumLiteral(a[1]);return[j("0306")|b<<3,c]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(","HL",")"]))return function(){var b=e(a[0]);return[j("0206")|b<<3]}();if(i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(AND|OR|XOR|CP)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"]))return function(){var b="+"==a[3]?4:3,c=e(a[0]),f=k.parseNumLiteral(a[b]);return[d(a[2]),j("0206")|c<<3,f]}();if(i(a,[/^(INC|DEC)$/,/^[BCDEHLA]$/]))return function(){var b=h(a[1]);switch(a[0]){case"INC":return[j("0004")|b<<3];case"DEC":return[j("0005")|b<<3]}}();if(i(a,[/^(INC|DEC)$/,"(","HL",")"]))switch(a[0]){case"INC":return[j("0064")];case"DEC":return[j("0065")]}return i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,"+",null,")"])||i(a,[/^(INC|DEC)$/,"(",/^(IX|IY)$/,/^\+.*$/,")"])?function(){var b=d(a[2]),c="+"==a[3]?4:3,e=k.parseNumLiteral(a[c]);switch(a[0]){case"INC":return[b,j("0064"),e];case"DEC":return[b,j("0065"),e]}}():(console.warn("**** ERROR: CANNOT ASSEMBLE:"+a.join(" / ")),[])},k.parseNumLiteral=function(a){var b=k._parseNumLiteral(a);if("number"==typeof b){if(b<-128||256<=b)throw"operand "+a+" out of range";return 255&b}return function(b){return k.dereferLowByte(a,b)}},k.parseNumLiteralPair=function(a){var b=k._parseNumLiteral(a);if("number"==typeof b){if(b<-32768||65535<b)throw"operand "+a+" out of range";return[255&b,b>>8&255]}return[function(b){return k.dereferLowByte(a,b)},function(b){return k.dereferHighByte(a,b)}]},k.parseRelAddr=function(a,b){var c=k._parseNumLiteral(a);if("number"==typeof c){var d=a.charAt(0);if("+"!=d&&"-"!=d&&(c=c-b+2),(c-=2)<-128||256<=c)throw"operand "+a+" out of range";return 255&c}return function(c){return k.derefer(a,c)-b&255}},k.dereferLowByte=function(a,b){return 255&k.derefer(a,b)},k.dereferHighByte=function(a,b){return k.derefer(a,b)>>8&255},k.derefer=function(a,b){return a in b?b[a]:0},k._parseNumLiteral=function(a){if(/^[\+\-]?[0-9]+$/.test(a)||/^[\+\-]?[0-9A-F]+H$/i.test(a)){var b,c=0,d=/^\-/.test(a)?-1:1;return/[hH]$/.test(a)?(b=a.match(/^[\+\-]?([0-9a-fA-F]+)[hH]$/),c=parseInt(b[1],16)):/^[\+\-]?0/.test(a)?(b=a.match(/^[\+\-]?([0-7]+)$/),c=parseInt(b[1],8)):(b=a.match(/^[\+\-]?([0-9]+)$/),c=parseInt(b[1],10)),d*c}return a},b.exports=k},{"../lib/oct":22}],17:[function(a,b,c){!function(c){var d=null;if("context"in c)d=c.context;else{d={webMain:!1,webWorker:!1,nodeJs:!1,ie11:!1,requirable:!1};try{a&&(d.requirable=!0)}catch(a){}}var e=c.constructor.name;e?"window"in c?d.webMain=!0:"DedicatedWorkerGlobalScope"==e||"WorkerGlobalScope"==e?d.webWorker=!0:d.nodeJs=!0:(d.ie11=!0,"[object Window]"==c?d.webMain=!0:"[object WorkerGlobalScope]"==c&&(d.webWorker=!0)),d.nodeJs?b.exports=d:d.webWorker&&(c.module={exports:null},c.require=function(){}),d.exportModule=function(a,b){return d.requirable||(a in c&&b!==c[a]&&(console.log("context.exports: "+a+" is already exported."),console.log("predecessor: "+JSON.stringify(c[a])),console.log("override with: "+JSON.stringify(b))),c[a]=b),b},c.getModule=function(a){
if(!("context"in c)||d.nodeJs||d.requirable)return!1;if(!(a in c&&c[a]))throw new Error(["module ",a,"not found"].join(" "));return c[a]},c.context=d}(Function("return this;")())},{}],18:[function(a,b,c){!function(){Number.prototype.round=function(a){void 0==a&&(a=0);var b=Math.pow(10,-a);return Math.round(this*b)/b},Number.prototype.bin=function(a){for(var b="",c=this;c>0;){var d=c%2,e="";e=d?"1":"0",b=e+b,c=Math.floor(c/2)}return a&&(b=new Array(a+1).join("0")+b,b=b.substring(b.length-a)),b},Number.prototype.hex=function(a){var b=this.toString(16);return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.HEX=function(a){var b=this.toString(16).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)},Number.prototype.BIN=function(a){var b=this.toString(2).toUpperCase();return b.length>a?b:(new Array(a).join("0")+b).slice(-a)}}()},{}],19:[function(a,b,c){!function(){"use strict";function a(a){this.initialize(),this.setFrequency(a),this._handlers={change:[]}}a.SPEED_FACTOR=1.5,a.CPU_CLOCK=4e6,a.MNEMONIC_AVE_CYCLE=6,a.prototype.initialize=function(){this._out=!1,this._counter=0},a.prototype.setFrequency=function(b){this._counter_max=a.CPU_CLOCK/a.MNEMONIC_AVE_CYCLE/b},a.prototype.readOutput=function(){return this._out},a.prototype.count=function(){return this._counter+=a.SPEED_FACTOR,this._counter>=this._counter_max/2&&(this._out=!this._out,this._counter=0,this.fireEvent("change"),!0)},a.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},a.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=a}()},{}],20:[function(a,b,c){!function(){"use strict";function c(a){this._reset=!1,this.initialize(),this.setFrequency(a)}var d=a("../lib/flip-flop-counter");c.prototype=new d,c.prototype.count=function(){return!!this._reset&&d.prototype.count.call(this)},c.prototype.loadReset=function(a){a?this._reset||(this._reset=!0):this._reset&&(this._reset=!1,this.initialize())},b.exports=c}()},{"../lib/flip-flop-counter":19}],21:[function(a,b,c){!function(){"use strict";function a(){this.counter=[new c("#0"),new c("#1"),new c("#2")]}function c(a){this._name=a,this.RL=3,this.MODE=3,this.BCD=0,this.value=65535,this.counter=65535,this._written=!0,this._read=!0,this.out=!0,this.gate=!1,this._handlers={timeup:[]}}a.prototype.setCtrlWord=function(a){var b=(192&a)>>6;this.counter[b].setCtrlWord(63&a)},c.prototype.setCtrlWord=function(a){this.RL=(48&a)>>4,this.MODE=(14&a)>>1,this.BCD=0!=(1&a),this.value=0,this.counter=0,this._written=!0,this._read=!0,this.out=!1,this.gate=!1},c.prototype.load=function(a){this.counter=0;var b=!1;switch(this.RL){case 0:break;case 1:this.value=255&a,this.counter=this.value,this.out=!1,b=!0;break;case 2:this.value=(255&a)<<8,this.counter=this.value,b=!0;break;case 3:this._written?(this._written=!1,this.value=65280&this.value|255&a,this.counter=this.value,b=!1):(this._written=!0,this.value=255&this.value|(255&a)<<8,this.counter=this.value,this.out=!1,b=!0)}if(b)switch(this.MODE){case 0:this.out=!1;break;case 1:break;case 2:case 6:this.out=!0;break;case 3:case 7:this.out=!0}return b},c.prototype.read=function(){switch(this.RL){case 0:break;case 1:return 255&this.counter;case 2:return this.counter>>8&255;case 3:return this._read?(this._read=!1,255&this.counter):(this._read=!0,this.counter>>8&255)}return null},c.prototype.setGate=function(a){this.gate=a},c.prototype.count=function(a){var b=this.out;switch(this.MODE){case 0:this.counter>0?(this.counter-=a,this.counter<=0&&(this.counter=0,this.out||(this.out=!0))):this.counter=this.value;break;case 1:break;case 2:case 6:this.counter-=a,this.out&&this.counter<=0?(this.out=!1,this.counter=this.value):this.out||(this.out=!0);break;case 3:case 7:this.counter-=a,this.counter>=this.value/2?this.out=!0:this.counter>0?this.out=!1:(this.out=!0,this.counter=this.value)}!b&&this.out&&this.fireEvent("timeup")},c.prototype.addEventListener=function(a,b){this._handlers[a].push(b)},c.prototype.fireEvent=function(a){this._handlers[a].forEach(function(a){a()})},b.exports=a}()},{}],22:[function(a,b,c){"use strict";function d(a){return parseInt(a,8)}b.exports=d},{}],23:[function(a,b,c){!function(){"use strict";function a(){this._numOfTimer=1,this._delay=1,this._iteration=1,this._func=null,this._timerIds=null,this._calcFreq=null,this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime()}a.prototype.setNumOfTimer=function(a){this.updateTimer(function(){this._numOfTimer=a})},a.prototype.setTimerInterval=function(a){this.updateTimer(function(){this._delay=a})},a.prototype.setProcCount=function(a){this.updateTimer(function(){this._iteration=a})},a.prototype.setProc=function(a){this.updateTimer(function(){this._func=a})},a.prototype.isRunning=function(){return null!=this._timerIds},a.prototype.start=function(){if(!this.isRunning()){this._timerIds=[],this._tickStart=(new Date).getTime(),this._count=0,this._tickEnd=(new Date).getTime();for(var a=0;a<this._numOfTimer;a++)this._timerIds.push(setInterval(function(){if(null!=this._timerIds)for(var a=0;a<this._iteration;a++)null!=this._timerIds&&(this._count++,this._func())}.bind(this),this._delay))}},a.prototype.stop=function(){this.isRunning()&&(this._tickEnd=(new Date).getTime(),this._timerIds.forEach(function(a){clearInterval(a)}),this._timerIds=null)},a.prototype.getElapse=function(){return this._tickEnd-this._tickStart},a.prototype.getCalculatedFreq=function(){return this._calcFreq},a.prototype.getActualFreq=function(){var a=this.getElapse();return 0==a?null:this._count/(a/1e3)},a.prototype.getStat=function(){var a=this.getCalculatedFreq(),b=this.getElapse(),c=this.getActualFreq();return{parameter:{numOfTimer:this._numOfTimer,interval:this._delay,iteration:this._iteration,calcFreq:a},result:{elapse:b,actualFreq:c,actParCalc:c/a}}},a.prototype.updateTimer=function(a){var b=this.isRunning();b&&this.stop(),a.call(this),0!=this._delay?this._calcFreq=this._iteration*(1e3/this._delay)*this._numOfTimer:this._calcFreq=null,b&&this.start()},a.setInterval=function(b,c,d,e){if(d=d||0,e=e||0,0==d&&0==e){for(;c*++d<20;);for(c=Math.round(c*d);d/++e>500;);d=Math.round(d/e)}var f=new a;return f.setProc(b),f.setNumOfTimer(d),f.setTimerInterval(c),f.setProcCount(e),f.start(),f},a.clearInterval=function(a){a.stop()};try{b.exports={setInterval:a.setInterval,clearInterval:a.clearInterval}}catch(b){!function(b){b.FractionalTimer=a}(Function("return this;")())}}()},{}],24:[function(a,b,c){!function(a){"use strict";function c(){}var d=a.constructor.name;d||("[object Window]"==a?d="Window":"[object WorkerGlobalScope]"==a&&(d="DedicatedWorkerGlobalScope")),c.context=d,"Window"==c.context?(c.create=function(a,b,d,e){var f=new c;return f.create(a,b,d,e),f},c.prototype.create=function(a,b,c,d){this.worker=new Worker(a),this.createWrappers(Object.keys(b.prototype)),this.callbacks={},this.queryId=0,this.onNotify={},this.worker.onmessage=function(a){return function(b){switch(b.data.type){case"response":try{a.callbacks[b.data.queryId].apply(c,b.data.param)}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}delete a.callbacks[b.data.queryId];break;case"notify":try{a.onNotify[b.data.name](b.data.param)}catch(a){console.warn("*** exception: ",a,"in notify",b.data.name,"params:",JSON.stringify(b.data.param))}}}}(this),d=d||{},Object.keys(d).forEach(function(a){this.onNotify[a]=function(){d[a].apply(c,arguments)}},this)},c.prototype.createWrappers=function(a){a.forEach(function(a){c.prototype[a]=this.wrapper(a)},this)},c.prototype.wrapper=function(a){return function(){var b=function(){},c=[];arguments.length>0&&(b=Array.prototype.slice.call(arguments,-1)[0]||function(){},c=Array.prototype.slice.call(arguments,0,arguments.length-1));var d=this.queryId++;this.callbacks[d]=b,this.worker.postMessage({method:a,param:c,queryId:d})}}):"DedicatedWorkerGlobalScope"!=c.context&&"WorkerGlobalScope"!=c.context||(c.create=function(a){var b=new c;return"function"==typeof a&&(a=new a),b.create(a),b},c.prototype.create=function(b){this.worker=a,this.client=b,this.client._transworker=this,function(a){Object.keys(a.constructor.prototype).forEach(function(b){a.client[b]=function(){a.constructor.prototype[b].apply(a,arguments)}}),a.worker.onmessage=function(b){try{a.worker.postMessage({type:"response",queryId:b.data.queryId,method:b.data.method,param:[a.client[b.data.method].apply(a.client,b.data.param)]})}catch(a){console.warn("*** exception: ",a,"in method",b.data.method,"params:",JSON.stringify(b.data.param))}}}(this)},c.prototype.postNotify=function(a,b){this.worker.postMessage({type:"notify",name:a,param:b})});try{b.exports=c}catch(b){a.TransWorker=c}}(Function("return this;")())},{}]},{},[8]);