<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>lib/jquery.vscrlist.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="asmeditor.html">asmeditor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmeditor.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmeditor.html#refresh">refresh</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmeditor.html#text">text</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="asmlist.html">asmlist</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#clearCurrentAddr">clearCurrentAddr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#indexOfAddr">indexOfAddr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#lastLineIndexOfAddr">lastLineIndexOfAddr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#setCurrentAddr">setCurrentAddr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#text">text</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="asmlist.html#writeList">writeList</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AsmRow.html">AsmRow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AsmRow.html#.selectorByAddress">selectorByAddress</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="dumplist.html">dumplist</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="dumplist.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="dumplist.html#redraw">redraw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="dumplist.html#topAddr">topAddr</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="IMem.html">IMem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#peek">peek</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#peekByte">peekByte</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#peekPair">peekPair</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#poke">poke</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="IMem.html#pokeByte">pokeByte</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MemoryBank.html">MemoryBank</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBank.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBank.html#peekByte">peekByte</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBank.html#pokeByte">pokeByte</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBank.html#setMemoryBlock">setMemoryBlock</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MemoryBlock.html">MemoryBlock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBlock.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBlock.html#peekByte">peekByte</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MemoryBlock.html#pokeByte">pokeByte</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="mz700cg.html">mz700cg</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="mz700cg.html#.tableIndex">tableIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="mz700cg.html#createFontTable">createFontTable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="mz700cg.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="mz700cg.html#initFont">initFont</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="mz700cg.html#setPattern">setPattern</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="mz700cg.FontImage.html">FontImage</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MZ_MMIO.html">MZ_MMIO</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MMIO.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MMIO.html#onRead">onRead</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MMIO.html#onWrite">onWrite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MMIO.html#setMZ700Js">setMZ700Js</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MZ_MmioPeripheral.html">MZ_MmioPeripheral</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MmioPeripheral.html#readMMIO">readMMIO</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZ_MmioPeripheral.html#writeMMIO">writeMMIO</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MZBeep.html">MZBeep</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZBeep.html#resume">resume</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZBeep.html#resumed">resumed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZBeep.html#setGain">setGain</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZBeep.html#startSound">startSound</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MZBeep.html#stopSound">stopSound</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="tabview.html">tabview</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#.tabId">tabId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#caption">caption</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#currentPage">currentPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#data">data</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#index">index</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#page">page</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="tabview.html#show">show</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ToggleButton.html">ToggleButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ToggleButton.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ToggleButton.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ToggleButton.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ToggleButton.html#setOff">setOff</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ToggleButton.html#setOn">setOn</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="vscrlist.html">vscrlist</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#_listTopIndex">_listTopIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#countKeyRepeat">countKeyRepeat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#createList">createList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#empty">empty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#flashBufferedKeys">flashBufferedKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#isEmpty">isEmpty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#items">items</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#listTopIndex">listTopIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#reportKbEvent">reportKbEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#scroll">scroll</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#scrollByKeyCode">scrollByKeyCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#setupKeyEventListener">setupKeyEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#syncScrollTop">syncScrollTop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="vscrlist.html#visibleRows">visibleRows</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Z80.html">Z80</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#clearBreakPoints">clearBreakPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#decrementAt">decrementAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#disassemble">disassemble</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#exec">exec</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#fetch">fetch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#fetchPair">fetchPair</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#getBreakPoints">getBreakPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#incrementAt">incrementAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#interrupt">interrupt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#popPair">popPair</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#pushPair">pushPair</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#readIoPort">readIoPort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#removeBreak">removeBreak</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#setBreak">setBreak</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#writeIoPort">writeIoPort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#.dasm">dasm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80.html#.processAddressReference">processAddressReference</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Z80_assemble.html">Z80_assemble</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.assemble">assemble</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.createMachineCode">createMachineCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.hasExplicitAddress">hasExplicitAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.hashMapArray">hashMapArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.measureCodeSize">measureCodeSize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#.resolveAddress">resolveAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#closeAssembling">closeAssembling</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#getMap">getMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#isAddressExplicit">isAddressExplicit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80_assemble.html#parseAddress">parseAddress</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Z80AddressSpecifier.html">Z80AddressSpecifier</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80AddressSpecifier.html#create">create</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Z80LineAssembler.html">Z80LineAssembler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#.convertToAsciiCode">convertToAsciiCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#.getBytecodesFromOperandOfDEFB">getBytecodesFromOperandOfDEFB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#.joinOperand">joinOperand</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#getLastAddress">getLastAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#getNextAddress">getNextAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#resolveAddress">resolveAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#setAddress">setAddress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#setComment">setComment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#setLabel">setLabel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Z80LineAssembler.html#setRefAddrTo">setRefAddrTo</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#doLater">doLater</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#easing">easing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEventCode">getEventCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#match_token">match_token</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseRequest">parseRequest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#requestJsonp">requestJsonp</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">lib/jquery.vscrlist.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
const doLater = require("../lib/do-later.js");
const jquery_plugin_class = require("../lib/jquery_plugin_class");
jquery_plugin_class("vscrlist");

/**
 * jquery plug-in.
 * Row oriented list view widget.
 *
 * @constructor
 * @param {Element} element The DOM element
 */
function vscrlist(element) {
    this._opt = {
        rowHeight: 13,
        rowCount: 20,
        headerRow: null,
        createRow: index => {
            return $("&lt;div/>").html(index).get(0);
        },
        scrollRows: 1,              // lines scrolled by arrowUp/Dn
        scrollPageRows: null,       // lines scrolled by pgUp/pgDn
        keyRepeatBufferCount: 1,    // Key-repeat buffering count
    };

    this._element = element;
    this._items = [];
    this._visible_row_count = null;
    this._top_row_index = null;
    this._header_container = null;
    this._container = null;
    this._keyRepeatCount = 0;

}

window.vscrlist = vscrlist;
module.exports = vscrlist;

/**
 * Create vscrlist.
 * @param {object} opt
 * The parameters
 * @returns {undefined}
 */
vscrlist.prototype.create = function(opt) {
    opt = opt || {};
    Object.keys(this._opt).forEach( key => {
        if(key in opt) {
            this._opt[key] = opt[key];
        }
    });

    // The scroll paging size default is same as the row count.
    if(this._opt.scrollPageRows == null) {
        this._opt.scrollPageRows = this._opt.rowCount;
    }

    this._visible_row_count = this._opt.rowCount;

    // Data row's Container
    this._row_container = $("&lt;div/>")
        .addClass("scrollee")
        .css("position", "relative");

    // V-Scrollee
    this._scroll = $("&lt;div/>")
        .addClass("scroll")
        .append(this._row_container);

    // Header row
    if(!this._opt.headerRow) {
        this._header_container = null;
        this._scroller = $(this._element);
    } else {
        this._header_container = $("&lt;div/>")
            .css("width", "100%").css("overflow", "hidden")
            .append(this._opt.headerRow.css("position", "relative"));
        this._scroller = $("&lt;div/>");
        this._container = $(this._element)
            .append(this._header_container)
            .append(this._scroller);
    }

    this._scroller.addClass("vscrlist")
        .addClass("scroller")
        .css("height", "calc(100% - 22px)")
        .css("overflow", "auto")
        .append(this._scroll);

    // Handle scroll event, and redraw assemble list.
    let scrollee = this._row_container.get(0);
    let h_scrollee = null;
    if(this._opt.headerRow) {
        h_scrollee = this._opt.headerRow.get(0);
    }
    let scroller = this._scroller.get(0);
    scroller.addEventListener("scroll", event => {
        event.stopPropagation();
        scrollee.style.top = scroller.scrollTop + "px";
        if(h_scrollee) {
            h_scrollee.style.left = (-scroller.scrollLeft) + "px";
        }
        doLater(() => {
            let index = Math.round(scroller.scrollTop / this._opt.rowHeight);
            if(this._listTopIndex(index)) {
                $(this._element).trigger("scroll");
                this.createList();
            }
        }, 10);
    }, false);

    this.setupKeyEventListener();
};

// The key code converted when the control key pressed.
const eventCodePromotedByCtrlKey = {
    /* [Ctrl] + */ "ArrowUp":   /* is to */ "Home",
    /* [Ctrl] + */ "ArrowDown": /* is to */ "End",
};

// The key code converted when the shift key pressed.
const eventCodePromotedByShiftKey = {
    /* [Shift] + */ "ArrowUp":   /* is to */ "PageUp",
    /* [Shift] + */ "ArrowDown": /* is to */ "PageDown",
    /* [Shift] + */ "PageUp":    /* is to */ "Home",
    /* [Shift] + */ "PageDown":  /* is to */ "End",
};

/**
 * Retrieve key code from the key event.
 *
 * @param {KeyboardEvent} event
 * The key event.
 *
 * @returns {string} key code that might be promoted by the event's state.
 */
function getEventCode() {
    let code = event.code;
    if(event.ctrlKey &amp;&amp; code in eventCodePromotedByCtrlKey) {
        code = eventCodePromotedByCtrlKey[code];
    } else if(event.shiftKey &amp;&amp; code in eventCodePromotedByShiftKey) {
        code = eventCodePromotedByShiftKey[code];
    }
    return code;
}

/**
 * Invoke the scroll handler specified by the event and may close the
 * key-repeat.
 *
 * @param {KeyboardEvent} event
 * The key event.
 *
 * @returns {undefined}
 */
vscrlist.prototype.flashBufferedKeys = function() {
    this.scrollByKeyCode(getEventCode(event), this._keyRepeatCount);
    this._keyRepeatCount = 0;
};

/**
 * Count up the event until it will over the threshold,
 * and then, scroll the list and clear the counter.
 *
 * @param {KeyboardEvent} event
 * The key event.
 *
 * @returns {undefined}
 */
vscrlist.prototype.countKeyRepeat = function() {
    this._keyRepeatCount++;
    if(this._keyRepeatCount >= this._opt.keyRepeatBufferCount) {
        this.flashBufferedKeys(event);
    }
};

/**
 * Setup key event listener to scroll by the keys of
 * arrow, page up, page down, home and end.
 *
 * @returns {undefined}
 */
vscrlist.prototype.setupKeyEventListener = function() {

    // Setup to accept keys only the mouse is hovering this element.
    let scroll = this._scroll.get(0);
    scroll.addEventListener("mouseenter", event => {
        event.stopPropagation();
        if(!this._element.classList.contains("listen-key")) {
            document.activeElement.blur();
            this._element.classList.add("listen-key");
        }
    });
    scroll.addEventListener("mouseleave", event => {
        event.stopPropagation();
        if(this._element.classList.contains("listen-key")) {
            if(this._keyRepeatCount > 0) {
                this.flashBufferedKeys(event);
            }
        }
        this._element.classList.remove("listen-key");
    });

    // Handle key down event.
    document.addEventListener("keydown", event => {
        if(this._element.classList.contains("listen-key")) {
            event.stopPropagation();
            if(event.repeat) {
                // The event may buffered until the UI updated.
                this.countKeyRepeat(event);
            } else {
                // Update actually.
                this.scrollByKeyCode(getEventCode(event), 1);
                this._keyRepeatCount = 0;
            }
        }
    });

    // Handle key up event to clear the key-repeat.
    document.addEventListener("keyup", event => {
        if(this._element.classList.contains("listen-key")) {
            event.stopPropagation();
            if(this._keyRepeatCount > 0) {
                this.flashBufferedKeys(event);
            }
        }
    });
};

/**
 * Scroll by key code.
 *
 * @param {string} keycode
 * The key code.
 *
 * @param {number} n
 * relative scroll rows
 *
 * @returns {undefined}
 */
vscrlist.prototype.scrollByKeyCode = function(keycode, n) {
    switch(keycode) {
        case "ArrowUp":
            this.scroll(n * -this._opt.scrollRows);
            break;
        case "ArrowDown":
            this.scroll(n * this._opt.scrollRows);
            break;
        case "PageUp":
            this.scroll(n * -this._opt.scrollPageRows);
            break;
        case "PageDown":
            this.scroll(n * this._opt.scrollPageRows);
            break;
        case "Home":
            this.listTopIndex(0);
            break;
        case "End":
            this.listTopIndex(this._items.length);
            break;
        default:
            break;
    }
};

/**
 * Scroll relative.
 *
 * @param {number} relativeRows
 * The relative rows to scroll.
 *
 * @returns {undefined}
 */
vscrlist.prototype.scroll = function(relativeRows) {
    this.listTopIndex(this._top_row_index + relativeRows);
};

/**
 * Log the key event.
 *
 * @param {KeyboardEvent} event
 * The event to be outputted to the console.
 *
 * @returns {undefined}
 */
vscrlist.prototype.reportKbEvent = function(event) {
    let a = [event.type];
    if(event.ctrlKey) { a.push("[CTRL]+"); }
    if(event.shiftKey) { a.push("[SHIFT]+"); }
    if(event.altKey) { a.push("[ALT]+"); }
    if(event.metaKey) { a.push("[META]+"); }
    if(event.key !== "Unidentified") {
        a.push("[", event.key, "]");
        a.push("(", event.code, ")");
    } else {
        a.push("(Unidentified)");
    }
    if(event.repeat) {
        a.push("+");
    }
    console.log(a.join(""));
};


/**
 * Set or get the list items.
 * @param {Array|undefined} items
 * An array of list items to set.
 * @returns {undefined|Array}
 * Returns list items if the parameter item is null.
 */
vscrlist.prototype.items = function(items) {
    if(items == null) {
        return this._items;
    }
    items = items || [];
    this._items = items;
    this._scroll.css("height", (items.length * this._opt.rowHeight) + "px");
    this.createList();
    this.syncScrollTop();
};

/**
 * Check the rows are not rendered or else.
 * @returns {boolean} true if rows are not rendered, otherwise false.
 */
vscrlist.prototype.isEmpty = function() {
    return this._row_container.children().length == 0;
};

/**
 * Remove all visible rows.
 * @returns {undefined}
 */
vscrlist.prototype.empty = function() {
    return this._row_container.empty();
};

/**
 * Select visible rows.
 * @param {string|undefined} selector
 * jQuery selector. To get all rows, do not specify.
 * @returns {jQueryObject} selected rows.
 */
vscrlist.prototype.visibleRows = function(selector) {
    return this._row_container.children(selector);
};

/**
 * Set or get list top index.
 * @param {number|undefined} index
 * Top row index.
 * @returns {undefined|number}
 * returns top row index, if the parameter is not provided.
 */
vscrlist.prototype.listTopIndex = function(index) {
    if(index == null) {
        return this._top_row_index;
    }
    if(this._listTopIndex(index)) {
        this.createList();
        this.syncScrollTop();
    }
};

/**
 * Set the top row index.
 *
 * @param {number} index
 * The new index.
 *
 * @returns {boolean} status whether the index was updated.
 */
vscrlist.prototype._listTopIndex = function(index) {
    if(index &lt; 0) {
        index = 0;
    } else if(index > this._items.length - this._visible_row_count) {
        index  = this._items.length - this._visible_row_count;
    }
    if(this._top_row_index == index) {
        return false;
    }
    this._top_row_index = index;
    return true;
};

/**
 * Create assemble list.
 * @returns {undefined}
 */
vscrlist.prototype.createList = function() {
    this._row_container.empty();

    let topIndex = this._top_row_index || 0;
    for(let i = 0; i &lt; this._visible_row_count; i++) {
        let index = topIndex + i;
        let row = this._opt.createRow(index);
        if(row) {
            this._row_container.append($(row));
        }
    }
};

/**
 * Synchronize scroll top of the list.
 * @returns {undefined}
 */
vscrlist.prototype.syncScrollTop = function() {
    let scrollee = this._row_container.get(0);
    let scroller = this._scroller.get(0);
    let scrollTop = this._top_row_index * this._opt.rowHeight;
    scroller.scrollTop = scrollTop;
    scrollee.style.top = scrollTop + "px";
};

</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Mar 03 2019 13:43:30 GMT+0900 (GMT+09:00) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
